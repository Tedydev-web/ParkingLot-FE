{"ast":null,"code":"import _Avatar from \"antd/lib/avatar\";\nimport _message from \"antd/lib/message\";\nvar __jsx = React.createElement;\nfunction ownKeys(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }\nfunction _objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys(Object(t), !0).forEach(function (r) { _defineProperty(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }\nfunction _defineProperty(e, r, t) { return (r = _toPropertyKey(r)) in e ? Object.defineProperty(e, r, { value: t, enumerable: !0, configurable: !0, writable: !0 }) : e[r] = t, e; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == typeof i ? i : i + \"\"; }\nfunction _toPrimitive(t, r) { if (\"object\" != typeof t || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != typeof i) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\nimport React, { Component, useEffect } from 'react';\nimport { STYLE_URL } from \"../consts\";\nimport Marker from \"./Marker\";\nimport { connect } from 'react-redux';\nimport BottomInfoLocation from \"./BottomInfoLocation\";\nimport MenuRightClick from \"./MenuRightCLick\";\nimport { getDetailLatLngService } from \"../redux/sagas/placeSaga\";\nimport equal from 'fast-deep-equal/es6/react';\nimport { setMapViewportAction, getDetailByLatLngAction, setCenterLatLngAction, setMyLocationAction, getDetailByIdAction } from \"../redux/actions/place\";\nimport { searchAroundAction, clearSearchAroundAction, selectAroundPlaceAction } from \"../redux/actions/search\";\nimport { selectResultAction, navigationFromAction, navigationToAction, clearResultAction, navigationAction } from \"../redux/actions/navigation\";\nimport MarkerNavigation from \"./MarkerNavigation\";\nimport { setRedMarkerAction, setCollapsedInfoBoxAction, setPopupRightClick, setBoxVisibleAction } from \"../redux/actions/boxVisble\";\nimport normal_map_img from \"../static/images/normal_map.png\";\nimport satellite_img from \"../static/images/satellite.jpeg\";\nimport ReactDOMServer from 'react-dom/server';\nimport Axios from 'axios';\nimport Div100vh from 'react-div-100vh';\nimport Request from \"../utils/request\";\nimport { Mile_Travel } from \"../consts\";\nimport { isMobile } from 'react-device-detect';\nimport images from \"../utils/images\";\nimport { useDispatch, useSelector } from 'react-redux';\nimport { getParkingLotsRequest } from \"../redux/actions/parkingLot\";\nclass Map extends Component {\n  constructor(props) {\n    super(props);\n    _defineProperty(this, \"_onViewportChange\", viewport => {\n      this.props.dispatch(setMapViewportAction(viewport));\n    });\n    _defineProperty(this, \"_onMouseClick\", e => {\n      this.props.dispatch(setPopupRightClick(false));\n      if (this.props.boxVisible !== 'iframe') {\n        this.props.dispatch(setRedMarkerAction(false));\n      }\n      // if (this.props.boxVisible === \"info\") this.props.dispatch(setBoxVisibleAction('search'))\n      // this.markerWhatIs ? this.markerWhatIs.remove() : null;\n      this.props.dispatch(selectAroundPlaceAction(null));\n      this.removeMarkerWhatIs();\n      this.setState({\n        bottomInfoVisible: false\n      });\n    });\n    _defineProperty(this, \"_onRightClick\", e => {\n      const position = {\n        lat: e.lngLat.lat,\n        lng: e.lngLat.lng\n      };\n      if (this.props.boxVisible !== 'iframe') {\n        this.props.dispatch(setRedMarkerAction(true, position));\n        this.props.dispatch(setPopupRightClick(true, position, 'normal'));\n      }\n    });\n    _defineProperty(this, \"_onClickMenu\", evt => {\n      const parent = evt.target.parentElement;\n      if (evt.target.className && evt.target.className.toString().includes('what-is-this')) {\n        this.handleWhatIs();\n      } else if (evt.target.className && evt.target.className.toString().includes('from-here')) {\n        this.handleFromHere();\n      } else if (evt.target.className && evt.target.className.toString().includes('to-here')) {\n        this.handleToHere();\n      } else if (evt.target.className && evt.target.className.toString().includes('delete-location')) {\n        this.handleDeleteLocation();\n      } else if (evt.target.className && evt.target.className.toString().includes('search-around')) {\n        this.handleSearchAround();\n      } else if (evt.target.className && evt.target.className.toString().includes('to-around-place')) {\n        this.handleToAroundPlace();\n      } else if (evt.target.className && evt.target.className.toString().includes('what-is-navigation')) {\n        this.handleWhatIs(false);\n      }\n      if (parent !== null && parent !== void 0 && parent.className && parent !== null && parent !== void 0 && parent.className.toString().includes('menu-right-click')) {\n        if (evt.target.className && !evt.target.className.toString().includes('what-is-this')) {\n          this.props.dispatch(clearSearchAroundAction());\n        }\n        this.props.dispatch(setPopupRightClick(false));\n        this.removeMarkerWhatIs();\n      }\n    });\n    _defineProperty(this, \"changeVisibleBottomInfo\", visible => {\n      this.setState({\n        bottomInfoVisible: visible\n      });\n    });\n    _defineProperty(this, \"_getInforPlace\", async (lat = (_this$props$position_ => (_this$props$position_ = this.props.position_popup) === null || _this$props$position_ === void 0 ? void 0 : _this$props$position_.lat)(), lng = (_this$props$position_2 => (_this$props$position_2 = this.props.position_popup) === null || _this$props$position_2 === void 0 ? void 0 : _this$props$position_2.lng)()) => {\n      const latLng = {\n        latitude: lat,\n        longitude: lng\n      };\n      try {\n        const response = await getDetailLatLngService(latLng);\n        if (response.data.results.length > 0) {\n          const place_response = response.data.results[0];\n          return _objectSpread(_objectSpread({}, place_response), {}, {\n            name: place_response.address_components[0].long_name,\n            formatted_address: this.getAddressGeocode(place_response)\n          });\n        } else {\n          _message.error('Không tìm thấy địa điểm !!');\n          return null;\n        }\n      } catch (error) {\n        throw error;\n      }\n    });\n    _defineProperty(this, \"selectPlace\", async (lat = (_this$props$positionM => (_this$props$positionM = this.props.positionMarkerSelect) === null || _this$props$positionM === void 0 ? void 0 : _this$props$positionM.lat)(), lng = (_this$props$positionM2 => (_this$props$positionM2 = this.props.positionMarkerSelect) === null || _this$props$positionM2 === void 0 ? void 0 : _this$props$positionM2.lng)(), redMarkerVisible = true) => {\n      const place = await this._getInforPlace(lat, lng);\n      if (place) {\n        const viewport = {\n          longitude: lng,\n          latitude: lat,\n          zoom: 15\n        };\n        this.props.dispatch(setMapViewportAction(viewport));\n        this.setState({\n          bottomInfoVisible: true,\n          placeMouseClick: place\n        });\n        if (redMarkerVisible) {\n          if (this.markerWhatIs) {\n            this.markerWhatIs.setLngLat({\n              lat,\n              lng\n            }).addTo(this.map);\n          } else {\n            const el = document.createElement('div');\n            el.innerHTML = ReactDOMServer.renderToStaticMarkup(__jsx(Marker, {\n              size: 22\n            }));\n            this.markerWhatIs = new maplibregl.Marker(el, {\n              anchor: 'bottom'\n            }).setLngLat({\n              lat,\n              lng\n            }).addTo(this.map);\n          }\n          this.markerWhatIs.getElement().addEventListener('contextmenu', e => {\n            e.stopPropagation();\n            e.preventDefault();\n            this.props.dispatch(setRedMarkerAction(false));\n            this.props.dispatch(setPopupRightClick(true, {\n              lat,\n              lng\n            }, 'popupCurrentPlace'));\n          });\n          this.props.dispatch(setRedMarkerAction(false));\n        }\n        // redMarkerVisible ? this.props.dispatch(setRedMarkerAction(true, { lat, lng })) : null;\n      } else {\n        _message.error('Không tìm thấy địa điểm !!');\n      }\n    });\n    _defineProperty(this, \"removeMarkerWhatIs\", () => {\n      this.markerWhatIs ? this.markerWhatIs.remove() : null;\n    });\n    _defineProperty(this, \"_getInforPlaceAround\", async id => {\n      try {\n        const response = await Axios.get(`https://napi.goong.io/v1/marker/get_marker_detail/${id}`);\n        if (response.data.data) {\n          return response.data.data;\n        } else {\n          _message.error('Không tìm thấy địa điểm !!');\n          return null;\n        }\n      } catch (error) {\n        _message.error('Không tìm thấy địa điểm !');\n        throw error;\n      }\n    });\n    _defineProperty(this, \"selectAroundPlace\", async id => {\n      const place = await this._getInforPlaceAround(id);\n      if (place) {\n        const viewport = {\n          longitude: Number(place.lng_lat[0]),\n          latitude: Number(place.lng_lat[1]),\n          zoom: 15\n        };\n        this.props.dispatch(setMapViewportAction(viewport));\n        this.setState({\n          bottomInfoVisible: true,\n          placeMouseClick: place\n        });\n        this.props.dispatch(setPopupRightClick(false));\n      } else {\n        _message.error('Không tìm thấy địa điểm !!');\n      }\n    });\n    _defineProperty(this, \"handleWhatIs\", (redMarkerVisible = true) => {\n      const {\n        position_popup,\n        isSmallScreen\n      } = this.props;\n      if (isSmallScreen) {\n        this.props.dispatch(getDetailByLatLngAction({\n          latitude: position_popup.lat,\n          longitude: position_popup.lng\n        }));\n        this.props.dispatch(setBoxVisibleAction('info'));\n        this.props.dispatch(clearSearchAroundAction());\n        this.props.dispatch(setPopupRightClick(false));\n        this.removeMarkerWhatIs();\n      } else {\n        this.selectPlace(position_popup.lat, position_popup.lng, redMarkerVisible);\n      }\n    });\n    _defineProperty(this, \"handleFromHere\", async (lat, lng) => {\n      let place;\n      if (!lat || !lng) place = await this._getInforPlace();else {\n        place = await this._getInforPlace(lat, lng);\n      }\n      if (place) {\n        const viewport = {\n          longitude: place.geometry.location.lng,\n          latitude: place.geometry.location.lat,\n          zoom: 15\n        };\n        !this.props.to_place && this.props.dispatch(setMapViewportAction(viewport));\n        this.props.dispatch(setBoxVisibleAction('navigation'));\n        this.props.dispatch(navigationFromAction(place, `${place.name} - ${place.formatted_address}`));\n        this.props.dispatch(setRedMarkerAction(false));\n        this.changeVisibleBottomInfo(false);\n      }\n    });\n    _defineProperty(this, \"handleToHere\", async (lat, lng) => {\n      let place;\n      if (!lat || !lng) place = await this._getInforPlace();else {\n        place = await this._getInforPlace(lat, lng);\n      }\n      if (place) {\n        this.props.dispatch(setBoxVisibleAction('navigation'));\n        const viewport = {\n          longitude: place.geometry.location.lng,\n          latitude: place.geometry.location.lat,\n          zoom: 15\n        };\n        const my_location = this.props.my_location;\n        if (my_location && (this.props.boxVisible === 'search' || this.props.boxVisible === 'info')) {\n          try {\n            const response = await Request.geocode(my_location);\n            if (response.data.results.length > 0) {\n              this.props.dispatch(navigationFromAction(_objectSpread(_objectSpread({}, response.data.results[0]), {}, {\n                name: response.data.results[0].address_components[0].long_name\n              }), 'Vị trí của bạn'));\n            }\n          } catch (error) {\n            throw error;\n          }\n        }\n        !this.props.from_place && this.props.dispatch(setMapViewportAction(viewport));\n        this.props.dispatch(navigationToAction(place, `${place.name} - ${place.formatted_address}`));\n        this.props.dispatch(setBoxVisibleAction('navigation'));\n        this.props.dispatch(setRedMarkerAction(false));\n        this.changeVisibleBottomInfo(false);\n      }\n    });\n    _defineProperty(this, \"handleDeleteLocation\", () => {\n      const {\n        type_popup\n      } = this.props;\n      if (type_popup === 'popupFromPlace') {\n        this.props.dispatch(navigationFromAction(null, ''));\n      } else if (type_popup === 'popupToPlace') {\n        this.props.dispatch(navigationToAction(null, ''));\n      }\n      this.props.dispatch(clearResultAction());\n    });\n    _defineProperty(this, \"handleSearchAround\", async () => {\n      const place = await this._getInforPlace();\n      if (place) {\n        const viewport = {\n          longitude: place.geometry.location.lng,\n          latitude: place.geometry.location.lat,\n          zoom: 15\n        };\n        const location = {\n          lat: place.geometry.location.lat,\n          lng: place.geometry.location.lng\n        };\n        this.props.dispatch(setBoxVisibleAction('search'));\n        this.props.dispatch(setMapViewportAction(viewport));\n        this.props.dispatch(searchAroundAction(location, this.props.viewport.zoom));\n        this.setState({\n          bottomInfoVisible: false\n        });\n      }\n    });\n    _defineProperty(this, \"_selectAroundPlace\", (type, place) => {\n      if (type !== 'center') {\n        this.props.dispatch(selectAroundPlaceAction(place));\n        this.selectAroundPlace(place === null || place === void 0 ? void 0 : place.id);\n      } else {\n        this.props.dispatch(selectAroundPlaceAction(place));\n        this.selectPlace(place.geometry.location.lat, place.geometry.location.lng, false);\n      }\n    });\n    _defineProperty(this, \"handleToAroundPlace\", async () => {\n      let place = null;\n      this.props.around_places.map(item => {\n        if (item.lng_lat[0] * 1 === this.popupRightClick.getLngLat().lng && item.lng_lat[1] * 1 === this.popupRightClick.getLngLat().lat) {\n          place = item;\n        }\n      });\n      if (place) {\n        try {\n          var _response$data;\n          this.props.dispatch(setPopupRightClick(false));\n          const place_center = this.props.around_place_center;\n          this.props.dispatch(navigationFromAction(place_center, `${place_center.name} - ${place_center.formatted_address}`));\n          const response = await Axios.get(`https://napi.goong.io/v1/marker/get_marker_detail/${place.id}`);\n          place = (_response$data = response.data) === null || _response$data === void 0 ? void 0 : _response$data.data;\n          place = _objectSpread(_objectSpread({}, place), {}, {\n            place_id: place._id,\n            geometry: {\n              location: {\n                lat: Number(place.lng_lat[1]),\n                lng: Number(place.lng_lat[0])\n              }\n            },\n            formatted_address: place.description.address\n          });\n          this.props.dispatch(navigationToAction(place, `${place.name} - ${place.formatted_address}`));\n          this.props.dispatch(setBoxVisibleAction('navigation'));\n        } catch (error) {\n          _message.error('Không tìm thấy địa điểm !');\n        }\n      } else {\n        _message.error('Không tìm thấy địa điểm !');\n      }\n    });\n    _defineProperty(this, \"removeMarkerPopup\", () => {\n      if (this.markerCurrentPlace) this.markerCurrentPlace.remove();\n      if (this.popupRightClick) this.popupRightClick.remove();\n      if (this.props.around_places) this.props.dispatch(clearSearchAroundAction());\n      if (this.redMarker) this.redMarker.remove();\n    });\n    _defineProperty(this, \"getAddressGeocode\", place => {\n      var _place$address_compon;\n      let result = [];\n      (_place$address_compon = place.address_components) === null || _place$address_compon === void 0 ? void 0 : _place$address_compon.slice(1).map(item => {\n        result.push(item.long_name);\n      });\n      return result.join(',');\n    });\n    _defineProperty(this, \"changeStyle\", () => {\n      const {\n        style\n      } = this.state;\n      if (style === STYLE_URL.SATELITE + \"YJTajS80fLlhJ4a2BG0gXqXXdZzdLG5V3iivOK9e\") {\n        this.setState({\n          style: STYLE_URL.NORMAL + \"YJTajS80fLlhJ4a2BG0gXqXXdZzdLG5V3iivOK9e\"\n        });\n        this.map.setStyle(STYLE_URL.NORMAL + \"YJTajS80fLlhJ4a2BG0gXqXXdZzdLG5V3iivOK9e\");\n      } else {\n        this.setState({\n          style: STYLE_URL.SATELITE + \"YJTajS80fLlhJ4a2BG0gXqXXdZzdLG5V3iivOK9e\"\n        });\n        this.map.setStyle(STYLE_URL.SATELITE + \"YJTajS80fLlhJ4a2BG0gXqXXdZzdLG5V3iivOK9e\");\n      }\n    });\n    _defineProperty(this, \"navigationByURLIframe\", async (from, to) => {\n      this.props.dispatch(setBoxVisibleAction('iframe'));\n      this.props.dispatch(setRedMarkerAction(false));\n      this.changeVisibleBottomInfo(false);\n      let fromplace;\n      if (!from.lat || !from.lng) fromplace = await this._getInforPlace();else {\n        fromplace = await this._getInforPlace(from.lat, from.lng);\n      }\n      await this.props.dispatch(navigationFromAction(fromplace, `${fromplace.name} - ${fromplace.formatted_address}`));\n      let toplace;\n      if (!to.lat || !to.lng) toplace = await this._getInforPlace();else {\n        toplace = await this._getInforPlace(to.lat, to.lng);\n      }\n      await this.props.dispatch(navigationToAction(toplace, `${toplace.name} - ${toplace.formatted_address}`));\n      this.props.dispatch(navigationAction(this.props.from_place, this.props.to_place, 'car'));\n    });\n    _defineProperty(this, \"navigationByURL\", async (from, to) => {\n      this.props.dispatch(setBoxVisibleAction('navigation'));\n      this.props.dispatch(setRedMarkerAction(false));\n      this.changeVisibleBottomInfo(false);\n      let fromplace;\n      if (!from.lat || !from.lng) fromplace = await this._getInforPlace();else {\n        fromplace = await this._getInforPlace(from.lat, from.lng);\n      }\n      await this.props.dispatch(navigationFromAction(fromplace, `${fromplace.name} - ${fromplace.formatted_address}`));\n      let toplace;\n      if (!to.lat || !to.lng) toplace = await this._getInforPlace();else {\n        toplace = await this._getInforPlace(to.lat, to.lng);\n      }\n      await this.props.dispatch(navigationToAction(toplace, `${toplace.name} - ${toplace.formatted_address}`));\n    });\n    _defineProperty(this, \"handleStorageChange\", event => {\n      console.log('oppaopaopa');\n      if (event.key === 'search_history') {\n        this.setState({\n          value: event.newValue\n        });\n      }\n    });\n    _defineProperty(this, \"renderParkingLots\", () => {\n      const {\n        parkingLots\n      } = this.props;\n      return parkingLots === null || parkingLots === void 0 ? void 0 : parkingLots.map(lot => __jsx(Marker, {\n        key: lot.id,\n        longitude: lot.longitude,\n        latitude: lot.latitude\n      }, __jsx(\"div\", {\n        className: \"marker parking-marker\"\n      }, __jsx(\"div\", {\n        className: \"marker-content\"\n      }, \"P\"), __jsx(\"div\", {\n        className: \"marker-info\"\n      }, __jsx(\"h3\", null, lot.name), __jsx(\"p\", null, lot.address), __jsx(\"p\", null, \"Available: \", lot.availableSpots, \"/\", lot.capacity)))));\n    });\n    this._mapRef = /*#__PURE__*/React.createRef();\n    this.map = null;\n    this.redMarker = null;\n    this.popupRightClick = null;\n    this.popup_navigation = [];\n    this.state = {\n      style: STYLE_URL.NORMAL + \"YJTajS80fLlhJ4a2BG0gXqXXdZzdLG5V3iivOK9e\",\n      styleNormal: STYLE_URL.NORMAL + \"YJTajS80fLlhJ4a2BG0gXqXXdZzdLG5V3iivOK9e\",\n      styleEarth: STYLE_URL.SATELITE + \"YJTajS80fLlhJ4a2BG0gXqXXdZzdLG5V3iivOK9e\",\n      bottomInfoVisible: false,\n      value: localStorage.getItem('search_history') || '',\n      parkingLots: []\n    };\n    this.list = [];\n    this.listRestaurant = [];\n    this.listHistories = [];\n    this.view = null;\n    this.navigationView = null;\n  }\n  componentDidUpdate(prevProps) {\n    if (this.props.isSmallScreen !== prevProps.isSmallScreen) {\n      if (!this.props.isSmallScreen && !this.navigation) {\n        this.navigation = new maplibregl.NavigationControl();\n        this.map.addControl(this.navigation);\n      } else if (this.props.isSmallScreen && this.navigation) {\n        this.map.removeControl(this.navigation);\n        this.navigation = null;\n      }\n    }\n    if (!equal(prevProps.positionMarkerSelect, this.props.positionMarkerSelect) && this.props.positionMarkerSelect) {\n      if (this.redMarker) {\n        this.redMarker = this.redMarker.setLngLat(this.props.positionMarkerSelect).addTo(this.map);\n      } else {\n        const el = document.createElement('div');\n        el.innerHTML = ReactDOMServer.renderToStaticMarkup(__jsx(Marker, {\n          size: 22\n        }));\n        // Marker chuột phải\n        this.redMarker = new maplibregl.Marker({\n          anchor: 'bottom',\n          element: el\n        }).setLngLat(this.props.positionMarkerSelect).addTo(this.map);\n        this.redMarker.getElement().addEventListener('contextmenu', e => {\n          e.stopPropagation();\n          e.preventDefault();\n          this.props.dispatch(setPopupRightClick(true, this.props.positionMarkerSelect, 'normal'));\n        });\n      }\n    }\n    if (prevProps.markerSelect !== this.props.markerSelect) {\n      if (!this.props.markerSelect) {\n        var _this$redMarker;\n        (_this$redMarker = this.redMarker) === null || _this$redMarker === void 0 ? void 0 : _this$redMarker.remove();\n      }\n    }\n    if (this.props.popup_visible && (!equal(prevProps.position_popup, this.props.position_popup) || this.props.type_popup !== prevProps.type_popup) && this.props.position_popup) {\n      this.popupRightClick = this.popupRightClick ? this.popupRightClick.setLngLat([this.props.position_popup.lng, this.props.position_popup.lat]).addTo(this.map).setHTML(ReactDOMServer.renderToStaticMarkup(__jsx(MenuRightClick, {\n        dispatch: this.props.dispatch,\n        position_popup: this.props.position_popup,\n        type_popup: this.props.type_popup\n      }))) : new maplibregl.Popup({\n        closeButton: false,\n        anchor: 'top',\n        closeOnClick: false,\n        offset: [0, 5]\n      }).setLngLat([this.props.position_popup.lng, this.props.position_popup.lat]).setHTML(ReactDOMServer.renderToStaticMarkup(__jsx(MenuRightClick, {\n        dispatch: this.props.dispatch,\n        position_popup: this.props.position_popup,\n        type_popup: this.props.type_popup\n      }))).addTo(this.map);\n    }\n    if (this.popupRightClick && !this.props.popup_visible) {\n      this.popupRightClick.remove();\n    }\n    if (!equal(prevProps.current_place, this.props.current_place) && this.props.current_place) {\n      const selectedPlace = this.props.current_place;\n      this.map.flyTo({\n        center: [selectedPlace.geometry.location.lng, selectedPlace.geometry.location.lat],\n        zoom: 15,\n        speed: 1.5,\n        curve: 1\n      });\n      this.props.dispatch(setCollapsedInfoBoxAction(false));\n      this.props.dispatch(setRedMarkerAction(false));\n      this.setState({\n        bottomInfoVisible: false\n      });\n    }\n    if (!equal(prevProps.viewport, this.props.viewport) && this.props.viewport) {\n      this.map.flyTo({\n        center: [this.props.viewport.longitude, this.props.viewport.latitude],\n        zoom: this.props.viewport.zoom,\n        speed: 2\n      });\n    }\n    if (!equal(prevProps.around_place_center, this.props.around_place_center)) {\n      this.props.dispatch(setRedMarkerAction(false));\n    }\n    if (!equal(prevProps.boxVisible, this.props.boxVisible) && this.props.boxVisible === 'navigation') {\n      this.removeMarkerPopup();\n    }\n    if (!equal(prevProps.result_select, this.props.result_select) || !equal(prevProps.result_navigation, this.props.result_navigation)) {\n      const {\n        result_select,\n        result_navigation,\n        boxVisible,\n        from_place,\n        to_place\n      } = this.props;\n      let dashedLineGeoJSON = [],\n        polylineGeoJSON = [];\n      this.result_navigation = [];\n      if (boxVisible !== 'navigation' && boxVisible !== 'iframe' || !result_navigation) {\n        var _this$popup_navigatio, _this$popup_navigatio2;\n        // Remove cac layer/source\n        if (this.map.getLayer(`route-layer-fastest`)) this.map.removeLayer(`route-layer-fastest`);\n        if (this.map.getLayer(`route-layer-shortest`)) this.map.removeLayer(`route-layer-shortest`);\n        if (this.map.getLayer(`walk-layer-0`)) this.map.removeLayer(`walk-layer-0`);\n        if (this.map.getLayer(`walk-layer-1`)) this.map.removeLayer(`walk-layer-1`);\n        if (this.map.getSource(`route-source-fastest`)) this.map.removeSource(`route-source-fastest`);\n        if (this.map.getSource(`route-source-shortest`)) this.map.removeSource(`route-source-shortest`);\n        if (this.map.getSource(`walk-source-0`)) this.map.removeSource(`walk-source-0`);\n        if (this.map.getSource(`walk-source-1`)) this.map.removeSource(`walk-source-1`);\n        (_this$popup_navigatio = this.popup_navigation[0]) === null || _this$popup_navigatio === void 0 ? void 0 : _this$popup_navigatio.remove();\n        (_this$popup_navigatio2 = this.popup_navigation[1]) === null || _this$popup_navigatio2 === void 0 ? void 0 : _this$popup_navigatio2.remove();\n      } else {\n        if (result_navigation) {\n          let distance = '';\n          if (localStorage.getItem('unit') === 'KILOMETERS') {\n            distance = `${(result_navigation.fastest[0].legs[0].distance.value / 1000).toFixed(1)} KM`;\n          } else if (localStorage.getItem('unit') === 'MILES') {\n            distance = `${(result_navigation.fastest[0].legs[0].distance.value / 1000 * Mile_Travel.MILES).toFixed(1)} Dặm`;\n          } else {\n            distance = `${(result_navigation.fastest[0].legs[0].distance.value / 1000).toFixed(1)} KM`;\n          }\n          let coordinateObject1 = {};\n          coordinateObject1.coordinates = this.decodePolyline(result_navigation.fastest[0].overview_polyline.points);\n          coordinateObject1.type = 'LineString';\n          polylineGeoJSON.push(coordinateObject1);\n          polylineGeoJSON[0].roadWay = 'fastest';\n          let coordinateObject2 = {};\n          coordinateObject2.coordinates = this.decodePolyline(result_navigation.shortest[0].overview_polyline.points);\n          coordinateObject2.type = 'LineString';\n          polylineGeoJSON.push(coordinateObject2);\n          polylineGeoJSON[1].roadWay = 'shortest';\n          dashedLineGeoJSON.push({\n            type: 'LineString',\n            coordinates: [[polylineGeoJSON[0].coordinates[0][0], polylineGeoJSON[0].coordinates[0][1]], [from_place === null || from_place === void 0 ? void 0 : from_place.geometry.location.lng, from_place === null || from_place === void 0 ? void 0 : from_place.geometry.location.lat]]\n          });\n          dashedLineGeoJSON.push({\n            type: 'LineString',\n            coordinates: [[polylineGeoJSON[0].coordinates[polylineGeoJSON[0].coordinates.length - 1][0], polylineGeoJSON[0].coordinates[polylineGeoJSON[0].coordinates.length - 1][1]], [to_place === null || to_place === void 0 ? void 0 : to_place.geometry.location.lng, to_place === null || to_place === void 0 ? void 0 : to_place.geometry.location.lat]]\n          });\n          polylineGeoJSON.map((item, i) => {\n            // Layer dan duong\n            if (this.map.getLayer(`route-layer-${item.roadWay}`)) this.map.removeLayer(`route-layer-${item.roadWay}`);\n            if (this.map.getSource(`route-source-${item.roadWay}`)) this.map.removeSource(`route-source-${item.roadWay}`);\n            this.map.addSource(`route-source-${item.roadWay}`, {\n              type: 'geojson',\n              data: {\n                type: 'Feature',\n                properties: {},\n                geometry: item\n              }\n            });\n            this.map.addLayer({\n              id: `route-layer-${item.roadWay}`,\n              type: 'line',\n              source: `route-source-${item.roadWay}`,\n              layout: {\n                'line-join': 'round',\n                'line-cap': 'round'\n              },\n              paint: {\n                'line-color': 'rgb(24, 144, 255)',\n                'line-width': 7,\n                'line-opacity': item.roadWay === result_select ? 1 : 0.5\n              }\n            });\n            // Layer di bo\n\n            if (this.map.getLayer(`walk-layer-${i}`)) this.map.removeLayer(`walk-layer-${i}`);\n            if (this.map.getSource(`walk-source-${i}`)) this.map.removeSource(`walk-source-${i}`);\n            this.map.addSource(`walk-source-${i}`, {\n              type: 'geojson',\n              data: {\n                type: 'Feature',\n                properties: {},\n                geometry: dashedLineGeoJSON[i]\n              }\n            });\n            this.map.addLayer({\n              id: `walk-layer-${i}`,\n              type: 'line',\n              source: `walk-source-${i}`,\n              layout: {\n                'line-join': 'round',\n                'line-cap': 'round'\n              },\n              paint: {\n                'line-color': 'rgb(133, 135, 126)',\n                'line-opacity': 1,\n                'line-width': 6,\n                'line-dasharray': [0.2, 2]\n              }\n            });\n            // Add Popup hien ket qua\n\n            if (this.popup_navigation[i]) {\n              var _this$popup_navigatio3;\n              (_this$popup_navigatio3 = this.popup_navigation[i]) === null || _this$popup_navigatio3 === void 0 ? void 0 : _this$popup_navigatio3.remove();\n              this.popup_navigation[i] = null;\n            }\n            this.popup_navigation[i] = new maplibregl.Popup({\n              closeButton: false,\n              anchor: 'top',\n              closeOnClick: false,\n              className: item.roadWay === result_select ? 'popup-z-index1' : 'popup-z-index2'\n            }).setLngLat([i === 0 ? item.coordinates[Math.trunc(0.75 * item.coordinates.length)][0] : item.coordinates[Math.trunc(0.25 * item.coordinates.length)][0], i === 0 ? item.coordinates[Math.trunc(item.coordinates.length * 0.75)][1] : item.coordinates[Math.trunc(item.coordinates.length * 0.25)][1]]).setHTML(ReactDOMServer.renderToStaticMarkup(__jsx(\"div\", {\n              className: \"tooltipNavigation\",\n              id: `popup-${item.roadWay}`\n            }, __jsx(\"p\", null, distance), __jsx(\"p\", null, result_navigation[item.roadWay][0].legs[0].duration.text)))).setMaxWidth('300px').addTo(this.map);\n            document.getElementById(`popup-${item.roadWay}`).addEventListener('click', () => {\n              this.props.dispatch(selectResultAction(item.roadWay));\n            });\n            const normalizeBounds = bounds => {\n              const [firstPoint, secondPoint] = bounds;\n              const minLat = Math.min(firstPoint[1], secondPoint[1]);\n              const maxLat = Math.max(firstPoint[1], secondPoint[1]);\n              const minLng = Math.min(firstPoint[0], secondPoint[0]);\n              const maxLng = Math.max(firstPoint[0], secondPoint[0]);\n              return [[minLng, minLat], [maxLng, maxLat]];\n            };\n            const bound = normalizeBounds([item.coordinates[0], item.coordinates[item.coordinates.length - 1]]);\n            if (isMobile) {\n              this.navigationView = this.map.cameraForBounds(bound, {\n                padding: {\n                  top: 10,\n                  bottom: 25,\n                  left: 24,\n                  right: 24\n                }\n              });\n            } else {\n              this.navigationView = this.map.cameraForBounds(bound, {\n                padding: {\n                  top: 40,\n                  bottom: 40,\n                  left: 200,\n                  right: 40\n                }\n              });\n            }\n          });\n          this.view = {\n            latitude: this.navigationView.center.lat,\n            longitude: this.navigationView.center.lng,\n            zoom: this.navigationView.zoom\n          };\n        }\n      }\n      this.props.dispatch(setMapViewportAction(this.view));\n    }\n    if (!equal(prevProps.from_place, this.props.from_place)) {\n      const place = this.props.from_place;\n      if (place) {\n        const popup = new maplibregl.Popup({\n          offset: [0, -18],\n          className: 'tooltip-marker',\n          closeButton: false\n        }).setHTML(`<div class=\"ant-tooltip-inner tooltip-info-location\">${place.name}</div>`).setMaxWidth('150px');\n        if (this.start_marker) {\n          this.start_marker = this.start_marker.setLngLat(place.geometry.location).setPopup(popup).addTo(this.map);\n        } else {\n          const marker_start = document.createElement('div');\n          marker_start.innerHTML = ReactDOMServer.renderToStaticMarkup(__jsx(\"div\", {\n            className: \"marker-start\"\n          }, __jsx(\"img\", {\n            src: images.button,\n            style: {\n              width: 12\n            },\n            alt: \"\"\n          })));\n          this.start_marker = new maplibregl.Marker({\n            anchor: 'center',\n            element: marker_start\n          }).setPopup(popup).setLngLat(place.geometry.location).addTo(this.map);\n          this.start_marker.getElement().addEventListener('contextmenu', e => {\n            e.stopPropagation();\n            e.preventDefault();\n            const lngLat = this.start_marker.getLngLat();\n            this.props.dispatch(setPopupRightClick(true, lngLat, 'popupFromPlace'));\n            this.props.dispatch(setRedMarkerAction(false));\n          });\n          this.start_marker.getElement().addEventListener('click', () => {\n            if (popup.isOpen()) {\n              this.start_marker.togglePopup();\n            }\n          });\n          this.start_marker.getElement().addEventListener('mouseenter', () => this.start_marker.togglePopup());\n          this.start_marker.getElement().addEventListener('mouseleave', () => this.start_marker.togglePopup());\n        }\n      } else {\n        var _prevProps$from_place, _this$state$placeMous;\n        if (equal(this.start_marker.getLngLat(), this.props.position_popup)) {\n          this.props.dispatch(setPopupRightClick(false));\n        }\n        if (equal((_prevProps$from_place = prevProps.from_place) === null || _prevProps$from_place === void 0 ? void 0 : _prevProps$from_place.place_id, (_this$state$placeMous = this.state.placeMouseClick) === null || _this$state$placeMous === void 0 ? void 0 : _this$state$placeMous.place_id)) {\n          this.changeVisibleBottomInfo(false);\n        }\n        this.changeVisibleBottomInfo(false);\n        this.start_marker ? this.start_marker.remove() : null;\n      }\n    }\n    if (!equal(prevProps.to_place, this.props.to_place)) {\n      const place = this.props.to_place;\n      if (place) {\n        const popup = new maplibregl.Popup({\n          offset: [0, -18],\n          className: 'tooltip-marker',\n          closeButton: false\n        }).setHTML(`<div class=\"ant-tooltip-inner tooltip-info-location\">${place.name}</div>`).setMaxWidth('150px');\n        if (this.end_marker) {\n          this.to_place = this.end_marker.setPopup(popup).setLngLat(place.geometry.location).addTo(this.map);\n        } else {\n          const marker_end = document.createElement('div');\n          marker_end.innerHTML = ReactDOMServer.renderToStaticMarkup(__jsx(\"div\", {\n            className: \"marker-end\"\n          }, __jsx(\"div\", null, __jsx(\"img\", {\n            src: images.marker,\n            alt: \"\"\n          }))));\n          this.end_marker = new maplibregl.Marker({\n            anchor: 'center',\n            element: marker_end\n          }).setPopup(popup).setLngLat(place.geometry.location).addTo(this.map);\n          this.end_marker.getElement().addEventListener('contextmenu', e => {\n            e.stopPropagation();\n            e.preventDefault();\n            const lngLat = this.end_marker.getLngLat();\n            this.props.dispatch(setPopupRightClick(true, lngLat, 'popupToPlace'));\n            this.props.dispatch(setRedMarkerAction(false));\n          });\n          this.end_marker.getElement().addEventListener('click', () => {\n            if (popup.isOpen()) {\n              this.end_marker.togglePopup();\n            }\n          });\n          this.end_marker.getElement().addEventListener('mouseenter', () => this.end_marker.togglePopup());\n          this.end_marker.getElement().addEventListener('mouseleave', () => this.end_marker.togglePopup());\n        }\n      } else {\n        var _this$start_marker, _prevProps$to_place, _this$state$placeMous2;\n        if (equal((_this$start_marker = this.start_marker) === null || _this$start_marker === void 0 ? void 0 : _this$start_marker.getLngLat(), this.props.position_popup)) {\n          this.props.dispatch(setPopupRightClick(false));\n        }\n        if (equal((_prevProps$to_place = prevProps.to_place) === null || _prevProps$to_place === void 0 ? void 0 : _prevProps$to_place.place_id, (_this$state$placeMous2 = this.state.placeMouseClick) === null || _this$state$placeMous2 === void 0 ? void 0 : _this$state$placeMous2.place_id)) {\n          this.changeVisibleBottomInfo(false);\n        }\n        this.end_marker ? this.end_marker.remove() : null;\n      }\n    }\n    if (!equal(prevProps.around_places, this.props.around_places) || !equal(prevProps.around_place_select, this.props.around_place_select)) {\n      var _this$list_marker_aro;\n      if (((_this$list_marker_aro = this.list_marker_around) === null || _this$list_marker_aro === void 0 ? void 0 : _this$list_marker_aro.length) > 0) {\n        this.list_marker_around.forEach(item => {\n          item.remove();\n        });\n        this.list_marker_around = [];\n      }\n      const {\n        around_places,\n        around_place_center\n      } = this.props;\n      if (around_places.length > 0) {\n        this.list_marker_around = [];\n        let el = document.createElement('div');\n        el.innerHTML = ReactDOMServer.renderToStaticMarkup(__jsx(Marker, {\n          id: \"marker-center\",\n          type: \"center\"\n        }));\n        this.list_marker_around[0] = new maplibregl.Marker(el, {\n          anchor: 'bottom'\n        }).setPopup(new maplibregl.Popup({\n          offset: [0, -32],\n          className: 'tooltip-marker',\n          closeButton: false\n        }).setHTML(`<div class=\"ant-tooltip-inner tooltip-info-location\">${around_place_center.name}</div>`).setMaxWidth('150px')).setLngLat(around_place_center.geometry.location).addTo(this.map);\n        const markerCenterDiv = this.list_marker_around[0].getElement();\n        markerCenterDiv.addEventListener('click', () => {\n          this._selectAroundPlace('center', around_place_center);\n          this.props.dispatch(setRedMarkerAction(false));\n          if (this.list_marker_around[0].getPopup().isOpen()) {\n            this.list_marker_around[0].togglePopup();\n          }\n        });\n        markerCenterDiv.addEventListener('contextmenu', e => {\n          e.stopPropagation();\n          e.preventDefault();\n          this.props.dispatch(setRedMarkerAction(false));\n          this.props.dispatch(setPopupRightClick(true, around_place_center.geometry.location, 'normal'));\n        });\n        markerCenterDiv.addEventListener('mouseenter', () => this.list_marker_around[0].togglePopup());\n        markerCenterDiv.addEventListener('mouseleave', () => this.list_marker_around[0].togglePopup());\n        around_places.forEach((item, i) => {\n          const popup = new maplibregl.Popup({\n            offset: [0, -32],\n            className: 'tooltip-marker',\n            closeButton: false,\n            anchor: 'bottom'\n          }).setHTML(`<div class=\"ant-tooltip-inner tooltip-info-location\">${item.name}</div>`).setMaxWidth('150px');\n          el = document.createElement('div');\n          el.innerHTML = ReactDOMServer.renderToStaticMarkup(__jsx(Marker, {\n            type: \"around\",\n            place: item,\n            place_select: this.props.around_place_select,\n            id: `marker-around-${i}`\n          }));\n          this.list_marker_around.push(new maplibregl.Marker(el, {\n            anchor: 'bottom'\n          }).setPopup(popup).setLngLat([item.lng_lat[0] * 1, item.lng_lat[1] * 1]).addTo(this.map));\n          const markerDiv = this.list_marker_around[i + 1].getElement();\n          markerDiv.addEventListener('click', e => {\n            e.stopPropagation();\n            this.props.dispatch(setRedMarkerAction(false));\n            this._selectAroundPlace('around', item);\n            if (popup.isOpen()) {\n              this.list_marker_around[i + 1].togglePopup();\n            }\n          });\n          markerDiv.addEventListener('contextmenu', e => {\n            e.stopPropagation();\n            e.preventDefault();\n            this.props.dispatch(setPopupRightClick(true, {\n              lng: item.lng_lat[0] * 1,\n              lat: item.lng_lat[1] * 1\n            }, 'around'));\n            this.props.dispatch(setRedMarkerAction(false));\n          });\n          markerDiv.addEventListener('mouseenter', () => this.list_marker_around[i + 1].togglePopup());\n          markerDiv.addEventListener('mouseleave', () => this.list_marker_around[i + 1].togglePopup());\n        });\n      }\n    }\n    if (this.props.boxVisible === 'info' && this.props.current_place) {\n      if (!this.markerCurrentPlace) {\n        var _this$props$current_p, _this$props$current_p2;\n        const el = document.createElement('div');\n        el.innerHTML = ReactDOMServer.renderToStaticMarkup(\n        // <Marker type=\"normal\" />\n        __jsx(\"div\", {\n          className: \"marker-histories\"\n        }, __jsx(\"div\", null, __jsx(\"img\", {\n          src: images.marker,\n          alt: \"\"\n        }))));\n        // Marker info\n        this.markerCurrentPlace = new maplibregl.Marker({\n          anchor: 'bottom',\n          element: el\n        }).setLngLat((_this$props$current_p = this.props.current_place) === null || _this$props$current_p === void 0 ? void 0 : (_this$props$current_p2 = _this$props$current_p.geometry) === null || _this$props$current_p2 === void 0 ? void 0 : _this$props$current_p2.location).addTo(this.map);\n        this.markerCurrentPlace.getElement().addEventListener('contextmenu', e => {\n          e.stopPropagation();\n          e.preventDefault();\n          const lngLat = this.markerCurrentPlace.getLngLat();\n          this.props.dispatch(setPopupRightClick(true, lngLat, 'popupCurrentPlace'));\n        });\n      } else {\n        this.markerCurrentPlace.setLngLat(this.props.current_place.geometry.location).addTo(this.map);\n      }\n    }\n    if (this.props.boxVisible !== 'info' && this.markerCurrentPlace) {\n      this.markerCurrentPlace.remove();\n      this.markerCurrentPlace = null;\n    }\n    if (this.props.boxVisible === 'detailsrestaurant' && this.props.restaurantData) {\n      if (this.props.restaurantData.length !== 0) {\n        for (let item of this.props.restaurantData) {\n          const marker_restaurant = document.createElement('div');\n          marker_restaurant.innerHTML = ReactDOMServer.renderToStaticMarkup(\n          // <MarkerNavigation id=\"end-marker\" type=\"histories\" />\n          __jsx(\"div\", {\n            className: \"marker-histories\"\n          }, __jsx(\"div\", null, __jsx(\"img\", {\n            src: images.marker,\n            alt: \"\"\n          }))));\n          this.restaurant_marker = new maplibregl.Marker({\n            anchor: 'center',\n            element: marker_restaurant\n          })\n          // .setPopup(popup)\n          .setLngLat(item.geometry.location).addTo(this.map);\n          this.listRestaurant.push(this.restaurant_marker);\n        }\n      } else {\n        // console.log('Có')\n        for (let marker of this.listRestaurant) {\n          marker.remove();\n        }\n        this.listRestaurant = [];\n      }\n    }\n    if (this.props.boxVisible === 'history') {\n      for (let marker of this.listHistories) {\n        marker.remove();\n      }\n      for (let item of this.props.searchLocalStorage) {\n        const marker_history = document.createElement('div');\n        marker_history.innerHTML = ReactDOMServer.renderToStaticMarkup(__jsx(\"div\", {\n          className: \"marker-histories\"\n        }, __jsx(\"div\", null, __jsx(\"img\", {\n          src: images.marker,\n          alt: \"\"\n        }))));\n        this.history_marker = new maplibregl.Marker({\n          anchor: 'center',\n          element: marker_history\n        }).setLngLat(item.location).addTo(this.map);\n        this.listHistories.push(this.history_marker);\n      }\n    } else {\n      for (let marker of this.listHistories) {\n        marker.remove();\n      }\n    }\n\n    // if (this.props.boxVisible === \"details\") {\n    if (this.props.result_navigation && this.props.boxVisible === 'details') {\n      for (let step of this.props.result_navigation.fastest[0].legs[0].steps) {\n        const popup = new maplibregl.Popup({\n          offset: [0, -32],\n          className: 'tooltip-marker',\n          closeButton: false,\n          anchor: 'bottom'\n        }).setHTML(`<div class=\"ant-tooltip-inner tooltip-info-location\">${step.html_instructions}</div>`).setMaxWidth('150px');\n        const marker_step = document.createElement('div');\n        marker_step.innerHTML = ReactDOMServer.renderToStaticMarkup(__jsx(\"div\", {\n          className: \"marker-details\"\n        }));\n        this.step_marker = new maplibregl.Marker({\n          anchor: 'center',\n          element: marker_step\n        }).setPopup(popup).setLngLat(step.end_location).addTo(this.map);\n        this.list.push(this.step_marker);\n      }\n    } else {\n      for (let marker of this.list) {\n        marker.remove();\n      }\n      this.list = [];\n    }\n    // }\n    if (this.props.boxVisible === 'navigation' && isMobile) {\n      if (this.props.result_navigation) {\n        for (let step of this.props.result_navigation.fastest[0].legs[0].steps) {\n          const popup = new maplibregl.Popup({\n            offset: [0, -32],\n            className: 'tooltip-marker',\n            closeButton: false,\n            anchor: 'bottom'\n          }).setHTML(`<div class=\"ant-tooltip-inner tooltip-info-location\">${step.html_instructions}</div>`).setMaxWidth('150px');\n          const marker_step = document.createElement('div');\n          marker_step.innerHTML = ReactDOMServer.renderToStaticMarkup(__jsx(\"div\", {\n            className: \"marker-details\"\n          }));\n          this.step_marker = new maplibregl.Marker({\n            anchor: 'center',\n            element: marker_step\n          }).setPopup(popup).setLngLat(step.end_location).addTo(this.map);\n          this.list.push(this.step_marker);\n        }\n      } else {\n        for (let marker of this.list) {\n          marker.remove();\n        }\n        this.list = [];\n      }\n    }\n  }\n  decodePolyline(encoded) {\n    var points = [];\n    var index = 0,\n      len = encoded.length;\n    var lat = 0,\n      lng = 0;\n    while (index < len) {\n      var b,\n        shift = 0,\n        result = 0;\n      do {\n        b = encoded.charAt(index++).charCodeAt(0) - 63;\n        result |= (b & 0x1f) << shift;\n        shift += 5;\n      } while (b >= 0x20);\n      var dlat = result & 1 ? ~(result >> 1) : result >> 1;\n      lat += dlat;\n      shift = 0;\n      result = 0;\n      do {\n        b = encoded.charAt(index++).charCodeAt(0) - 63;\n        result |= (b & 0x1f) << shift;\n        shift += 5;\n      } while (b >= 0x20);\n      var dlng = result & 1 ? ~(result >> 1) : result >> 1;\n      lng += dlng;\n      points.push([lng * 1e-5, lat * 1e-5]);\n    }\n    return points;\n  }\n  componentDidMount() {\n    window.addEventListener('storage', this.handleStorageChange);\n    // console.log(STYLE_URL.NORMAL)\n    const selectedPlace = this.props.current_place;\n    this.map = new maplibregl.Map({\n      container: 'map',\n      // container id\n      style: STYLE_URL.NORMAL + \"YJTajS80fLlhJ4a2BG0gXqXXdZzdLG5V3iivOK9e\",\n      center: selectedPlace ? [selectedPlace.geometry.location.lng, selectedPlace.geometry.location.lat] : [105.801982, 21.026745],\n      // starting position [lng, lat]\n      zoom: 12 // starting zoom\n    });\n    if (selectedPlace) this.props.dispatch(setRedMarkerAction(true, selectedPlace.geometry.location));\n    this.navigation = new maplibregl.NavigationControl();\n    this.geolocateControl = new maplibregl.GeolocateControl({\n      positionOptions: {\n        enableHighAccuracy: true\n      },\n      // Bật tắt hiển bị vị trí\n      trackUserLocation: true,\n      // Hiển thị\n      showUserLocation: true,\n      // Tắt vòng tròn to\n      showAccuracyCircle: false,\n      // Điều chỉnh mức zoom đến vị trí của mình\n      fitBoundsOptions: {\n        maxZoom: 15\n      }\n    });\n    this.geolocateControl.on('error', () => {\n      _message.warning('Goong không thể lấy địa điểm hiện tại của bạn !');\n    });\n    this.geolocateControl.on('geolocate', e => {\n      this.props.dispatch(setMyLocationAction({\n        latitude: e.coords.latitude,\n        longitude: e.coords.longitude\n      }));\n    });\n    !isMobile && this.map.addControl(this.navigation);\n    !isMobile && this.map.addControl(this.geolocateControl);\n    this.map.on('click', this._onMouseClick);\n    this.map.on('contextmenu', this._onRightClick);\n    this.map.on('load', () => {\n      var _URLSearchParams$get, _this$geolocateContro;\n      this.map.resize();\n      const pid = new URLSearchParams(window.location.search).get('pid');\n      const location = (_URLSearchParams$get = new URLSearchParams(window.location.search).get('location')) === null || _URLSearchParams$get === void 0 ? void 0 : _URLSearchParams$get.split(',');\n      const pid_around = new URLSearchParams(window.location.search).get('pid_around');\n      const direction_infor = new URLSearchParams(window.location.search).get('direction');\n      if (!direction_infor && !pid && !location && !pid_around && !this.props.current_place) (_this$geolocateContro = this.geolocateControl) === null || _this$geolocateContro === void 0 ? void 0 : _this$geolocateContro.trigger();else {\n        if (navigator.geolocation) {\n          navigator.geolocation.getCurrentPosition(position => {\n            this.props.dispatch(setMyLocationAction({\n              latitude: position.coords.latitude,\n              longitude: position.coords.longitude\n            }));\n          });\n        }\n      }\n    });\n    this.map.on('move', () => {\n      this.props.dispatch(setCenterLatLngAction({\n        latitude: this.map.getCenter().lat,\n        longitude: this.map.getCenter().lng\n      }));\n    });\n    this.map.on('style.load', () => {\n      var _this$map;\n      (_this$map = this.map) === null || _this$map === void 0 ? void 0 : _this$map.addLayer({\n        id: '3d-buildings',\n        source: 'composite',\n        'source-layer': 'VN_Building',\n        filter: ['==', 'extrude', 'true'],\n        type: 'fill-extrusion',\n        minzoom: 15,\n        paint: {\n          'fill-extrusion-color': '#aaa',\n          'fill-extrusion-height': {\n            type: 'identity',\n            property: 'height'\n          },\n          'fill-extrusion-base': {\n            type: 'identity',\n            property: 'min_height'\n          },\n          'fill-extrusion-opacity': 0.4\n        }\n      });\n      if (this.props.result_navigation) {\n        if (this.props.result_select === 'fastest') {\n          this.props.dispatch(selectResultAction('shortest'));\n          this.props.dispatch(selectResultAction('fastest'));\n        } else {\n          this.props.dispatch(selectResultAction('fastest'));\n          this.props.dispatch(selectResultAction('shortest'));\n        }\n      }\n    });\n    document.body.addEventListener('click', this._onClickMenu);\n    // this.map.on('click', 'route-layer-fastest', (e) => {\n    //   console.log(e, 'fastest');\n    //   e.originalEvent.stopPropagation();\n    //   e.originalEvent.preventDefault();\n    // });\n\n    // this.map.on('click', 'route-layer-shortest', (e) => {\n    //   console.log(e)\n    // });\n\n    const direction_infor = new URLSearchParams(window.location.search).get('direction');\n    const iframe = new URLSearchParams(window.location.search).get('iframe');\n    if (direction_infor) {\n      const coor_from = {\n        lat: direction_infor.split('&')[0].split(',')[0],\n        lng: direction_infor.split('&')[0].split(',')[1]\n      };\n      const coor_to = {\n        lat: direction_infor.split('&')[1].split(',')[0],\n        lng: direction_infor.split('&')[1].split(',')[1]\n      };\n      if (coor_from.lat && coor_from.lng && coor_to.lat && coor_to.lng) {\n        // this.handleFromHere(coor_from.lat, coor_from.lng);\n        // this.handleToHere(coor_to.lat, coor_to.lng);\n        if (iframe != null) {\n          this.navigationByURLIframe(coor_from, coor_to);\n        } else {\n          this.navigationByURL(coor_from, coor_to);\n        }\n      }\n    }\n\n    // Fetch parking lots\n    this.props.dispatch(getParkingLotsRequest());\n  }\n  componentWillUnmount() {\n    window.removeEventListener('storage', this.handleStorageChange);\n    document.body.removeEventListener('click', this._onClickMenu);\n  }\n  render() {\n    var _placeMouseClick$geom, _placeMouseClick$geom2;\n    const {\n      style,\n      bottomInfoVisible,\n      placeMouseClick\n    } = this.state;\n    return __jsx(React.Fragment, null, __jsx(Div100vh, null, __jsx(\"div\", {\n      id: \"map\"\n    }, this.renderParkingLots()), __jsx(\"div\", null, !isMobile && __jsx(_Avatar, {\n      shape: \"square\",\n      size: 64,\n      onClick: this.changeStyle,\n      className: \"change-status-button\",\n      style: {\n        backgroundImage: style === STYLE_URL.NORMAL + \"YJTajS80fLlhJ4a2BG0gXqXXdZzdLG5V3iivOK9e\" ? `url(${satellite_img})` : `url(${normal_map_img})`\n      }\n    }), isMobile && __jsx(_Avatar, {\n      shape: \"square\",\n      size: 64,\n      onClick: this.changeStyle,\n      className: \"change-status-button\"\n      // id='change-status-button--mobile'\n      ,\n      style: {\n        backgroundImage: style === STYLE_URL.NORMAL + \"YJTajS80fLlhJ4a2BG0gXqXXdZzdLG5V3iivOK9e\" ? `url(${satellite_img})` : `url(${normal_map_img})`\n      }\n    })), bottomInfoVisible && __jsx(BottomInfoLocation, {\n      changeVisibleBottomInfo: this.changeVisibleBottomInfo,\n      lat: ((_placeMouseClick$geom = placeMouseClick.geometry) === null || _placeMouseClick$geom === void 0 ? void 0 : _placeMouseClick$geom.location.lat) || Number(placeMouseClick.lng_lat[1]),\n      lng: ((_placeMouseClick$geom2 = placeMouseClick.geometry) === null || _placeMouseClick$geom2 === void 0 ? void 0 : _placeMouseClick$geom2.location.lng) || Number(placeMouseClick.lng_lat[0]),\n      name: placeMouseClick.name || placeMouseClick.address_components[0].long_name,\n      isMarkerAround: placeMouseClick.marker_type_id,\n      place_id: placeMouseClick._id,\n      address: this.getAddressGeocode(placeMouseClick) || placeMouseClick.formatted_address || placeMouseClick.description.address,\n      removeMarker: this.removeMarkerWhatIs\n    })));\n  }\n}\nconst mapStateToProps = state => {\n  return {\n    current_place: state.placeReducer.current_place,\n    from_place: state.navigationReducer.from,\n    to_place: state.navigationReducer.to,\n    boxVisible: state.boxVisibleReducer.box_visible,\n    result_navigation: state.navigationReducer.result,\n    viewport: state.placeReducer.viewport,\n    result_select: state.navigationReducer.result_select,\n    around_places: state.searchReducer.around_places,\n    markerSelect: state.boxVisibleReducer.red_marker_visible,\n    positionMarkerSelect: state.boxVisibleReducer.position_red_marker,\n    around_place_center: state.searchReducer.around_place_center,\n    popup_visible: state.boxVisibleReducer.popup_visible,\n    position_popup: state.boxVisibleReducer.position_popup,\n    type_popup: state.boxVisibleReducer.type_popup,\n    around_place_select: state.searchReducer.around_place_select,\n    my_location: state.placeReducer.my_location,\n    restaurantData: state.searchReducer.restaurant_data,\n    searchLocalStorage: state.searchReducer.search_local_storage,\n    parkingLots: state.parkingLotReducer.parkingLots\n  };\n};\nexport default connect(mapStateToProps)(Map);","map":{"version":3,"names":["React","Component","useEffect","STYLE_URL","Marker","connect","BottomInfoLocation","MenuRightClick","getDetailLatLngService","equal","setMapViewportAction","getDetailByLatLngAction","setCenterLatLngAction","setMyLocationAction","getDetailByIdAction","searchAroundAction","clearSearchAroundAction","selectAroundPlaceAction","selectResultAction","navigationFromAction","navigationToAction","clearResultAction","navigationAction","MarkerNavigation","setRedMarkerAction","setCollapsedInfoBoxAction","setPopupRightClick","setBoxVisibleAction","normal_map_img","satellite_img","ReactDOMServer","Axios","Div100vh","Request","Mile_Travel","isMobile","images","useDispatch","useSelector","getParkingLotsRequest","Map","constructor","props","_defineProperty","viewport","dispatch","e","boxVisible","removeMarkerWhatIs","setState","bottomInfoVisible","position","lat","lngLat","lng","evt","parent","target","parentElement","className","toString","includes","handleWhatIs","handleFromHere","handleToHere","handleDeleteLocation","handleSearchAround","handleToAroundPlace","visible","_this$props$position_","position_popup","_this$props$position_2","latLng","latitude","longitude","response","data","results","length","place_response","_objectSpread","name","address_components","long_name","formatted_address","getAddressGeocode","_message","error","_this$props$positionM","positionMarkerSelect","_this$props$positionM2","redMarkerVisible","place","_getInforPlace","zoom","placeMouseClick","markerWhatIs","setLngLat","addTo","map","el","document","createElement","innerHTML","renderToStaticMarkup","__jsx","size","maplibregl","anchor","getElement","addEventListener","stopPropagation","preventDefault","remove","id","get","_getInforPlaceAround","Number","lng_lat","isSmallScreen","selectPlace","geometry","location","to_place","changeVisibleBottomInfo","my_location","geocode","from_place","type_popup","type","selectAroundPlace","around_places","item","popupRightClick","getLngLat","_response$data","place_center","around_place_center","place_id","_id","description","address","markerCurrentPlace","redMarker","_place$address_compon","result","slice","push","join","style","state","SATELITE","NORMAL","setStyle","from","to","fromplace","toplace","event","console","log","key","value","newValue","parkingLots","lot","availableSpots","capacity","_mapRef","createRef","popup_navigation","styleNormal","styleEarth","localStorage","getItem","list","listRestaurant","listHistories","view","navigationView","componentDidUpdate","prevProps","navigation","NavigationControl","addControl","removeControl","element","markerSelect","_this$redMarker","popup_visible","setHTML","Popup","closeButton","closeOnClick","offset","current_place","selectedPlace","flyTo","center","speed","curve","removeMarkerPopup","result_select","result_navigation","dashedLineGeoJSON","polylineGeoJSON","_this$popup_navigatio","_this$popup_navigatio2","getLayer","removeLayer","getSource","removeSource","distance","fastest","legs","toFixed","MILES","coordinateObject1","coordinates","decodePolyline","overview_polyline","points","roadWay","coordinateObject2","shortest","i","addSource","properties","addLayer","source","layout","paint","_this$popup_navigatio3","Math","trunc","duration","text","setMaxWidth","getElementById","normalizeBounds","bounds","firstPoint","secondPoint","minLat","min","maxLat","max","minLng","maxLng","bound","cameraForBounds","padding","top","bottom","left","right","popup","start_marker","setPopup","marker_start","src","button","width","alt","isOpen","togglePopup","_prevProps$from_place","_this$state$placeMous","end_marker","marker_end","marker","_this$start_marker","_prevProps$to_place","_this$state$placeMous2","around_place_select","_this$list_marker_aro","list_marker_around","forEach","markerCenterDiv","_selectAroundPlace","getPopup","place_select","markerDiv","_this$props$current_p","_this$props$current_p2","restaurantData","marker_restaurant","restaurant_marker","searchLocalStorage","marker_history","history_marker","step","steps","html_instructions","marker_step","step_marker","end_location","encoded","index","len","b","shift","charAt","charCodeAt","dlat","dlng","componentDidMount","window","handleStorageChange","container","geolocateControl","GeolocateControl","positionOptions","enableHighAccuracy","trackUserLocation","showUserLocation","showAccuracyCircle","fitBoundsOptions","maxZoom","on","warning","coords","_onMouseClick","_onRightClick","_URLSearchParams$get","_this$geolocateContro","resize","pid","URLSearchParams","search","split","pid_around","direction_infor","trigger","navigator","geolocation","getCurrentPosition","getCenter","_this$map","filter","minzoom","property","body","_onClickMenu","iframe","coor_from","coor_to","navigationByURLIframe","navigationByURL","componentWillUnmount","removeEventListener","render","_placeMouseClick$geom","_placeMouseClick$geom2","Fragment","renderParkingLots","_Avatar","shape","onClick","changeStyle","backgroundImage","isMarkerAround","marker_type_id","removeMarker","mapStateToProps","placeReducer","navigationReducer","boxVisibleReducer","box_visible","searchReducer","red_marker_visible","position_red_marker","restaurant_data","search_local_storage","parkingLotReducer"],"sources":["D:/Workhome/ParkingLot/live-map/components/Map.jsx"],"sourcesContent":["import React, { Component, useEffect } from 'react';\nimport { STYLE_URL } from '../consts';\nimport Marker from './Marker';\nimport { connect } from 'react-redux';\nimport BottomInfoLocation from './BottomInfoLocation';\nimport MenuRightClick from './MenuRightCLick';\nimport { getDetailLatLngService } from '../redux/sagas/placeSaga';\nimport { message, Avatar } from 'antd';\nimport equal from 'fast-deep-equal/es6/react';\nimport { setMapViewportAction, getDetailByLatLngAction, setCenterLatLngAction, setMyLocationAction, getDetailByIdAction } from '../redux/actions/place';\nimport { searchAroundAction, clearSearchAroundAction, selectAroundPlaceAction } from '../redux/actions/search';\nimport { selectResultAction, navigationFromAction, navigationToAction, clearResultAction, navigationAction } from '../redux/actions/navigation';\nimport MarkerNavigation from './MarkerNavigation';\nimport { setRedMarkerAction, setCollapsedInfoBoxAction, setPopupRightClick, setBoxVisibleAction } from '../redux/actions/boxVisble';\nimport normal_map_img from '../static/images/normal_map.png';\nimport satellite_img from '../static/images/satellite.jpeg';\nimport ReactDOMServer from 'react-dom/server';\nimport Axios from 'axios';\nimport Div100vh from 'react-div-100vh';\nimport Request from '../utils/request';\nimport { Mile_Travel } from '../consts';\nimport { isMobile } from 'react-device-detect';\nimport images from '../utils/images';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { getParkingLotsRequest } from '../redux/actions/parkingLot';\n\nclass Map extends Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis._mapRef = React.createRef();\n\t\tthis.map = null;\n\t\tthis.redMarker = null;\n\t\tthis.popupRightClick = null;\n\t\tthis.popup_navigation = [];\n\t\tthis.state = {\n\t\t\tstyle: STYLE_URL.NORMAL + STYLE_KEY,\n\t\t\tstyleNormal: STYLE_URL.NORMAL + STYLE_KEY,\n\t\t\tstyleEarth: STYLE_URL.SATELITE + STYLE_KEY,\n\t\t\tbottomInfoVisible: false,\n\t\t\tvalue: localStorage.getItem('search_history') || '',\n\t\t\tparkingLots: [],\n\t\t};\n\t\tthis.list = [];\n\t\tthis.listRestaurant = [];\n\t\tthis.listHistories = [];\n\t\tthis.view = null;\n\t\tthis.navigationView = null;\n\t}\n\n\t_onViewportChange = (viewport) => {\n\t\tthis.props.dispatch(setMapViewportAction(viewport));\n\t};\n\n\t_onMouseClick = (e) => {\n\t\tthis.props.dispatch(setPopupRightClick(false));\n\t\tif (this.props.boxVisible !== 'iframe') {\n\t\t\tthis.props.dispatch(setRedMarkerAction(false));\n\t\t}\n\t\t// if (this.props.boxVisible === \"info\") this.props.dispatch(setBoxVisibleAction('search'))\n\t\t// this.markerWhatIs ? this.markerWhatIs.remove() : null;\n\t\tthis.props.dispatch(selectAroundPlaceAction(null));\n\t\tthis.removeMarkerWhatIs();\n\t\tthis.setState({\n\t\t\tbottomInfoVisible: false,\n\t\t});\n\t};\n\n\t_onRightClick = (e) => {\n\t\tconst position = { lat: e.lngLat.lat, lng: e.lngLat.lng };\n\t\tif (this.props.boxVisible !== 'iframe') {\n\t\t\tthis.props.dispatch(setRedMarkerAction(true, position));\n\t\t\tthis.props.dispatch(setPopupRightClick(true, position, 'normal'));\n\t\t}\n\t};\n\n\t_onClickMenu = (evt) => {\n\t\tconst parent = evt.target.parentElement;\n\n\t\tif (evt.target.className && evt.target.className.toString().includes('what-is-this')) {\n\t\t\tthis.handleWhatIs();\n\t\t} else if (evt.target.className && evt.target.className.toString().includes('from-here')) {\n\t\t\tthis.handleFromHere();\n\t\t} else if (evt.target.className && evt.target.className.toString().includes('to-here')) {\n\t\t\tthis.handleToHere();\n\t\t} else if (evt.target.className && evt.target.className.toString().includes('delete-location')) {\n\t\t\tthis.handleDeleteLocation();\n\t\t} else if (evt.target.className && evt.target.className.toString().includes('search-around')) {\n\t\t\tthis.handleSearchAround();\n\t\t} else if (evt.target.className && evt.target.className.toString().includes('to-around-place')) {\n\t\t\tthis.handleToAroundPlace();\n\t\t} else if (evt.target.className && evt.target.className.toString().includes('what-is-navigation')) {\n\t\t\tthis.handleWhatIs(false);\n\t\t}\n\t\tif (parent?.className && parent?.className.toString().includes('menu-right-click')) {\n\t\t\tif (evt.target.className && !evt.target.className.toString().includes('what-is-this')) {\n\t\t\t\tthis.props.dispatch(clearSearchAroundAction());\n\t\t\t}\n\t\t\tthis.props.dispatch(setPopupRightClick(false));\n\t\t\tthis.removeMarkerWhatIs();\n\t\t}\n\t};\n\n\tchangeVisibleBottomInfo = (visible) => {\n\t\tthis.setState({\n\t\t\tbottomInfoVisible: visible,\n\t\t});\n\t};\n\n\t_getInforPlace = async (lat = this.props.position_popup?.lat, lng = this.props.position_popup?.lng) => {\n\t\tconst latLng = {\n\t\t\tlatitude: lat,\n\t\t\tlongitude: lng,\n\t\t};\n\n\t\ttry {\n\t\t\tconst response = await getDetailLatLngService(latLng);\n\t\t\tif (response.data.results.length > 0) {\n\t\t\t\tconst place_response = response.data.results[0];\n\t\t\t\treturn {\n\t\t\t\t\t...place_response,\n\t\t\t\t\tname: place_response.address_components[0].long_name,\n\t\t\t\t\tformatted_address: this.getAddressGeocode(place_response),\n\t\t\t\t};\n\t\t\t} else {\n\t\t\t\tmessage.error('Không tìm thấy địa điểm !!');\n\t\t\t\treturn null;\n\t\t\t}\n\t\t} catch (error) {\n\t\t\tthrow error;\n\t\t}\n\t};\n\n\tselectPlace = async (lat = this.props.positionMarkerSelect?.lat, lng = this.props.positionMarkerSelect?.lng, redMarkerVisible = true) => {\n\t\tconst place = await this._getInforPlace(lat, lng);\n\n\t\tif (place) {\n\t\t\tconst viewport = {\n\t\t\t\tlongitude: lng,\n\t\t\t\tlatitude: lat,\n\t\t\t\tzoom: 15,\n\t\t\t};\n\t\t\tthis.props.dispatch(setMapViewportAction(viewport));\n\t\t\tthis.setState({\n\t\t\t\tbottomInfoVisible: true,\n\t\t\t\tplaceMouseClick: place,\n\t\t\t});\n\t\t\tif (redMarkerVisible) {\n\t\t\t\tif (this.markerWhatIs) {\n\t\t\t\t\tthis.markerWhatIs.setLngLat({ lat, lng }).addTo(this.map);\n\t\t\t\t} else {\n\t\t\t\t\tconst el = document.createElement('div');\n\t\t\t\t\tel.innerHTML = ReactDOMServer.renderToStaticMarkup(<Marker size={22} />);\n\t\t\t\t\tthis.markerWhatIs = new maplibregl.Marker(el, { anchor: 'bottom' }).setLngLat({ lat, lng }).addTo(this.map);\n\t\t\t\t}\n\t\t\t\tthis.markerWhatIs.getElement().addEventListener('contextmenu', (e) => {\n\t\t\t\t\te.stopPropagation();\n\t\t\t\t\te.preventDefault();\n\t\t\t\t\tthis.props.dispatch(setRedMarkerAction(false));\n\t\t\t\t\tthis.props.dispatch(setPopupRightClick(true, { lat, lng }, 'popupCurrentPlace'));\n\t\t\t\t});\n\t\t\t\tthis.props.dispatch(setRedMarkerAction(false));\n\t\t\t}\n\t\t\t// redMarkerVisible ? this.props.dispatch(setRedMarkerAction(true, { lat, lng })) : null;\n\t\t} else {\n\t\t\tmessage.error('Không tìm thấy địa điểm !!');\n\t\t}\n\t};\n\n\tremoveMarkerWhatIs = () => {\n\t\tthis.markerWhatIs ? this.markerWhatIs.remove() : null;\n\t};\n\n\t_getInforPlaceAround = async (id) => {\n\t\ttry {\n\t\t\tconst response = await Axios.get(`https://napi.goong.io/v1/marker/get_marker_detail/${id}`);\n\n\t\t\tif (response.data.data) {\n\t\t\t\treturn response.data.data;\n\t\t\t} else {\n\t\t\t\tmessage.error('Không tìm thấy địa điểm !!');\n\t\t\t\treturn null;\n\t\t\t}\n\t\t} catch (error) {\n\t\t\tmessage.error('Không tìm thấy địa điểm !');\n\t\t\tthrow error;\n\t\t}\n\t};\n\n\tselectAroundPlace = async (id) => {\n\t\tconst place = await this._getInforPlaceAround(id);\n\t\tif (place) {\n\t\t\tconst viewport = {\n\t\t\t\tlongitude: Number(place.lng_lat[0]),\n\t\t\t\tlatitude: Number(place.lng_lat[1]),\n\t\t\t\tzoom: 15,\n\t\t\t};\n\t\t\tthis.props.dispatch(setMapViewportAction(viewport));\n\t\t\tthis.setState({\n\t\t\t\tbottomInfoVisible: true,\n\t\t\t\tplaceMouseClick: place,\n\t\t\t});\n\t\t\tthis.props.dispatch(setPopupRightClick(false));\n\t\t} else {\n\t\t\tmessage.error('Không tìm thấy địa điểm !!');\n\t\t}\n\t};\n\n\thandleWhatIs = (redMarkerVisible = true) => {\n\t\tconst { position_popup, isSmallScreen } = this.props;\n\t\tif (isSmallScreen) {\n\t\t\tthis.props.dispatch(\n\t\t\t\tgetDetailByLatLngAction({\n\t\t\t\t\tlatitude: position_popup.lat,\n\t\t\t\t\tlongitude: position_popup.lng,\n\t\t\t\t})\n\t\t\t);\n\n\t\t\tthis.props.dispatch(setBoxVisibleAction('info'));\n\t\t\tthis.props.dispatch(clearSearchAroundAction());\n\t\t\tthis.props.dispatch(setPopupRightClick(false));\n\t\t\tthis.removeMarkerWhatIs();\n\t\t} else {\n\t\t\tthis.selectPlace(position_popup.lat, position_popup.lng, redMarkerVisible);\n\t\t}\n\t};\n\n\thandleFromHere = async (lat, lng) => {\n\t\tlet place;\n\t\tif (!lat || !lng) place = await this._getInforPlace();\n\t\telse {\n\t\t\tplace = await this._getInforPlace(lat, lng);\n\t\t}\n\t\tif (place) {\n\t\t\tconst viewport = {\n\t\t\t\tlongitude: place.geometry.location.lng,\n\t\t\t\tlatitude: place.geometry.location.lat,\n\t\t\t\tzoom: 15,\n\t\t\t};\n\t\t\t!this.props.to_place && this.props.dispatch(setMapViewportAction(viewport));\n\t\t\tthis.props.dispatch(setBoxVisibleAction('navigation'));\n\t\t\tthis.props.dispatch(navigationFromAction(place, `${place.name} - ${place.formatted_address}`));\n\n\t\t\tthis.props.dispatch(setRedMarkerAction(false));\n\t\t\tthis.changeVisibleBottomInfo(false);\n\t\t}\n\t};\n\n\thandleToHere = async (lat, lng) => {\n\t\tlet place;\n\t\tif (!lat || !lng) place = await this._getInforPlace();\n\t\telse {\n\t\t\tplace = await this._getInforPlace(lat, lng);\n\t\t}\n\t\tif (place) {\n\t\t\tthis.props.dispatch(setBoxVisibleAction('navigation'));\n\t\t\tconst viewport = {\n\t\t\t\tlongitude: place.geometry.location.lng,\n\t\t\t\tlatitude: place.geometry.location.lat,\n\t\t\t\tzoom: 15,\n\t\t\t};\n\t\t\tconst my_location = this.props.my_location;\n\t\t\tif (my_location && (this.props.boxVisible === 'search' || this.props.boxVisible === 'info')) {\n\t\t\t\ttry {\n\t\t\t\t\tconst response = await Request.geocode(my_location);\n\t\t\t\t\tif (response.data.results.length > 0) {\n\t\t\t\t\t\tthis.props.dispatch(\n\t\t\t\t\t\t\tnavigationFromAction(\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t...response.data.results[0],\n\t\t\t\t\t\t\t\t\tname: response.data.results[0].address_components[0].long_name,\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t'Vị trí của bạn'\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t} catch (error) {\n\t\t\t\t\tthrow error;\n\t\t\t\t}\n\t\t\t}\n\t\t\t!this.props.from_place && this.props.dispatch(setMapViewportAction(viewport));\n\t\t\tthis.props.dispatch(navigationToAction(place, `${place.name} - ${place.formatted_address}`));\n\t\t\tthis.props.dispatch(setBoxVisibleAction('navigation'));\n\t\t\tthis.props.dispatch(setRedMarkerAction(false));\n\t\t\tthis.changeVisibleBottomInfo(false);\n\t\t}\n\t};\n\n\thandleDeleteLocation = () => {\n\t\tconst { type_popup } = this.props;\n\t\tif (type_popup === 'popupFromPlace') {\n\t\t\tthis.props.dispatch(navigationFromAction(null, ''));\n\t\t} else if (type_popup === 'popupToPlace') {\n\t\t\tthis.props.dispatch(navigationToAction(null, ''));\n\t\t}\n\t\tthis.props.dispatch(clearResultAction());\n\t};\n\n\thandleSearchAround = async () => {\n\t\tconst place = await this._getInforPlace();\n\t\tif (place) {\n\t\t\tconst viewport = {\n\t\t\t\tlongitude: place.geometry.location.lng,\n\t\t\t\tlatitude: place.geometry.location.lat,\n\t\t\t\tzoom: 15,\n\t\t\t};\n\t\t\tconst location = {\n\t\t\t\tlat: place.geometry.location.lat,\n\t\t\t\tlng: place.geometry.location.lng,\n\t\t\t};\n\t\t\tthis.props.dispatch(setBoxVisibleAction('search'));\n\t\t\tthis.props.dispatch(setMapViewportAction(viewport));\n\t\t\tthis.props.dispatch(searchAroundAction(location, this.props.viewport.zoom));\n\t\t\tthis.setState({\n\t\t\t\tbottomInfoVisible: false,\n\t\t\t});\n\t\t}\n\t};\n\n\t_selectAroundPlace = (type, place) => {\n\t\tif (type !== 'center') {\n\t\t\tthis.props.dispatch(selectAroundPlaceAction(place));\n\t\t\tthis.selectAroundPlace(place?.id);\n\t\t} else {\n\t\t\tthis.props.dispatch(selectAroundPlaceAction(place));\n\t\t\tthis.selectPlace(place.geometry.location.lat, place.geometry.location.lng, false);\n\t\t}\n\t};\n\n\thandleToAroundPlace = async () => {\n\t\tlet place = null;\n\t\tthis.props.around_places.map((item) => {\n\t\t\tif (item.lng_lat[0] * 1 === this.popupRightClick.getLngLat().lng && item.lng_lat[1] * 1 === this.popupRightClick.getLngLat().lat) {\n\t\t\t\tplace = item;\n\t\t\t}\n\t\t});\n\t\tif (place) {\n\t\t\ttry {\n\t\t\t\tthis.props.dispatch(setPopupRightClick(false));\n\t\t\t\tconst place_center = this.props.around_place_center;\n\t\t\t\tthis.props.dispatch(navigationFromAction(place_center, `${place_center.name} - ${place_center.formatted_address}`));\n\t\t\t\tconst response = await Axios.get(`https://napi.goong.io/v1/marker/get_marker_detail/${place.id}`);\n\n\t\t\t\tplace = response.data?.data;\n\t\t\t\tplace = {\n\t\t\t\t\t...place,\n\t\t\t\t\tplace_id: place._id,\n\t\t\t\t\tgeometry: {\n\t\t\t\t\t\tlocation: {\n\t\t\t\t\t\t\tlat: Number(place.lng_lat[1]),\n\t\t\t\t\t\t\tlng: Number(place.lng_lat[0]),\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t\tformatted_address: place.description.address,\n\t\t\t\t};\n\t\t\t\tthis.props.dispatch(navigationToAction(place, `${place.name} - ${place.formatted_address}`));\n\t\t\t\tthis.props.dispatch(setBoxVisibleAction('navigation'));\n\t\t\t} catch (error) {\n\t\t\t\tmessage.error('Không tìm thấy địa điểm !');\n\t\t\t}\n\t\t} else {\n\t\t\tmessage.error('Không tìm thấy địa điểm !');\n\t\t}\n\t};\n\n\tremoveMarkerPopup = () => {\n\t\tif (this.markerCurrentPlace) this.markerCurrentPlace.remove();\n\t\tif (this.popupRightClick) this.popupRightClick.remove();\n\t\tif (this.props.around_places) this.props.dispatch(clearSearchAroundAction());\n\t\tif (this.redMarker) this.redMarker.remove();\n\t};\n\n\tgetAddressGeocode = (place) => {\n\t\tlet result = [];\n\t\tplace.address_components?.slice(1).map((item) => {\n\t\t\tresult.push(item.long_name);\n\t\t});\n\t\treturn result.join(',');\n\t};\n\n\tcomponentDidUpdate(prevProps) {\n\t\tif (this.props.isSmallScreen !== prevProps.isSmallScreen) {\n\t\t\tif (!this.props.isSmallScreen && !this.navigation) {\n\t\t\t\tthis.navigation = new maplibregl.NavigationControl();\n\t\t\t\tthis.map.addControl(this.navigation);\n\t\t\t} else if (this.props.isSmallScreen && this.navigation) {\n\t\t\t\tthis.map.removeControl(this.navigation);\n\t\t\t\tthis.navigation = null;\n\t\t\t}\n\t\t}\n\n\t\tif (!equal(prevProps.positionMarkerSelect, this.props.positionMarkerSelect) && this.props.positionMarkerSelect) {\n\t\t\tif (this.redMarker) {\n\t\t\t\tthis.redMarker = this.redMarker.setLngLat(this.props.positionMarkerSelect).addTo(this.map);\n\t\t\t} else {\n\t\t\t\tconst el = document.createElement('div');\n\t\t\t\tel.innerHTML = ReactDOMServer.renderToStaticMarkup(<Marker size={22} />);\n\t\t\t\t// Marker chuột phải\n\t\t\t\tthis.redMarker = new maplibregl.Marker({ anchor: 'bottom', element: el }).setLngLat(this.props.positionMarkerSelect).addTo(this.map);\n\n\t\t\t\tthis.redMarker.getElement().addEventListener('contextmenu', (e) => {\n\t\t\t\t\te.stopPropagation();\n\t\t\t\t\te.preventDefault();\n\t\t\t\t\tthis.props.dispatch(setPopupRightClick(true, this.props.positionMarkerSelect, 'normal'));\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\n\t\tif (prevProps.markerSelect !== this.props.markerSelect) {\n\t\t\tif (!this.props.markerSelect) {\n\t\t\t\tthis.redMarker?.remove();\n\t\t\t}\n\t\t}\n\n\t\tif (this.props.popup_visible && (!equal(prevProps.position_popup, this.props.position_popup) || this.props.type_popup !== prevProps.type_popup) && this.props.position_popup) {\n\t\t\tthis.popupRightClick = this.popupRightClick\n\t\t\t\t? this.popupRightClick\n\t\t\t\t\t\t.setLngLat([this.props.position_popup.lng, this.props.position_popup.lat])\n\t\t\t\t\t\t.addTo(this.map)\n\t\t\t\t\t\t.setHTML(\n\t\t\t\t\t\t\tReactDOMServer.renderToStaticMarkup(\n\t\t\t\t\t\t\t\t<MenuRightClick\n\t\t\t\t\t\t\t\t\tdispatch={this.props.dispatch}\n\t\t\t\t\t\t\t\t\tposition_popup={this.props.position_popup}\n\t\t\t\t\t\t\t\t\ttype_popup={this.props.type_popup}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t)\n\t\t\t\t: new maplibregl.Popup({\n\t\t\t\t\t\tcloseButton: false,\n\t\t\t\t\t\tanchor: 'top',\n\t\t\t\t\t\tcloseOnClick: false,\n\t\t\t\t\t\toffset: [0, 5],\n\t\t\t\t  })\n\t\t\t\t\t\t.setLngLat([this.props.position_popup.lng, this.props.position_popup.lat])\n\t\t\t\t\t\t.setHTML(\n\t\t\t\t\t\t\tReactDOMServer.renderToStaticMarkup(\n\t\t\t\t\t\t\t\t<MenuRightClick\n\t\t\t\t\t\t\t\t\tdispatch={this.props.dispatch}\n\t\t\t\t\t\t\t\t\tposition_popup={this.props.position_popup}\n\t\t\t\t\t\t\t\t\ttype_popup={this.props.type_popup}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t)\n\t\t\t\t\t\t.addTo(this.map);\n\t\t}\n\n\t\tif (this.popupRightClick && !this.props.popup_visible) {\n\t\t\tthis.popupRightClick.remove();\n\t\t}\n\n\t\tif (!equal(prevProps.current_place, this.props.current_place) && this.props.current_place) {\n\t\t\tconst selectedPlace = this.props.current_place;\n\n\t\t\tthis.map.flyTo({\n\t\t\t\tcenter: [selectedPlace.geometry.location.lng, selectedPlace.geometry.location.lat],\n\t\t\t\tzoom: 15,\n\t\t\t\tspeed: 1.5,\n\t\t\t\tcurve: 1,\n\t\t\t});\n\t\t\tthis.props.dispatch(setCollapsedInfoBoxAction(false));\n\t\t\tthis.props.dispatch(setRedMarkerAction(false));\n\t\t\tthis.setState({\n\t\t\t\tbottomInfoVisible: false,\n\t\t\t});\n\t\t}\n\n\t\tif (!equal(prevProps.viewport, this.props.viewport) && this.props.viewport) {\n\t\t\tthis.map.flyTo({\n\t\t\t\tcenter: [this.props.viewport.longitude, this.props.viewport.latitude],\n\t\t\t\tzoom: this.props.viewport.zoom,\n\t\t\t\tspeed: 2,\n\t\t\t});\n\t\t}\n\n\t\tif (!equal(prevProps.around_place_center, this.props.around_place_center)) {\n\t\t\tthis.props.dispatch(setRedMarkerAction(false));\n\t\t}\n\n\t\tif (!equal(prevProps.boxVisible, this.props.boxVisible) && this.props.boxVisible === 'navigation') {\n\t\t\tthis.removeMarkerPopup();\n\t\t}\n\n\t\tif (!equal(prevProps.result_select, this.props.result_select) || !equal(prevProps.result_navigation, this.props.result_navigation)) {\n\t\t\tconst { result_select, result_navigation, boxVisible, from_place, to_place } = this.props;\n\t\t\tlet dashedLineGeoJSON = [],\n\t\t\t\tpolylineGeoJSON = [];\n\t\t\tthis.result_navigation = [];\n\n\t\t\tif ((boxVisible !== 'navigation' && boxVisible !== 'iframe') || !result_navigation) {\n\t\t\t\t// Remove cac layer/source\n\t\t\t\tif (this.map.getLayer(`route-layer-fastest`)) this.map.removeLayer(`route-layer-fastest`);\n\t\t\t\tif (this.map.getLayer(`route-layer-shortest`)) this.map.removeLayer(`route-layer-shortest`);\n\t\t\t\tif (this.map.getLayer(`walk-layer-0`)) this.map.removeLayer(`walk-layer-0`);\n\t\t\t\tif (this.map.getLayer(`walk-layer-1`)) this.map.removeLayer(`walk-layer-1`);\n\n\t\t\t\tif (this.map.getSource(`route-source-fastest`)) this.map.removeSource(`route-source-fastest`);\n\t\t\t\tif (this.map.getSource(`route-source-shortest`)) this.map.removeSource(`route-source-shortest`);\n\t\t\t\tif (this.map.getSource(`walk-source-0`)) this.map.removeSource(`walk-source-0`);\n\t\t\t\tif (this.map.getSource(`walk-source-1`)) this.map.removeSource(`walk-source-1`);\n\n\t\t\t\tthis.popup_navigation[0]?.remove();\n\t\t\t\tthis.popup_navigation[1]?.remove();\n\t\t\t} else {\n\t\t\t\tif (result_navigation) {\n\t\t\t\t\tlet distance = '';\n\t\t\t\t\tif (localStorage.getItem('unit') === 'KILOMETERS') {\n\t\t\t\t\t\tdistance = `${(result_navigation.fastest[0].legs[0].distance.value / 1000).toFixed(1)} KM`;\n\t\t\t\t\t} else if (localStorage.getItem('unit') === 'MILES') {\n\t\t\t\t\t\tdistance = `${((result_navigation.fastest[0].legs[0].distance.value / 1000) * Mile_Travel.MILES).toFixed(1)} Dặm`;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tdistance = `${(result_navigation.fastest[0].legs[0].distance.value / 1000).toFixed(1)} KM`;\n\t\t\t\t\t}\n\t\t\t\t\tlet coordinateObject1 = {};\n\t\t\t\t\tcoordinateObject1.coordinates = this.decodePolyline(result_navigation.fastest[0].overview_polyline.points);\n\t\t\t\t\tcoordinateObject1.type = 'LineString';\n\t\t\t\t\tpolylineGeoJSON.push(coordinateObject1);\n\t\t\t\t\tpolylineGeoJSON[0].roadWay = 'fastest';\n\t\t\t\t\tlet coordinateObject2 = {};\n\t\t\t\t\tcoordinateObject2.coordinates = this.decodePolyline(result_navigation.shortest[0].overview_polyline.points);\n\t\t\t\t\tcoordinateObject2.type = 'LineString';\n\t\t\t\t\tpolylineGeoJSON.push(coordinateObject2);\n\t\t\t\t\tpolylineGeoJSON[1].roadWay = 'shortest';\n\n\t\t\t\t\tdashedLineGeoJSON.push({\n\t\t\t\t\t\ttype: 'LineString',\n\t\t\t\t\t\tcoordinates: [\n\t\t\t\t\t\t\t[polylineGeoJSON[0].coordinates[0][0], polylineGeoJSON[0].coordinates[0][1]],\n\t\t\t\t\t\t\t[from_place?.geometry.location.lng, from_place?.geometry.location.lat],\n\t\t\t\t\t\t],\n\t\t\t\t\t});\n\t\t\t\t\tdashedLineGeoJSON.push({\n\t\t\t\t\t\ttype: 'LineString',\n\t\t\t\t\t\tcoordinates: [\n\t\t\t\t\t\t\t[polylineGeoJSON[0].coordinates[polylineGeoJSON[0].coordinates.length - 1][0], polylineGeoJSON[0].coordinates[polylineGeoJSON[0].coordinates.length - 1][1]],\n\t\t\t\t\t\t\t[to_place?.geometry.location.lng, to_place?.geometry.location.lat],\n\t\t\t\t\t\t],\n\t\t\t\t\t});\n\n\t\t\t\t\tpolylineGeoJSON.map((item, i) => {\n\t\t\t\t\t\t// Layer dan duong\n\t\t\t\t\t\tif (this.map.getLayer(`route-layer-${item.roadWay}`)) this.map.removeLayer(`route-layer-${item.roadWay}`);\n\t\t\t\t\t\tif (this.map.getSource(`route-source-${item.roadWay}`)) this.map.removeSource(`route-source-${item.roadWay}`);\n\t\t\t\t\t\tthis.map.addSource(`route-source-${item.roadWay}`, {\n\t\t\t\t\t\t\ttype: 'geojson',\n\t\t\t\t\t\t\tdata: {\n\t\t\t\t\t\t\t\ttype: 'Feature',\n\t\t\t\t\t\t\t\tproperties: {},\n\t\t\t\t\t\t\t\tgeometry: item,\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t});\n\t\t\t\t\t\tthis.map.addLayer({\n\t\t\t\t\t\t\tid: `route-layer-${item.roadWay}`,\n\t\t\t\t\t\t\ttype: 'line',\n\t\t\t\t\t\t\tsource: `route-source-${item.roadWay}`,\n\t\t\t\t\t\t\tlayout: {\n\t\t\t\t\t\t\t\t'line-join': 'round',\n\t\t\t\t\t\t\t\t'line-cap': 'round',\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tpaint: {\n\t\t\t\t\t\t\t\t'line-color': 'rgb(24, 144, 255)',\n\t\t\t\t\t\t\t\t'line-width': 7,\n\t\t\t\t\t\t\t\t'line-opacity': item.roadWay === result_select ? 1 : 0.5,\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t});\n\t\t\t\t\t\t// Layer di bo\n\n\t\t\t\t\t\tif (this.map.getLayer(`walk-layer-${i}`)) this.map.removeLayer(`walk-layer-${i}`);\n\t\t\t\t\t\tif (this.map.getSource(`walk-source-${i}`)) this.map.removeSource(`walk-source-${i}`);\n\t\t\t\t\t\tthis.map.addSource(`walk-source-${i}`, {\n\t\t\t\t\t\t\ttype: 'geojson',\n\t\t\t\t\t\t\tdata: {\n\t\t\t\t\t\t\t\ttype: 'Feature',\n\t\t\t\t\t\t\t\tproperties: {},\n\t\t\t\t\t\t\t\tgeometry: dashedLineGeoJSON[i],\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t});\n\t\t\t\t\t\tthis.map.addLayer({\n\t\t\t\t\t\t\tid: `walk-layer-${i}`,\n\t\t\t\t\t\t\ttype: 'line',\n\t\t\t\t\t\t\tsource: `walk-source-${i}`,\n\t\t\t\t\t\t\tlayout: {\n\t\t\t\t\t\t\t\t'line-join': 'round',\n\t\t\t\t\t\t\t\t'line-cap': 'round',\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tpaint: {\n\t\t\t\t\t\t\t\t'line-color': 'rgb(133, 135, 126)',\n\t\t\t\t\t\t\t\t'line-opacity': 1,\n\t\t\t\t\t\t\t\t'line-width': 6,\n\t\t\t\t\t\t\t\t'line-dasharray': [0.2, 2],\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t});\n\t\t\t\t\t\t// Add Popup hien ket qua\n\n\t\t\t\t\t\tif (this.popup_navigation[i]) {\n\t\t\t\t\t\t\tthis.popup_navigation[i]?.remove();\n\t\t\t\t\t\t\tthis.popup_navigation[i] = null;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tthis.popup_navigation[i] = new maplibregl.Popup({\n\t\t\t\t\t\t\tcloseButton: false,\n\t\t\t\t\t\t\tanchor: 'top',\n\t\t\t\t\t\t\tcloseOnClick: false,\n\t\t\t\t\t\t\tclassName: item.roadWay === result_select ? 'popup-z-index1' : 'popup-z-index2',\n\t\t\t\t\t\t})\n\t\t\t\t\t\t\t.setLngLat([i === 0 ? item.coordinates[Math.trunc(0.75 * item.coordinates.length)][0] : item.coordinates[Math.trunc(0.25 * item.coordinates.length)][0], i === 0 ? item.coordinates[Math.trunc(item.coordinates.length * 0.75)][1] : item.coordinates[Math.trunc(item.coordinates.length * 0.25)][1]])\n\t\t\t\t\t\t\t.setHTML(\n\t\t\t\t\t\t\t\tReactDOMServer.renderToStaticMarkup(\n\t\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t\tclassName=\"tooltipNavigation\"\n\t\t\t\t\t\t\t\t\t\tid={`popup-${item.roadWay}`}>\n\t\t\t\t\t\t\t\t\t\t<p>{distance}</p>\n\t\t\t\t\t\t\t\t\t\t<p>{result_navigation[item.roadWay][0].legs[0].duration.text}</p>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t.setMaxWidth('300px')\n\t\t\t\t\t\t\t.addTo(this.map);\n\t\t\t\t\t\tdocument.getElementById(`popup-${item.roadWay}`).addEventListener('click', () => {\n\t\t\t\t\t\t\tthis.props.dispatch(selectResultAction(item.roadWay));\n\t\t\t\t\t\t});\n\t\t\t\t\t\tconst normalizeBounds = (bounds) => {\n\t\t\t\t\t\t\tconst [firstPoint, secondPoint] = bounds;\n\n\t\t\t\t\t\t\tconst minLat = Math.min(firstPoint[1], secondPoint[1]);\n\t\t\t\t\t\t\tconst maxLat = Math.max(firstPoint[1], secondPoint[1]);\n\n\t\t\t\t\t\t\tconst minLng = Math.min(firstPoint[0], secondPoint[0]);\n\t\t\t\t\t\t\tconst maxLng = Math.max(firstPoint[0], secondPoint[0]);\n\n\t\t\t\t\t\t\treturn [\n\t\t\t\t\t\t\t\t[minLng, minLat],\n\t\t\t\t\t\t\t\t[maxLng, maxLat],\n\t\t\t\t\t\t\t];\n\t\t\t\t\t\t};\n\t\t\t\t\t\tconst bound = normalizeBounds([item.coordinates[0], item.coordinates[item.coordinates.length - 1]]);\n\t\t\t\t\t\tif (isMobile) {\n\t\t\t\t\t\t\tthis.navigationView = this.map.cameraForBounds(bound, {\n\t\t\t\t\t\t\t\tpadding: { top: 10, bottom: 25, left: 24, right: 24 },\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tthis.navigationView = this.map.cameraForBounds(bound, {\n\t\t\t\t\t\t\t\tpadding: { top: 40, bottom: 40, left: 200, right: 40 },\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\n\t\t\t\t\tthis.view = {\n\t\t\t\t\t\tlatitude: this.navigationView.center.lat,\n\t\t\t\t\t\tlongitude: this.navigationView.center.lng,\n\t\t\t\t\t\tzoom: this.navigationView.zoom,\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tthis.props.dispatch(setMapViewportAction(this.view));\n\t\t}\n\t\tif (!equal(prevProps.from_place, this.props.from_place)) {\n\t\t\tconst place = this.props.from_place;\n\t\t\tif (place) {\n\t\t\t\tconst popup = new maplibregl.Popup({\n\t\t\t\t\toffset: [0, -18],\n\t\t\t\t\tclassName: 'tooltip-marker',\n\t\t\t\t\tcloseButton: false,\n\t\t\t\t})\n\t\t\t\t\t.setHTML(`<div class=\"ant-tooltip-inner tooltip-info-location\">${place.name}</div>`)\n\t\t\t\t\t.setMaxWidth('150px');\n\t\t\t\tif (this.start_marker) {\n\t\t\t\t\tthis.start_marker = this.start_marker.setLngLat(place.geometry.location).setPopup(popup).addTo(this.map);\n\t\t\t\t} else {\n\t\t\t\t\tconst marker_start = document.createElement('div');\n\t\t\t\t\tmarker_start.innerHTML = ReactDOMServer.renderToStaticMarkup(\n\t\t\t\t\t\t<div className=\"marker-start\">\n\t\t\t\t\t\t\t<img\n\t\t\t\t\t\t\t\tsrc={images.button}\n\t\t\t\t\t\t\t\tstyle={{ width: 12 }}\n\t\t\t\t\t\t\t\talt=\"\"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t);\n\t\t\t\t\tthis.start_marker = new maplibregl.Marker({\n\t\t\t\t\t\tanchor: 'center',\n\t\t\t\t\t\telement: marker_start,\n\t\t\t\t\t})\n\t\t\t\t\t\t.setPopup(popup)\n\t\t\t\t\t\t.setLngLat(place.geometry.location)\n\t\t\t\t\t\t.addTo(this.map);\n\t\t\t\t\tthis.start_marker.getElement().addEventListener('contextmenu', (e) => {\n\t\t\t\t\t\te.stopPropagation();\n\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\tconst lngLat = this.start_marker.getLngLat();\n\t\t\t\t\t\tthis.props.dispatch(setPopupRightClick(true, lngLat, 'popupFromPlace'));\n\t\t\t\t\t\tthis.props.dispatch(setRedMarkerAction(false));\n\t\t\t\t\t});\n\t\t\t\t\tthis.start_marker.getElement().addEventListener('click', () => {\n\t\t\t\t\t\tif (popup.isOpen()) {\n\t\t\t\t\t\t\tthis.start_marker.togglePopup();\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\tthis.start_marker.getElement().addEventListener('mouseenter', () => this.start_marker.togglePopup());\n\t\t\t\t\tthis.start_marker.getElement().addEventListener('mouseleave', () => this.start_marker.togglePopup());\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tif (equal(this.start_marker.getLngLat(), this.props.position_popup)) {\n\t\t\t\t\tthis.props.dispatch(setPopupRightClick(false));\n\t\t\t\t}\n\t\t\t\tif (equal(prevProps.from_place?.place_id, this.state.placeMouseClick?.place_id)) {\n\t\t\t\t\tthis.changeVisibleBottomInfo(false);\n\t\t\t\t}\n\t\t\t\tthis.changeVisibleBottomInfo(false);\n\t\t\t\tthis.start_marker ? this.start_marker.remove() : null;\n\t\t\t}\n\t\t}\n\n\t\tif (!equal(prevProps.to_place, this.props.to_place)) {\n\t\t\tconst place = this.props.to_place;\n\t\t\tif (place) {\n\t\t\t\tconst popup = new maplibregl.Popup({\n\t\t\t\t\toffset: [0, -18],\n\t\t\t\t\tclassName: 'tooltip-marker',\n\t\t\t\t\tcloseButton: false,\n\t\t\t\t})\n\t\t\t\t\t.setHTML(`<div class=\"ant-tooltip-inner tooltip-info-location\">${place.name}</div>`)\n\t\t\t\t\t.setMaxWidth('150px');\n\t\t\t\tif (this.end_marker) {\n\t\t\t\t\tthis.to_place = this.end_marker.setPopup(popup).setLngLat(place.geometry.location).addTo(this.map);\n\t\t\t\t} else {\n\t\t\t\t\tconst marker_end = document.createElement('div');\n\t\t\t\t\tmarker_end.innerHTML = ReactDOMServer.renderToStaticMarkup(\n\t\t\t\t\t\t<div className=\"marker-end\">\n\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t<img\n\t\t\t\t\t\t\t\t\tsrc={images.marker}\n\t\t\t\t\t\t\t\t\talt=\"\"\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t);\n\t\t\t\t\tthis.end_marker = new maplibregl.Marker({\n\t\t\t\t\t\tanchor: 'center',\n\t\t\t\t\t\telement: marker_end,\n\t\t\t\t\t})\n\t\t\t\t\t\t.setPopup(popup)\n\t\t\t\t\t\t.setLngLat(place.geometry.location)\n\t\t\t\t\t\t.addTo(this.map);\n\t\t\t\t\tthis.end_marker.getElement().addEventListener('contextmenu', (e) => {\n\t\t\t\t\t\te.stopPropagation();\n\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\tconst lngLat = this.end_marker.getLngLat();\n\t\t\t\t\t\tthis.props.dispatch(setPopupRightClick(true, lngLat, 'popupToPlace'));\n\t\t\t\t\t\tthis.props.dispatch(setRedMarkerAction(false));\n\t\t\t\t\t});\n\t\t\t\t\tthis.end_marker.getElement().addEventListener('click', () => {\n\t\t\t\t\t\tif (popup.isOpen()) {\n\t\t\t\t\t\t\tthis.end_marker.togglePopup();\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\tthis.end_marker.getElement().addEventListener('mouseenter', () => this.end_marker.togglePopup());\n\t\t\t\t\tthis.end_marker.getElement().addEventListener('mouseleave', () => this.end_marker.togglePopup());\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tif (equal(this.start_marker?.getLngLat(), this.props.position_popup)) {\n\t\t\t\t\tthis.props.dispatch(setPopupRightClick(false));\n\t\t\t\t}\n\n\t\t\t\tif (equal(prevProps.to_place?.place_id, this.state.placeMouseClick?.place_id)) {\n\t\t\t\t\tthis.changeVisibleBottomInfo(false);\n\t\t\t\t}\n\t\t\t\tthis.end_marker ? this.end_marker.remove() : null;\n\t\t\t}\n\t\t}\n\n\t\tif (!equal(prevProps.around_places, this.props.around_places) || !equal(prevProps.around_place_select, this.props.around_place_select)) {\n\t\t\tif (this.list_marker_around?.length > 0) {\n\t\t\t\tthis.list_marker_around.forEach((item) => {\n\t\t\t\t\titem.remove();\n\t\t\t\t});\n\t\t\t\tthis.list_marker_around = [];\n\t\t\t}\n\t\t\tconst { around_places, around_place_center } = this.props;\n\t\t\tif (around_places.length > 0) {\n\t\t\t\tthis.list_marker_around = [];\n\t\t\t\tlet el = document.createElement('div');\n\t\t\t\tel.innerHTML = ReactDOMServer.renderToStaticMarkup(\n\t\t\t\t\t<Marker\n\t\t\t\t\t\tid=\"marker-center\"\n\t\t\t\t\t\ttype=\"center\"\n\t\t\t\t\t/>\n\t\t\t\t);\n\t\t\t\tthis.list_marker_around[0] = new maplibregl.Marker(el, {\n\t\t\t\t\tanchor: 'bottom',\n\t\t\t\t})\n\t\t\t\t\t.setPopup(\n\t\t\t\t\t\tnew maplibregl.Popup({\n\t\t\t\t\t\t\toffset: [0, -32],\n\t\t\t\t\t\t\tclassName: 'tooltip-marker',\n\t\t\t\t\t\t\tcloseButton: false,\n\t\t\t\t\t\t})\n\t\t\t\t\t\t\t.setHTML(`<div class=\"ant-tooltip-inner tooltip-info-location\">${around_place_center.name}</div>`)\n\t\t\t\t\t\t\t.setMaxWidth('150px')\n\t\t\t\t\t)\n\t\t\t\t\t.setLngLat(around_place_center.geometry.location)\n\t\t\t\t\t.addTo(this.map);\n\t\t\t\tconst markerCenterDiv = this.list_marker_around[0].getElement();\n\n\t\t\t\tmarkerCenterDiv.addEventListener('click', () => {\n\t\t\t\t\tthis._selectAroundPlace('center', around_place_center);\n\t\t\t\t\tthis.props.dispatch(setRedMarkerAction(false));\n\t\t\t\t\tif (this.list_marker_around[0].getPopup().isOpen()) {\n\t\t\t\t\t\tthis.list_marker_around[0].togglePopup();\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\tmarkerCenterDiv.addEventListener('contextmenu', (e) => {\n\t\t\t\t\te.stopPropagation();\n\t\t\t\t\te.preventDefault();\n\t\t\t\t\tthis.props.dispatch(setRedMarkerAction(false));\n\t\t\t\t\tthis.props.dispatch(setPopupRightClick(true, around_place_center.geometry.location, 'normal'));\n\t\t\t\t});\n\n\t\t\t\tmarkerCenterDiv.addEventListener('mouseenter', () => this.list_marker_around[0].togglePopup());\n\t\t\t\tmarkerCenterDiv.addEventListener('mouseleave', () => this.list_marker_around[0].togglePopup());\n\n\t\t\t\taround_places.forEach((item, i) => {\n\t\t\t\t\tconst popup = new maplibregl.Popup({\n\t\t\t\t\t\toffset: [0, -32],\n\t\t\t\t\t\tclassName: 'tooltip-marker',\n\t\t\t\t\t\tcloseButton: false,\n\t\t\t\t\t\tanchor: 'bottom',\n\t\t\t\t\t})\n\t\t\t\t\t\t.setHTML(`<div class=\"ant-tooltip-inner tooltip-info-location\">${item.name}</div>`)\n\t\t\t\t\t\t.setMaxWidth('150px');\n\t\t\t\t\tel = document.createElement('div');\n\t\t\t\t\tel.innerHTML = ReactDOMServer.renderToStaticMarkup(\n\t\t\t\t\t\t<Marker\n\t\t\t\t\t\t\ttype=\"around\"\n\t\t\t\t\t\t\tplace={item}\n\t\t\t\t\t\t\tplace_select={this.props.around_place_select}\n\t\t\t\t\t\t\tid={`marker-around-${i}`}\n\t\t\t\t\t\t/>\n\t\t\t\t\t);\n\t\t\t\t\tthis.list_marker_around.push(\n\t\t\t\t\t\tnew maplibregl.Marker(el, { anchor: 'bottom' })\n\t\t\t\t\t\t\t.setPopup(popup)\n\t\t\t\t\t\t\t.setLngLat([item.lng_lat[0] * 1, item.lng_lat[1] * 1])\n\t\t\t\t\t\t\t.addTo(this.map)\n\t\t\t\t\t);\n\t\t\t\t\tconst markerDiv = this.list_marker_around[i + 1].getElement();\n\n\t\t\t\t\tmarkerDiv.addEventListener('click', (e) => {\n\t\t\t\t\t\te.stopPropagation();\n\t\t\t\t\t\tthis.props.dispatch(setRedMarkerAction(false));\n\t\t\t\t\t\tthis._selectAroundPlace('around', item);\n\t\t\t\t\t\tif (popup.isOpen()) {\n\t\t\t\t\t\t\tthis.list_marker_around[i + 1].togglePopup();\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\n\t\t\t\t\tmarkerDiv.addEventListener('contextmenu', (e) => {\n\t\t\t\t\t\te.stopPropagation();\n\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\tthis.props.dispatch(setPopupRightClick(true, { lng: item.lng_lat[0] * 1, lat: item.lng_lat[1] * 1 }, 'around'));\n\t\t\t\t\t\tthis.props.dispatch(setRedMarkerAction(false));\n\t\t\t\t\t});\n\n\t\t\t\t\tmarkerDiv.addEventListener('mouseenter', () => this.list_marker_around[i + 1].togglePopup());\n\t\t\t\t\tmarkerDiv.addEventListener('mouseleave', () => this.list_marker_around[i + 1].togglePopup());\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\n\t\tif (this.props.boxVisible === 'info' && this.props.current_place) {\n\t\t\tif (!this.markerCurrentPlace) {\n\t\t\t\tconst el = document.createElement('div');\n\t\t\t\tel.innerHTML = ReactDOMServer.renderToStaticMarkup(\n\t\t\t\t\t// <Marker type=\"normal\" />\n\t\t\t\t\t<div className=\"marker-histories\">\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<img\n\t\t\t\t\t\t\t\tsrc={images.marker}\n\t\t\t\t\t\t\t\talt=\"\"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t);\n\t\t\t\t// Marker info\n\t\t\t\tthis.markerCurrentPlace = new maplibregl.Marker({\n\t\t\t\t\tanchor: 'bottom',\n\t\t\t\t\telement: el,\n\t\t\t\t})\n\t\t\t\t\t.setLngLat(this.props.current_place?.geometry?.location)\n\t\t\t\t\t.addTo(this.map);\n\t\t\t\tthis.markerCurrentPlace.getElement().addEventListener('contextmenu', (e) => {\n\t\t\t\t\te.stopPropagation();\n\t\t\t\t\te.preventDefault();\n\t\t\t\t\tconst lngLat = this.markerCurrentPlace.getLngLat();\n\t\t\t\t\tthis.props.dispatch(setPopupRightClick(true, lngLat, 'popupCurrentPlace'));\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tthis.markerCurrentPlace.setLngLat(this.props.current_place.geometry.location).addTo(this.map);\n\t\t\t}\n\t\t}\n\n\t\tif (this.props.boxVisible !== 'info' && this.markerCurrentPlace) {\n\t\t\tthis.markerCurrentPlace.remove();\n\t\t\tthis.markerCurrentPlace = null;\n\t\t}\n\t\tif (this.props.boxVisible === 'detailsrestaurant' && this.props.restaurantData) {\n\t\t\tif (this.props.restaurantData.length !== 0) {\n\t\t\t\tfor (let item of this.props.restaurantData) {\n\t\t\t\t\tconst marker_restaurant = document.createElement('div');\n\t\t\t\t\tmarker_restaurant.innerHTML = ReactDOMServer.renderToStaticMarkup(\n\t\t\t\t\t\t// <MarkerNavigation id=\"end-marker\" type=\"histories\" />\n\t\t\t\t\t\t<div className=\"marker-histories\">\n\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t<img\n\t\t\t\t\t\t\t\t\tsrc={images.marker}\n\t\t\t\t\t\t\t\t\talt=\"\"\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t);\n\t\t\t\t\tthis.restaurant_marker = new maplibregl.Marker({\n\t\t\t\t\t\tanchor: 'center',\n\t\t\t\t\t\telement: marker_restaurant,\n\t\t\t\t\t})\n\t\t\t\t\t\t// .setPopup(popup)\n\t\t\t\t\t\t.setLngLat(item.geometry.location)\n\t\t\t\t\t\t.addTo(this.map);\n\t\t\t\t\tthis.listRestaurant.push(this.restaurant_marker);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t// console.log('Có')\n\t\t\t\tfor (let marker of this.listRestaurant) {\n\t\t\t\t\tmarker.remove();\n\t\t\t\t}\n\t\t\t\tthis.listRestaurant = [];\n\t\t\t}\n\t\t}\n\n\t\tif (this.props.boxVisible === 'history') {\n\t\t\tfor (let marker of this.listHistories) {\n\t\t\t\tmarker.remove();\n\t\t\t}\n\t\t\tfor (let item of this.props.searchLocalStorage) {\n\t\t\t\tconst marker_history = document.createElement('div');\n\t\t\t\tmarker_history.innerHTML = ReactDOMServer.renderToStaticMarkup(\n\t\t\t\t\t<div className=\"marker-histories\">\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<img\n\t\t\t\t\t\t\t\tsrc={images.marker}\n\t\t\t\t\t\t\t\talt=\"\"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t);\n\t\t\t\tthis.history_marker = new maplibregl.Marker({\n\t\t\t\t\tanchor: 'center',\n\t\t\t\t\telement: marker_history,\n\t\t\t\t})\n\t\t\t\t\t.setLngLat(item.location)\n\t\t\t\t\t.addTo(this.map);\n\t\t\t\tthis.listHistories.push(this.history_marker);\n\t\t\t}\n\t\t} else {\n\t\t\tfor (let marker of this.listHistories) {\n\t\t\t\tmarker.remove();\n\t\t\t}\n\t\t}\n\n\t\t// if (this.props.boxVisible === \"details\") {\n\t\tif (this.props.result_navigation && this.props.boxVisible === 'details') {\n\t\t\tfor (let step of this.props.result_navigation.fastest[0].legs[0].steps) {\n\t\t\t\tconst popup = new maplibregl.Popup({ offset: [0, -32], className: 'tooltip-marker', closeButton: false, anchor: 'bottom' }).setHTML(`<div class=\"ant-tooltip-inner tooltip-info-location\">${step.html_instructions}</div>`).setMaxWidth('150px');\n\t\t\t\tconst marker_step = document.createElement('div');\n\t\t\t\tmarker_step.innerHTML = ReactDOMServer.renderToStaticMarkup(<div className=\"marker-details\"></div>);\n\t\t\t\tthis.step_marker = new maplibregl.Marker({ anchor: 'center', element: marker_step }).setPopup(popup).setLngLat(step.end_location).addTo(this.map);\n\t\t\t\tthis.list.push(this.step_marker);\n\t\t\t}\n\t\t} else {\n\t\t\tfor (let marker of this.list) {\n\t\t\t\tmarker.remove();\n\t\t\t}\n\t\t\tthis.list = [];\n\t\t}\n\t\t// }\n\t\tif (this.props.boxVisible === 'navigation' && isMobile) {\n\t\t\tif (this.props.result_navigation) {\n\t\t\t\tfor (let step of this.props.result_navigation.fastest[0].legs[0].steps) {\n\t\t\t\t\tconst popup = new maplibregl.Popup({ offset: [0, -32], className: 'tooltip-marker', closeButton: false, anchor: 'bottom' }).setHTML(`<div class=\"ant-tooltip-inner tooltip-info-location\">${step.html_instructions}</div>`).setMaxWidth('150px');\n\t\t\t\t\tconst marker_step = document.createElement('div');\n\t\t\t\t\tmarker_step.innerHTML = ReactDOMServer.renderToStaticMarkup(<div className=\"marker-details\"></div>);\n\t\t\t\t\tthis.step_marker = new maplibregl.Marker({ anchor: 'center', element: marker_step }).setPopup(popup).setLngLat(step.end_location).addTo(this.map);\n\t\t\t\t\tthis.list.push(this.step_marker);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tfor (let marker of this.list) {\n\t\t\t\t\tmarker.remove();\n\t\t\t\t}\n\t\t\t\tthis.list = [];\n\t\t\t}\n\t\t}\n\t}\n\n\tdecodePolyline(encoded) {\n\t\tvar points = [];\n\t\tvar index = 0,\n\t\t\tlen = encoded.length;\n\t\tvar lat = 0,\n\t\t\tlng = 0;\n\n\t\twhile (index < len) {\n\t\t\tvar b,\n\t\t\t\tshift = 0,\n\t\t\t\tresult = 0;\n\t\t\tdo {\n\t\t\t\tb = encoded.charAt(index++).charCodeAt(0) - 63;\n\t\t\t\tresult |= (b & 0x1f) << shift;\n\t\t\t\tshift += 5;\n\t\t\t} while (b >= 0x20);\n\t\t\tvar dlat = result & 1 ? ~(result >> 1) : result >> 1;\n\t\t\tlat += dlat;\n\n\t\t\tshift = 0;\n\t\t\tresult = 0;\n\t\t\tdo {\n\t\t\t\tb = encoded.charAt(index++).charCodeAt(0) - 63;\n\t\t\t\tresult |= (b & 0x1f) << shift;\n\t\t\t\tshift += 5;\n\t\t\t} while (b >= 0x20);\n\t\t\tvar dlng = result & 1 ? ~(result >> 1) : result >> 1;\n\t\t\tlng += dlng;\n\n\t\t\tpoints.push([lng * 1e-5, lat * 1e-5]);\n\t\t}\n\n\t\treturn points;\n\t}\n\n\tchangeStyle = () => {\n\t\tconst { style } = this.state;\n\t\tif (style === STYLE_URL.SATELITE + STYLE_KEY) {\n\t\t\tthis.setState({\n\t\t\t\tstyle: STYLE_URL.NORMAL + STYLE_KEY,\n\t\t\t});\n\t\t\tthis.map.setStyle(STYLE_URL.NORMAL + STYLE_KEY);\n\t\t} else {\n\t\t\tthis.setState({\n\t\t\t\tstyle: STYLE_URL.SATELITE + STYLE_KEY,\n\t\t\t});\n\t\t\tthis.map.setStyle(STYLE_URL.SATELITE + STYLE_KEY);\n\t\t}\n\t};\n\n\tcomponentDidMount() {\n\t\twindow.addEventListener('storage', this.handleStorageChange);\n\t\t// console.log(STYLE_URL.NORMAL)\n\t\tconst selectedPlace = this.props.current_place;\n\t\tthis.map = new maplibregl.Map({\n\t\t\tcontainer: 'map', // container id\n\t\t\tstyle: STYLE_URL.NORMAL + STYLE_KEY,\n\t\t\tcenter: selectedPlace ? [selectedPlace.geometry.location.lng, selectedPlace.geometry.location.lat] : [DEFAULT_VIEWPORT.longitude, DEFAULT_VIEWPORT.latitude], // starting position [lng, lat]\n\t\t\tzoom: DEFAULT_VIEWPORT.zoom, // starting zoom\n\t\t});\n\t\tif (selectedPlace) this.props.dispatch(setRedMarkerAction(true, selectedPlace.geometry.location));\n\n\t\tthis.navigation = new maplibregl.NavigationControl();\n\t\tthis.geolocateControl = new maplibregl.GeolocateControl({\n\t\t\tpositionOptions: {\n\t\t\t\tenableHighAccuracy: true,\n\t\t\t},\n\t\t\t// Bật tắt hiển bị vị trí\n\t\t\ttrackUserLocation: true,\n\t\t\t// Hiển thị\n\t\t\tshowUserLocation: true,\n\t\t\t// Tắt vòng tròn to\n\t\t\tshowAccuracyCircle: false,\n\t\t\t// Điều chỉnh mức zoom đến vị trí của mình\n\t\t\tfitBoundsOptions: {\n\t\t\t\tmaxZoom: 15,\n\t\t\t},\n\t\t});\n\n\t\tthis.geolocateControl.on('error', () => {\n\t\t\tmessage.warning('Goong không thể lấy địa điểm hiện tại của bạn !');\n\t\t});\n\n\t\tthis.geolocateControl.on('geolocate', (e) => {\n\t\t\tthis.props.dispatch(\n\t\t\t\tsetMyLocationAction({\n\t\t\t\t\tlatitude: e.coords.latitude,\n\t\t\t\t\tlongitude: e.coords.longitude,\n\t\t\t\t})\n\t\t\t);\n\t\t});\n\n\t\t!isMobile && this.map.addControl(this.navigation);\n\t\t!isMobile && this.map.addControl(this.geolocateControl);\n\n\t\tthis.map.on('click', this._onMouseClick);\n\t\tthis.map.on('contextmenu', this._onRightClick);\n\t\tthis.map.on('load', () => {\n\t\t\tthis.map.resize();\n\n\t\t\tconst pid = new URLSearchParams(window.location.search).get('pid');\n\t\t\tconst location = new URLSearchParams(window.location.search).get('location')?.split(',');\n\t\t\tconst pid_around = new URLSearchParams(window.location.search).get('pid_around');\n\t\t\tconst direction_infor = new URLSearchParams(window.location.search).get('direction');\n\t\t\tif (!direction_infor && !pid && !location && !pid_around && !this.props.current_place) this.geolocateControl?.trigger();\n\t\t\telse {\n\t\t\t\tif (navigator.geolocation) {\n\t\t\t\t\tnavigator.geolocation.getCurrentPosition((position) => {\n\t\t\t\t\t\tthis.props.dispatch(\n\t\t\t\t\t\t\tsetMyLocationAction({\n\t\t\t\t\t\t\t\tlatitude: position.coords.latitude,\n\t\t\t\t\t\t\t\tlongitude: position.coords.longitude,\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t);\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\tthis.map.on('move', () => {\n\t\t\tthis.props.dispatch(\n\t\t\t\tsetCenterLatLngAction({\n\t\t\t\t\tlatitude: this.map.getCenter().lat,\n\t\t\t\t\tlongitude: this.map.getCenter().lng,\n\t\t\t\t})\n\t\t\t);\n\t\t});\n\t\tthis.map.on('style.load', () => {\n\t\t\tthis.map?.addLayer({\n\t\t\t\tid: '3d-buildings',\n\t\t\t\tsource: 'composite',\n\t\t\t\t'source-layer': 'VN_Building',\n\t\t\t\tfilter: ['==', 'extrude', 'true'],\n\t\t\t\ttype: 'fill-extrusion',\n\t\t\t\tminzoom: 15,\n\t\t\t\tpaint: {\n\t\t\t\t\t'fill-extrusion-color': '#aaa',\n\t\t\t\t\t'fill-extrusion-height': {\n\t\t\t\t\t\ttype: 'identity',\n\t\t\t\t\t\tproperty: 'height',\n\t\t\t\t\t},\n\t\t\t\t\t'fill-extrusion-base': {\n\t\t\t\t\t\ttype: 'identity',\n\t\t\t\t\t\tproperty: 'min_height',\n\t\t\t\t\t},\n\t\t\t\t\t'fill-extrusion-opacity': 0.4,\n\t\t\t\t},\n\t\t\t});\n\t\t\tif (this.props.result_navigation) {\n\t\t\t\tif (this.props.result_select === 'fastest') {\n\t\t\t\t\tthis.props.dispatch(selectResultAction('shortest'));\n\t\t\t\t\tthis.props.dispatch(selectResultAction('fastest'));\n\t\t\t\t} else {\n\t\t\t\t\tthis.props.dispatch(selectResultAction('fastest'));\n\t\t\t\t\tthis.props.dispatch(selectResultAction('shortest'));\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t\tdocument.body.addEventListener('click', this._onClickMenu);\n\t\t// this.map.on('click', 'route-layer-fastest', (e) => {\n\t\t//   console.log(e, 'fastest');\n\t\t//   e.originalEvent.stopPropagation();\n\t\t//   e.originalEvent.preventDefault();\n\t\t// });\n\n\t\t// this.map.on('click', 'route-layer-shortest', (e) => {\n\t\t//   console.log(e)\n\t\t// });\n\n\t\tconst direction_infor = new URLSearchParams(window.location.search).get('direction');\n\t\tconst iframe = new URLSearchParams(window.location.search).get('iframe');\n\t\tif (direction_infor) {\n\t\t\tconst coor_from = {\n\t\t\t\tlat: direction_infor.split('&')[0].split(',')[0],\n\t\t\t\tlng: direction_infor.split('&')[0].split(',')[1],\n\t\t\t};\n\t\t\tconst coor_to = {\n\t\t\t\tlat: direction_infor.split('&')[1].split(',')[0],\n\t\t\t\tlng: direction_infor.split('&')[1].split(',')[1],\n\t\t\t};\n\t\t\tif (coor_from.lat && coor_from.lng && coor_to.lat && coor_to.lng) {\n\t\t\t\t// this.handleFromHere(coor_from.lat, coor_from.lng);\n\t\t\t\t// this.handleToHere(coor_to.lat, coor_to.lng);\n\t\t\t\tif (iframe != null) {\n\t\t\t\t\tthis.navigationByURLIframe(coor_from, coor_to);\n\t\t\t\t} else {\n\t\t\t\t\tthis.navigationByURL(coor_from, coor_to);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// Fetch parking lots\n\t\tthis.props.dispatch(getParkingLotsRequest());\n\t}\n\n\tnavigationByURLIframe = async (from, to) => {\n\t\tthis.props.dispatch(setBoxVisibleAction('iframe'));\n\n\t\tthis.props.dispatch(setRedMarkerAction(false));\n\t\tthis.changeVisibleBottomInfo(false);\n\t\tlet fromplace;\n\t\tif (!from.lat || !from.lng) fromplace = await this._getInforPlace();\n\t\telse {\n\t\t\tfromplace = await this._getInforPlace(from.lat, from.lng);\n\t\t}\n\t\tawait this.props.dispatch(navigationFromAction(fromplace, `${fromplace.name} - ${fromplace.formatted_address}`));\n\t\tlet toplace;\n\t\tif (!to.lat || !to.lng) toplace = await this._getInforPlace();\n\t\telse {\n\t\t\ttoplace = await this._getInforPlace(to.lat, to.lng);\n\t\t}\n\t\tawait this.props.dispatch(navigationToAction(toplace, `${toplace.name} - ${toplace.formatted_address}`));\n\t\tthis.props.dispatch(navigationAction(this.props.from_place, this.props.to_place, 'car'));\n\t};\n\n\tnavigationByURL = async (from, to) => {\n\t\tthis.props.dispatch(setBoxVisibleAction('navigation'));\n\t\tthis.props.dispatch(setRedMarkerAction(false));\n\t\tthis.changeVisibleBottomInfo(false);\n\t\tlet fromplace;\n\t\tif (!from.lat || !from.lng) fromplace = await this._getInforPlace();\n\t\telse {\n\t\t\tfromplace = await this._getInforPlace(from.lat, from.lng);\n\t\t}\n\t\tawait this.props.dispatch(navigationFromAction(fromplace, `${fromplace.name} - ${fromplace.formatted_address}`));\n\t\tlet toplace;\n\t\tif (!to.lat || !to.lng) toplace = await this._getInforPlace();\n\t\telse {\n\t\t\ttoplace = await this._getInforPlace(to.lat, to.lng);\n\t\t}\n\t\tawait this.props.dispatch(navigationToAction(toplace, `${toplace.name} - ${toplace.formatted_address}`));\n\t};\n\n\tcomponentWillUnmount() {\n\t\twindow.removeEventListener('storage', this.handleStorageChange);\n\t\tdocument.body.removeEventListener('click', this._onClickMenu);\n\t}\n\n\thandleStorageChange = (event) => {\n\t\tconsole.log('oppaopaopa');\n\t\tif (event.key === 'search_history') {\n\t\t\tthis.setState({ value: event.newValue });\n\t\t}\n\t};\n\n\trenderParkingLots = () => {\n\t\tconst { parkingLots } = this.props;\n\n\t\treturn parkingLots?.map((lot) => (\n\t\t\t<Marker\n\t\t\t\tkey={lot.id}\n\t\t\t\tlongitude={lot.longitude}\n\t\t\t\tlatitude={lot.latitude}>\n\t\t\t\t<div className=\"marker parking-marker\">\n\t\t\t\t\t<div className=\"marker-content\">P</div>\n\t\t\t\t\t<div className=\"marker-info\">\n\t\t\t\t\t\t<h3>{lot.name}</h3>\n\t\t\t\t\t\t<p>{lot.address}</p>\n\t\t\t\t\t\t<p>\n\t\t\t\t\t\t\tAvailable: {lot.availableSpots}/{lot.capacity}\n\t\t\t\t\t\t</p>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</Marker>\n\t\t));\n\t};\n\n\trender() {\n\t\tconst { style, bottomInfoVisible, placeMouseClick } = this.state;\n\n\t\treturn (\n\t\t\t<React.Fragment>\n\t\t\t\t<Div100vh>\n\t\t\t\t\t<div id=\"map\">{this.renderParkingLots()}</div>\n\t\t\t\t\t<div>\n\t\t\t\t\t\t{!isMobile && (\n\t\t\t\t\t\t\t<Avatar\n\t\t\t\t\t\t\t\tshape=\"square\"\n\t\t\t\t\t\t\t\tsize={64}\n\t\t\t\t\t\t\t\tonClick={this.changeStyle}\n\t\t\t\t\t\t\t\tclassName=\"change-status-button\"\n\t\t\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\t\t\tbackgroundImage: style === STYLE_URL.NORMAL + STYLE_KEY ? `url(${satellite_img})` : `url(${normal_map_img})`,\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t)}\n\t\t\t\t\t\t{isMobile && (\n\t\t\t\t\t\t\t<Avatar\n\t\t\t\t\t\t\t\tshape=\"square\"\n\t\t\t\t\t\t\t\tsize={64}\n\t\t\t\t\t\t\t\tonClick={this.changeStyle}\n\t\t\t\t\t\t\t\tclassName=\"change-status-button\"\n\t\t\t\t\t\t\t\t// id='change-status-button--mobile'\n\t\t\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\t\t\tbackgroundImage: style === STYLE_URL.NORMAL + STYLE_KEY ? `url(${satellite_img})` : `url(${normal_map_img})`,\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t)}\n\t\t\t\t\t</div>\n\t\t\t\t\t{bottomInfoVisible && (\n\t\t\t\t\t\t<BottomInfoLocation\n\t\t\t\t\t\t\tchangeVisibleBottomInfo={this.changeVisibleBottomInfo}\n\t\t\t\t\t\t\tlat={placeMouseClick.geometry?.location.lat || Number(placeMouseClick.lng_lat[1])}\n\t\t\t\t\t\t\tlng={placeMouseClick.geometry?.location.lng || Number(placeMouseClick.lng_lat[0])}\n\t\t\t\t\t\t\tname={placeMouseClick.name || placeMouseClick.address_components[0].long_name}\n\t\t\t\t\t\t\tisMarkerAround={placeMouseClick.marker_type_id}\n\t\t\t\t\t\t\tplace_id={placeMouseClick._id}\n\t\t\t\t\t\t\taddress={this.getAddressGeocode(placeMouseClick) || placeMouseClick.formatted_address || placeMouseClick.description.address}\n\t\t\t\t\t\t\tremoveMarker={this.removeMarkerWhatIs}\n\t\t\t\t\t\t/>\n\t\t\t\t\t)}\n\t\t\t\t</Div100vh>\n\t\t\t</React.Fragment>\n\t\t);\n\t}\n}\n\nconst mapStateToProps = (state) => {\n\treturn {\n\t\tcurrent_place: state.placeReducer.current_place,\n\t\tfrom_place: state.navigationReducer.from,\n\t\tto_place: state.navigationReducer.to,\n\t\tboxVisible: state.boxVisibleReducer.box_visible,\n\t\tresult_navigation: state.navigationReducer.result,\n\t\tviewport: state.placeReducer.viewport,\n\t\tresult_select: state.navigationReducer.result_select,\n\t\taround_places: state.searchReducer.around_places,\n\t\tmarkerSelect: state.boxVisibleReducer.red_marker_visible,\n\t\tpositionMarkerSelect: state.boxVisibleReducer.position_red_marker,\n\t\taround_place_center: state.searchReducer.around_place_center,\n\t\tpopup_visible: state.boxVisibleReducer.popup_visible,\n\t\tposition_popup: state.boxVisibleReducer.position_popup,\n\t\ttype_popup: state.boxVisibleReducer.type_popup,\n\t\taround_place_select: state.searchReducer.around_place_select,\n\t\tmy_location: state.placeReducer.my_location,\n\t\trestaurantData: state.searchReducer.restaurant_data,\n\t\tsearchLocalStorage: state.searchReducer.search_local_storage,\n\t\tparkingLots: state.parkingLotReducer.parkingLots,\n\t};\n};\nexport default connect(mapStateToProps)(Map);\n"],"mappings":";;;;;;;;AAAA,OAAOA,KAAK,IAAIC,SAAS,EAAEC,SAAS,QAAQ,OAAO;AACnD,SAASC,SAAS;AAClB,OAAOC,MAAM;AACb,SAASC,OAAO,QAAQ,aAAa;AACrC,OAAOC,kBAAkB;AACzB,OAAOC,cAAc;AACrB,SAASC,sBAAsB;AAE/B,OAAOC,KAAK,MAAM,2BAA2B;AAC7C,SAASC,oBAAoB,EAAEC,uBAAuB,EAAEC,qBAAqB,EAAEC,mBAAmB,EAAEC,mBAAmB;AACvH,SAASC,kBAAkB,EAAEC,uBAAuB,EAAEC,uBAAuB;AAC7E,SAASC,kBAAkB,EAAEC,oBAAoB,EAAEC,kBAAkB,EAAEC,iBAAiB,EAAEC,gBAAgB;AAC1G,OAAOC,gBAAgB;AACvB,SAASC,kBAAkB,EAAEC,yBAAyB,EAAEC,kBAAkB,EAAEC,mBAAmB;AAC/F,OAAOC,cAAc;AACrB,OAAOC,aAAa;AACpB,OAAOC,cAAc,MAAM,kBAAkB;AAC7C,OAAOC,KAAK,MAAM,OAAO;AACzB,OAAOC,QAAQ,MAAM,iBAAiB;AACtC,OAAOC,OAAO;AACd,SAASC,WAAW;AACpB,SAASC,QAAQ,QAAQ,qBAAqB;AAC9C,OAAOC,MAAM;AACb,SAASC,WAAW,EAAEC,WAAW,QAAQ,aAAa;AACtD,SAASC,qBAAqB;AAE9B,MAAMC,GAAG,SAASvC,SAAS,CAAC;EAC3BwC,WAAWA,CAACC,KAAK,EAAE;IAClB,KAAK,CAACA,KAAK,CAAC;IAACC,eAAA,4BAqBOC,QAAQ,IAAK;MACjC,IAAI,CAACF,KAAK,CAACG,QAAQ,CAACnC,oBAAoB,CAACkC,QAAQ,CAAC,CAAC;IACpD,CAAC;IAAAD,eAAA,wBAEgBG,CAAC,IAAK;MACtB,IAAI,CAACJ,KAAK,CAACG,QAAQ,CAACnB,kBAAkB,CAAC,KAAK,CAAC,CAAC;MAC9C,IAAI,IAAI,CAACgB,KAAK,CAACK,UAAU,KAAK,QAAQ,EAAE;QACvC,IAAI,CAACL,KAAK,CAACG,QAAQ,CAACrB,kBAAkB,CAAC,KAAK,CAAC,CAAC;MAC/C;MACA;MACA;MACA,IAAI,CAACkB,KAAK,CAACG,QAAQ,CAAC5B,uBAAuB,CAAC,IAAI,CAAC,CAAC;MAClD,IAAI,CAAC+B,kBAAkB,CAAC,CAAC;MACzB,IAAI,CAACC,QAAQ,CAAC;QACbC,iBAAiB,EAAE;MACpB,CAAC,CAAC;IACH,CAAC;IAAAP,eAAA,wBAEgBG,CAAC,IAAK;MACtB,MAAMK,QAAQ,GAAG;QAAEC,GAAG,EAAEN,CAAC,CAACO,MAAM,CAACD,GAAG;QAAEE,GAAG,EAAER,CAAC,CAACO,MAAM,CAACC;MAAI,CAAC;MACzD,IAAI,IAAI,CAACZ,KAAK,CAACK,UAAU,KAAK,QAAQ,EAAE;QACvC,IAAI,CAACL,KAAK,CAACG,QAAQ,CAACrB,kBAAkB,CAAC,IAAI,EAAE2B,QAAQ,CAAC,CAAC;QACvD,IAAI,CAACT,KAAK,CAACG,QAAQ,CAACnB,kBAAkB,CAAC,IAAI,EAAEyB,QAAQ,EAAE,QAAQ,CAAC,CAAC;MAClE;IACD,CAAC;IAAAR,eAAA,uBAEeY,GAAG,IAAK;MACvB,MAAMC,MAAM,GAAGD,GAAG,CAACE,MAAM,CAACC,aAAa;MAEvC,IAAIH,GAAG,CAACE,MAAM,CAACE,SAAS,IAAIJ,GAAG,CAACE,MAAM,CAACE,SAAS,CAACC,QAAQ,CAAC,CAAC,CAACC,QAAQ,CAAC,cAAc,CAAC,EAAE;QACrF,IAAI,CAACC,YAAY,CAAC,CAAC;MACpB,CAAC,MAAM,IAAIP,GAAG,CAACE,MAAM,CAACE,SAAS,IAAIJ,GAAG,CAACE,MAAM,CAACE,SAAS,CAACC,QAAQ,CAAC,CAAC,CAACC,QAAQ,CAAC,WAAW,CAAC,EAAE;QACzF,IAAI,CAACE,cAAc,CAAC,CAAC;MACtB,CAAC,MAAM,IAAIR,GAAG,CAACE,MAAM,CAACE,SAAS,IAAIJ,GAAG,CAACE,MAAM,CAACE,SAAS,CAACC,QAAQ,CAAC,CAAC,CAACC,QAAQ,CAAC,SAAS,CAAC,EAAE;QACvF,IAAI,CAACG,YAAY,CAAC,CAAC;MACpB,CAAC,MAAM,IAAIT,GAAG,CAACE,MAAM,CAACE,SAAS,IAAIJ,GAAG,CAACE,MAAM,CAACE,SAAS,CAACC,QAAQ,CAAC,CAAC,CAACC,QAAQ,CAAC,iBAAiB,CAAC,EAAE;QAC/F,IAAI,CAACI,oBAAoB,CAAC,CAAC;MAC5B,CAAC,MAAM,IAAIV,GAAG,CAACE,MAAM,CAACE,SAAS,IAAIJ,GAAG,CAACE,MAAM,CAACE,SAAS,CAACC,QAAQ,CAAC,CAAC,CAACC,QAAQ,CAAC,eAAe,CAAC,EAAE;QAC7F,IAAI,CAACK,kBAAkB,CAAC,CAAC;MAC1B,CAAC,MAAM,IAAIX,GAAG,CAACE,MAAM,CAACE,SAAS,IAAIJ,GAAG,CAACE,MAAM,CAACE,SAAS,CAACC,QAAQ,CAAC,CAAC,CAACC,QAAQ,CAAC,iBAAiB,CAAC,EAAE;QAC/F,IAAI,CAACM,mBAAmB,CAAC,CAAC;MAC3B,CAAC,MAAM,IAAIZ,GAAG,CAACE,MAAM,CAACE,SAAS,IAAIJ,GAAG,CAACE,MAAM,CAACE,SAAS,CAACC,QAAQ,CAAC,CAAC,CAACC,QAAQ,CAAC,oBAAoB,CAAC,EAAE;QAClG,IAAI,CAACC,YAAY,CAAC,KAAK,CAAC;MACzB;MACA,IAAIN,MAAM,aAANA,MAAM,eAANA,MAAM,CAAEG,SAAS,IAAIH,MAAM,aAANA,MAAM,eAANA,MAAM,CAAEG,SAAS,CAACC,QAAQ,CAAC,CAAC,CAACC,QAAQ,CAAC,kBAAkB,CAAC,EAAE;QACnF,IAAIN,GAAG,CAACE,MAAM,CAACE,SAAS,IAAI,CAACJ,GAAG,CAACE,MAAM,CAACE,SAAS,CAACC,QAAQ,CAAC,CAAC,CAACC,QAAQ,CAAC,cAAc,CAAC,EAAE;UACtF,IAAI,CAACnB,KAAK,CAACG,QAAQ,CAAC7B,uBAAuB,CAAC,CAAC,CAAC;QAC/C;QACA,IAAI,CAAC0B,KAAK,CAACG,QAAQ,CAACnB,kBAAkB,CAAC,KAAK,CAAC,CAAC;QAC9C,IAAI,CAACsB,kBAAkB,CAAC,CAAC;MAC1B;IACD,CAAC;IAAAL,eAAA,kCAE0ByB,OAAO,IAAK;MACtC,IAAI,CAACnB,QAAQ,CAAC;QACbC,iBAAiB,EAAEkB;MACpB,CAAC,CAAC;IACH,CAAC;IAAAzB,eAAA,yBAEgB,OAAOS,GAAG,IAAAiB,qBAAA,KAAAA,qBAAA,GAAG,IAAI,CAAC3B,KAAK,CAAC4B,cAAc,cAAAD,qBAAA,uBAAzBA,qBAAA,CAA2BjB,GAAG,KAAEE,GAAG,IAAAiB,sBAAA,KAAAA,sBAAA,GAAG,IAAI,CAAC7B,KAAK,CAAC4B,cAAc,cAAAC,sBAAA,uBAAzBA,sBAAA,CAA2BjB,GAAG,QAAK;MACtG,MAAMkB,MAAM,GAAG;QACdC,QAAQ,EAAErB,GAAG;QACbsB,SAAS,EAAEpB;MACZ,CAAC;MAED,IAAI;QACH,MAAMqB,QAAQ,GAAG,MAAMnE,sBAAsB,CAACgE,MAAM,CAAC;QACrD,IAAIG,QAAQ,CAACC,IAAI,CAACC,OAAO,CAACC,MAAM,GAAG,CAAC,EAAE;UACrC,MAAMC,cAAc,GAAGJ,QAAQ,CAACC,IAAI,CAACC,OAAO,CAAC,CAAC,CAAC;UAC/C,OAAAG,aAAA,CAAAA,aAAA,KACID,cAAc;YACjBE,IAAI,EAAEF,cAAc,CAACG,kBAAkB,CAAC,CAAC,CAAC,CAACC,SAAS;YACpDC,iBAAiB,EAAE,IAAI,CAACC,iBAAiB,CAACN,cAAc;UAAC;QAE3D,CAAC,MAAM;UACNO,QAAA,CAAQC,KAAK,CAAC,4BAA4B,CAAC;UAC3C,OAAO,IAAI;QACZ;MACD,CAAC,CAAC,OAAOA,KAAK,EAAE;QACf,MAAMA,KAAK;MACZ;IACD,CAAC;IAAA5C,eAAA,sBAEa,OAAOS,GAAG,IAAAoC,qBAAA,KAAAA,qBAAA,GAAG,IAAI,CAAC9C,KAAK,CAAC+C,oBAAoB,cAAAD,qBAAA,uBAA/BA,qBAAA,CAAiCpC,GAAG,KAAEE,GAAG,IAAAoC,sBAAA,KAAAA,sBAAA,GAAG,IAAI,CAAChD,KAAK,CAAC+C,oBAAoB,cAAAC,sBAAA,uBAA/BA,sBAAA,CAAiCpC,GAAG,KAAEqC,gBAAgB,GAAG,IAAI,KAAK;MACxI,MAAMC,KAAK,GAAG,MAAM,IAAI,CAACC,cAAc,CAACzC,GAAG,EAAEE,GAAG,CAAC;MAEjD,IAAIsC,KAAK,EAAE;QACV,MAAMhD,QAAQ,GAAG;UAChB8B,SAAS,EAAEpB,GAAG;UACdmB,QAAQ,EAAErB,GAAG;UACb0C,IAAI,EAAE;QACP,CAAC;QACD,IAAI,CAACpD,KAAK,CAACG,QAAQ,CAACnC,oBAAoB,CAACkC,QAAQ,CAAC,CAAC;QACnD,IAAI,CAACK,QAAQ,CAAC;UACbC,iBAAiB,EAAE,IAAI;UACvB6C,eAAe,EAAEH;QAClB,CAAC,CAAC;QACF,IAAID,gBAAgB,EAAE;UACrB,IAAI,IAAI,CAACK,YAAY,EAAE;YACtB,IAAI,CAACA,YAAY,CAACC,SAAS,CAAC;cAAE7C,GAAG;cAAEE;YAAI,CAAC,CAAC,CAAC4C,KAAK,CAAC,IAAI,CAACC,GAAG,CAAC;UAC1D,CAAC,MAAM;YACN,MAAMC,EAAE,GAAGC,QAAQ,CAACC,aAAa,CAAC,KAAK,CAAC;YACxCF,EAAE,CAACG,SAAS,GAAGzE,cAAc,CAAC0E,oBAAoB,CAACC,KAAA,CAACrG,MAAM;cAACsG,IAAI,EAAE;YAAG,CAAE,CAAC,CAAC;YACxE,IAAI,CAACV,YAAY,GAAG,IAAIW,UAAU,CAACvG,MAAM,CAACgG,EAAE,EAAE;cAAEQ,MAAM,EAAE;YAAS,CAAC,CAAC,CAACX,SAAS,CAAC;cAAE7C,GAAG;cAAEE;YAAI,CAAC,CAAC,CAAC4C,KAAK,CAAC,IAAI,CAACC,GAAG,CAAC;UAC5G;UACA,IAAI,CAACH,YAAY,CAACa,UAAU,CAAC,CAAC,CAACC,gBAAgB,CAAC,aAAa,EAAGhE,CAAC,IAAK;YACrEA,CAAC,CAACiE,eAAe,CAAC,CAAC;YACnBjE,CAAC,CAACkE,cAAc,CAAC,CAAC;YAClB,IAAI,CAACtE,KAAK,CAACG,QAAQ,CAACrB,kBAAkB,CAAC,KAAK,CAAC,CAAC;YAC9C,IAAI,CAACkB,KAAK,CAACG,QAAQ,CAACnB,kBAAkB,CAAC,IAAI,EAAE;cAAE0B,GAAG;cAAEE;YAAI,CAAC,EAAE,mBAAmB,CAAC,CAAC;UACjF,CAAC,CAAC;UACF,IAAI,CAACZ,KAAK,CAACG,QAAQ,CAACrB,kBAAkB,CAAC,KAAK,CAAC,CAAC;QAC/C;QACA;MACD,CAAC,MAAM;QACN8D,QAAA,CAAQC,KAAK,CAAC,4BAA4B,CAAC;MAC5C;IACD,CAAC;IAAA5C,eAAA,6BAEoB,MAAM;MAC1B,IAAI,CAACqD,YAAY,GAAG,IAAI,CAACA,YAAY,CAACiB,MAAM,CAAC,CAAC,GAAG,IAAI;IACtD,CAAC;IAAAtE,eAAA,+BAEsB,MAAOuE,EAAE,IAAK;MACpC,IAAI;QACH,MAAMvC,QAAQ,GAAG,MAAM5C,KAAK,CAACoF,GAAG,CAAC,qDAAqDD,EAAE,EAAE,CAAC;QAE3F,IAAIvC,QAAQ,CAACC,IAAI,CAACA,IAAI,EAAE;UACvB,OAAOD,QAAQ,CAACC,IAAI,CAACA,IAAI;QAC1B,CAAC,MAAM;UACNU,QAAA,CAAQC,KAAK,CAAC,4BAA4B,CAAC;UAC3C,OAAO,IAAI;QACZ;MACD,CAAC,CAAC,OAAOA,KAAK,EAAE;QACfD,QAAA,CAAQC,KAAK,CAAC,2BAA2B,CAAC;QAC1C,MAAMA,KAAK;MACZ;IACD,CAAC;IAAA5C,eAAA,4BAEmB,MAAOuE,EAAE,IAAK;MACjC,MAAMtB,KAAK,GAAG,MAAM,IAAI,CAACwB,oBAAoB,CAACF,EAAE,CAAC;MACjD,IAAItB,KAAK,EAAE;QACV,MAAMhD,QAAQ,GAAG;UAChB8B,SAAS,EAAE2C,MAAM,CAACzB,KAAK,CAAC0B,OAAO,CAAC,CAAC,CAAC,CAAC;UACnC7C,QAAQ,EAAE4C,MAAM,CAACzB,KAAK,CAAC0B,OAAO,CAAC,CAAC,CAAC,CAAC;UAClCxB,IAAI,EAAE;QACP,CAAC;QACD,IAAI,CAACpD,KAAK,CAACG,QAAQ,CAACnC,oBAAoB,CAACkC,QAAQ,CAAC,CAAC;QACnD,IAAI,CAACK,QAAQ,CAAC;UACbC,iBAAiB,EAAE,IAAI;UACvB6C,eAAe,EAAEH;QAClB,CAAC,CAAC;QACF,IAAI,CAAClD,KAAK,CAACG,QAAQ,CAACnB,kBAAkB,CAAC,KAAK,CAAC,CAAC;MAC/C,CAAC,MAAM;QACN4D,QAAA,CAAQC,KAAK,CAAC,4BAA4B,CAAC;MAC5C;IACD,CAAC;IAAA5C,eAAA,uBAEc,CAACgD,gBAAgB,GAAG,IAAI,KAAK;MAC3C,MAAM;QAAErB,cAAc;QAAEiD;MAAc,CAAC,GAAG,IAAI,CAAC7E,KAAK;MACpD,IAAI6E,aAAa,EAAE;QAClB,IAAI,CAAC7E,KAAK,CAACG,QAAQ,CAClBlC,uBAAuB,CAAC;UACvB8D,QAAQ,EAAEH,cAAc,CAAClB,GAAG;UAC5BsB,SAAS,EAAEJ,cAAc,CAAChB;QAC3B,CAAC,CACF,CAAC;QAED,IAAI,CAACZ,KAAK,CAACG,QAAQ,CAAClB,mBAAmB,CAAC,MAAM,CAAC,CAAC;QAChD,IAAI,CAACe,KAAK,CAACG,QAAQ,CAAC7B,uBAAuB,CAAC,CAAC,CAAC;QAC9C,IAAI,CAAC0B,KAAK,CAACG,QAAQ,CAACnB,kBAAkB,CAAC,KAAK,CAAC,CAAC;QAC9C,IAAI,CAACsB,kBAAkB,CAAC,CAAC;MAC1B,CAAC,MAAM;QACN,IAAI,CAACwE,WAAW,CAAClD,cAAc,CAAClB,GAAG,EAAEkB,cAAc,CAAChB,GAAG,EAAEqC,gBAAgB,CAAC;MAC3E;IACD,CAAC;IAAAhD,eAAA,yBAEgB,OAAOS,GAAG,EAAEE,GAAG,KAAK;MACpC,IAAIsC,KAAK;MACT,IAAI,CAACxC,GAAG,IAAI,CAACE,GAAG,EAAEsC,KAAK,GAAG,MAAM,IAAI,CAACC,cAAc,CAAC,CAAC,CAAC,KACjD;QACJD,KAAK,GAAG,MAAM,IAAI,CAACC,cAAc,CAACzC,GAAG,EAAEE,GAAG,CAAC;MAC5C;MACA,IAAIsC,KAAK,EAAE;QACV,MAAMhD,QAAQ,GAAG;UAChB8B,SAAS,EAAEkB,KAAK,CAAC6B,QAAQ,CAACC,QAAQ,CAACpE,GAAG;UACtCmB,QAAQ,EAAEmB,KAAK,CAAC6B,QAAQ,CAACC,QAAQ,CAACtE,GAAG;UACrC0C,IAAI,EAAE;QACP,CAAC;QACD,CAAC,IAAI,CAACpD,KAAK,CAACiF,QAAQ,IAAI,IAAI,CAACjF,KAAK,CAACG,QAAQ,CAACnC,oBAAoB,CAACkC,QAAQ,CAAC,CAAC;QAC3E,IAAI,CAACF,KAAK,CAACG,QAAQ,CAAClB,mBAAmB,CAAC,YAAY,CAAC,CAAC;QACtD,IAAI,CAACe,KAAK,CAACG,QAAQ,CAAC1B,oBAAoB,CAACyE,KAAK,EAAE,GAAGA,KAAK,CAACX,IAAI,MAAMW,KAAK,CAACR,iBAAiB,EAAE,CAAC,CAAC;QAE9F,IAAI,CAAC1C,KAAK,CAACG,QAAQ,CAACrB,kBAAkB,CAAC,KAAK,CAAC,CAAC;QAC9C,IAAI,CAACoG,uBAAuB,CAAC,KAAK,CAAC;MACpC;IACD,CAAC;IAAAjF,eAAA,uBAEc,OAAOS,GAAG,EAAEE,GAAG,KAAK;MAClC,IAAIsC,KAAK;MACT,IAAI,CAACxC,GAAG,IAAI,CAACE,GAAG,EAAEsC,KAAK,GAAG,MAAM,IAAI,CAACC,cAAc,CAAC,CAAC,CAAC,KACjD;QACJD,KAAK,GAAG,MAAM,IAAI,CAACC,cAAc,CAACzC,GAAG,EAAEE,GAAG,CAAC;MAC5C;MACA,IAAIsC,KAAK,EAAE;QACV,IAAI,CAAClD,KAAK,CAACG,QAAQ,CAAClB,mBAAmB,CAAC,YAAY,CAAC,CAAC;QACtD,MAAMiB,QAAQ,GAAG;UAChB8B,SAAS,EAAEkB,KAAK,CAAC6B,QAAQ,CAACC,QAAQ,CAACpE,GAAG;UACtCmB,QAAQ,EAAEmB,KAAK,CAAC6B,QAAQ,CAACC,QAAQ,CAACtE,GAAG;UACrC0C,IAAI,EAAE;QACP,CAAC;QACD,MAAM+B,WAAW,GAAG,IAAI,CAACnF,KAAK,CAACmF,WAAW;QAC1C,IAAIA,WAAW,KAAK,IAAI,CAACnF,KAAK,CAACK,UAAU,KAAK,QAAQ,IAAI,IAAI,CAACL,KAAK,CAACK,UAAU,KAAK,MAAM,CAAC,EAAE;UAC5F,IAAI;YACH,MAAM4B,QAAQ,GAAG,MAAM1C,OAAO,CAAC6F,OAAO,CAACD,WAAW,CAAC;YACnD,IAAIlD,QAAQ,CAACC,IAAI,CAACC,OAAO,CAACC,MAAM,GAAG,CAAC,EAAE;cACrC,IAAI,CAACpC,KAAK,CAACG,QAAQ,CAClB1B,oBAAoB,CAAA6D,aAAA,CAAAA,aAAA,KAEfL,QAAQ,CAACC,IAAI,CAACC,OAAO,CAAC,CAAC,CAAC;gBAC3BI,IAAI,EAAEN,QAAQ,CAACC,IAAI,CAACC,OAAO,CAAC,CAAC,CAAC,CAACK,kBAAkB,CAAC,CAAC,CAAC,CAACC;cAAS,IAE/D,gBACD,CACD,CAAC;YACF;UACD,CAAC,CAAC,OAAOI,KAAK,EAAE;YACf,MAAMA,KAAK;UACZ;QACD;QACA,CAAC,IAAI,CAAC7C,KAAK,CAACqF,UAAU,IAAI,IAAI,CAACrF,KAAK,CAACG,QAAQ,CAACnC,oBAAoB,CAACkC,QAAQ,CAAC,CAAC;QAC7E,IAAI,CAACF,KAAK,CAACG,QAAQ,CAACzB,kBAAkB,CAACwE,KAAK,EAAE,GAAGA,KAAK,CAACX,IAAI,MAAMW,KAAK,CAACR,iBAAiB,EAAE,CAAC,CAAC;QAC5F,IAAI,CAAC1C,KAAK,CAACG,QAAQ,CAAClB,mBAAmB,CAAC,YAAY,CAAC,CAAC;QACtD,IAAI,CAACe,KAAK,CAACG,QAAQ,CAACrB,kBAAkB,CAAC,KAAK,CAAC,CAAC;QAC9C,IAAI,CAACoG,uBAAuB,CAAC,KAAK,CAAC;MACpC;IACD,CAAC;IAAAjF,eAAA,+BAEsB,MAAM;MAC5B,MAAM;QAAEqF;MAAW,CAAC,GAAG,IAAI,CAACtF,KAAK;MACjC,IAAIsF,UAAU,KAAK,gBAAgB,EAAE;QACpC,IAAI,CAACtF,KAAK,CAACG,QAAQ,CAAC1B,oBAAoB,CAAC,IAAI,EAAE,EAAE,CAAC,CAAC;MACpD,CAAC,MAAM,IAAI6G,UAAU,KAAK,cAAc,EAAE;QACzC,IAAI,CAACtF,KAAK,CAACG,QAAQ,CAACzB,kBAAkB,CAAC,IAAI,EAAE,EAAE,CAAC,CAAC;MAClD;MACA,IAAI,CAACsB,KAAK,CAACG,QAAQ,CAACxB,iBAAiB,CAAC,CAAC,CAAC;IACzC,CAAC;IAAAsB,eAAA,6BAEoB,YAAY;MAChC,MAAMiD,KAAK,GAAG,MAAM,IAAI,CAACC,cAAc,CAAC,CAAC;MACzC,IAAID,KAAK,EAAE;QACV,MAAMhD,QAAQ,GAAG;UAChB8B,SAAS,EAAEkB,KAAK,CAAC6B,QAAQ,CAACC,QAAQ,CAACpE,GAAG;UACtCmB,QAAQ,EAAEmB,KAAK,CAAC6B,QAAQ,CAACC,QAAQ,CAACtE,GAAG;UACrC0C,IAAI,EAAE;QACP,CAAC;QACD,MAAM4B,QAAQ,GAAG;UAChBtE,GAAG,EAAEwC,KAAK,CAAC6B,QAAQ,CAACC,QAAQ,CAACtE,GAAG;UAChCE,GAAG,EAAEsC,KAAK,CAAC6B,QAAQ,CAACC,QAAQ,CAACpE;QAC9B,CAAC;QACD,IAAI,CAACZ,KAAK,CAACG,QAAQ,CAAClB,mBAAmB,CAAC,QAAQ,CAAC,CAAC;QAClD,IAAI,CAACe,KAAK,CAACG,QAAQ,CAACnC,oBAAoB,CAACkC,QAAQ,CAAC,CAAC;QACnD,IAAI,CAACF,KAAK,CAACG,QAAQ,CAAC9B,kBAAkB,CAAC2G,QAAQ,EAAE,IAAI,CAAChF,KAAK,CAACE,QAAQ,CAACkD,IAAI,CAAC,CAAC;QAC3E,IAAI,CAAC7C,QAAQ,CAAC;UACbC,iBAAiB,EAAE;QACpB,CAAC,CAAC;MACH;IACD,CAAC;IAAAP,eAAA,6BAEoB,CAACsF,IAAI,EAAErC,KAAK,KAAK;MACrC,IAAIqC,IAAI,KAAK,QAAQ,EAAE;QACtB,IAAI,CAACvF,KAAK,CAACG,QAAQ,CAAC5B,uBAAuB,CAAC2E,KAAK,CAAC,CAAC;QACnD,IAAI,CAACsC,iBAAiB,CAACtC,KAAK,aAALA,KAAK,uBAALA,KAAK,CAAEsB,EAAE,CAAC;MAClC,CAAC,MAAM;QACN,IAAI,CAACxE,KAAK,CAACG,QAAQ,CAAC5B,uBAAuB,CAAC2E,KAAK,CAAC,CAAC;QACnD,IAAI,CAAC4B,WAAW,CAAC5B,KAAK,CAAC6B,QAAQ,CAACC,QAAQ,CAACtE,GAAG,EAAEwC,KAAK,CAAC6B,QAAQ,CAACC,QAAQ,CAACpE,GAAG,EAAE,KAAK,CAAC;MAClF;IACD,CAAC;IAAAX,eAAA,8BAEqB,YAAY;MACjC,IAAIiD,KAAK,GAAG,IAAI;MAChB,IAAI,CAAClD,KAAK,CAACyF,aAAa,CAAChC,GAAG,CAAEiC,IAAI,IAAK;QACtC,IAAIA,IAAI,CAACd,OAAO,CAAC,CAAC,CAAC,GAAG,CAAC,KAAK,IAAI,CAACe,eAAe,CAACC,SAAS,CAAC,CAAC,CAAChF,GAAG,IAAI8E,IAAI,CAACd,OAAO,CAAC,CAAC,CAAC,GAAG,CAAC,KAAK,IAAI,CAACe,eAAe,CAACC,SAAS,CAAC,CAAC,CAAClF,GAAG,EAAE;UACjIwC,KAAK,GAAGwC,IAAI;QACb;MACD,CAAC,CAAC;MACF,IAAIxC,KAAK,EAAE;QACV,IAAI;UAAA,IAAA2C,cAAA;UACH,IAAI,CAAC7F,KAAK,CAACG,QAAQ,CAACnB,kBAAkB,CAAC,KAAK,CAAC,CAAC;UAC9C,MAAM8G,YAAY,GAAG,IAAI,CAAC9F,KAAK,CAAC+F,mBAAmB;UACnD,IAAI,CAAC/F,KAAK,CAACG,QAAQ,CAAC1B,oBAAoB,CAACqH,YAAY,EAAE,GAAGA,YAAY,CAACvD,IAAI,MAAMuD,YAAY,CAACpD,iBAAiB,EAAE,CAAC,CAAC;UACnH,MAAMT,QAAQ,GAAG,MAAM5C,KAAK,CAACoF,GAAG,CAAC,qDAAqDvB,KAAK,CAACsB,EAAE,EAAE,CAAC;UAEjGtB,KAAK,IAAA2C,cAAA,GAAG5D,QAAQ,CAACC,IAAI,cAAA2D,cAAA,uBAAbA,cAAA,CAAe3D,IAAI;UAC3BgB,KAAK,GAAAZ,aAAA,CAAAA,aAAA,KACDY,KAAK;YACR8C,QAAQ,EAAE9C,KAAK,CAAC+C,GAAG;YACnBlB,QAAQ,EAAE;cACTC,QAAQ,EAAE;gBACTtE,GAAG,EAAEiE,MAAM,CAACzB,KAAK,CAAC0B,OAAO,CAAC,CAAC,CAAC,CAAC;gBAC7BhE,GAAG,EAAE+D,MAAM,CAACzB,KAAK,CAAC0B,OAAO,CAAC,CAAC,CAAC;cAC7B;YACD,CAAC;YACDlC,iBAAiB,EAAEQ,KAAK,CAACgD,WAAW,CAACC;UAAO,EAC5C;UACD,IAAI,CAACnG,KAAK,CAACG,QAAQ,CAACzB,kBAAkB,CAACwE,KAAK,EAAE,GAAGA,KAAK,CAACX,IAAI,MAAMW,KAAK,CAACR,iBAAiB,EAAE,CAAC,CAAC;UAC5F,IAAI,CAAC1C,KAAK,CAACG,QAAQ,CAAClB,mBAAmB,CAAC,YAAY,CAAC,CAAC;QACvD,CAAC,CAAC,OAAO4D,KAAK,EAAE;UACfD,QAAA,CAAQC,KAAK,CAAC,2BAA2B,CAAC;QAC3C;MACD,CAAC,MAAM;QACND,QAAA,CAAQC,KAAK,CAAC,2BAA2B,CAAC;MAC3C;IACD,CAAC;IAAA5C,eAAA,4BAEmB,MAAM;MACzB,IAAI,IAAI,CAACmG,kBAAkB,EAAE,IAAI,CAACA,kBAAkB,CAAC7B,MAAM,CAAC,CAAC;MAC7D,IAAI,IAAI,CAACoB,eAAe,EAAE,IAAI,CAACA,eAAe,CAACpB,MAAM,CAAC,CAAC;MACvD,IAAI,IAAI,CAACvE,KAAK,CAACyF,aAAa,EAAE,IAAI,CAACzF,KAAK,CAACG,QAAQ,CAAC7B,uBAAuB,CAAC,CAAC,CAAC;MAC5E,IAAI,IAAI,CAAC+H,SAAS,EAAE,IAAI,CAACA,SAAS,CAAC9B,MAAM,CAAC,CAAC;IAC5C,CAAC;IAAAtE,eAAA,4BAEoBiD,KAAK,IAAK;MAAA,IAAAoD,qBAAA;MAC9B,IAAIC,MAAM,GAAG,EAAE;MACf,CAAAD,qBAAA,GAAApD,KAAK,CAACV,kBAAkB,cAAA8D,qBAAA,uBAAxBA,qBAAA,CAA0BE,KAAK,CAAC,CAAC,CAAC,CAAC/C,GAAG,CAAEiC,IAAI,IAAK;QAChDa,MAAM,CAACE,IAAI,CAACf,IAAI,CAACjD,SAAS,CAAC;MAC5B,CAAC,CAAC;MACF,OAAO8D,MAAM,CAACG,IAAI,CAAC,GAAG,CAAC;IACxB,CAAC;IAAAzG,eAAA,sBAopBa,MAAM;MACnB,MAAM;QAAE0G;MAAM,CAAC,GAAG,IAAI,CAACC,KAAK;MAC5B,IAAID,KAAK,KAAKlJ,SAAS,CAACoJ,QAAQ,6CAAY,EAAE;QAC7C,IAAI,CAACtG,QAAQ,CAAC;UACboG,KAAK,EAAElJ,SAAS,CAACqJ,MAAM;QACxB,CAAC,CAAC;QACF,IAAI,CAACrD,GAAG,CAACsD,QAAQ,CAACtJ,SAAS,CAACqJ,MAAM,6CAAY,CAAC;MAChD,CAAC,MAAM;QACN,IAAI,CAACvG,QAAQ,CAAC;UACboG,KAAK,EAAElJ,SAAS,CAACoJ,QAAQ;QAC1B,CAAC,CAAC;QACF,IAAI,CAACpD,GAAG,CAACsD,QAAQ,CAACtJ,SAAS,CAACoJ,QAAQ,6CAAY,CAAC;MAClD;IACD,CAAC;IAAA5G,eAAA,gCAmJuB,OAAO+G,IAAI,EAAEC,EAAE,KAAK;MAC3C,IAAI,CAACjH,KAAK,CAACG,QAAQ,CAAClB,mBAAmB,CAAC,QAAQ,CAAC,CAAC;MAElD,IAAI,CAACe,KAAK,CAACG,QAAQ,CAACrB,kBAAkB,CAAC,KAAK,CAAC,CAAC;MAC9C,IAAI,CAACoG,uBAAuB,CAAC,KAAK,CAAC;MACnC,IAAIgC,SAAS;MACb,IAAI,CAACF,IAAI,CAACtG,GAAG,IAAI,CAACsG,IAAI,CAACpG,GAAG,EAAEsG,SAAS,GAAG,MAAM,IAAI,CAAC/D,cAAc,CAAC,CAAC,CAAC,KAC/D;QACJ+D,SAAS,GAAG,MAAM,IAAI,CAAC/D,cAAc,CAAC6D,IAAI,CAACtG,GAAG,EAAEsG,IAAI,CAACpG,GAAG,CAAC;MAC1D;MACA,MAAM,IAAI,CAACZ,KAAK,CAACG,QAAQ,CAAC1B,oBAAoB,CAACyI,SAAS,EAAE,GAAGA,SAAS,CAAC3E,IAAI,MAAM2E,SAAS,CAACxE,iBAAiB,EAAE,CAAC,CAAC;MAChH,IAAIyE,OAAO;MACX,IAAI,CAACF,EAAE,CAACvG,GAAG,IAAI,CAACuG,EAAE,CAACrG,GAAG,EAAEuG,OAAO,GAAG,MAAM,IAAI,CAAChE,cAAc,CAAC,CAAC,CAAC,KACzD;QACJgE,OAAO,GAAG,MAAM,IAAI,CAAChE,cAAc,CAAC8D,EAAE,CAACvG,GAAG,EAAEuG,EAAE,CAACrG,GAAG,CAAC;MACpD;MACA,MAAM,IAAI,CAACZ,KAAK,CAACG,QAAQ,CAACzB,kBAAkB,CAACyI,OAAO,EAAE,GAAGA,OAAO,CAAC5E,IAAI,MAAM4E,OAAO,CAACzE,iBAAiB,EAAE,CAAC,CAAC;MACxG,IAAI,CAAC1C,KAAK,CAACG,QAAQ,CAACvB,gBAAgB,CAAC,IAAI,CAACoB,KAAK,CAACqF,UAAU,EAAE,IAAI,CAACrF,KAAK,CAACiF,QAAQ,EAAE,KAAK,CAAC,CAAC;IACzF,CAAC;IAAAhF,eAAA,0BAEiB,OAAO+G,IAAI,EAAEC,EAAE,KAAK;MACrC,IAAI,CAACjH,KAAK,CAACG,QAAQ,CAAClB,mBAAmB,CAAC,YAAY,CAAC,CAAC;MACtD,IAAI,CAACe,KAAK,CAACG,QAAQ,CAACrB,kBAAkB,CAAC,KAAK,CAAC,CAAC;MAC9C,IAAI,CAACoG,uBAAuB,CAAC,KAAK,CAAC;MACnC,IAAIgC,SAAS;MACb,IAAI,CAACF,IAAI,CAACtG,GAAG,IAAI,CAACsG,IAAI,CAACpG,GAAG,EAAEsG,SAAS,GAAG,MAAM,IAAI,CAAC/D,cAAc,CAAC,CAAC,CAAC,KAC/D;QACJ+D,SAAS,GAAG,MAAM,IAAI,CAAC/D,cAAc,CAAC6D,IAAI,CAACtG,GAAG,EAAEsG,IAAI,CAACpG,GAAG,CAAC;MAC1D;MACA,MAAM,IAAI,CAACZ,KAAK,CAACG,QAAQ,CAAC1B,oBAAoB,CAACyI,SAAS,EAAE,GAAGA,SAAS,CAAC3E,IAAI,MAAM2E,SAAS,CAACxE,iBAAiB,EAAE,CAAC,CAAC;MAChH,IAAIyE,OAAO;MACX,IAAI,CAACF,EAAE,CAACvG,GAAG,IAAI,CAACuG,EAAE,CAACrG,GAAG,EAAEuG,OAAO,GAAG,MAAM,IAAI,CAAChE,cAAc,CAAC,CAAC,CAAC,KACzD;QACJgE,OAAO,GAAG,MAAM,IAAI,CAAChE,cAAc,CAAC8D,EAAE,CAACvG,GAAG,EAAEuG,EAAE,CAACrG,GAAG,CAAC;MACpD;MACA,MAAM,IAAI,CAACZ,KAAK,CAACG,QAAQ,CAACzB,kBAAkB,CAACyI,OAAO,EAAE,GAAGA,OAAO,CAAC5E,IAAI,MAAM4E,OAAO,CAACzE,iBAAiB,EAAE,CAAC,CAAC;IACzG,CAAC;IAAAzC,eAAA,8BAOsBmH,KAAK,IAAK;MAChCC,OAAO,CAACC,GAAG,CAAC,YAAY,CAAC;MACzB,IAAIF,KAAK,CAACG,GAAG,KAAK,gBAAgB,EAAE;QACnC,IAAI,CAAChH,QAAQ,CAAC;UAAEiH,KAAK,EAAEJ,KAAK,CAACK;QAAS,CAAC,CAAC;MACzC;IACD,CAAC;IAAAxH,eAAA,4BAEmB,MAAM;MACzB,MAAM;QAAEyH;MAAY,CAAC,GAAG,IAAI,CAAC1H,KAAK;MAElC,OAAO0H,WAAW,aAAXA,WAAW,uBAAXA,WAAW,CAAEjE,GAAG,CAAEkE,GAAG,IAC3B5D,KAAA,CAACrG,MAAM;QACN6J,GAAG,EAAEI,GAAG,CAACnD,EAAG;QACZxC,SAAS,EAAE2F,GAAG,CAAC3F,SAAU;QACzBD,QAAQ,EAAE4F,GAAG,CAAC5F;MAAS,GACvBgC,KAAA;QAAK9C,SAAS,EAAC;MAAuB,GACrC8C,KAAA;QAAK9C,SAAS,EAAC;MAAgB,MAAO,CAAC,EACvC8C,KAAA;QAAK9C,SAAS,EAAC;MAAa,GAC3B8C,KAAA,aAAK4D,GAAG,CAACpF,IAAS,CAAC,EACnBwB,KAAA,YAAI4D,GAAG,CAACxB,OAAW,CAAC,EACpBpC,KAAA,2BACa4D,GAAG,CAACC,cAAc,OAAGD,GAAG,CAACE,QACnC,CACC,CACD,CACE,CACR,CAAC;IACH,CAAC;IAttCA,IAAI,CAACC,OAAO,gBAAGxK,KAAK,CAACyK,SAAS,CAAC,CAAC;IAChC,IAAI,CAACtE,GAAG,GAAG,IAAI;IACf,IAAI,CAAC4C,SAAS,GAAG,IAAI;IACrB,IAAI,CAACV,eAAe,GAAG,IAAI;IAC3B,IAAI,CAACqC,gBAAgB,GAAG,EAAE;IAC1B,IAAI,CAACpB,KAAK,GAAG;MACZD,KAAK,EAAElJ,SAAS,CAACqJ,MAAM,6CAAY;MACnCmB,WAAW,EAAExK,SAAS,CAACqJ,MAAM,6CAAY;MACzCoB,UAAU,EAAEzK,SAAS,CAACoJ,QAAQ,6CAAY;MAC1CrG,iBAAiB,EAAE,KAAK;MACxBgH,KAAK,EAAEW,YAAY,CAACC,OAAO,CAAC,gBAAgB,CAAC,IAAI,EAAE;MACnDV,WAAW,EAAE;IACd,CAAC;IACD,IAAI,CAACW,IAAI,GAAG,EAAE;IACd,IAAI,CAACC,cAAc,GAAG,EAAE;IACxB,IAAI,CAACC,aAAa,GAAG,EAAE;IACvB,IAAI,CAACC,IAAI,GAAG,IAAI;IAChB,IAAI,CAACC,cAAc,GAAG,IAAI;EAC3B;EA4UAC,kBAAkBA,CAACC,SAAS,EAAE;IAC7B,IAAI,IAAI,CAAC3I,KAAK,CAAC6E,aAAa,KAAK8D,SAAS,CAAC9D,aAAa,EAAE;MACzD,IAAI,CAAC,IAAI,CAAC7E,KAAK,CAAC6E,aAAa,IAAI,CAAC,IAAI,CAAC+D,UAAU,EAAE;QAClD,IAAI,CAACA,UAAU,GAAG,IAAI3E,UAAU,CAAC4E,iBAAiB,CAAC,CAAC;QACpD,IAAI,CAACpF,GAAG,CAACqF,UAAU,CAAC,IAAI,CAACF,UAAU,CAAC;MACrC,CAAC,MAAM,IAAI,IAAI,CAAC5I,KAAK,CAAC6E,aAAa,IAAI,IAAI,CAAC+D,UAAU,EAAE;QACvD,IAAI,CAACnF,GAAG,CAACsF,aAAa,CAAC,IAAI,CAACH,UAAU,CAAC;QACvC,IAAI,CAACA,UAAU,GAAG,IAAI;MACvB;IACD;IAEA,IAAI,CAAC7K,KAAK,CAAC4K,SAAS,CAAC5F,oBAAoB,EAAE,IAAI,CAAC/C,KAAK,CAAC+C,oBAAoB,CAAC,IAAI,IAAI,CAAC/C,KAAK,CAAC+C,oBAAoB,EAAE;MAC/G,IAAI,IAAI,CAACsD,SAAS,EAAE;QACnB,IAAI,CAACA,SAAS,GAAG,IAAI,CAACA,SAAS,CAAC9C,SAAS,CAAC,IAAI,CAACvD,KAAK,CAAC+C,oBAAoB,CAAC,CAACS,KAAK,CAAC,IAAI,CAACC,GAAG,CAAC;MAC3F,CAAC,MAAM;QACN,MAAMC,EAAE,GAAGC,QAAQ,CAACC,aAAa,CAAC,KAAK,CAAC;QACxCF,EAAE,CAACG,SAAS,GAAGzE,cAAc,CAAC0E,oBAAoB,CAACC,KAAA,CAACrG,MAAM;UAACsG,IAAI,EAAE;QAAG,CAAE,CAAC,CAAC;QACxE;QACA,IAAI,CAACqC,SAAS,GAAG,IAAIpC,UAAU,CAACvG,MAAM,CAAC;UAAEwG,MAAM,EAAE,QAAQ;UAAE8E,OAAO,EAAEtF;QAAG,CAAC,CAAC,CAACH,SAAS,CAAC,IAAI,CAACvD,KAAK,CAAC+C,oBAAoB,CAAC,CAACS,KAAK,CAAC,IAAI,CAACC,GAAG,CAAC;QAEpI,IAAI,CAAC4C,SAAS,CAAClC,UAAU,CAAC,CAAC,CAACC,gBAAgB,CAAC,aAAa,EAAGhE,CAAC,IAAK;UAClEA,CAAC,CAACiE,eAAe,CAAC,CAAC;UACnBjE,CAAC,CAACkE,cAAc,CAAC,CAAC;UAClB,IAAI,CAACtE,KAAK,CAACG,QAAQ,CAACnB,kBAAkB,CAAC,IAAI,EAAE,IAAI,CAACgB,KAAK,CAAC+C,oBAAoB,EAAE,QAAQ,CAAC,CAAC;QACzF,CAAC,CAAC;MACH;IACD;IAEA,IAAI4F,SAAS,CAACM,YAAY,KAAK,IAAI,CAACjJ,KAAK,CAACiJ,YAAY,EAAE;MACvD,IAAI,CAAC,IAAI,CAACjJ,KAAK,CAACiJ,YAAY,EAAE;QAAA,IAAAC,eAAA;QAC7B,CAAAA,eAAA,OAAI,CAAC7C,SAAS,cAAA6C,eAAA,uBAAdA,eAAA,CAAgB3E,MAAM,CAAC,CAAC;MACzB;IACD;IAEA,IAAI,IAAI,CAACvE,KAAK,CAACmJ,aAAa,KAAK,CAACpL,KAAK,CAAC4K,SAAS,CAAC/G,cAAc,EAAE,IAAI,CAAC5B,KAAK,CAAC4B,cAAc,CAAC,IAAI,IAAI,CAAC5B,KAAK,CAACsF,UAAU,KAAKqD,SAAS,CAACrD,UAAU,CAAC,IAAI,IAAI,CAACtF,KAAK,CAAC4B,cAAc,EAAE;MAC7K,IAAI,CAAC+D,eAAe,GAAG,IAAI,CAACA,eAAe,GACxC,IAAI,CAACA,eAAe,CACnBpC,SAAS,CAAC,CAAC,IAAI,CAACvD,KAAK,CAAC4B,cAAc,CAAChB,GAAG,EAAE,IAAI,CAACZ,KAAK,CAAC4B,cAAc,CAAClB,GAAG,CAAC,CAAC,CACzE8C,KAAK,CAAC,IAAI,CAACC,GAAG,CAAC,CACf2F,OAAO,CACPhK,cAAc,CAAC0E,oBAAoB,CAClCC,KAAA,CAAClG,cAAc;QACdsC,QAAQ,EAAE,IAAI,CAACH,KAAK,CAACG,QAAS;QAC9ByB,cAAc,EAAE,IAAI,CAAC5B,KAAK,CAAC4B,cAAe;QAC1C0D,UAAU,EAAE,IAAI,CAACtF,KAAK,CAACsF;MAAW,CAClC,CACF,CACD,CAAC,GACD,IAAIrB,UAAU,CAACoF,KAAK,CAAC;QACrBC,WAAW,EAAE,KAAK;QAClBpF,MAAM,EAAE,KAAK;QACbqF,YAAY,EAAE,KAAK;QACnBC,MAAM,EAAE,CAAC,CAAC,EAAE,CAAC;MACb,CAAC,CAAC,CACDjG,SAAS,CAAC,CAAC,IAAI,CAACvD,KAAK,CAAC4B,cAAc,CAAChB,GAAG,EAAE,IAAI,CAACZ,KAAK,CAAC4B,cAAc,CAAClB,GAAG,CAAC,CAAC,CACzE0I,OAAO,CACPhK,cAAc,CAAC0E,oBAAoB,CAClCC,KAAA,CAAClG,cAAc;QACdsC,QAAQ,EAAE,IAAI,CAACH,KAAK,CAACG,QAAS;QAC9ByB,cAAc,EAAE,IAAI,CAAC5B,KAAK,CAAC4B,cAAe;QAC1C0D,UAAU,EAAE,IAAI,CAACtF,KAAK,CAACsF;MAAW,CAClC,CACF,CACD,CAAC,CACA9B,KAAK,CAAC,IAAI,CAACC,GAAG,CAAC;IACpB;IAEA,IAAI,IAAI,CAACkC,eAAe,IAAI,CAAC,IAAI,CAAC3F,KAAK,CAACmJ,aAAa,EAAE;MACtD,IAAI,CAACxD,eAAe,CAACpB,MAAM,CAAC,CAAC;IAC9B;IAEA,IAAI,CAACxG,KAAK,CAAC4K,SAAS,CAACc,aAAa,EAAE,IAAI,CAACzJ,KAAK,CAACyJ,aAAa,CAAC,IAAI,IAAI,CAACzJ,KAAK,CAACyJ,aAAa,EAAE;MAC1F,MAAMC,aAAa,GAAG,IAAI,CAAC1J,KAAK,CAACyJ,aAAa;MAE9C,IAAI,CAAChG,GAAG,CAACkG,KAAK,CAAC;QACdC,MAAM,EAAE,CAACF,aAAa,CAAC3E,QAAQ,CAACC,QAAQ,CAACpE,GAAG,EAAE8I,aAAa,CAAC3E,QAAQ,CAACC,QAAQ,CAACtE,GAAG,CAAC;QAClF0C,IAAI,EAAE,EAAE;QACRyG,KAAK,EAAE,GAAG;QACVC,KAAK,EAAE;MACR,CAAC,CAAC;MACF,IAAI,CAAC9J,KAAK,CAACG,QAAQ,CAACpB,yBAAyB,CAAC,KAAK,CAAC,CAAC;MACrD,IAAI,CAACiB,KAAK,CAACG,QAAQ,CAACrB,kBAAkB,CAAC,KAAK,CAAC,CAAC;MAC9C,IAAI,CAACyB,QAAQ,CAAC;QACbC,iBAAiB,EAAE;MACpB,CAAC,CAAC;IACH;IAEA,IAAI,CAACzC,KAAK,CAAC4K,SAAS,CAACzI,QAAQ,EAAE,IAAI,CAACF,KAAK,CAACE,QAAQ,CAAC,IAAI,IAAI,CAACF,KAAK,CAACE,QAAQ,EAAE;MAC3E,IAAI,CAACuD,GAAG,CAACkG,KAAK,CAAC;QACdC,MAAM,EAAE,CAAC,IAAI,CAAC5J,KAAK,CAACE,QAAQ,CAAC8B,SAAS,EAAE,IAAI,CAAChC,KAAK,CAACE,QAAQ,CAAC6B,QAAQ,CAAC;QACrEqB,IAAI,EAAE,IAAI,CAACpD,KAAK,CAACE,QAAQ,CAACkD,IAAI;QAC9ByG,KAAK,EAAE;MACR,CAAC,CAAC;IACH;IAEA,IAAI,CAAC9L,KAAK,CAAC4K,SAAS,CAAC5C,mBAAmB,EAAE,IAAI,CAAC/F,KAAK,CAAC+F,mBAAmB,CAAC,EAAE;MAC1E,IAAI,CAAC/F,KAAK,CAACG,QAAQ,CAACrB,kBAAkB,CAAC,KAAK,CAAC,CAAC;IAC/C;IAEA,IAAI,CAACf,KAAK,CAAC4K,SAAS,CAACtI,UAAU,EAAE,IAAI,CAACL,KAAK,CAACK,UAAU,CAAC,IAAI,IAAI,CAACL,KAAK,CAACK,UAAU,KAAK,YAAY,EAAE;MAClG,IAAI,CAAC0J,iBAAiB,CAAC,CAAC;IACzB;IAEA,IAAI,CAAChM,KAAK,CAAC4K,SAAS,CAACqB,aAAa,EAAE,IAAI,CAAChK,KAAK,CAACgK,aAAa,CAAC,IAAI,CAACjM,KAAK,CAAC4K,SAAS,CAACsB,iBAAiB,EAAE,IAAI,CAACjK,KAAK,CAACiK,iBAAiB,CAAC,EAAE;MACnI,MAAM;QAAED,aAAa;QAAEC,iBAAiB;QAAE5J,UAAU;QAAEgF,UAAU;QAAEJ;MAAS,CAAC,GAAG,IAAI,CAACjF,KAAK;MACzF,IAAIkK,iBAAiB,GAAG,EAAE;QACzBC,eAAe,GAAG,EAAE;MACrB,IAAI,CAACF,iBAAiB,GAAG,EAAE;MAE3B,IAAK5J,UAAU,KAAK,YAAY,IAAIA,UAAU,KAAK,QAAQ,IAAK,CAAC4J,iBAAiB,EAAE;QAAA,IAAAG,qBAAA,EAAAC,sBAAA;QACnF;QACA,IAAI,IAAI,CAAC5G,GAAG,CAAC6G,QAAQ,CAAC,qBAAqB,CAAC,EAAE,IAAI,CAAC7G,GAAG,CAAC8G,WAAW,CAAC,qBAAqB,CAAC;QACzF,IAAI,IAAI,CAAC9G,GAAG,CAAC6G,QAAQ,CAAC,sBAAsB,CAAC,EAAE,IAAI,CAAC7G,GAAG,CAAC8G,WAAW,CAAC,sBAAsB,CAAC;QAC3F,IAAI,IAAI,CAAC9G,GAAG,CAAC6G,QAAQ,CAAC,cAAc,CAAC,EAAE,IAAI,CAAC7G,GAAG,CAAC8G,WAAW,CAAC,cAAc,CAAC;QAC3E,IAAI,IAAI,CAAC9G,GAAG,CAAC6G,QAAQ,CAAC,cAAc,CAAC,EAAE,IAAI,CAAC7G,GAAG,CAAC8G,WAAW,CAAC,cAAc,CAAC;QAE3E,IAAI,IAAI,CAAC9G,GAAG,CAAC+G,SAAS,CAAC,sBAAsB,CAAC,EAAE,IAAI,CAAC/G,GAAG,CAACgH,YAAY,CAAC,sBAAsB,CAAC;QAC7F,IAAI,IAAI,CAAChH,GAAG,CAAC+G,SAAS,CAAC,uBAAuB,CAAC,EAAE,IAAI,CAAC/G,GAAG,CAACgH,YAAY,CAAC,uBAAuB,CAAC;QAC/F,IAAI,IAAI,CAAChH,GAAG,CAAC+G,SAAS,CAAC,eAAe,CAAC,EAAE,IAAI,CAAC/G,GAAG,CAACgH,YAAY,CAAC,eAAe,CAAC;QAC/E,IAAI,IAAI,CAAChH,GAAG,CAAC+G,SAAS,CAAC,eAAe,CAAC,EAAE,IAAI,CAAC/G,GAAG,CAACgH,YAAY,CAAC,eAAe,CAAC;QAE/E,CAAAL,qBAAA,OAAI,CAACpC,gBAAgB,CAAC,CAAC,CAAC,cAAAoC,qBAAA,uBAAxBA,qBAAA,CAA0B7F,MAAM,CAAC,CAAC;QAClC,CAAA8F,sBAAA,OAAI,CAACrC,gBAAgB,CAAC,CAAC,CAAC,cAAAqC,sBAAA,uBAAxBA,sBAAA,CAA0B9F,MAAM,CAAC,CAAC;MACnC,CAAC,MAAM;QACN,IAAI0F,iBAAiB,EAAE;UACtB,IAAIS,QAAQ,GAAG,EAAE;UACjB,IAAIvC,YAAY,CAACC,OAAO,CAAC,MAAM,CAAC,KAAK,YAAY,EAAE;YAClDsC,QAAQ,GAAG,GAAG,CAACT,iBAAiB,CAACU,OAAO,CAAC,CAAC,CAAC,CAACC,IAAI,CAAC,CAAC,CAAC,CAACF,QAAQ,CAAClD,KAAK,GAAG,IAAI,EAAEqD,OAAO,CAAC,CAAC,CAAC,KAAK;UAC3F,CAAC,MAAM,IAAI1C,YAAY,CAACC,OAAO,CAAC,MAAM,CAAC,KAAK,OAAO,EAAE;YACpDsC,QAAQ,GAAG,GAAG,CAAET,iBAAiB,CAACU,OAAO,CAAC,CAAC,CAAC,CAACC,IAAI,CAAC,CAAC,CAAC,CAACF,QAAQ,CAAClD,KAAK,GAAG,IAAI,GAAIhI,WAAW,CAACsL,KAAK,EAAED,OAAO,CAAC,CAAC,CAAC,MAAM;UAClH,CAAC,MAAM;YACNH,QAAQ,GAAG,GAAG,CAACT,iBAAiB,CAACU,OAAO,CAAC,CAAC,CAAC,CAACC,IAAI,CAAC,CAAC,CAAC,CAACF,QAAQ,CAAClD,KAAK,GAAG,IAAI,EAAEqD,OAAO,CAAC,CAAC,CAAC,KAAK;UAC3F;UACA,IAAIE,iBAAiB,GAAG,CAAC,CAAC;UAC1BA,iBAAiB,CAACC,WAAW,GAAG,IAAI,CAACC,cAAc,CAAChB,iBAAiB,CAACU,OAAO,CAAC,CAAC,CAAC,CAACO,iBAAiB,CAACC,MAAM,CAAC;UAC1GJ,iBAAiB,CAACxF,IAAI,GAAG,YAAY;UACrC4E,eAAe,CAAC1D,IAAI,CAACsE,iBAAiB,CAAC;UACvCZ,eAAe,CAAC,CAAC,CAAC,CAACiB,OAAO,GAAG,SAAS;UACtC,IAAIC,iBAAiB,GAAG,CAAC,CAAC;UAC1BA,iBAAiB,CAACL,WAAW,GAAG,IAAI,CAACC,cAAc,CAAChB,iBAAiB,CAACqB,QAAQ,CAAC,CAAC,CAAC,CAACJ,iBAAiB,CAACC,MAAM,CAAC;UAC3GE,iBAAiB,CAAC9F,IAAI,GAAG,YAAY;UACrC4E,eAAe,CAAC1D,IAAI,CAAC4E,iBAAiB,CAAC;UACvClB,eAAe,CAAC,CAAC,CAAC,CAACiB,OAAO,GAAG,UAAU;UAEvClB,iBAAiB,CAACzD,IAAI,CAAC;YACtBlB,IAAI,EAAE,YAAY;YAClByF,WAAW,EAAE,CACZ,CAACb,eAAe,CAAC,CAAC,CAAC,CAACa,WAAW,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAEb,eAAe,CAAC,CAAC,CAAC,CAACa,WAAW,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAC5E,CAAC3F,UAAU,aAAVA,UAAU,uBAAVA,UAAU,CAAEN,QAAQ,CAACC,QAAQ,CAACpE,GAAG,EAAEyE,UAAU,aAAVA,UAAU,uBAAVA,UAAU,CAAEN,QAAQ,CAACC,QAAQ,CAACtE,GAAG,CAAC;UAExE,CAAC,CAAC;UACFwJ,iBAAiB,CAACzD,IAAI,CAAC;YACtBlB,IAAI,EAAE,YAAY;YAClByF,WAAW,EAAE,CACZ,CAACb,eAAe,CAAC,CAAC,CAAC,CAACa,WAAW,CAACb,eAAe,CAAC,CAAC,CAAC,CAACa,WAAW,CAAC5I,MAAM,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE+H,eAAe,CAAC,CAAC,CAAC,CAACa,WAAW,CAACb,eAAe,CAAC,CAAC,CAAC,CAACa,WAAW,CAAC5I,MAAM,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAC5J,CAAC6C,QAAQ,aAARA,QAAQ,uBAARA,QAAQ,CAAEF,QAAQ,CAACC,QAAQ,CAACpE,GAAG,EAAEqE,QAAQ,aAARA,QAAQ,uBAARA,QAAQ,CAAEF,QAAQ,CAACC,QAAQ,CAACtE,GAAG,CAAC;UAEpE,CAAC,CAAC;UAEFyJ,eAAe,CAAC1G,GAAG,CAAC,CAACiC,IAAI,EAAE6F,CAAC,KAAK;YAChC;YACA,IAAI,IAAI,CAAC9H,GAAG,CAAC6G,QAAQ,CAAC,eAAe5E,IAAI,CAAC0F,OAAO,EAAE,CAAC,EAAE,IAAI,CAAC3H,GAAG,CAAC8G,WAAW,CAAC,eAAe7E,IAAI,CAAC0F,OAAO,EAAE,CAAC;YACzG,IAAI,IAAI,CAAC3H,GAAG,CAAC+G,SAAS,CAAC,gBAAgB9E,IAAI,CAAC0F,OAAO,EAAE,CAAC,EAAE,IAAI,CAAC3H,GAAG,CAACgH,YAAY,CAAC,gBAAgB/E,IAAI,CAAC0F,OAAO,EAAE,CAAC;YAC7G,IAAI,CAAC3H,GAAG,CAAC+H,SAAS,CAAC,gBAAgB9F,IAAI,CAAC0F,OAAO,EAAE,EAAE;cAClD7F,IAAI,EAAE,SAAS;cACfrD,IAAI,EAAE;gBACLqD,IAAI,EAAE,SAAS;gBACfkG,UAAU,EAAE,CAAC,CAAC;gBACd1G,QAAQ,EAAEW;cACX;YACD,CAAC,CAAC;YACF,IAAI,CAACjC,GAAG,CAACiI,QAAQ,CAAC;cACjBlH,EAAE,EAAE,eAAekB,IAAI,CAAC0F,OAAO,EAAE;cACjC7F,IAAI,EAAE,MAAM;cACZoG,MAAM,EAAE,gBAAgBjG,IAAI,CAAC0F,OAAO,EAAE;cACtCQ,MAAM,EAAE;gBACP,WAAW,EAAE,OAAO;gBACpB,UAAU,EAAE;cACb,CAAC;cACDC,KAAK,EAAE;gBACN,YAAY,EAAE,mBAAmB;gBACjC,YAAY,EAAE,CAAC;gBACf,cAAc,EAAEnG,IAAI,CAAC0F,OAAO,KAAKpB,aAAa,GAAG,CAAC,GAAG;cACtD;YACD,CAAC,CAAC;YACF;;YAEA,IAAI,IAAI,CAACvG,GAAG,CAAC6G,QAAQ,CAAC,cAAciB,CAAC,EAAE,CAAC,EAAE,IAAI,CAAC9H,GAAG,CAAC8G,WAAW,CAAC,cAAcgB,CAAC,EAAE,CAAC;YACjF,IAAI,IAAI,CAAC9H,GAAG,CAAC+G,SAAS,CAAC,eAAee,CAAC,EAAE,CAAC,EAAE,IAAI,CAAC9H,GAAG,CAACgH,YAAY,CAAC,eAAec,CAAC,EAAE,CAAC;YACrF,IAAI,CAAC9H,GAAG,CAAC+H,SAAS,CAAC,eAAeD,CAAC,EAAE,EAAE;cACtChG,IAAI,EAAE,SAAS;cACfrD,IAAI,EAAE;gBACLqD,IAAI,EAAE,SAAS;gBACfkG,UAAU,EAAE,CAAC,CAAC;gBACd1G,QAAQ,EAAEmF,iBAAiB,CAACqB,CAAC;cAC9B;YACD,CAAC,CAAC;YACF,IAAI,CAAC9H,GAAG,CAACiI,QAAQ,CAAC;cACjBlH,EAAE,EAAE,cAAc+G,CAAC,EAAE;cACrBhG,IAAI,EAAE,MAAM;cACZoG,MAAM,EAAE,eAAeJ,CAAC,EAAE;cAC1BK,MAAM,EAAE;gBACP,WAAW,EAAE,OAAO;gBACpB,UAAU,EAAE;cACb,CAAC;cACDC,KAAK,EAAE;gBACN,YAAY,EAAE,oBAAoB;gBAClC,cAAc,EAAE,CAAC;gBACjB,YAAY,EAAE,CAAC;gBACf,gBAAgB,EAAE,CAAC,GAAG,EAAE,CAAC;cAC1B;YACD,CAAC,CAAC;YACF;;YAEA,IAAI,IAAI,CAAC7D,gBAAgB,CAACuD,CAAC,CAAC,EAAE;cAAA,IAAAO,sBAAA;cAC7B,CAAAA,sBAAA,OAAI,CAAC9D,gBAAgB,CAACuD,CAAC,CAAC,cAAAO,sBAAA,uBAAxBA,sBAAA,CAA0BvH,MAAM,CAAC,CAAC;cAClC,IAAI,CAACyD,gBAAgB,CAACuD,CAAC,CAAC,GAAG,IAAI;YAChC;YACA,IAAI,CAACvD,gBAAgB,CAACuD,CAAC,CAAC,GAAG,IAAItH,UAAU,CAACoF,KAAK,CAAC;cAC/CC,WAAW,EAAE,KAAK;cAClBpF,MAAM,EAAE,KAAK;cACbqF,YAAY,EAAE,KAAK;cACnBtI,SAAS,EAAEyE,IAAI,CAAC0F,OAAO,KAAKpB,aAAa,GAAG,gBAAgB,GAAG;YAChE,CAAC,CAAC,CACAzG,SAAS,CAAC,CAACgI,CAAC,KAAK,CAAC,GAAG7F,IAAI,CAACsF,WAAW,CAACe,IAAI,CAACC,KAAK,CAAC,IAAI,GAAGtG,IAAI,CAACsF,WAAW,CAAC5I,MAAM,CAAC,CAAC,CAAC,CAAC,CAAC,GAAGsD,IAAI,CAACsF,WAAW,CAACe,IAAI,CAACC,KAAK,CAAC,IAAI,GAAGtG,IAAI,CAACsF,WAAW,CAAC5I,MAAM,CAAC,CAAC,CAAC,CAAC,CAAC,EAAEmJ,CAAC,KAAK,CAAC,GAAG7F,IAAI,CAACsF,WAAW,CAACe,IAAI,CAACC,KAAK,CAACtG,IAAI,CAACsF,WAAW,CAAC5I,MAAM,GAAG,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,GAAGsD,IAAI,CAACsF,WAAW,CAACe,IAAI,CAACC,KAAK,CAACtG,IAAI,CAACsF,WAAW,CAAC5I,MAAM,GAAG,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CACrSgH,OAAO,CACPhK,cAAc,CAAC0E,oBAAoB,CAClCC,KAAA;cACC9C,SAAS,EAAC,mBAAmB;cAC7BuD,EAAE,EAAE,SAASkB,IAAI,CAAC0F,OAAO;YAAG,GAC5BrH,KAAA,YAAI2G,QAAY,CAAC,EACjB3G,KAAA,YAAIkG,iBAAiB,CAACvE,IAAI,CAAC0F,OAAO,CAAC,CAAC,CAAC,CAAC,CAACR,IAAI,CAAC,CAAC,CAAC,CAACqB,QAAQ,CAACC,IAAQ,CAC5D,CACN,CACD,CAAC,CACAC,WAAW,CAAC,OAAO,CAAC,CACpB3I,KAAK,CAAC,IAAI,CAACC,GAAG,CAAC;YACjBE,QAAQ,CAACyI,cAAc,CAAC,SAAS1G,IAAI,CAAC0F,OAAO,EAAE,CAAC,CAAChH,gBAAgB,CAAC,OAAO,EAAE,MAAM;cAChF,IAAI,CAACpE,KAAK,CAACG,QAAQ,CAAC3B,kBAAkB,CAACkH,IAAI,CAAC0F,OAAO,CAAC,CAAC;YACtD,CAAC,CAAC;YACF,MAAMiB,eAAe,GAAIC,MAAM,IAAK;cACnC,MAAM,CAACC,UAAU,EAAEC,WAAW,CAAC,GAAGF,MAAM;cAExC,MAAMG,MAAM,GAAGV,IAAI,CAACW,GAAG,CAACH,UAAU,CAAC,CAAC,CAAC,EAAEC,WAAW,CAAC,CAAC,CAAC,CAAC;cACtD,MAAMG,MAAM,GAAGZ,IAAI,CAACa,GAAG,CAACL,UAAU,CAAC,CAAC,CAAC,EAAEC,WAAW,CAAC,CAAC,CAAC,CAAC;cAEtD,MAAMK,MAAM,GAAGd,IAAI,CAACW,GAAG,CAACH,UAAU,CAAC,CAAC,CAAC,EAAEC,WAAW,CAAC,CAAC,CAAC,CAAC;cACtD,MAAMM,MAAM,GAAGf,IAAI,CAACa,GAAG,CAACL,UAAU,CAAC,CAAC,CAAC,EAAEC,WAAW,CAAC,CAAC,CAAC,CAAC;cAEtD,OAAO,CACN,CAACK,MAAM,EAAEJ,MAAM,CAAC,EAChB,CAACK,MAAM,EAAEH,MAAM,CAAC,CAChB;YACF,CAAC;YACD,MAAMI,KAAK,GAAGV,eAAe,CAAC,CAAC3G,IAAI,CAACsF,WAAW,CAAC,CAAC,CAAC,EAAEtF,IAAI,CAACsF,WAAW,CAACtF,IAAI,CAACsF,WAAW,CAAC5I,MAAM,GAAG,CAAC,CAAC,CAAC,CAAC;YACnG,IAAI3C,QAAQ,EAAE;cACb,IAAI,CAACgJ,cAAc,GAAG,IAAI,CAAChF,GAAG,CAACuJ,eAAe,CAACD,KAAK,EAAE;gBACrDE,OAAO,EAAE;kBAAEC,GAAG,EAAE,EAAE;kBAAEC,MAAM,EAAE,EAAE;kBAAEC,IAAI,EAAE,EAAE;kBAAEC,KAAK,EAAE;gBAAG;cACrD,CAAC,CAAC;YACH,CAAC,MAAM;cACN,IAAI,CAAC5E,cAAc,GAAG,IAAI,CAAChF,GAAG,CAACuJ,eAAe,CAACD,KAAK,EAAE;gBACrDE,OAAO,EAAE;kBAAEC,GAAG,EAAE,EAAE;kBAAEC,MAAM,EAAE,EAAE;kBAAEC,IAAI,EAAE,GAAG;kBAAEC,KAAK,EAAE;gBAAG;cACtD,CAAC,CAAC;YACH;UACD,CAAC,CAAC;UAEF,IAAI,CAAC7E,IAAI,GAAG;YACXzG,QAAQ,EAAE,IAAI,CAAC0G,cAAc,CAACmB,MAAM,CAAClJ,GAAG;YACxCsB,SAAS,EAAE,IAAI,CAACyG,cAAc,CAACmB,MAAM,CAAChJ,GAAG;YACzCwC,IAAI,EAAE,IAAI,CAACqF,cAAc,CAACrF;UAC3B,CAAC;QACF;MACD;MAEA,IAAI,CAACpD,KAAK,CAACG,QAAQ,CAACnC,oBAAoB,CAAC,IAAI,CAACwK,IAAI,CAAC,CAAC;IACrD;IACA,IAAI,CAACzK,KAAK,CAAC4K,SAAS,CAACtD,UAAU,EAAE,IAAI,CAACrF,KAAK,CAACqF,UAAU,CAAC,EAAE;MACxD,MAAMnC,KAAK,GAAG,IAAI,CAAClD,KAAK,CAACqF,UAAU;MACnC,IAAInC,KAAK,EAAE;QACV,MAAMoK,KAAK,GAAG,IAAIrJ,UAAU,CAACoF,KAAK,CAAC;UAClCG,MAAM,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC;UAChBvI,SAAS,EAAE,gBAAgB;UAC3BqI,WAAW,EAAE;QACd,CAAC,CAAC,CACAF,OAAO,CAAC,wDAAwDlG,KAAK,CAACX,IAAI,QAAQ,CAAC,CACnF4J,WAAW,CAAC,OAAO,CAAC;QACtB,IAAI,IAAI,CAACoB,YAAY,EAAE;UACtB,IAAI,CAACA,YAAY,GAAG,IAAI,CAACA,YAAY,CAAChK,SAAS,CAACL,KAAK,CAAC6B,QAAQ,CAACC,QAAQ,CAAC,CAACwI,QAAQ,CAACF,KAAK,CAAC,CAAC9J,KAAK,CAAC,IAAI,CAACC,GAAG,CAAC;QACzG,CAAC,MAAM;UACN,MAAMgK,YAAY,GAAG9J,QAAQ,CAACC,aAAa,CAAC,KAAK,CAAC;UAClD6J,YAAY,CAAC5J,SAAS,GAAGzE,cAAc,CAAC0E,oBAAoB,CAC3DC,KAAA;YAAK9C,SAAS,EAAC;UAAc,GAC5B8C,KAAA;YACC2J,GAAG,EAAEhO,MAAM,CAACiO,MAAO;YACnBhH,KAAK,EAAE;cAAEiH,KAAK,EAAE;YAAG,CAAE;YACrBC,GAAG,EAAC;UAAE,CACN,CACG,CACN,CAAC;UACD,IAAI,CAACN,YAAY,GAAG,IAAItJ,UAAU,CAACvG,MAAM,CAAC;YACzCwG,MAAM,EAAE,QAAQ;YAChB8E,OAAO,EAAEyE;UACV,CAAC,CAAC,CACAD,QAAQ,CAACF,KAAK,CAAC,CACf/J,SAAS,CAACL,KAAK,CAAC6B,QAAQ,CAACC,QAAQ,CAAC,CAClCxB,KAAK,CAAC,IAAI,CAACC,GAAG,CAAC;UACjB,IAAI,CAAC8J,YAAY,CAACpJ,UAAU,CAAC,CAAC,CAACC,gBAAgB,CAAC,aAAa,EAAGhE,CAAC,IAAK;YACrEA,CAAC,CAACiE,eAAe,CAAC,CAAC;YACnBjE,CAAC,CAACkE,cAAc,CAAC,CAAC;YAClB,MAAM3D,MAAM,GAAG,IAAI,CAAC4M,YAAY,CAAC3H,SAAS,CAAC,CAAC;YAC5C,IAAI,CAAC5F,KAAK,CAACG,QAAQ,CAACnB,kBAAkB,CAAC,IAAI,EAAE2B,MAAM,EAAE,gBAAgB,CAAC,CAAC;YACvE,IAAI,CAACX,KAAK,CAACG,QAAQ,CAACrB,kBAAkB,CAAC,KAAK,CAAC,CAAC;UAC/C,CAAC,CAAC;UACF,IAAI,CAACyO,YAAY,CAACpJ,UAAU,CAAC,CAAC,CAACC,gBAAgB,CAAC,OAAO,EAAE,MAAM;YAC9D,IAAIkJ,KAAK,CAACQ,MAAM,CAAC,CAAC,EAAE;cACnB,IAAI,CAACP,YAAY,CAACQ,WAAW,CAAC,CAAC;YAChC;UACD,CAAC,CAAC;UACF,IAAI,CAACR,YAAY,CAACpJ,UAAU,CAAC,CAAC,CAACC,gBAAgB,CAAC,YAAY,EAAE,MAAM,IAAI,CAACmJ,YAAY,CAACQ,WAAW,CAAC,CAAC,CAAC;UACpG,IAAI,CAACR,YAAY,CAACpJ,UAAU,CAAC,CAAC,CAACC,gBAAgB,CAAC,YAAY,EAAE,MAAM,IAAI,CAACmJ,YAAY,CAACQ,WAAW,CAAC,CAAC,CAAC;QACrG;MACD,CAAC,MAAM;QAAA,IAAAC,qBAAA,EAAAC,qBAAA;QACN,IAAIlQ,KAAK,CAAC,IAAI,CAACwP,YAAY,CAAC3H,SAAS,CAAC,CAAC,EAAE,IAAI,CAAC5F,KAAK,CAAC4B,cAAc,CAAC,EAAE;UACpE,IAAI,CAAC5B,KAAK,CAACG,QAAQ,CAACnB,kBAAkB,CAAC,KAAK,CAAC,CAAC;QAC/C;QACA,IAAIjB,KAAK,EAAAiQ,qBAAA,GAACrF,SAAS,CAACtD,UAAU,cAAA2I,qBAAA,uBAApBA,qBAAA,CAAsBhI,QAAQ,GAAAiI,qBAAA,GAAE,IAAI,CAACrH,KAAK,CAACvD,eAAe,cAAA4K,qBAAA,uBAA1BA,qBAAA,CAA4BjI,QAAQ,CAAC,EAAE;UAChF,IAAI,CAACd,uBAAuB,CAAC,KAAK,CAAC;QACpC;QACA,IAAI,CAACA,uBAAuB,CAAC,KAAK,CAAC;QACnC,IAAI,CAACqI,YAAY,GAAG,IAAI,CAACA,YAAY,CAAChJ,MAAM,CAAC,CAAC,GAAG,IAAI;MACtD;IACD;IAEA,IAAI,CAACxG,KAAK,CAAC4K,SAAS,CAAC1D,QAAQ,EAAE,IAAI,CAACjF,KAAK,CAACiF,QAAQ,CAAC,EAAE;MACpD,MAAM/B,KAAK,GAAG,IAAI,CAAClD,KAAK,CAACiF,QAAQ;MACjC,IAAI/B,KAAK,EAAE;QACV,MAAMoK,KAAK,GAAG,IAAIrJ,UAAU,CAACoF,KAAK,CAAC;UAClCG,MAAM,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC;UAChBvI,SAAS,EAAE,gBAAgB;UAC3BqI,WAAW,EAAE;QACd,CAAC,CAAC,CACAF,OAAO,CAAC,wDAAwDlG,KAAK,CAACX,IAAI,QAAQ,CAAC,CACnF4J,WAAW,CAAC,OAAO,CAAC;QACtB,IAAI,IAAI,CAAC+B,UAAU,EAAE;UACpB,IAAI,CAACjJ,QAAQ,GAAG,IAAI,CAACiJ,UAAU,CAACV,QAAQ,CAACF,KAAK,CAAC,CAAC/J,SAAS,CAACL,KAAK,CAAC6B,QAAQ,CAACC,QAAQ,CAAC,CAACxB,KAAK,CAAC,IAAI,CAACC,GAAG,CAAC;QACnG,CAAC,MAAM;UACN,MAAM0K,UAAU,GAAGxK,QAAQ,CAACC,aAAa,CAAC,KAAK,CAAC;UAChDuK,UAAU,CAACtK,SAAS,GAAGzE,cAAc,CAAC0E,oBAAoB,CACzDC,KAAA;YAAK9C,SAAS,EAAC;UAAY,GAC1B8C,KAAA,cACCA,KAAA;YACC2J,GAAG,EAAEhO,MAAM,CAAC0O,MAAO;YACnBP,GAAG,EAAC;UAAE,CACN,CACG,CACD,CACN,CAAC;UACD,IAAI,CAACK,UAAU,GAAG,IAAIjK,UAAU,CAACvG,MAAM,CAAC;YACvCwG,MAAM,EAAE,QAAQ;YAChB8E,OAAO,EAAEmF;UACV,CAAC,CAAC,CACAX,QAAQ,CAACF,KAAK,CAAC,CACf/J,SAAS,CAACL,KAAK,CAAC6B,QAAQ,CAACC,QAAQ,CAAC,CAClCxB,KAAK,CAAC,IAAI,CAACC,GAAG,CAAC;UACjB,IAAI,CAACyK,UAAU,CAAC/J,UAAU,CAAC,CAAC,CAACC,gBAAgB,CAAC,aAAa,EAAGhE,CAAC,IAAK;YACnEA,CAAC,CAACiE,eAAe,CAAC,CAAC;YACnBjE,CAAC,CAACkE,cAAc,CAAC,CAAC;YAClB,MAAM3D,MAAM,GAAG,IAAI,CAACuN,UAAU,CAACtI,SAAS,CAAC,CAAC;YAC1C,IAAI,CAAC5F,KAAK,CAACG,QAAQ,CAACnB,kBAAkB,CAAC,IAAI,EAAE2B,MAAM,EAAE,cAAc,CAAC,CAAC;YACrE,IAAI,CAACX,KAAK,CAACG,QAAQ,CAACrB,kBAAkB,CAAC,KAAK,CAAC,CAAC;UAC/C,CAAC,CAAC;UACF,IAAI,CAACoP,UAAU,CAAC/J,UAAU,CAAC,CAAC,CAACC,gBAAgB,CAAC,OAAO,EAAE,MAAM;YAC5D,IAAIkJ,KAAK,CAACQ,MAAM,CAAC,CAAC,EAAE;cACnB,IAAI,CAACI,UAAU,CAACH,WAAW,CAAC,CAAC;YAC9B;UACD,CAAC,CAAC;UACF,IAAI,CAACG,UAAU,CAAC/J,UAAU,CAAC,CAAC,CAACC,gBAAgB,CAAC,YAAY,EAAE,MAAM,IAAI,CAAC8J,UAAU,CAACH,WAAW,CAAC,CAAC,CAAC;UAChG,IAAI,CAACG,UAAU,CAAC/J,UAAU,CAAC,CAAC,CAACC,gBAAgB,CAAC,YAAY,EAAE,MAAM,IAAI,CAAC8J,UAAU,CAACH,WAAW,CAAC,CAAC,CAAC;QACjG;MACD,CAAC,MAAM;QAAA,IAAAM,kBAAA,EAAAC,mBAAA,EAAAC,sBAAA;QACN,IAAIxQ,KAAK,EAAAsQ,kBAAA,GAAC,IAAI,CAACd,YAAY,cAAAc,kBAAA,uBAAjBA,kBAAA,CAAmBzI,SAAS,CAAC,CAAC,EAAE,IAAI,CAAC5F,KAAK,CAAC4B,cAAc,CAAC,EAAE;UACrE,IAAI,CAAC5B,KAAK,CAACG,QAAQ,CAACnB,kBAAkB,CAAC,KAAK,CAAC,CAAC;QAC/C;QAEA,IAAIjB,KAAK,EAAAuQ,mBAAA,GAAC3F,SAAS,CAAC1D,QAAQ,cAAAqJ,mBAAA,uBAAlBA,mBAAA,CAAoBtI,QAAQ,GAAAuI,sBAAA,GAAE,IAAI,CAAC3H,KAAK,CAACvD,eAAe,cAAAkL,sBAAA,uBAA1BA,sBAAA,CAA4BvI,QAAQ,CAAC,EAAE;UAC9E,IAAI,CAACd,uBAAuB,CAAC,KAAK,CAAC;QACpC;QACA,IAAI,CAACgJ,UAAU,GAAG,IAAI,CAACA,UAAU,CAAC3J,MAAM,CAAC,CAAC,GAAG,IAAI;MAClD;IACD;IAEA,IAAI,CAACxG,KAAK,CAAC4K,SAAS,CAAClD,aAAa,EAAE,IAAI,CAACzF,KAAK,CAACyF,aAAa,CAAC,IAAI,CAAC1H,KAAK,CAAC4K,SAAS,CAAC6F,mBAAmB,EAAE,IAAI,CAACxO,KAAK,CAACwO,mBAAmB,CAAC,EAAE;MAAA,IAAAC,qBAAA;MACvI,IAAI,EAAAA,qBAAA,OAAI,CAACC,kBAAkB,cAAAD,qBAAA,uBAAvBA,qBAAA,CAAyBrM,MAAM,IAAG,CAAC,EAAE;QACxC,IAAI,CAACsM,kBAAkB,CAACC,OAAO,CAAEjJ,IAAI,IAAK;UACzCA,IAAI,CAACnB,MAAM,CAAC,CAAC;QACd,CAAC,CAAC;QACF,IAAI,CAACmK,kBAAkB,GAAG,EAAE;MAC7B;MACA,MAAM;QAAEjJ,aAAa;QAAEM;MAAoB,CAAC,GAAG,IAAI,CAAC/F,KAAK;MACzD,IAAIyF,aAAa,CAACrD,MAAM,GAAG,CAAC,EAAE;QAC7B,IAAI,CAACsM,kBAAkB,GAAG,EAAE;QAC5B,IAAIhL,EAAE,GAAGC,QAAQ,CAACC,aAAa,CAAC,KAAK,CAAC;QACtCF,EAAE,CAACG,SAAS,GAAGzE,cAAc,CAAC0E,oBAAoB,CACjDC,KAAA,CAACrG,MAAM;UACN8G,EAAE,EAAC,eAAe;UAClBe,IAAI,EAAC;QAAQ,CACb,CACF,CAAC;QACD,IAAI,CAACmJ,kBAAkB,CAAC,CAAC,CAAC,GAAG,IAAIzK,UAAU,CAACvG,MAAM,CAACgG,EAAE,EAAE;UACtDQ,MAAM,EAAE;QACT,CAAC,CAAC,CACAsJ,QAAQ,CACR,IAAIvJ,UAAU,CAACoF,KAAK,CAAC;UACpBG,MAAM,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC;UAChBvI,SAAS,EAAE,gBAAgB;UAC3BqI,WAAW,EAAE;QACd,CAAC,CAAC,CACAF,OAAO,CAAC,wDAAwDrD,mBAAmB,CAACxD,IAAI,QAAQ,CAAC,CACjG4J,WAAW,CAAC,OAAO,CACtB,CAAC,CACA5I,SAAS,CAACwC,mBAAmB,CAAChB,QAAQ,CAACC,QAAQ,CAAC,CAChDxB,KAAK,CAAC,IAAI,CAACC,GAAG,CAAC;QACjB,MAAMmL,eAAe,GAAG,IAAI,CAACF,kBAAkB,CAAC,CAAC,CAAC,CAACvK,UAAU,CAAC,CAAC;QAE/DyK,eAAe,CAACxK,gBAAgB,CAAC,OAAO,EAAE,MAAM;UAC/C,IAAI,CAACyK,kBAAkB,CAAC,QAAQ,EAAE9I,mBAAmB,CAAC;UACtD,IAAI,CAAC/F,KAAK,CAACG,QAAQ,CAACrB,kBAAkB,CAAC,KAAK,CAAC,CAAC;UAC9C,IAAI,IAAI,CAAC4P,kBAAkB,CAAC,CAAC,CAAC,CAACI,QAAQ,CAAC,CAAC,CAAChB,MAAM,CAAC,CAAC,EAAE;YACnD,IAAI,CAACY,kBAAkB,CAAC,CAAC,CAAC,CAACX,WAAW,CAAC,CAAC;UACzC;QACD,CAAC,CAAC;QAEFa,eAAe,CAACxK,gBAAgB,CAAC,aAAa,EAAGhE,CAAC,IAAK;UACtDA,CAAC,CAACiE,eAAe,CAAC,CAAC;UACnBjE,CAAC,CAACkE,cAAc,CAAC,CAAC;UAClB,IAAI,CAACtE,KAAK,CAACG,QAAQ,CAACrB,kBAAkB,CAAC,KAAK,CAAC,CAAC;UAC9C,IAAI,CAACkB,KAAK,CAACG,QAAQ,CAACnB,kBAAkB,CAAC,IAAI,EAAE+G,mBAAmB,CAAChB,QAAQ,CAACC,QAAQ,EAAE,QAAQ,CAAC,CAAC;QAC/F,CAAC,CAAC;QAEF4J,eAAe,CAACxK,gBAAgB,CAAC,YAAY,EAAE,MAAM,IAAI,CAACsK,kBAAkB,CAAC,CAAC,CAAC,CAACX,WAAW,CAAC,CAAC,CAAC;QAC9Fa,eAAe,CAACxK,gBAAgB,CAAC,YAAY,EAAE,MAAM,IAAI,CAACsK,kBAAkB,CAAC,CAAC,CAAC,CAACX,WAAW,CAAC,CAAC,CAAC;QAE9FtI,aAAa,CAACkJ,OAAO,CAAC,CAACjJ,IAAI,EAAE6F,CAAC,KAAK;UAClC,MAAM+B,KAAK,GAAG,IAAIrJ,UAAU,CAACoF,KAAK,CAAC;YAClCG,MAAM,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC;YAChBvI,SAAS,EAAE,gBAAgB;YAC3BqI,WAAW,EAAE,KAAK;YAClBpF,MAAM,EAAE;UACT,CAAC,CAAC,CACAkF,OAAO,CAAC,wDAAwD1D,IAAI,CAACnD,IAAI,QAAQ,CAAC,CAClF4J,WAAW,CAAC,OAAO,CAAC;UACtBzI,EAAE,GAAGC,QAAQ,CAACC,aAAa,CAAC,KAAK,CAAC;UAClCF,EAAE,CAACG,SAAS,GAAGzE,cAAc,CAAC0E,oBAAoB,CACjDC,KAAA,CAACrG,MAAM;YACN6H,IAAI,EAAC,QAAQ;YACbrC,KAAK,EAAEwC,IAAK;YACZqJ,YAAY,EAAE,IAAI,CAAC/O,KAAK,CAACwO,mBAAoB;YAC7ChK,EAAE,EAAE,iBAAiB+G,CAAC;UAAG,CACzB,CACF,CAAC;UACD,IAAI,CAACmD,kBAAkB,CAACjI,IAAI,CAC3B,IAAIxC,UAAU,CAACvG,MAAM,CAACgG,EAAE,EAAE;YAAEQ,MAAM,EAAE;UAAS,CAAC,CAAC,CAC7CsJ,QAAQ,CAACF,KAAK,CAAC,CACf/J,SAAS,CAAC,CAACmC,IAAI,CAACd,OAAO,CAAC,CAAC,CAAC,GAAG,CAAC,EAAEc,IAAI,CAACd,OAAO,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CACrDpB,KAAK,CAAC,IAAI,CAACC,GAAG,CACjB,CAAC;UACD,MAAMuL,SAAS,GAAG,IAAI,CAACN,kBAAkB,CAACnD,CAAC,GAAG,CAAC,CAAC,CAACpH,UAAU,CAAC,CAAC;UAE7D6K,SAAS,CAAC5K,gBAAgB,CAAC,OAAO,EAAGhE,CAAC,IAAK;YAC1CA,CAAC,CAACiE,eAAe,CAAC,CAAC;YACnB,IAAI,CAACrE,KAAK,CAACG,QAAQ,CAACrB,kBAAkB,CAAC,KAAK,CAAC,CAAC;YAC9C,IAAI,CAAC+P,kBAAkB,CAAC,QAAQ,EAAEnJ,IAAI,CAAC;YACvC,IAAI4H,KAAK,CAACQ,MAAM,CAAC,CAAC,EAAE;cACnB,IAAI,CAACY,kBAAkB,CAACnD,CAAC,GAAG,CAAC,CAAC,CAACwC,WAAW,CAAC,CAAC;YAC7C;UACD,CAAC,CAAC;UAEFiB,SAAS,CAAC5K,gBAAgB,CAAC,aAAa,EAAGhE,CAAC,IAAK;YAChDA,CAAC,CAACiE,eAAe,CAAC,CAAC;YACnBjE,CAAC,CAACkE,cAAc,CAAC,CAAC;YAClB,IAAI,CAACtE,KAAK,CAACG,QAAQ,CAACnB,kBAAkB,CAAC,IAAI,EAAE;cAAE4B,GAAG,EAAE8E,IAAI,CAACd,OAAO,CAAC,CAAC,CAAC,GAAG,CAAC;cAAElE,GAAG,EAAEgF,IAAI,CAACd,OAAO,CAAC,CAAC,CAAC,GAAG;YAAE,CAAC,EAAE,QAAQ,CAAC,CAAC;YAC/G,IAAI,CAAC5E,KAAK,CAACG,QAAQ,CAACrB,kBAAkB,CAAC,KAAK,CAAC,CAAC;UAC/C,CAAC,CAAC;UAEFkQ,SAAS,CAAC5K,gBAAgB,CAAC,YAAY,EAAE,MAAM,IAAI,CAACsK,kBAAkB,CAACnD,CAAC,GAAG,CAAC,CAAC,CAACwC,WAAW,CAAC,CAAC,CAAC;UAC5FiB,SAAS,CAAC5K,gBAAgB,CAAC,YAAY,EAAE,MAAM,IAAI,CAACsK,kBAAkB,CAACnD,CAAC,GAAG,CAAC,CAAC,CAACwC,WAAW,CAAC,CAAC,CAAC;QAC7F,CAAC,CAAC;MACH;IACD;IAEA,IAAI,IAAI,CAAC/N,KAAK,CAACK,UAAU,KAAK,MAAM,IAAI,IAAI,CAACL,KAAK,CAACyJ,aAAa,EAAE;MACjE,IAAI,CAAC,IAAI,CAACrD,kBAAkB,EAAE;QAAA,IAAA6I,qBAAA,EAAAC,sBAAA;QAC7B,MAAMxL,EAAE,GAAGC,QAAQ,CAACC,aAAa,CAAC,KAAK,CAAC;QACxCF,EAAE,CAACG,SAAS,GAAGzE,cAAc,CAAC0E,oBAAoB;QACjD;QACAC,KAAA;UAAK9C,SAAS,EAAC;QAAkB,GAChC8C,KAAA,cACCA,KAAA;UACC2J,GAAG,EAAEhO,MAAM,CAAC0O,MAAO;UACnBP,GAAG,EAAC;QAAE,CACN,CACG,CACD,CACN,CAAC;QACD;QACA,IAAI,CAACzH,kBAAkB,GAAG,IAAInC,UAAU,CAACvG,MAAM,CAAC;UAC/CwG,MAAM,EAAE,QAAQ;UAChB8E,OAAO,EAAEtF;QACV,CAAC,CAAC,CACAH,SAAS,EAAA0L,qBAAA,GAAC,IAAI,CAACjP,KAAK,CAACyJ,aAAa,cAAAwF,qBAAA,wBAAAC,sBAAA,GAAxBD,qBAAA,CAA0BlK,QAAQ,cAAAmK,sBAAA,uBAAlCA,sBAAA,CAAoClK,QAAQ,CAAC,CACvDxB,KAAK,CAAC,IAAI,CAACC,GAAG,CAAC;QACjB,IAAI,CAAC2C,kBAAkB,CAACjC,UAAU,CAAC,CAAC,CAACC,gBAAgB,CAAC,aAAa,EAAGhE,CAAC,IAAK;UAC3EA,CAAC,CAACiE,eAAe,CAAC,CAAC;UACnBjE,CAAC,CAACkE,cAAc,CAAC,CAAC;UAClB,MAAM3D,MAAM,GAAG,IAAI,CAACyF,kBAAkB,CAACR,SAAS,CAAC,CAAC;UAClD,IAAI,CAAC5F,KAAK,CAACG,QAAQ,CAACnB,kBAAkB,CAAC,IAAI,EAAE2B,MAAM,EAAE,mBAAmB,CAAC,CAAC;QAC3E,CAAC,CAAC;MACH,CAAC,MAAM;QACN,IAAI,CAACyF,kBAAkB,CAAC7C,SAAS,CAAC,IAAI,CAACvD,KAAK,CAACyJ,aAAa,CAAC1E,QAAQ,CAACC,QAAQ,CAAC,CAACxB,KAAK,CAAC,IAAI,CAACC,GAAG,CAAC;MAC9F;IACD;IAEA,IAAI,IAAI,CAACzD,KAAK,CAACK,UAAU,KAAK,MAAM,IAAI,IAAI,CAAC+F,kBAAkB,EAAE;MAChE,IAAI,CAACA,kBAAkB,CAAC7B,MAAM,CAAC,CAAC;MAChC,IAAI,CAAC6B,kBAAkB,GAAG,IAAI;IAC/B;IACA,IAAI,IAAI,CAACpG,KAAK,CAACK,UAAU,KAAK,mBAAmB,IAAI,IAAI,CAACL,KAAK,CAACmP,cAAc,EAAE;MAC/E,IAAI,IAAI,CAACnP,KAAK,CAACmP,cAAc,CAAC/M,MAAM,KAAK,CAAC,EAAE;QAC3C,KAAK,IAAIsD,IAAI,IAAI,IAAI,CAAC1F,KAAK,CAACmP,cAAc,EAAE;UAC3C,MAAMC,iBAAiB,GAAGzL,QAAQ,CAACC,aAAa,CAAC,KAAK,CAAC;UACvDwL,iBAAiB,CAACvL,SAAS,GAAGzE,cAAc,CAAC0E,oBAAoB;UAChE;UACAC,KAAA;YAAK9C,SAAS,EAAC;UAAkB,GAChC8C,KAAA,cACCA,KAAA;YACC2J,GAAG,EAAEhO,MAAM,CAAC0O,MAAO;YACnBP,GAAG,EAAC;UAAE,CACN,CACG,CACD,CACN,CAAC;UACD,IAAI,CAACwB,iBAAiB,GAAG,IAAIpL,UAAU,CAACvG,MAAM,CAAC;YAC9CwG,MAAM,EAAE,QAAQ;YAChB8E,OAAO,EAAEoG;UACV,CAAC;UACA;UAAA,CACC7L,SAAS,CAACmC,IAAI,CAACX,QAAQ,CAACC,QAAQ,CAAC,CACjCxB,KAAK,CAAC,IAAI,CAACC,GAAG,CAAC;UACjB,IAAI,CAAC6E,cAAc,CAAC7B,IAAI,CAAC,IAAI,CAAC4I,iBAAiB,CAAC;QACjD;MACD,CAAC,MAAM;QACN;QACA,KAAK,IAAIjB,MAAM,IAAI,IAAI,CAAC9F,cAAc,EAAE;UACvC8F,MAAM,CAAC7J,MAAM,CAAC,CAAC;QAChB;QACA,IAAI,CAAC+D,cAAc,GAAG,EAAE;MACzB;IACD;IAEA,IAAI,IAAI,CAACtI,KAAK,CAACK,UAAU,KAAK,SAAS,EAAE;MACxC,KAAK,IAAI+N,MAAM,IAAI,IAAI,CAAC7F,aAAa,EAAE;QACtC6F,MAAM,CAAC7J,MAAM,CAAC,CAAC;MAChB;MACA,KAAK,IAAImB,IAAI,IAAI,IAAI,CAAC1F,KAAK,CAACsP,kBAAkB,EAAE;QAC/C,MAAMC,cAAc,GAAG5L,QAAQ,CAACC,aAAa,CAAC,KAAK,CAAC;QACpD2L,cAAc,CAAC1L,SAAS,GAAGzE,cAAc,CAAC0E,oBAAoB,CAC7DC,KAAA;UAAK9C,SAAS,EAAC;QAAkB,GAChC8C,KAAA,cACCA,KAAA;UACC2J,GAAG,EAAEhO,MAAM,CAAC0O,MAAO;UACnBP,GAAG,EAAC;QAAE,CACN,CACG,CACD,CACN,CAAC;QACD,IAAI,CAAC2B,cAAc,GAAG,IAAIvL,UAAU,CAACvG,MAAM,CAAC;UAC3CwG,MAAM,EAAE,QAAQ;UAChB8E,OAAO,EAAEuG;QACV,CAAC,CAAC,CACAhM,SAAS,CAACmC,IAAI,CAACV,QAAQ,CAAC,CACxBxB,KAAK,CAAC,IAAI,CAACC,GAAG,CAAC;QACjB,IAAI,CAAC8E,aAAa,CAAC9B,IAAI,CAAC,IAAI,CAAC+I,cAAc,CAAC;MAC7C;IACD,CAAC,MAAM;MACN,KAAK,IAAIpB,MAAM,IAAI,IAAI,CAAC7F,aAAa,EAAE;QACtC6F,MAAM,CAAC7J,MAAM,CAAC,CAAC;MAChB;IACD;;IAEA;IACA,IAAI,IAAI,CAACvE,KAAK,CAACiK,iBAAiB,IAAI,IAAI,CAACjK,KAAK,CAACK,UAAU,KAAK,SAAS,EAAE;MACxE,KAAK,IAAIoP,IAAI,IAAI,IAAI,CAACzP,KAAK,CAACiK,iBAAiB,CAACU,OAAO,CAAC,CAAC,CAAC,CAACC,IAAI,CAAC,CAAC,CAAC,CAAC8E,KAAK,EAAE;QACvE,MAAMpC,KAAK,GAAG,IAAIrJ,UAAU,CAACoF,KAAK,CAAC;UAAEG,MAAM,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC;UAAEvI,SAAS,EAAE,gBAAgB;UAAEqI,WAAW,EAAE,KAAK;UAAEpF,MAAM,EAAE;QAAS,CAAC,CAAC,CAACkF,OAAO,CAAC,wDAAwDqG,IAAI,CAACE,iBAAiB,QAAQ,CAAC,CAACxD,WAAW,CAAC,OAAO,CAAC;QAChP,MAAMyD,WAAW,GAAGjM,QAAQ,CAACC,aAAa,CAAC,KAAK,CAAC;QACjDgM,WAAW,CAAC/L,SAAS,GAAGzE,cAAc,CAAC0E,oBAAoB,CAACC,KAAA;UAAK9C,SAAS,EAAC;QAAgB,CAAM,CAAC,CAAC;QACnG,IAAI,CAAC4O,WAAW,GAAG,IAAI5L,UAAU,CAACvG,MAAM,CAAC;UAAEwG,MAAM,EAAE,QAAQ;UAAE8E,OAAO,EAAE4G;QAAY,CAAC,CAAC,CAACpC,QAAQ,CAACF,KAAK,CAAC,CAAC/J,SAAS,CAACkM,IAAI,CAACK,YAAY,CAAC,CAACtM,KAAK,CAAC,IAAI,CAACC,GAAG,CAAC;QACjJ,IAAI,CAAC4E,IAAI,CAAC5B,IAAI,CAAC,IAAI,CAACoJ,WAAW,CAAC;MACjC;IACD,CAAC,MAAM;MACN,KAAK,IAAIzB,MAAM,IAAI,IAAI,CAAC/F,IAAI,EAAE;QAC7B+F,MAAM,CAAC7J,MAAM,CAAC,CAAC;MAChB;MACA,IAAI,CAAC8D,IAAI,GAAG,EAAE;IACf;IACA;IACA,IAAI,IAAI,CAACrI,KAAK,CAACK,UAAU,KAAK,YAAY,IAAIZ,QAAQ,EAAE;MACvD,IAAI,IAAI,CAACO,KAAK,CAACiK,iBAAiB,EAAE;QACjC,KAAK,IAAIwF,IAAI,IAAI,IAAI,CAACzP,KAAK,CAACiK,iBAAiB,CAACU,OAAO,CAAC,CAAC,CAAC,CAACC,IAAI,CAAC,CAAC,CAAC,CAAC8E,KAAK,EAAE;UACvE,MAAMpC,KAAK,GAAG,IAAIrJ,UAAU,CAACoF,KAAK,CAAC;YAAEG,MAAM,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC;YAAEvI,SAAS,EAAE,gBAAgB;YAAEqI,WAAW,EAAE,KAAK;YAAEpF,MAAM,EAAE;UAAS,CAAC,CAAC,CAACkF,OAAO,CAAC,wDAAwDqG,IAAI,CAACE,iBAAiB,QAAQ,CAAC,CAACxD,WAAW,CAAC,OAAO,CAAC;UAChP,MAAMyD,WAAW,GAAGjM,QAAQ,CAACC,aAAa,CAAC,KAAK,CAAC;UACjDgM,WAAW,CAAC/L,SAAS,GAAGzE,cAAc,CAAC0E,oBAAoB,CAACC,KAAA;YAAK9C,SAAS,EAAC;UAAgB,CAAM,CAAC,CAAC;UACnG,IAAI,CAAC4O,WAAW,GAAG,IAAI5L,UAAU,CAACvG,MAAM,CAAC;YAAEwG,MAAM,EAAE,QAAQ;YAAE8E,OAAO,EAAE4G;UAAY,CAAC,CAAC,CAACpC,QAAQ,CAACF,KAAK,CAAC,CAAC/J,SAAS,CAACkM,IAAI,CAACK,YAAY,CAAC,CAACtM,KAAK,CAAC,IAAI,CAACC,GAAG,CAAC;UACjJ,IAAI,CAAC4E,IAAI,CAAC5B,IAAI,CAAC,IAAI,CAACoJ,WAAW,CAAC;QACjC;MACD,CAAC,MAAM;QACN,KAAK,IAAIzB,MAAM,IAAI,IAAI,CAAC/F,IAAI,EAAE;UAC7B+F,MAAM,CAAC7J,MAAM,CAAC,CAAC;QAChB;QACA,IAAI,CAAC8D,IAAI,GAAG,EAAE;MACf;IACD;EACD;EAEA4C,cAAcA,CAAC8E,OAAO,EAAE;IACvB,IAAI5E,MAAM,GAAG,EAAE;IACf,IAAI6E,KAAK,GAAG,CAAC;MACZC,GAAG,GAAGF,OAAO,CAAC3N,MAAM;IACrB,IAAI1B,GAAG,GAAG,CAAC;MACVE,GAAG,GAAG,CAAC;IAER,OAAOoP,KAAK,GAAGC,GAAG,EAAE;MACnB,IAAIC,CAAC;QACJC,KAAK,GAAG,CAAC;QACT5J,MAAM,GAAG,CAAC;MACX,GAAG;QACF2J,CAAC,GAAGH,OAAO,CAACK,MAAM,CAACJ,KAAK,EAAE,CAAC,CAACK,UAAU,CAAC,CAAC,CAAC,GAAG,EAAE;QAC9C9J,MAAM,IAAI,CAAC2J,CAAC,GAAG,IAAI,KAAKC,KAAK;QAC7BA,KAAK,IAAI,CAAC;MACX,CAAC,QAAQD,CAAC,IAAI,IAAI;MAClB,IAAII,IAAI,GAAG/J,MAAM,GAAG,CAAC,GAAG,EAAEA,MAAM,IAAI,CAAC,CAAC,GAAGA,MAAM,IAAI,CAAC;MACpD7F,GAAG,IAAI4P,IAAI;MAEXH,KAAK,GAAG,CAAC;MACT5J,MAAM,GAAG,CAAC;MACV,GAAG;QACF2J,CAAC,GAAGH,OAAO,CAACK,MAAM,CAACJ,KAAK,EAAE,CAAC,CAACK,UAAU,CAAC,CAAC,CAAC,GAAG,EAAE;QAC9C9J,MAAM,IAAI,CAAC2J,CAAC,GAAG,IAAI,KAAKC,KAAK;QAC7BA,KAAK,IAAI,CAAC;MACX,CAAC,QAAQD,CAAC,IAAI,IAAI;MAClB,IAAIK,IAAI,GAAGhK,MAAM,GAAG,CAAC,GAAG,EAAEA,MAAM,IAAI,CAAC,CAAC,GAAGA,MAAM,IAAI,CAAC;MACpD3F,GAAG,IAAI2P,IAAI;MAEXpF,MAAM,CAAC1E,IAAI,CAAC,CAAC7F,GAAG,GAAG,IAAI,EAAEF,GAAG,GAAG,IAAI,CAAC,CAAC;IACtC;IAEA,OAAOyK,MAAM;EACd;EAiBAqF,iBAAiBA,CAAA,EAAG;IACnBC,MAAM,CAACrM,gBAAgB,CAAC,SAAS,EAAE,IAAI,CAACsM,mBAAmB,CAAC;IAC5D;IACA,MAAMhH,aAAa,GAAG,IAAI,CAAC1J,KAAK,CAACyJ,aAAa;IAC9C,IAAI,CAAChG,GAAG,GAAG,IAAIQ,UAAU,CAACnE,GAAG,CAAC;MAC7B6Q,SAAS,EAAE,KAAK;MAAE;MAClBhK,KAAK,EAAElJ,SAAS,CAACqJ,MAAM,6CAAY;MACnC8C,MAAM,EAAEF,aAAa,GAAG,CAACA,aAAa,CAAC3E,QAAQ,CAACC,QAAQ,CAACpE,GAAG,EAAE8I,aAAa,CAAC3E,QAAQ,CAACC,QAAQ,CAACtE,GAAG,CAAC,GAAG,uBAAuD;MAAE;MAC9J0C,IAAI,IAAuB,CAAE;IAC9B,CAAC,CAAC;IACF,IAAIsG,aAAa,EAAE,IAAI,CAAC1J,KAAK,CAACG,QAAQ,CAACrB,kBAAkB,CAAC,IAAI,EAAE4K,aAAa,CAAC3E,QAAQ,CAACC,QAAQ,CAAC,CAAC;IAEjG,IAAI,CAAC4D,UAAU,GAAG,IAAI3E,UAAU,CAAC4E,iBAAiB,CAAC,CAAC;IACpD,IAAI,CAAC+H,gBAAgB,GAAG,IAAI3M,UAAU,CAAC4M,gBAAgB,CAAC;MACvDC,eAAe,EAAE;QAChBC,kBAAkB,EAAE;MACrB,CAAC;MACD;MACAC,iBAAiB,EAAE,IAAI;MACvB;MACAC,gBAAgB,EAAE,IAAI;MACtB;MACAC,kBAAkB,EAAE,KAAK;MACzB;MACAC,gBAAgB,EAAE;QACjBC,OAAO,EAAE;MACV;IACD,CAAC,CAAC;IAEF,IAAI,CAACR,gBAAgB,CAACS,EAAE,CAAC,OAAO,EAAE,MAAM;MACvCzO,QAAA,CAAQ0O,OAAO,CAAC,iDAAiD,CAAC;IACnE,CAAC,CAAC;IAEF,IAAI,CAACV,gBAAgB,CAACS,EAAE,CAAC,WAAW,EAAGjR,CAAC,IAAK;MAC5C,IAAI,CAACJ,KAAK,CAACG,QAAQ,CAClBhC,mBAAmB,CAAC;QACnB4D,QAAQ,EAAE3B,CAAC,CAACmR,MAAM,CAACxP,QAAQ;QAC3BC,SAAS,EAAE5B,CAAC,CAACmR,MAAM,CAACvP;MACrB,CAAC,CACF,CAAC;IACF,CAAC,CAAC;IAEF,CAACvC,QAAQ,IAAI,IAAI,CAACgE,GAAG,CAACqF,UAAU,CAAC,IAAI,CAACF,UAAU,CAAC;IACjD,CAACnJ,QAAQ,IAAI,IAAI,CAACgE,GAAG,CAACqF,UAAU,CAAC,IAAI,CAAC8H,gBAAgB,CAAC;IAEvD,IAAI,CAACnN,GAAG,CAAC4N,EAAE,CAAC,OAAO,EAAE,IAAI,CAACG,aAAa,CAAC;IACxC,IAAI,CAAC/N,GAAG,CAAC4N,EAAE,CAAC,aAAa,EAAE,IAAI,CAACI,aAAa,CAAC;IAC9C,IAAI,CAAChO,GAAG,CAAC4N,EAAE,CAAC,MAAM,EAAE,MAAM;MAAA,IAAAK,oBAAA,EAAAC,qBAAA;MACzB,IAAI,CAAClO,GAAG,CAACmO,MAAM,CAAC,CAAC;MAEjB,MAAMC,GAAG,GAAG,IAAIC,eAAe,CAACrB,MAAM,CAACzL,QAAQ,CAAC+M,MAAM,CAAC,CAACtN,GAAG,CAAC,KAAK,CAAC;MAClE,MAAMO,QAAQ,IAAA0M,oBAAA,GAAG,IAAII,eAAe,CAACrB,MAAM,CAACzL,QAAQ,CAAC+M,MAAM,CAAC,CAACtN,GAAG,CAAC,UAAU,CAAC,cAAAiN,oBAAA,uBAA3DA,oBAAA,CAA6DM,KAAK,CAAC,GAAG,CAAC;MACxF,MAAMC,UAAU,GAAG,IAAIH,eAAe,CAACrB,MAAM,CAACzL,QAAQ,CAAC+M,MAAM,CAAC,CAACtN,GAAG,CAAC,YAAY,CAAC;MAChF,MAAMyN,eAAe,GAAG,IAAIJ,eAAe,CAACrB,MAAM,CAACzL,QAAQ,CAAC+M,MAAM,CAAC,CAACtN,GAAG,CAAC,WAAW,CAAC;MACpF,IAAI,CAACyN,eAAe,IAAI,CAACL,GAAG,IAAI,CAAC7M,QAAQ,IAAI,CAACiN,UAAU,IAAI,CAAC,IAAI,CAACjS,KAAK,CAACyJ,aAAa,EAAE,CAAAkI,qBAAA,OAAI,CAACf,gBAAgB,cAAAe,qBAAA,uBAArBA,qBAAA,CAAuBQ,OAAO,CAAC,CAAC,CAAC,KACnH;QACJ,IAAIC,SAAS,CAACC,WAAW,EAAE;UAC1BD,SAAS,CAACC,WAAW,CAACC,kBAAkB,CAAE7R,QAAQ,IAAK;YACtD,IAAI,CAACT,KAAK,CAACG,QAAQ,CAClBhC,mBAAmB,CAAC;cACnB4D,QAAQ,EAAEtB,QAAQ,CAAC8Q,MAAM,CAACxP,QAAQ;cAClCC,SAAS,EAAEvB,QAAQ,CAAC8Q,MAAM,CAACvP;YAC5B,CAAC,CACF,CAAC;UACF,CAAC,CAAC;QACH;MACD;IACD,CAAC,CAAC;IAEF,IAAI,CAACyB,GAAG,CAAC4N,EAAE,CAAC,MAAM,EAAE,MAAM;MACzB,IAAI,CAACrR,KAAK,CAACG,QAAQ,CAClBjC,qBAAqB,CAAC;QACrB6D,QAAQ,EAAE,IAAI,CAAC0B,GAAG,CAAC8O,SAAS,CAAC,CAAC,CAAC7R,GAAG;QAClCsB,SAAS,EAAE,IAAI,CAACyB,GAAG,CAAC8O,SAAS,CAAC,CAAC,CAAC3R;MACjC,CAAC,CACF,CAAC;IACF,CAAC,CAAC;IACF,IAAI,CAAC6C,GAAG,CAAC4N,EAAE,CAAC,YAAY,EAAE,MAAM;MAAA,IAAAmB,SAAA;MAC/B,CAAAA,SAAA,OAAI,CAAC/O,GAAG,cAAA+O,SAAA,uBAARA,SAAA,CAAU9G,QAAQ,CAAC;QAClBlH,EAAE,EAAE,cAAc;QAClBmH,MAAM,EAAE,WAAW;QACnB,cAAc,EAAE,aAAa;QAC7B8G,MAAM,EAAE,CAAC,IAAI,EAAE,SAAS,EAAE,MAAM,CAAC;QACjClN,IAAI,EAAE,gBAAgB;QACtBmN,OAAO,EAAE,EAAE;QACX7G,KAAK,EAAE;UACN,sBAAsB,EAAE,MAAM;UAC9B,uBAAuB,EAAE;YACxBtG,IAAI,EAAE,UAAU;YAChBoN,QAAQ,EAAE;UACX,CAAC;UACD,qBAAqB,EAAE;YACtBpN,IAAI,EAAE,UAAU;YAChBoN,QAAQ,EAAE;UACX,CAAC;UACD,wBAAwB,EAAE;QAC3B;MACD,CAAC,CAAC;MACF,IAAI,IAAI,CAAC3S,KAAK,CAACiK,iBAAiB,EAAE;QACjC,IAAI,IAAI,CAACjK,KAAK,CAACgK,aAAa,KAAK,SAAS,EAAE;UAC3C,IAAI,CAAChK,KAAK,CAACG,QAAQ,CAAC3B,kBAAkB,CAAC,UAAU,CAAC,CAAC;UACnD,IAAI,CAACwB,KAAK,CAACG,QAAQ,CAAC3B,kBAAkB,CAAC,SAAS,CAAC,CAAC;QACnD,CAAC,MAAM;UACN,IAAI,CAACwB,KAAK,CAACG,QAAQ,CAAC3B,kBAAkB,CAAC,SAAS,CAAC,CAAC;UAClD,IAAI,CAACwB,KAAK,CAACG,QAAQ,CAAC3B,kBAAkB,CAAC,UAAU,CAAC,CAAC;QACpD;MACD;IACD,CAAC,CAAC;IACFmF,QAAQ,CAACiP,IAAI,CAACxO,gBAAgB,CAAC,OAAO,EAAE,IAAI,CAACyO,YAAY,CAAC;IAC1D;IACA;IACA;IACA;IACA;;IAEA;IACA;IACA;;IAEA,MAAMX,eAAe,GAAG,IAAIJ,eAAe,CAACrB,MAAM,CAACzL,QAAQ,CAAC+M,MAAM,CAAC,CAACtN,GAAG,CAAC,WAAW,CAAC;IACpF,MAAMqO,MAAM,GAAG,IAAIhB,eAAe,CAACrB,MAAM,CAACzL,QAAQ,CAAC+M,MAAM,CAAC,CAACtN,GAAG,CAAC,QAAQ,CAAC;IACxE,IAAIyN,eAAe,EAAE;MACpB,MAAMa,SAAS,GAAG;QACjBrS,GAAG,EAAEwR,eAAe,CAACF,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAACA,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;QAChDpR,GAAG,EAAEsR,eAAe,CAACF,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAACA,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC;MAChD,CAAC;MACD,MAAMgB,OAAO,GAAG;QACftS,GAAG,EAAEwR,eAAe,CAACF,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAACA,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;QAChDpR,GAAG,EAAEsR,eAAe,CAACF,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAACA,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC;MAChD,CAAC;MACD,IAAIe,SAAS,CAACrS,GAAG,IAAIqS,SAAS,CAACnS,GAAG,IAAIoS,OAAO,CAACtS,GAAG,IAAIsS,OAAO,CAACpS,GAAG,EAAE;QACjE;QACA;QACA,IAAIkS,MAAM,IAAI,IAAI,EAAE;UACnB,IAAI,CAACG,qBAAqB,CAACF,SAAS,EAAEC,OAAO,CAAC;QAC/C,CAAC,MAAM;UACN,IAAI,CAACE,eAAe,CAACH,SAAS,EAAEC,OAAO,CAAC;QACzC;MACD;IACD;;IAEA;IACA,IAAI,CAAChT,KAAK,CAACG,QAAQ,CAACN,qBAAqB,CAAC,CAAC,CAAC;EAC7C;EAwCAsT,oBAAoBA,CAAA,EAAG;IACtB1C,MAAM,CAAC2C,mBAAmB,CAAC,SAAS,EAAE,IAAI,CAAC1C,mBAAmB,CAAC;IAC/D/M,QAAQ,CAACiP,IAAI,CAACQ,mBAAmB,CAAC,OAAO,EAAE,IAAI,CAACP,YAAY,CAAC;EAC9D;EA+BAQ,MAAMA,CAAA,EAAG;IAAA,IAAAC,qBAAA,EAAAC,sBAAA;IACR,MAAM;MAAE5M,KAAK;MAAEnG,iBAAiB;MAAE6C;IAAgB,CAAC,GAAG,IAAI,CAACuD,KAAK;IAEhE,OACC7C,KAAA,CAACzG,KAAK,CAACkW,QAAQ,QACdzP,KAAA,CAACzE,QAAQ,QACRyE,KAAA;MAAKS,EAAE,EAAC;IAAK,GAAE,IAAI,CAACiP,iBAAiB,CAAC,CAAO,CAAC,EAC9C1P,KAAA,cACE,CAACtE,QAAQ,IACTsE,KAAA,CAAA2P,OAAA;MACCC,KAAK,EAAC,QAAQ;MACd3P,IAAI,EAAE,EAAG;MACT4P,OAAO,EAAE,IAAI,CAACC,WAAY;MAC1B5S,SAAS,EAAC,sBAAsB;MAChC0F,KAAK,EAAE;QACNmN,eAAe,EAAEnN,KAAK,KAAKlJ,SAAS,CAACqJ,MAAM,6CAAY,GAAG,OAAO3H,aAAa,GAAG,GAAG,OAAOD,cAAc;MAC1G;IAAE,CACF,CACD,EACAO,QAAQ,IACRsE,KAAA,CAAA2P,OAAA;MACCC,KAAK,EAAC,QAAQ;MACd3P,IAAI,EAAE,EAAG;MACT4P,OAAO,EAAE,IAAI,CAACC,WAAY;MAC1B5S,SAAS,EAAC;MACV;MAAA;MACA0F,KAAK,EAAE;QACNmN,eAAe,EAAEnN,KAAK,KAAKlJ,SAAS,CAACqJ,MAAM,6CAAY,GAAG,OAAO3H,aAAa,GAAG,GAAG,OAAOD,cAAc;MAC1G;IAAE,CACF,CAEE,CAAC,EACLsB,iBAAiB,IACjBuD,KAAA,CAACnG,kBAAkB;MAClBsH,uBAAuB,EAAE,IAAI,CAACA,uBAAwB;MACtDxE,GAAG,EAAE,EAAA4S,qBAAA,GAAAjQ,eAAe,CAAC0B,QAAQ,cAAAuO,qBAAA,uBAAxBA,qBAAA,CAA0BtO,QAAQ,CAACtE,GAAG,KAAIiE,MAAM,CAACtB,eAAe,CAACuB,OAAO,CAAC,CAAC,CAAC,CAAE;MAClFhE,GAAG,EAAE,EAAA2S,sBAAA,GAAAlQ,eAAe,CAAC0B,QAAQ,cAAAwO,sBAAA,uBAAxBA,sBAAA,CAA0BvO,QAAQ,CAACpE,GAAG,KAAI+D,MAAM,CAACtB,eAAe,CAACuB,OAAO,CAAC,CAAC,CAAC,CAAE;MAClFrC,IAAI,EAAEc,eAAe,CAACd,IAAI,IAAIc,eAAe,CAACb,kBAAkB,CAAC,CAAC,CAAC,CAACC,SAAU;MAC9EsR,cAAc,EAAE1Q,eAAe,CAAC2Q,cAAe;MAC/ChO,QAAQ,EAAE3C,eAAe,CAAC4C,GAAI;MAC9BE,OAAO,EAAE,IAAI,CAACxD,iBAAiB,CAACU,eAAe,CAAC,IAAIA,eAAe,CAACX,iBAAiB,IAAIW,eAAe,CAAC6C,WAAW,CAACC,OAAQ;MAC7H8N,YAAY,EAAE,IAAI,CAAC3T;IAAmB,CACtC,CAEO,CACK,CAAC;EAEnB;AACD;AAEA,MAAM4T,eAAe,GAAItN,KAAK,IAAK;EAClC,OAAO;IACN6C,aAAa,EAAE7C,KAAK,CAACuN,YAAY,CAAC1K,aAAa;IAC/CpE,UAAU,EAAEuB,KAAK,CAACwN,iBAAiB,CAACpN,IAAI;IACxC/B,QAAQ,EAAE2B,KAAK,CAACwN,iBAAiB,CAACnN,EAAE;IACpC5G,UAAU,EAAEuG,KAAK,CAACyN,iBAAiB,CAACC,WAAW;IAC/CrK,iBAAiB,EAAErD,KAAK,CAACwN,iBAAiB,CAAC7N,MAAM;IACjDrG,QAAQ,EAAE0G,KAAK,CAACuN,YAAY,CAACjU,QAAQ;IACrC8J,aAAa,EAAEpD,KAAK,CAACwN,iBAAiB,CAACpK,aAAa;IACpDvE,aAAa,EAAEmB,KAAK,CAAC2N,aAAa,CAAC9O,aAAa;IAChDwD,YAAY,EAAErC,KAAK,CAACyN,iBAAiB,CAACG,kBAAkB;IACxDzR,oBAAoB,EAAE6D,KAAK,CAACyN,iBAAiB,CAACI,mBAAmB;IACjE1O,mBAAmB,EAAEa,KAAK,CAAC2N,aAAa,CAACxO,mBAAmB;IAC5DoD,aAAa,EAAEvC,KAAK,CAACyN,iBAAiB,CAAClL,aAAa;IACpDvH,cAAc,EAAEgF,KAAK,CAACyN,iBAAiB,CAACzS,cAAc;IACtD0D,UAAU,EAAEsB,KAAK,CAACyN,iBAAiB,CAAC/O,UAAU;IAC9CkJ,mBAAmB,EAAE5H,KAAK,CAAC2N,aAAa,CAAC/F,mBAAmB;IAC5DrJ,WAAW,EAAEyB,KAAK,CAACuN,YAAY,CAAChP,WAAW;IAC3CgK,cAAc,EAAEvI,KAAK,CAAC2N,aAAa,CAACG,eAAe;IACnDpF,kBAAkB,EAAE1I,KAAK,CAAC2N,aAAa,CAACI,oBAAoB;IAC5DjN,WAAW,EAAEd,KAAK,CAACgO,iBAAiB,CAAClN;EACtC,CAAC;AACF,CAAC;AACD,eAAe/J,OAAO,CAACuW,eAAe,CAAC,CAACpU,GAAG,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module"}