{"ast":null,"code":"var __jsx = React.createElement;\nfunction ownKeys(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }\nfunction _objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys(Object(t), !0).forEach(function (r) { _defineProperty(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }\nfunction _defineProperty(e, r, t) { return (r = _toPropertyKey(r)) in e ? Object.defineProperty(e, r, { value: t, enumerable: !0, configurable: !0, writable: !0 }) : e[r] = t, e; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == typeof i ? i : i + \"\"; }\nfunction _toPrimitive(t, r) { if (\"object\" != typeof t || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != typeof i) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\nimport React from 'react';\nimport dynamic from 'next/dynamic';\nimport { connect } from 'react-redux';\nimport { getDetailByLatLngAction, getDetailByIdAction, getDetailAroundPlace } from \"../redux/actions/place\";\nimport { setBoxVisibleAction } from \"../redux/actions/boxVisble\";\nimport Router from 'next/router';\nconst App = dynamic(() => import(\"../components/App\").then(mod => mod.default), {\n  ssr: false,\n  loadableGenerated: {\n    webpack: () => [require.resolveWeak(\"../components/App\")],\n    modules: [\"../components/App\"]\n  }\n});\nclass Home extends React.Component {\n  static async getInitialProps({\n    req,\n    query,\n    params\n  }) {\n    return {\n      query\n    };\n  }\n  constructor(props) {\n    super(props);\n    _defineProperty(this, \"updateWindowWidth\", () => {\n      this.setState({\n        windowWidth: window.innerWidth\n      });\n    });\n    this.state = _objectSpread(_objectSpread({}, props.query), {}, {\n      windowWidth: 800\n    });\n  }\n  componentDidMount() {\n    var _URLSearchParams$get;\n    window.addEventListener('resize', this.updateWindowWidth);\n    this.setState({\n      windowWidth: window.innerWidth\n    });\n    this.updateWindowWidth();\n    const pid = new URLSearchParams(window.location.search).get(\"pid\");\n    const location = (_URLSearchParams$get = new URLSearchParams(window.location.search).get(\"location\")) === null || _URLSearchParams$get === void 0 ? void 0 : _URLSearchParams$get.split(\",\");\n    const pid_around = new URLSearchParams(window.location.search).get(\"pid_around\");\n    const is_iframe = new URLSearchParams(window.location.search).get(\"iframe\");\n    if (is_iframe) {\n      if (location) {\n        const latLng = {\n          latitude: Number(location[0]),\n          longitude: Number(location[1])\n        };\n        this.props.dispatch(getDetailByLatLngAction(latLng));\n        this.props.dispatch(setBoxVisibleAction('iframe'));\n      } else {\n        this.props.dispatch(setBoxVisibleAction('iframe'));\n      }\n      return;\n    } else {\n      if (pid) {\n        this.props.dispatch(getDetailByIdAction(pid));\n        this.props.dispatch(setBoxVisibleAction('info'));\n        return;\n      } else if (pid_around) {\n        this.props.dispatch(getDetailAroundPlace(pid_around));\n        this.props.dispatch(setBoxVisibleAction('info'));\n        return;\n      } else if (location) {\n        const latLng = {\n          latitude: Number(location[0]),\n          longitude: Number(location[1])\n        };\n        this.props.dispatch(getDetailByLatLngAction(latLng));\n        this.props.dispatch(setBoxVisibleAction('info'));\n        return;\n      }\n    }\n  }\n  componentDidUpdate(prevProps) {\n    if (prevProps.boxVisible !== \"search\" && this.props.boxVisible === \"search\") {\n      Router.push({\n        pathname: `/`,\n        query: null\n      });\n    }\n  }\n  render() {\n    return __jsx(React.Fragment, null, __jsx(App, null));\n  }\n}\nconst mapStateToProps = state => {\n  return {\n    boxVisible: state.boxVisibleReducer.box_visible\n  };\n};\nexport default connect(mapStateToProps)(Home);","map":{"version":3,"names":["React","dynamic","connect","getDetailByLatLngAction","getDetailByIdAction","getDetailAroundPlace","setBoxVisibleAction","Router","App","then","mod","default","ssr","loadableGenerated","webpack","require","resolveWeak","modules","Home","Component","getInitialProps","req","query","params","constructor","props","_defineProperty","setState","windowWidth","window","innerWidth","state","_objectSpread","componentDidMount","_URLSearchParams$get","addEventListener","updateWindowWidth","pid","URLSearchParams","location","search","get","split","pid_around","is_iframe","latLng","latitude","Number","longitude","dispatch","componentDidUpdate","prevProps","boxVisible","push","pathname","render","__jsx","Fragment","mapStateToProps","boxVisibleReducer","box_visible"],"sources":["D:/Workhome/ParkingLot/live-map/pages/index.js"],"sourcesContent":["import React from 'react';\nimport dynamic from 'next/dynamic'\nimport { connect } from 'react-redux';\nimport { getDetailByLatLngAction, getDetailByIdAction, getDetailAroundPlace } from '../redux/actions/place';\nimport { setBoxVisibleAction } from \"../redux/actions/boxVisble\";\nimport Router from 'next/router';\n\nconst App = dynamic(() => import('../components/App').then(mod => mod.default), {\n  ssr: false\n});\n\nclass Home extends React.Component {\n\n  static async getInitialProps({ req, query, params }) {\n    return { query }\n  }\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      ...props.query,\n      windowWidth: 800,\n    };\n  }\n\n  updateWindowWidth = () => {\n    this.setState({ windowWidth: window.innerWidth });\n  };\n\n  componentDidMount() {\n    window.addEventListener('resize', this.updateWindowWidth);\n    this.setState({ windowWidth: window.innerWidth });\n    this.updateWindowWidth();\n    const pid = new URLSearchParams(window.location.search).get(\"pid\");\n    const location = new URLSearchParams(window.location.search).get(\"location\")?.split(\",\");\n    const pid_around = new URLSearchParams(window.location.search).get(\"pid_around\");\n    const is_iframe = new URLSearchParams(window.location.search).get(\"iframe\");\n    if (is_iframe) {\n      if (location) {\n        const latLng = {\n          latitude: Number(location[0]),\n          longitude: Number(location[1])\n        }\n        this.props.dispatch(getDetailByLatLngAction(latLng));\n        this.props.dispatch(setBoxVisibleAction('iframe'));\n      } else {\n        this.props.dispatch(setBoxVisibleAction('iframe'));\n      }\n      return;\n    } else {\n      if (pid) {\n        this.props.dispatch(getDetailByIdAction(pid));\n        this.props.dispatch(setBoxVisibleAction('info'));\n        return;\n      }\n      else if (pid_around) {\n        this.props.dispatch(getDetailAroundPlace(pid_around));\n        this.props.dispatch(setBoxVisibleAction('info'));\n        return;\n      } else if (location) {\n        const latLng = {\n          latitude: Number(location[0]),\n          longitude: Number(location[1])\n        }\n        this.props.dispatch(getDetailByLatLngAction(latLng));\n        this.props.dispatch(setBoxVisibleAction('info'));\n        return;\n      }\n    }\n  }\n\n  componentDidUpdate(prevProps) {\n    if (prevProps.boxVisible !== \"search\" && this.props.boxVisible === \"search\") {\n      Router.push({\n        pathname: `/`,\n        query: null\n      })\n    }\n  }\n\n  render() {\n    return <React.Fragment>\n      {/* {isMobile ? <AppMobile /> : <App windowWidth={this.state.windowWidth} />} */}\n      <App />\n    </React.Fragment>\n  }\n}\n\nconst mapStateToProps = state => {\n  return {\n    boxVisible: state.boxVisibleReducer.box_visible,\n  }\n}\n\nexport default connect(mapStateToProps)(Home)\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}