{"ast":null,"code":"import _Avatar from \"antd/lib/avatar\";\nimport _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport _message from \"antd/lib/message\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport _JSXStyle from \"styled-jsx/style\";\nvar __jsx = React.createElement;\nfunction _createForOfIteratorHelper(r, e) { var t = \"undefined\" != typeof Symbol && r[Symbol.iterator] || r[\"@@iterator\"]; if (!t) { if (Array.isArray(r) || (t = _unsupportedIterableToArray(r)) || e && r && \"number\" == typeof r.length) { t && (r = t); var _n = 0, F = function F() {}; return { s: F, n: function n() { return _n >= r.length ? { done: !0 } : { done: !1, value: r[_n++] }; }, e: function e(r) { throw r; }, f: F }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); } var o, a = !0, u = !1; return { s: function s() { t = t.call(r); }, n: function n() { var r = t.next(); return a = r.done, r; }, e: function e(r) { u = !0, o = r; }, f: function f() { try { a || null == t[\"return\"] || t[\"return\"](); } finally { if (u) throw o; } } }; }\nfunction _unsupportedIterableToArray(r, a) { if (r) { if (\"string\" == typeof r) return _arrayLikeToArray(r, a); var t = {}.toString.call(r).slice(8, -1); return \"Object\" === t && r.constructor && (t = r.constructor.name), \"Map\" === t || \"Set\" === t ? Array.from(r) : \"Arguments\" === t || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t) ? _arrayLikeToArray(r, a) : void 0; } }\nfunction _arrayLikeToArray(r, a) { (null == a || a > r.length) && (a = r.length); for (var e = 0, n = Array(a); e < a; e++) n[e] = r[e]; return n; }\nfunction _regeneratorRuntime() { \"use strict\"; /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */ _regeneratorRuntime = function _regeneratorRuntime() { return e; }; var t, e = {}, r = Object.prototype, n = r.hasOwnProperty, o = Object.defineProperty || function (t, e, r) { t[e] = r.value; }, i = \"function\" == typeof Symbol ? Symbol : {}, a = i.iterator || \"@@iterator\", c = i.asyncIterator || \"@@asyncIterator\", u = i.toStringTag || \"@@toStringTag\"; function define(t, e, r) { return Object.defineProperty(t, e, { value: r, enumerable: !0, configurable: !0, writable: !0 }), t[e]; } try { define({}, \"\"); } catch (t) { define = function define(t, e, r) { return t[e] = r; }; } function wrap(t, e, r, n) { var i = e && e.prototype instanceof Generator ? e : Generator, a = Object.create(i.prototype), c = new Context(n || []); return o(a, \"_invoke\", { value: makeInvokeMethod(t, r, c) }), a; } function tryCatch(t, e, r) { try { return { type: \"normal\", arg: t.call(e, r) }; } catch (t) { return { type: \"throw\", arg: t }; } } e.wrap = wrap; var h = \"suspendedStart\", l = \"suspendedYield\", f = \"executing\", s = \"completed\", y = {}; function Generator() {} function GeneratorFunction() {} function GeneratorFunctionPrototype() {} var p = {}; define(p, a, function () { return this; }); var d = Object.getPrototypeOf, v = d && d(d(values([]))); v && v !== r && n.call(v, a) && (p = v); var g = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(p); function defineIteratorMethods(t) { [\"next\", \"throw\", \"return\"].forEach(function (e) { define(t, e, function (t) { return this._invoke(e, t); }); }); } function AsyncIterator(t, e) { function invoke(r, o, i, a) { var c = tryCatch(t[r], t, o); if (\"throw\" !== c.type) { var u = c.arg, h = u.value; return h && \"object\" == typeof h && n.call(h, \"__await\") ? e.resolve(h.__await).then(function (t) { invoke(\"next\", t, i, a); }, function (t) { invoke(\"throw\", t, i, a); }) : e.resolve(h).then(function (t) { u.value = t, i(u); }, function (t) { return invoke(\"throw\", t, i, a); }); } a(c.arg); } var r; o(this, \"_invoke\", { value: function value(t, n) { function callInvokeWithMethodAndArg() { return new e(function (e, r) { invoke(t, n, e, r); }); } return r = r ? r.then(callInvokeWithMethodAndArg, callInvokeWithMethodAndArg) : callInvokeWithMethodAndArg(); } }); } function makeInvokeMethod(e, r, n) { var o = h; return function (i, a) { if (o === f) throw Error(\"Generator is already running\"); if (o === s) { if (\"throw\" === i) throw a; return { value: t, done: !0 }; } for (n.method = i, n.arg = a;;) { var c = n.delegate; if (c) { var u = maybeInvokeDelegate(c, n); if (u) { if (u === y) continue; return u; } } if (\"next\" === n.method) n.sent = n._sent = n.arg;else if (\"throw\" === n.method) { if (o === h) throw o = s, n.arg; n.dispatchException(n.arg); } else \"return\" === n.method && n.abrupt(\"return\", n.arg); o = f; var p = tryCatch(e, r, n); if (\"normal\" === p.type) { if (o = n.done ? s : l, p.arg === y) continue; return { value: p.arg, done: n.done }; } \"throw\" === p.type && (o = s, n.method = \"throw\", n.arg = p.arg); } }; } function maybeInvokeDelegate(e, r) { var n = r.method, o = e.iterator[n]; if (o === t) return r.delegate = null, \"throw\" === n && e.iterator[\"return\"] && (r.method = \"return\", r.arg = t, maybeInvokeDelegate(e, r), \"throw\" === r.method) || \"return\" !== n && (r.method = \"throw\", r.arg = new TypeError(\"The iterator does not provide a '\" + n + \"' method\")), y; var i = tryCatch(o, e.iterator, r.arg); if (\"throw\" === i.type) return r.method = \"throw\", r.arg = i.arg, r.delegate = null, y; var a = i.arg; return a ? a.done ? (r[e.resultName] = a.value, r.next = e.nextLoc, \"return\" !== r.method && (r.method = \"next\", r.arg = t), r.delegate = null, y) : a : (r.method = \"throw\", r.arg = new TypeError(\"iterator result is not an object\"), r.delegate = null, y); } function pushTryEntry(t) { var e = { tryLoc: t[0] }; 1 in t && (e.catchLoc = t[1]), 2 in t && (e.finallyLoc = t[2], e.afterLoc = t[3]), this.tryEntries.push(e); } function resetTryEntry(t) { var e = t.completion || {}; e.type = \"normal\", delete e.arg, t.completion = e; } function Context(t) { this.tryEntries = [{ tryLoc: \"root\" }], t.forEach(pushTryEntry, this), this.reset(!0); } function values(e) { if (e || \"\" === e) { var r = e[a]; if (r) return r.call(e); if (\"function\" == typeof e.next) return e; if (!isNaN(e.length)) { var o = -1, i = function next() { for (; ++o < e.length;) if (n.call(e, o)) return next.value = e[o], next.done = !1, next; return next.value = t, next.done = !0, next; }; return i.next = i; } } throw new TypeError(typeof e + \" is not iterable\"); } return GeneratorFunction.prototype = GeneratorFunctionPrototype, o(g, \"constructor\", { value: GeneratorFunctionPrototype, configurable: !0 }), o(GeneratorFunctionPrototype, \"constructor\", { value: GeneratorFunction, configurable: !0 }), GeneratorFunction.displayName = define(GeneratorFunctionPrototype, u, \"GeneratorFunction\"), e.isGeneratorFunction = function (t) { var e = \"function\" == typeof t && t.constructor; return !!e && (e === GeneratorFunction || \"GeneratorFunction\" === (e.displayName || e.name)); }, e.mark = function (t) { return Object.setPrototypeOf ? Object.setPrototypeOf(t, GeneratorFunctionPrototype) : (t.__proto__ = GeneratorFunctionPrototype, define(t, u, \"GeneratorFunction\")), t.prototype = Object.create(g), t; }, e.awrap = function (t) { return { __await: t }; }, defineIteratorMethods(AsyncIterator.prototype), define(AsyncIterator.prototype, c, function () { return this; }), e.AsyncIterator = AsyncIterator, e.async = function (t, r, n, o, i) { void 0 === i && (i = Promise); var a = new AsyncIterator(wrap(t, r, n, o), i); return e.isGeneratorFunction(r) ? a : a.next().then(function (t) { return t.done ? t.value : a.next(); }); }, defineIteratorMethods(g), define(g, u, \"Generator\"), define(g, a, function () { return this; }), define(g, \"toString\", function () { return \"[object Generator]\"; }), e.keys = function (t) { var e = Object(t), r = []; for (var n in e) r.push(n); return r.reverse(), function next() { for (; r.length;) { var t = r.pop(); if (t in e) return next.value = t, next.done = !1, next; } return next.done = !0, next; }; }, e.values = values, Context.prototype = { constructor: Context, reset: function reset(e) { if (this.prev = 0, this.next = 0, this.sent = this._sent = t, this.done = !1, this.delegate = null, this.method = \"next\", this.arg = t, this.tryEntries.forEach(resetTryEntry), !e) for (var r in this) \"t\" === r.charAt(0) && n.call(this, r) && !isNaN(+r.slice(1)) && (this[r] = t); }, stop: function stop() { this.done = !0; var t = this.tryEntries[0].completion; if (\"throw\" === t.type) throw t.arg; return this.rval; }, dispatchException: function dispatchException(e) { if (this.done) throw e; var r = this; function handle(n, o) { return a.type = \"throw\", a.arg = e, r.next = n, o && (r.method = \"next\", r.arg = t), !!o; } for (var o = this.tryEntries.length - 1; o >= 0; --o) { var i = this.tryEntries[o], a = i.completion; if (\"root\" === i.tryLoc) return handle(\"end\"); if (i.tryLoc <= this.prev) { var c = n.call(i, \"catchLoc\"), u = n.call(i, \"finallyLoc\"); if (c && u) { if (this.prev < i.catchLoc) return handle(i.catchLoc, !0); if (this.prev < i.finallyLoc) return handle(i.finallyLoc); } else if (c) { if (this.prev < i.catchLoc) return handle(i.catchLoc, !0); } else { if (!u) throw Error(\"try statement without catch or finally\"); if (this.prev < i.finallyLoc) return handle(i.finallyLoc); } } } }, abrupt: function abrupt(t, e) { for (var r = this.tryEntries.length - 1; r >= 0; --r) { var o = this.tryEntries[r]; if (o.tryLoc <= this.prev && n.call(o, \"finallyLoc\") && this.prev < o.finallyLoc) { var i = o; break; } } i && (\"break\" === t || \"continue\" === t) && i.tryLoc <= e && e <= i.finallyLoc && (i = null); var a = i ? i.completion : {}; return a.type = t, a.arg = e, i ? (this.method = \"next\", this.next = i.finallyLoc, y) : this.complete(a); }, complete: function complete(t, e) { if (\"throw\" === t.type) throw t.arg; return \"break\" === t.type || \"continue\" === t.type ? this.next = t.arg : \"return\" === t.type ? (this.rval = this.arg = t.arg, this.method = \"return\", this.next = \"end\") : \"normal\" === t.type && e && (this.next = e), y; }, finish: function finish(t) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var r = this.tryEntries[e]; if (r.finallyLoc === t) return this.complete(r.completion, r.afterLoc), resetTryEntry(r), y; } }, \"catch\": function _catch(t) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var r = this.tryEntries[e]; if (r.tryLoc === t) { var n = r.completion; if (\"throw\" === n.type) { var o = n.arg; resetTryEntry(r); } return o; } } throw Error(\"illegal catch attempt\"); }, delegateYield: function delegateYield(e, r, n) { return this.delegate = { iterator: values(e), resultName: r, nextLoc: n }, \"next\" === this.method && (this.arg = t), y; } }, e; }\nfunction ownKeys(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }\nfunction _objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys(Object(t), !0).forEach(function (r) { _defineProperty(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }\nfunction _callSuper(t, o, e) { return o = _getPrototypeOf(o), _possibleConstructorReturn(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], _getPrototypeOf(t).constructor) : o.apply(t, e)); }\nfunction _isNativeReflectConstruct() { try { var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); } catch (t) {} return (_isNativeReflectConstruct = function _isNativeReflectConstruct() { return !!t; })(); }\nimport React, { Component, useEffect } from 'react';\nimport { STYLE_URL } from \"../consts\";\nimport Marker from \"./Marker\";\nimport { connect } from 'react-redux';\nimport BottomInfoLocation from \"./BottomInfoLocation\";\nimport MenuRightClick from \"./MenuRightCLick\";\nimport { getDetailLatLngService } from \"../redux/sagas/placeSaga\";\nimport equal from 'fast-deep-equal/es6/react';\nimport { setMapViewportAction, getDetailByLatLngAction, setCenterLatLngAction, setMyLocationAction, getDetailByIdAction } from \"../redux/actions/place\";\nimport { searchAroundAction, clearSearchAroundAction, selectAroundPlaceAction } from \"../redux/actions/search\";\nimport { selectResultAction, navigationFromAction, navigationToAction, clearResultAction, navigationAction } from \"../redux/actions/navigation\";\nimport MarkerNavigation from \"./MarkerNavigation\";\nimport { setRedMarkerAction, setCollapsedInfoBoxAction, setPopupRightClick, setBoxVisibleAction } from \"../redux/actions/boxVisble\";\nimport normal_map_img from \"../static/images/normal_map.png\";\nimport satellite_img from \"../static/images/satellite.jpeg\";\nimport ReactDOMServer from 'react-dom/server';\nimport Axios from 'axios';\nimport Div100vh from 'react-div-100vh';\nimport Request from \"../utils/request\";\nimport { Mile_Travel } from \"../consts\";\nimport { isMobile } from 'react-device-detect';\nimport images from \"../utils/images\";\nimport { useDispatch, useSelector } from 'react-redux';\nimport { getParkingLotsRequest } from \"../redux/actions/parkingLot\";\nvar Map = /*#__PURE__*/function (_Component) {\n  function Map(props) {\n    var _this;\n    _classCallCheck(this, Map);\n    _this = _callSuper(this, Map, [props]);\n    _defineProperty(_this, \"_onViewportChange\", function (viewport) {\n      _this.props.dispatch(setMapViewportAction(viewport));\n    });\n    _defineProperty(_this, \"_onMouseClick\", function (e) {\n      _this.props.dispatch(setPopupRightClick(false));\n      if (_this.props.boxVisible !== 'iframe') {\n        _this.props.dispatch(setRedMarkerAction(false));\n      }\n      // if (this.props.boxVisible === \"info\") this.props.dispatch(setBoxVisibleAction('search'))\n      // this.markerWhatIs ? this.markerWhatIs.remove() : null;\n      _this.props.dispatch(selectAroundPlaceAction(null));\n      _this.removeMarkerWhatIs();\n      _this.setState({\n        bottomInfoVisible: false\n      });\n    });\n    _defineProperty(_this, \"_onRightClick\", function (e) {\n      var position = {\n        lat: e.lngLat.lat,\n        lng: e.lngLat.lng\n      };\n      if (_this.props.boxVisible !== 'iframe') {\n        _this.props.dispatch(setRedMarkerAction(true, position));\n        _this.props.dispatch(setPopupRightClick(true, position, 'normal'));\n      }\n    });\n    _defineProperty(_this, \"_onClickMenu\", function (evt) {\n      var parent = evt.target.parentElement;\n      if (evt.target.className && evt.target.className.toString().includes('what-is-this')) {\n        _this.handleWhatIs();\n      } else if (evt.target.className && evt.target.className.toString().includes('from-here')) {\n        _this.handleFromHere();\n      } else if (evt.target.className && evt.target.className.toString().includes('to-here')) {\n        _this.handleToHere();\n      } else if (evt.target.className && evt.target.className.toString().includes('delete-location')) {\n        _this.handleDeleteLocation();\n      } else if (evt.target.className && evt.target.className.toString().includes('search-around')) {\n        _this.handleSearchAround();\n      } else if (evt.target.className && evt.target.className.toString().includes('to-around-place')) {\n        _this.handleToAroundPlace();\n      } else if (evt.target.className && evt.target.className.toString().includes('what-is-navigation')) {\n        _this.handleWhatIs(false);\n      }\n      if (parent !== null && parent !== void 0 && parent.className && parent !== null && parent !== void 0 && parent.className.toString().includes('menu-right-click')) {\n        if (evt.target.className && !evt.target.className.toString().includes('what-is-this')) {\n          _this.props.dispatch(clearSearchAroundAction());\n        }\n        _this.props.dispatch(setPopupRightClick(false));\n        _this.removeMarkerWhatIs();\n      }\n    });\n    _defineProperty(_this, \"changeVisibleBottomInfo\", function (visible) {\n      _this.setState({\n        bottomInfoVisible: visible\n      });\n    });\n    _defineProperty(_this, \"_getInforPlace\", /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee() {\n      var _this$props$position_, _this$props$position_2;\n      var lat,\n        lng,\n        latLng,\n        response,\n        place_response,\n        _args = arguments;\n      return _regeneratorRuntime().wrap(function _callee$(_context) {\n        while (1) switch (_context.prev = _context.next) {\n          case 0:\n            lat = _args.length > 0 && _args[0] !== undefined ? _args[0] : (_this$props$position_ = _this.props.position_popup) === null || _this$props$position_ === void 0 ? void 0 : _this$props$position_.lat;\n            lng = _args.length > 1 && _args[1] !== undefined ? _args[1] : (_this$props$position_2 = _this.props.position_popup) === null || _this$props$position_2 === void 0 ? void 0 : _this$props$position_2.lng;\n            latLng = {\n              latitude: lat,\n              longitude: lng\n            };\n            _context.prev = 3;\n            _context.next = 6;\n            return getDetailLatLngService(latLng);\n          case 6:\n            response = _context.sent;\n            if (!(response.data.results.length > 0)) {\n              _context.next = 12;\n              break;\n            }\n            place_response = response.data.results[0];\n            return _context.abrupt(\"return\", _objectSpread(_objectSpread({}, place_response), {}, {\n              name: place_response.address_components[0].long_name,\n              formatted_address: _this.getAddressGeocode(place_response)\n            }));\n          case 12:\n            _message.error('Không tìm thấy địa điểm !!');\n            return _context.abrupt(\"return\", null);\n          case 14:\n            _context.next = 19;\n            break;\n          case 16:\n            _context.prev = 16;\n            _context.t0 = _context[\"catch\"](3);\n            throw _context.t0;\n          case 19:\n          case \"end\":\n            return _context.stop();\n        }\n      }, _callee, null, [[3, 16]]);\n    })));\n    _defineProperty(_this, \"selectPlace\", /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee2() {\n      var _this$props$positionM, _this$props$positionM2;\n      var lat,\n        lng,\n        redMarkerVisible,\n        place,\n        viewport,\n        el,\n        _args2 = arguments;\n      return _regeneratorRuntime().wrap(function _callee2$(_context2) {\n        while (1) switch (_context2.prev = _context2.next) {\n          case 0:\n            lat = _args2.length > 0 && _args2[0] !== undefined ? _args2[0] : (_this$props$positionM = _this.props.positionMarkerSelect) === null || _this$props$positionM === void 0 ? void 0 : _this$props$positionM.lat;\n            lng = _args2.length > 1 && _args2[1] !== undefined ? _args2[1] : (_this$props$positionM2 = _this.props.positionMarkerSelect) === null || _this$props$positionM2 === void 0 ? void 0 : _this$props$positionM2.lng;\n            redMarkerVisible = _args2.length > 2 && _args2[2] !== undefined ? _args2[2] : true;\n            _context2.next = 5;\n            return _this._getInforPlace(lat, lng);\n          case 5:\n            place = _context2.sent;\n            if (place) {\n              viewport = {\n                longitude: lng,\n                latitude: lat,\n                zoom: 15\n              };\n              _this.props.dispatch(setMapViewportAction(viewport));\n              _this.setState({\n                bottomInfoVisible: true,\n                placeMouseClick: place\n              });\n              if (redMarkerVisible) {\n                if (_this.markerWhatIs) {\n                  _this.markerWhatIs.setLngLat({\n                    lat: lat,\n                    lng: lng\n                  }).addTo(_this.map);\n                } else {\n                  el = document.createElement('div');\n                  el.innerHTML = ReactDOMServer.renderToStaticMarkup(__jsx(Marker, {\n                    size: 22\n                  }));\n                  _this.markerWhatIs = new maplibregl.Marker(el, {\n                    anchor: 'bottom'\n                  }).setLngLat({\n                    lat: lat,\n                    lng: lng\n                  }).addTo(_this.map);\n                }\n                _this.markerWhatIs.getElement().addEventListener('contextmenu', function (e) {\n                  e.stopPropagation();\n                  e.preventDefault();\n                  _this.props.dispatch(setRedMarkerAction(false));\n                  _this.props.dispatch(setPopupRightClick(true, {\n                    lat: lat,\n                    lng: lng\n                  }, 'popupCurrentPlace'));\n                });\n                _this.props.dispatch(setRedMarkerAction(false));\n              }\n              // redMarkerVisible ? this.props.dispatch(setRedMarkerAction(true, { lat, lng })) : null;\n            } else {\n              _message.error('Không tìm thấy địa điểm !!');\n            }\n          case 7:\n          case \"end\":\n            return _context2.stop();\n        }\n      }, _callee2);\n    })));\n    _defineProperty(_this, \"removeMarkerWhatIs\", function () {\n      _this.markerWhatIs ? _this.markerWhatIs.remove() : null;\n    });\n    _defineProperty(_this, \"_getInforPlaceAround\", /*#__PURE__*/function () {\n      var _ref3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee3(id) {\n        var response;\n        return _regeneratorRuntime().wrap(function _callee3$(_context3) {\n          while (1) switch (_context3.prev = _context3.next) {\n            case 0:\n              _context3.prev = 0;\n              _context3.next = 3;\n              return Axios.get(\"https://napi.goong.io/v1/marker/get_marker_detail/\".concat(id));\n            case 3:\n              response = _context3.sent;\n              if (!response.data.data) {\n                _context3.next = 8;\n                break;\n              }\n              return _context3.abrupt(\"return\", response.data.data);\n            case 8:\n              _message.error('Không tìm thấy địa điểm !!');\n              return _context3.abrupt(\"return\", null);\n            case 10:\n              _context3.next = 16;\n              break;\n            case 12:\n              _context3.prev = 12;\n              _context3.t0 = _context3[\"catch\"](0);\n              _message.error('Không tìm thấy địa điểm !');\n              throw _context3.t0;\n            case 16:\n            case \"end\":\n              return _context3.stop();\n          }\n        }, _callee3, null, [[0, 12]]);\n      }));\n      return function (_x) {\n        return _ref3.apply(this, arguments);\n      };\n    }());\n    _defineProperty(_this, \"selectAroundPlace\", /*#__PURE__*/function () {\n      var _ref4 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee4(id) {\n        var place, viewport;\n        return _regeneratorRuntime().wrap(function _callee4$(_context4) {\n          while (1) switch (_context4.prev = _context4.next) {\n            case 0:\n              _context4.next = 2;\n              return _this._getInforPlaceAround(id);\n            case 2:\n              place = _context4.sent;\n              if (place) {\n                viewport = {\n                  longitude: Number(place.lng_lat[0]),\n                  latitude: Number(place.lng_lat[1]),\n                  zoom: 15\n                };\n                _this.props.dispatch(setMapViewportAction(viewport));\n                _this.setState({\n                  bottomInfoVisible: true,\n                  placeMouseClick: place\n                });\n                _this.props.dispatch(setPopupRightClick(false));\n              } else {\n                _message.error('Không tìm thấy địa điểm !!');\n              }\n            case 4:\n            case \"end\":\n              return _context4.stop();\n          }\n        }, _callee4);\n      }));\n      return function (_x2) {\n        return _ref4.apply(this, arguments);\n      };\n    }());\n    _defineProperty(_this, \"handleWhatIs\", function () {\n      var redMarkerVisible = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : true;\n      var _this$props = _this.props,\n        position_popup = _this$props.position_popup,\n        isSmallScreen = _this$props.isSmallScreen;\n      if (isSmallScreen) {\n        _this.props.dispatch(getDetailByLatLngAction({\n          latitude: position_popup.lat,\n          longitude: position_popup.lng\n        }));\n        _this.props.dispatch(setBoxVisibleAction('info'));\n        _this.props.dispatch(clearSearchAroundAction());\n        _this.props.dispatch(setPopupRightClick(false));\n        _this.removeMarkerWhatIs();\n      } else {\n        _this.selectPlace(position_popup.lat, position_popup.lng, redMarkerVisible);\n      }\n    });\n    _defineProperty(_this, \"handleFromHere\", /*#__PURE__*/function () {\n      var _ref5 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee5(lat, lng) {\n        var place, viewport;\n        return _regeneratorRuntime().wrap(function _callee5$(_context5) {\n          while (1) switch (_context5.prev = _context5.next) {\n            case 0:\n              if (!(!lat || !lng)) {\n                _context5.next = 6;\n                break;\n              }\n              _context5.next = 3;\n              return _this._getInforPlace();\n            case 3:\n              place = _context5.sent;\n              _context5.next = 9;\n              break;\n            case 6:\n              _context5.next = 8;\n              return _this._getInforPlace(lat, lng);\n            case 8:\n              place = _context5.sent;\n            case 9:\n              if (place) {\n                viewport = {\n                  longitude: place.geometry.location.lng,\n                  latitude: place.geometry.location.lat,\n                  zoom: 15\n                };\n                !_this.props.to_place && _this.props.dispatch(setMapViewportAction(viewport));\n                _this.props.dispatch(setBoxVisibleAction('navigation'));\n                _this.props.dispatch(navigationFromAction(place, \"\".concat(place.name, \" - \").concat(place.formatted_address)));\n                _this.props.dispatch(setRedMarkerAction(false));\n                _this.changeVisibleBottomInfo(false);\n              }\n            case 10:\n            case \"end\":\n              return _context5.stop();\n          }\n        }, _callee5);\n      }));\n      return function (_x3, _x4) {\n        return _ref5.apply(this, arguments);\n      };\n    }());\n    _defineProperty(_this, \"handleToHere\", /*#__PURE__*/function () {\n      var _ref6 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee6(lat, lng) {\n        var place, viewport, my_location, response;\n        return _regeneratorRuntime().wrap(function _callee6$(_context6) {\n          while (1) switch (_context6.prev = _context6.next) {\n            case 0:\n              if (!(!lat || !lng)) {\n                _context6.next = 6;\n                break;\n              }\n              _context6.next = 3;\n              return _this._getInforPlace();\n            case 3:\n              place = _context6.sent;\n              _context6.next = 9;\n              break;\n            case 6:\n              _context6.next = 8;\n              return _this._getInforPlace(lat, lng);\n            case 8:\n              place = _context6.sent;\n            case 9:\n              if (!place) {\n                _context6.next = 29;\n                break;\n              }\n              _this.props.dispatch(setBoxVisibleAction('navigation'));\n              viewport = {\n                longitude: place.geometry.location.lng,\n                latitude: place.geometry.location.lat,\n                zoom: 15\n              };\n              my_location = _this.props.my_location;\n              if (!(my_location && (_this.props.boxVisible === 'search' || _this.props.boxVisible === 'info'))) {\n                _context6.next = 24;\n                break;\n              }\n              _context6.prev = 14;\n              _context6.next = 17;\n              return Request.geocode(my_location);\n            case 17:\n              response = _context6.sent;\n              if (response.data.results.length > 0) {\n                _this.props.dispatch(navigationFromAction(_objectSpread(_objectSpread({}, response.data.results[0]), {}, {\n                  name: response.data.results[0].address_components[0].long_name\n                }), 'Vị trí của bạn'));\n              }\n              _context6.next = 24;\n              break;\n            case 21:\n              _context6.prev = 21;\n              _context6.t0 = _context6[\"catch\"](14);\n              throw _context6.t0;\n            case 24:\n              !_this.props.from_place && _this.props.dispatch(setMapViewportAction(viewport));\n              _this.props.dispatch(navigationToAction(place, \"\".concat(place.name, \" - \").concat(place.formatted_address)));\n              _this.props.dispatch(setBoxVisibleAction('navigation'));\n              _this.props.dispatch(setRedMarkerAction(false));\n              _this.changeVisibleBottomInfo(false);\n            case 29:\n            case \"end\":\n              return _context6.stop();\n          }\n        }, _callee6, null, [[14, 21]]);\n      }));\n      return function (_x5, _x6) {\n        return _ref6.apply(this, arguments);\n      };\n    }());\n    _defineProperty(_this, \"handleDeleteLocation\", function () {\n      var type_popup = _this.props.type_popup;\n      if (type_popup === 'popupFromPlace') {\n        _this.props.dispatch(navigationFromAction(null, ''));\n      } else if (type_popup === 'popupToPlace') {\n        _this.props.dispatch(navigationToAction(null, ''));\n      }\n      _this.props.dispatch(clearResultAction());\n    });\n    _defineProperty(_this, \"handleSearchAround\", /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee7() {\n      var place, viewport, location;\n      return _regeneratorRuntime().wrap(function _callee7$(_context7) {\n        while (1) switch (_context7.prev = _context7.next) {\n          case 0:\n            _context7.next = 2;\n            return _this._getInforPlace();\n          case 2:\n            place = _context7.sent;\n            if (place) {\n              viewport = {\n                longitude: place.geometry.location.lng,\n                latitude: place.geometry.location.lat,\n                zoom: 15\n              };\n              location = {\n                lat: place.geometry.location.lat,\n                lng: place.geometry.location.lng\n              };\n              _this.props.dispatch(setBoxVisibleAction('search'));\n              _this.props.dispatch(setMapViewportAction(viewport));\n              _this.props.dispatch(searchAroundAction(location, _this.props.viewport.zoom));\n              _this.setState({\n                bottomInfoVisible: false\n              });\n            }\n          case 4:\n          case \"end\":\n            return _context7.stop();\n        }\n      }, _callee7);\n    })));\n    _defineProperty(_this, \"_selectAroundPlace\", function (type, place) {\n      if (type !== 'center') {\n        _this.props.dispatch(selectAroundPlaceAction(place));\n        _this.selectAroundPlace(place === null || place === void 0 ? void 0 : place.id);\n      } else {\n        _this.props.dispatch(selectAroundPlaceAction(place));\n        _this.selectPlace(place.geometry.location.lat, place.geometry.location.lng, false);\n      }\n    });\n    _defineProperty(_this, \"handleToAroundPlace\", /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee8() {\n      var place, _response$data, place_center, response;\n      return _regeneratorRuntime().wrap(function _callee8$(_context8) {\n        while (1) switch (_context8.prev = _context8.next) {\n          case 0:\n            place = null;\n            _this.props.around_places.map(function (item) {\n              if (item.lng_lat[0] * 1 === _this.popupRightClick.getLngLat().lng && item.lng_lat[1] * 1 === _this.popupRightClick.getLngLat().lat) {\n                place = item;\n              }\n            });\n            if (!place) {\n              _context8.next = 21;\n              break;\n            }\n            _context8.prev = 3;\n            _this.props.dispatch(setPopupRightClick(false));\n            place_center = _this.props.around_place_center;\n            _this.props.dispatch(navigationFromAction(place_center, \"\".concat(place_center.name, \" - \").concat(place_center.formatted_address)));\n            _context8.next = 9;\n            return Axios.get(\"https://napi.goong.io/v1/marker/get_marker_detail/\".concat(place.id));\n          case 9:\n            response = _context8.sent;\n            place = (_response$data = response.data) === null || _response$data === void 0 ? void 0 : _response$data.data;\n            place = _objectSpread(_objectSpread({}, place), {}, {\n              place_id: place._id,\n              geometry: {\n                location: {\n                  lat: Number(place.lng_lat[1]),\n                  lng: Number(place.lng_lat[0])\n                }\n              },\n              formatted_address: place.description.address\n            });\n            _this.props.dispatch(navigationToAction(place, \"\".concat(place.name, \" - \").concat(place.formatted_address)));\n            _this.props.dispatch(setBoxVisibleAction('navigation'));\n            _context8.next = 19;\n            break;\n          case 16:\n            _context8.prev = 16;\n            _context8.t0 = _context8[\"catch\"](3);\n            _message.error('Không tìm thấy địa điểm !');\n          case 19:\n            _context8.next = 22;\n            break;\n          case 21:\n            _message.error('Không tìm thấy địa điểm !');\n          case 22:\n          case \"end\":\n            return _context8.stop();\n        }\n      }, _callee8, null, [[3, 16]]);\n    })));\n    _defineProperty(_this, \"removeMarkerPopup\", function () {\n      if (_this.markerCurrentPlace) _this.markerCurrentPlace.remove();\n      if (_this.popupRightClick) _this.popupRightClick.remove();\n      if (_this.props.around_places) _this.props.dispatch(clearSearchAroundAction());\n      if (_this.redMarker) _this.redMarker.remove();\n    });\n    _defineProperty(_this, \"getAddressGeocode\", function (place) {\n      var _place$address_compon;\n      var result = [];\n      (_place$address_compon = place.address_components) === null || _place$address_compon === void 0 ? void 0 : _place$address_compon.slice(1).map(function (item) {\n        result.push(item.long_name);\n      });\n      return result.join(',');\n    });\n    _defineProperty(_this, \"changeStyle\", function () {\n      var style = _this.state.style;\n      if (style === STYLE_URL.SATELITE + \"YJTajS80fLlhJ4a2BG0gXqXXdZzdLG5V3iivOK9e\") {\n        _this.setState({\n          style: STYLE_URL.NORMAL + \"YJTajS80fLlhJ4a2BG0gXqXXdZzdLG5V3iivOK9e\"\n        });\n        _this.map.setStyle(STYLE_URL.NORMAL + \"YJTajS80fLlhJ4a2BG0gXqXXdZzdLG5V3iivOK9e\");\n      } else {\n        _this.setState({\n          style: STYLE_URL.SATELITE + \"YJTajS80fLlhJ4a2BG0gXqXXdZzdLG5V3iivOK9e\"\n        });\n        _this.map.setStyle(STYLE_URL.SATELITE + \"YJTajS80fLlhJ4a2BG0gXqXXdZzdLG5V3iivOK9e\");\n      }\n    });\n    _defineProperty(_this, \"navigationByURLIframe\", /*#__PURE__*/function () {\n      var _ref9 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee9(from, to) {\n        var fromplace, toplace;\n        return _regeneratorRuntime().wrap(function _callee9$(_context9) {\n          while (1) switch (_context9.prev = _context9.next) {\n            case 0:\n              _this.props.dispatch(setBoxVisibleAction('iframe'));\n              _this.props.dispatch(setRedMarkerAction(false));\n              _this.changeVisibleBottomInfo(false);\n              if (!(!from.lat || !from.lng)) {\n                _context9.next = 9;\n                break;\n              }\n              _context9.next = 6;\n              return _this._getInforPlace();\n            case 6:\n              fromplace = _context9.sent;\n              _context9.next = 12;\n              break;\n            case 9:\n              _context9.next = 11;\n              return _this._getInforPlace(from.lat, from.lng);\n            case 11:\n              fromplace = _context9.sent;\n            case 12:\n              _context9.next = 14;\n              return _this.props.dispatch(navigationFromAction(fromplace, \"\".concat(fromplace.name, \" - \").concat(fromplace.formatted_address)));\n            case 14:\n              if (!(!to.lat || !to.lng)) {\n                _context9.next = 20;\n                break;\n              }\n              _context9.next = 17;\n              return _this._getInforPlace();\n            case 17:\n              toplace = _context9.sent;\n              _context9.next = 23;\n              break;\n            case 20:\n              _context9.next = 22;\n              return _this._getInforPlace(to.lat, to.lng);\n            case 22:\n              toplace = _context9.sent;\n            case 23:\n              _context9.next = 25;\n              return _this.props.dispatch(navigationToAction(toplace, \"\".concat(toplace.name, \" - \").concat(toplace.formatted_address)));\n            case 25:\n              _this.props.dispatch(navigationAction(_this.props.from_place, _this.props.to_place, 'car'));\n            case 26:\n            case \"end\":\n              return _context9.stop();\n          }\n        }, _callee9);\n      }));\n      return function (_x7, _x8) {\n        return _ref9.apply(this, arguments);\n      };\n    }());\n    _defineProperty(_this, \"navigationByURL\", /*#__PURE__*/function () {\n      var _ref10 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee10(from, to) {\n        var fromplace, toplace;\n        return _regeneratorRuntime().wrap(function _callee10$(_context10) {\n          while (1) switch (_context10.prev = _context10.next) {\n            case 0:\n              _this.props.dispatch(setBoxVisibleAction('navigation'));\n              _this.props.dispatch(setRedMarkerAction(false));\n              _this.changeVisibleBottomInfo(false);\n              if (!(!from.lat || !from.lng)) {\n                _context10.next = 9;\n                break;\n              }\n              _context10.next = 6;\n              return _this._getInforPlace();\n            case 6:\n              fromplace = _context10.sent;\n              _context10.next = 12;\n              break;\n            case 9:\n              _context10.next = 11;\n              return _this._getInforPlace(from.lat, from.lng);\n            case 11:\n              fromplace = _context10.sent;\n            case 12:\n              _context10.next = 14;\n              return _this.props.dispatch(navigationFromAction(fromplace, \"\".concat(fromplace.name, \" - \").concat(fromplace.formatted_address)));\n            case 14:\n              if (!(!to.lat || !to.lng)) {\n                _context10.next = 20;\n                break;\n              }\n              _context10.next = 17;\n              return _this._getInforPlace();\n            case 17:\n              toplace = _context10.sent;\n              _context10.next = 23;\n              break;\n            case 20:\n              _context10.next = 22;\n              return _this._getInforPlace(to.lat, to.lng);\n            case 22:\n              toplace = _context10.sent;\n            case 23:\n              _context10.next = 25;\n              return _this.props.dispatch(navigationToAction(toplace, \"\".concat(toplace.name, \" - \").concat(toplace.formatted_address)));\n            case 25:\n            case \"end\":\n              return _context10.stop();\n          }\n        }, _callee10);\n      }));\n      return function (_x9, _x10) {\n        return _ref10.apply(this, arguments);\n      };\n    }());\n    _defineProperty(_this, \"handleStorageChange\", function (event) {\n      console.log('oppaopaopa');\n      if (event.key === 'search_history') {\n        _this.setState({\n          value: event.newValue\n        });\n      }\n    });\n    _defineProperty(_this, \"renderParkingLots\", function () {\n      var parkingLots = _this.props.parkingLots;\n      return parkingLots === null || parkingLots === void 0 ? void 0 : parkingLots.map(function (lot) {\n        // Tạo element cho marker\n        var el = document.createElement('div');\n        el.className = 'marker parking-marker';\n        el.innerHTML = \"\\n\\t\\t\\t\\t<div class=\\\"marker-content\\\">P</div>\\n\\t\\t\\t\\t<div class=\\\"marker-info\\\">\\n\\t\\t\\t\\t\\t<h3>\".concat(lot.name, \"</h3>\\n\\t\\t\\t\\t\\t<p>\").concat(lot.address, \"</p>\\n\\t\\t\\t\\t\\t<p>Available: \").concat(lot.availableSpots, \"/\").concat(lot.capacity, \"</p>\\n\\t\\t\\t\\t</div>\\n\\t\\t\\t\");\n\n        // Tạo marker theo docs của Goong\n        var marker = new maplibregl.Marker({\n          element: el,\n          anchor: 'bottom',\n          offset: [0, -10]\n        }).setLngLat([lot.longitude, lot.latitude]).addTo(_this.map);\n\n        // Thêm sự kiện click\n        marker.getElement().addEventListener('click', function () {\n          _this.handleParkingLotClick(lot);\n        });\n        return marker;\n      });\n    });\n    _defineProperty(_this, \"handleParkingLotClick\", function (lot) {\n      // Zoom đến vị trí parking lot\n      _this.map.flyTo({\n        center: [lot.longitude, lot.latitude],\n        zoom: 15\n      });\n\n      // Hiển thị thông tin\n      _this.setState({\n        bottomInfoVisible: true,\n        placeMouseClick: {\n          name: lot.name,\n          formatted_address: lot.address,\n          geometry: {\n            location: {\n              lat: lot.latitude,\n              lng: lot.longitude\n            }\n          }\n        }\n      });\n    });\n    _this._mapRef = /*#__PURE__*/React.createRef();\n    _this.map = null;\n    _this.redMarker = null;\n    _this.popupRightClick = null;\n    _this.popup_navigation = [];\n    _this.state = {\n      style: STYLE_URL.NORMAL + \"YJTajS80fLlhJ4a2BG0gXqXXdZzdLG5V3iivOK9e\",\n      styleNormal: STYLE_URL.NORMAL + \"YJTajS80fLlhJ4a2BG0gXqXXdZzdLG5V3iivOK9e\",\n      styleEarth: STYLE_URL.SATELITE + \"YJTajS80fLlhJ4a2BG0gXqXXdZzdLG5V3iivOK9e\",\n      bottomInfoVisible: false,\n      value: localStorage.getItem('search_history') || '',\n      parkingLots: []\n    };\n    _this.list = [];\n    _this.listRestaurant = [];\n    _this.listHistories = [];\n    _this.view = null;\n    _this.navigationView = null;\n    return _this;\n  }\n  _inherits(Map, _Component);\n  return _createClass(Map, [{\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate(prevProps) {\n      var _this2 = this;\n      if (this.props.isSmallScreen !== prevProps.isSmallScreen) {\n        if (!this.props.isSmallScreen && !this.navigation) {\n          this.navigation = new maplibregl.NavigationControl();\n          this.map.addControl(this.navigation);\n        } else if (this.props.isSmallScreen && this.navigation) {\n          this.map.removeControl(this.navigation);\n          this.navigation = null;\n        }\n      }\n      if (!equal(prevProps.positionMarkerSelect, this.props.positionMarkerSelect) && this.props.positionMarkerSelect) {\n        if (this.redMarker) {\n          this.redMarker = this.redMarker.setLngLat(this.props.positionMarkerSelect).addTo(this.map);\n        } else {\n          var el = document.createElement('div');\n          el.innerHTML = ReactDOMServer.renderToStaticMarkup(__jsx(Marker, {\n            size: 22\n          }));\n          // Marker chuột phải\n          this.redMarker = new maplibregl.Marker({\n            anchor: 'bottom',\n            element: el\n          }).setLngLat(this.props.positionMarkerSelect).addTo(this.map);\n          this.redMarker.getElement().addEventListener('contextmenu', function (e) {\n            e.stopPropagation();\n            e.preventDefault();\n            _this2.props.dispatch(setPopupRightClick(true, _this2.props.positionMarkerSelect, 'normal'));\n          });\n        }\n      }\n      if (prevProps.markerSelect !== this.props.markerSelect) {\n        if (!this.props.markerSelect) {\n          var _this$redMarker;\n          (_this$redMarker = this.redMarker) === null || _this$redMarker === void 0 ? void 0 : _this$redMarker.remove();\n        }\n      }\n      if (this.props.popup_visible && (!equal(prevProps.position_popup, this.props.position_popup) || this.props.type_popup !== prevProps.type_popup) && this.props.position_popup) {\n        this.popupRightClick = this.popupRightClick ? this.popupRightClick.setLngLat([this.props.position_popup.lng, this.props.position_popup.lat]).addTo(this.map).setHTML(ReactDOMServer.renderToStaticMarkup(__jsx(MenuRightClick, {\n          dispatch: this.props.dispatch,\n          position_popup: this.props.position_popup,\n          type_popup: this.props.type_popup\n        }))) : new maplibregl.Popup({\n          closeButton: false,\n          anchor: 'top',\n          closeOnClick: false,\n          offset: [0, 5]\n        }).setLngLat([this.props.position_popup.lng, this.props.position_popup.lat]).setHTML(ReactDOMServer.renderToStaticMarkup(__jsx(MenuRightClick, {\n          dispatch: this.props.dispatch,\n          position_popup: this.props.position_popup,\n          type_popup: this.props.type_popup\n        }))).addTo(this.map);\n      }\n      if (this.popupRightClick && !this.props.popup_visible) {\n        this.popupRightClick.remove();\n      }\n      if (!equal(prevProps.current_place, this.props.current_place) && this.props.current_place) {\n        var selectedPlace = this.props.current_place;\n        this.map.flyTo({\n          center: [selectedPlace.geometry.location.lng, selectedPlace.geometry.location.lat],\n          zoom: 15,\n          speed: 1.5,\n          curve: 1\n        });\n        this.props.dispatch(setCollapsedInfoBoxAction(false));\n        this.props.dispatch(setRedMarkerAction(false));\n        this.setState({\n          bottomInfoVisible: false\n        });\n      }\n      if (!equal(prevProps.viewport, this.props.viewport) && this.props.viewport) {\n        this.map.flyTo({\n          center: [this.props.viewport.longitude, this.props.viewport.latitude],\n          zoom: this.props.viewport.zoom,\n          speed: 2\n        });\n      }\n      if (!equal(prevProps.around_place_center, this.props.around_place_center)) {\n        this.props.dispatch(setRedMarkerAction(false));\n      }\n      if (!equal(prevProps.boxVisible, this.props.boxVisible) && this.props.boxVisible === 'navigation') {\n        this.removeMarkerPopup();\n      }\n      if (!equal(prevProps.result_select, this.props.result_select) || !equal(prevProps.result_navigation, this.props.result_navigation)) {\n        var _this$props2 = this.props,\n          result_select = _this$props2.result_select,\n          result_navigation = _this$props2.result_navigation,\n          boxVisible = _this$props2.boxVisible,\n          from_place = _this$props2.from_place,\n          to_place = _this$props2.to_place;\n        var dashedLineGeoJSON = [],\n          polylineGeoJSON = [];\n        this.result_navigation = [];\n        if (boxVisible !== 'navigation' && boxVisible !== 'iframe' || !result_navigation) {\n          var _this$popup_navigatio, _this$popup_navigatio2;\n          // Remove cac layer/source\n          if (this.map.getLayer(\"route-layer-fastest\")) this.map.removeLayer(\"route-layer-fastest\");\n          if (this.map.getLayer(\"route-layer-shortest\")) this.map.removeLayer(\"route-layer-shortest\");\n          if (this.map.getLayer(\"walk-layer-0\")) this.map.removeLayer(\"walk-layer-0\");\n          if (this.map.getLayer(\"walk-layer-1\")) this.map.removeLayer(\"walk-layer-1\");\n          if (this.map.getSource(\"route-source-fastest\")) this.map.removeSource(\"route-source-fastest\");\n          if (this.map.getSource(\"route-source-shortest\")) this.map.removeSource(\"route-source-shortest\");\n          if (this.map.getSource(\"walk-source-0\")) this.map.removeSource(\"walk-source-0\");\n          if (this.map.getSource(\"walk-source-1\")) this.map.removeSource(\"walk-source-1\");\n          (_this$popup_navigatio = this.popup_navigation[0]) === null || _this$popup_navigatio === void 0 ? void 0 : _this$popup_navigatio.remove();\n          (_this$popup_navigatio2 = this.popup_navigation[1]) === null || _this$popup_navigatio2 === void 0 ? void 0 : _this$popup_navigatio2.remove();\n        } else {\n          if (result_navigation) {\n            var distance = '';\n            if (localStorage.getItem('unit') === 'KILOMETERS') {\n              distance = \"\".concat((result_navigation.fastest[0].legs[0].distance.value / 1000).toFixed(1), \" KM\");\n            } else if (localStorage.getItem('unit') === 'MILES') {\n              distance = \"\".concat((result_navigation.fastest[0].legs[0].distance.value / 1000 * Mile_Travel.MILES).toFixed(1), \" D\\u1EB7m\");\n            } else {\n              distance = \"\".concat((result_navigation.fastest[0].legs[0].distance.value / 1000).toFixed(1), \" KM\");\n            }\n            var coordinateObject1 = {};\n            coordinateObject1.coordinates = this.decodePolyline(result_navigation.fastest[0].overview_polyline.points);\n            coordinateObject1.type = 'LineString';\n            polylineGeoJSON.push(coordinateObject1);\n            polylineGeoJSON[0].roadWay = 'fastest';\n            var coordinateObject2 = {};\n            coordinateObject2.coordinates = this.decodePolyline(result_navigation.shortest[0].overview_polyline.points);\n            coordinateObject2.type = 'LineString';\n            polylineGeoJSON.push(coordinateObject2);\n            polylineGeoJSON[1].roadWay = 'shortest';\n            dashedLineGeoJSON.push({\n              type: 'LineString',\n              coordinates: [[polylineGeoJSON[0].coordinates[0][0], polylineGeoJSON[0].coordinates[0][1]], [from_place === null || from_place === void 0 ? void 0 : from_place.geometry.location.lng, from_place === null || from_place === void 0 ? void 0 : from_place.geometry.location.lat]]\n            });\n            dashedLineGeoJSON.push({\n              type: 'LineString',\n              coordinates: [[polylineGeoJSON[0].coordinates[polylineGeoJSON[0].coordinates.length - 1][0], polylineGeoJSON[0].coordinates[polylineGeoJSON[0].coordinates.length - 1][1]], [to_place === null || to_place === void 0 ? void 0 : to_place.geometry.location.lng, to_place === null || to_place === void 0 ? void 0 : to_place.geometry.location.lat]]\n            });\n            polylineGeoJSON.map(function (item, i) {\n              // Layer dan duong\n              if (_this2.map.getLayer(\"route-layer-\".concat(item.roadWay))) _this2.map.removeLayer(\"route-layer-\".concat(item.roadWay));\n              if (_this2.map.getSource(\"route-source-\".concat(item.roadWay))) _this2.map.removeSource(\"route-source-\".concat(item.roadWay));\n              _this2.map.addSource(\"route-source-\".concat(item.roadWay), {\n                type: 'geojson',\n                data: {\n                  type: 'Feature',\n                  properties: {},\n                  geometry: item\n                }\n              });\n              _this2.map.addLayer({\n                id: \"route-layer-\".concat(item.roadWay),\n                type: 'line',\n                source: \"route-source-\".concat(item.roadWay),\n                layout: {\n                  'line-join': 'round',\n                  'line-cap': 'round'\n                },\n                paint: {\n                  'line-color': 'rgb(24, 144, 255)',\n                  'line-width': 7,\n                  'line-opacity': item.roadWay === result_select ? 1 : 0.5\n                }\n              });\n              // Layer di bo\n\n              if (_this2.map.getLayer(\"walk-layer-\".concat(i))) _this2.map.removeLayer(\"walk-layer-\".concat(i));\n              if (_this2.map.getSource(\"walk-source-\".concat(i))) _this2.map.removeSource(\"walk-source-\".concat(i));\n              _this2.map.addSource(\"walk-source-\".concat(i), {\n                type: 'geojson',\n                data: {\n                  type: 'Feature',\n                  properties: {},\n                  geometry: dashedLineGeoJSON[i]\n                }\n              });\n              _this2.map.addLayer({\n                id: \"walk-layer-\".concat(i),\n                type: 'line',\n                source: \"walk-source-\".concat(i),\n                layout: {\n                  'line-join': 'round',\n                  'line-cap': 'round'\n                },\n                paint: {\n                  'line-color': 'rgb(133, 135, 126)',\n                  'line-opacity': 1,\n                  'line-width': 6,\n                  'line-dasharray': [0.2, 2]\n                }\n              });\n              // Add Popup hien ket qua\n\n              if (_this2.popup_navigation[i]) {\n                var _this2$popup_navigati;\n                (_this2$popup_navigati = _this2.popup_navigation[i]) === null || _this2$popup_navigati === void 0 ? void 0 : _this2$popup_navigati.remove();\n                _this2.popup_navigation[i] = null;\n              }\n              _this2.popup_navigation[i] = new maplibregl.Popup({\n                closeButton: false,\n                anchor: 'top',\n                closeOnClick: false,\n                className: item.roadWay === result_select ? 'popup-z-index1' : 'popup-z-index2'\n              }).setLngLat([i === 0 ? item.coordinates[Math.trunc(0.75 * item.coordinates.length)][0] : item.coordinates[Math.trunc(0.25 * item.coordinates.length)][0], i === 0 ? item.coordinates[Math.trunc(item.coordinates.length * 0.75)][1] : item.coordinates[Math.trunc(item.coordinates.length * 0.25)][1]]).setHTML(ReactDOMServer.renderToStaticMarkup(__jsx(\"div\", {\n                className: \"tooltipNavigation\",\n                id: \"popup-\".concat(item.roadWay)\n              }, __jsx(\"p\", null, distance), __jsx(\"p\", null, result_navigation[item.roadWay][0].legs[0].duration.text)))).setMaxWidth('300px').addTo(_this2.map);\n              document.getElementById(\"popup-\".concat(item.roadWay)).addEventListener('click', function () {\n                _this2.props.dispatch(selectResultAction(item.roadWay));\n              });\n              var normalizeBounds = function normalizeBounds(bounds) {\n                var _bounds = _slicedToArray(bounds, 2),\n                  firstPoint = _bounds[0],\n                  secondPoint = _bounds[1];\n                var minLat = Math.min(firstPoint[1], secondPoint[1]);\n                var maxLat = Math.max(firstPoint[1], secondPoint[1]);\n                var minLng = Math.min(firstPoint[0], secondPoint[0]);\n                var maxLng = Math.max(firstPoint[0], secondPoint[0]);\n                return [[minLng, minLat], [maxLng, maxLat]];\n              };\n              var bound = normalizeBounds([item.coordinates[0], item.coordinates[item.coordinates.length - 1]]);\n              if (isMobile) {\n                _this2.navigationView = _this2.map.cameraForBounds(bound, {\n                  padding: {\n                    top: 10,\n                    bottom: 25,\n                    left: 24,\n                    right: 24\n                  }\n                });\n              } else {\n                _this2.navigationView = _this2.map.cameraForBounds(bound, {\n                  padding: {\n                    top: 40,\n                    bottom: 40,\n                    left: 200,\n                    right: 40\n                  }\n                });\n              }\n            });\n            this.view = {\n              latitude: this.navigationView.center.lat,\n              longitude: this.navigationView.center.lng,\n              zoom: this.navigationView.zoom\n            };\n          }\n        }\n        this.props.dispatch(setMapViewportAction(this.view));\n      }\n      if (!equal(prevProps.from_place, this.props.from_place)) {\n        var place = this.props.from_place;\n        if (place) {\n          var popup = new maplibregl.Popup({\n            offset: [0, -18],\n            className: 'tooltip-marker',\n            closeButton: false\n          }).setHTML(\"<div class=\\\"ant-tooltip-inner tooltip-info-location\\\">\".concat(place.name, \"</div>\")).setMaxWidth('150px');\n          if (this.start_marker) {\n            this.start_marker = this.start_marker.setLngLat(place.geometry.location).setPopup(popup).addTo(this.map);\n          } else {\n            var marker_start = document.createElement('div');\n            marker_start.innerHTML = ReactDOMServer.renderToStaticMarkup(__jsx(\"div\", {\n              className: \"marker-start\"\n            }, __jsx(\"img\", {\n              src: images.button,\n              style: {\n                width: 12\n              },\n              alt: \"\"\n            })));\n            this.start_marker = new maplibregl.Marker({\n              anchor: 'center',\n              element: marker_start\n            }).setPopup(popup).setLngLat(place.geometry.location).addTo(this.map);\n            this.start_marker.getElement().addEventListener('contextmenu', function (e) {\n              e.stopPropagation();\n              e.preventDefault();\n              var lngLat = _this2.start_marker.getLngLat();\n              _this2.props.dispatch(setPopupRightClick(true, lngLat, 'popupFromPlace'));\n              _this2.props.dispatch(setRedMarkerAction(false));\n            });\n            this.start_marker.getElement().addEventListener('click', function () {\n              if (popup.isOpen()) {\n                _this2.start_marker.togglePopup();\n              }\n            });\n            this.start_marker.getElement().addEventListener('mouseenter', function () {\n              return _this2.start_marker.togglePopup();\n            });\n            this.start_marker.getElement().addEventListener('mouseleave', function () {\n              return _this2.start_marker.togglePopup();\n            });\n          }\n        } else {\n          var _prevProps$from_place, _this$state$placeMous;\n          if (equal(this.start_marker.getLngLat(), this.props.position_popup)) {\n            this.props.dispatch(setPopupRightClick(false));\n          }\n          if (equal((_prevProps$from_place = prevProps.from_place) === null || _prevProps$from_place === void 0 ? void 0 : _prevProps$from_place.place_id, (_this$state$placeMous = this.state.placeMouseClick) === null || _this$state$placeMous === void 0 ? void 0 : _this$state$placeMous.place_id)) {\n            this.changeVisibleBottomInfo(false);\n          }\n          this.changeVisibleBottomInfo(false);\n          this.start_marker ? this.start_marker.remove() : null;\n        }\n      }\n      if (!equal(prevProps.to_place, this.props.to_place)) {\n        var _place = this.props.to_place;\n        if (_place) {\n          var _popup = new maplibregl.Popup({\n            offset: [0, -18],\n            className: 'tooltip-marker',\n            closeButton: false\n          }).setHTML(\"<div class=\\\"ant-tooltip-inner tooltip-info-location\\\">\".concat(_place.name, \"</div>\")).setMaxWidth('150px');\n          if (this.end_marker) {\n            this.to_place = this.end_marker.setPopup(_popup).setLngLat(_place.geometry.location).addTo(this.map);\n          } else {\n            var marker_end = document.createElement('div');\n            marker_end.innerHTML = ReactDOMServer.renderToStaticMarkup(__jsx(\"div\", {\n              className: \"marker-end\"\n            }, __jsx(\"div\", null, __jsx(\"img\", {\n              src: images.marker,\n              alt: \"\"\n            }))));\n            this.end_marker = new maplibregl.Marker({\n              anchor: 'center',\n              element: marker_end\n            }).setPopup(_popup).setLngLat(_place.geometry.location).addTo(this.map);\n            this.end_marker.getElement().addEventListener('contextmenu', function (e) {\n              e.stopPropagation();\n              e.preventDefault();\n              var lngLat = _this2.end_marker.getLngLat();\n              _this2.props.dispatch(setPopupRightClick(true, lngLat, 'popupToPlace'));\n              _this2.props.dispatch(setRedMarkerAction(false));\n            });\n            this.end_marker.getElement().addEventListener('click', function () {\n              if (_popup.isOpen()) {\n                _this2.end_marker.togglePopup();\n              }\n            });\n            this.end_marker.getElement().addEventListener('mouseenter', function () {\n              return _this2.end_marker.togglePopup();\n            });\n            this.end_marker.getElement().addEventListener('mouseleave', function () {\n              return _this2.end_marker.togglePopup();\n            });\n          }\n        } else {\n          var _this$start_marker, _prevProps$to_place, _this$state$placeMous2;\n          if (equal((_this$start_marker = this.start_marker) === null || _this$start_marker === void 0 ? void 0 : _this$start_marker.getLngLat(), this.props.position_popup)) {\n            this.props.dispatch(setPopupRightClick(false));\n          }\n          if (equal((_prevProps$to_place = prevProps.to_place) === null || _prevProps$to_place === void 0 ? void 0 : _prevProps$to_place.place_id, (_this$state$placeMous2 = this.state.placeMouseClick) === null || _this$state$placeMous2 === void 0 ? void 0 : _this$state$placeMous2.place_id)) {\n            this.changeVisibleBottomInfo(false);\n          }\n          this.end_marker ? this.end_marker.remove() : null;\n        }\n      }\n      if (!equal(prevProps.around_places, this.props.around_places) || !equal(prevProps.around_place_select, this.props.around_place_select)) {\n        var _this$list_marker_aro;\n        if (((_this$list_marker_aro = this.list_marker_around) === null || _this$list_marker_aro === void 0 ? void 0 : _this$list_marker_aro.length) > 0) {\n          this.list_marker_around.forEach(function (item) {\n            item.remove();\n          });\n          this.list_marker_around = [];\n        }\n        var _this$props3 = this.props,\n          around_places = _this$props3.around_places,\n          around_place_center = _this$props3.around_place_center;\n        if (around_places.length > 0) {\n          this.list_marker_around = [];\n          var _el = document.createElement('div');\n          _el.innerHTML = ReactDOMServer.renderToStaticMarkup(__jsx(Marker, {\n            id: \"marker-center\",\n            type: \"center\"\n          }));\n          this.list_marker_around[0] = new maplibregl.Marker(_el, {\n            anchor: 'bottom'\n          }).setPopup(new maplibregl.Popup({\n            offset: [0, -32],\n            className: 'tooltip-marker',\n            closeButton: false\n          }).setHTML(\"<div class=\\\"ant-tooltip-inner tooltip-info-location\\\">\".concat(around_place_center.name, \"</div>\")).setMaxWidth('150px')).setLngLat(around_place_center.geometry.location).addTo(this.map);\n          var markerCenterDiv = this.list_marker_around[0].getElement();\n          markerCenterDiv.addEventListener('click', function () {\n            _this2._selectAroundPlace('center', around_place_center);\n            _this2.props.dispatch(setRedMarkerAction(false));\n            if (_this2.list_marker_around[0].getPopup().isOpen()) {\n              _this2.list_marker_around[0].togglePopup();\n            }\n          });\n          markerCenterDiv.addEventListener('contextmenu', function (e) {\n            e.stopPropagation();\n            e.preventDefault();\n            _this2.props.dispatch(setRedMarkerAction(false));\n            _this2.props.dispatch(setPopupRightClick(true, around_place_center.geometry.location, 'normal'));\n          });\n          markerCenterDiv.addEventListener('mouseenter', function () {\n            return _this2.list_marker_around[0].togglePopup();\n          });\n          markerCenterDiv.addEventListener('mouseleave', function () {\n            return _this2.list_marker_around[0].togglePopup();\n          });\n          around_places.forEach(function (item, i) {\n            var popup = new maplibregl.Popup({\n              offset: [0, -32],\n              className: 'tooltip-marker',\n              closeButton: false,\n              anchor: 'bottom'\n            }).setHTML(\"<div class=\\\"ant-tooltip-inner tooltip-info-location\\\">\".concat(item.name, \"</div>\")).setMaxWidth('150px');\n            _el = document.createElement('div');\n            _el.innerHTML = ReactDOMServer.renderToStaticMarkup(__jsx(Marker, {\n              type: \"around\",\n              place: item,\n              place_select: _this2.props.around_place_select,\n              id: \"marker-around-\".concat(i)\n            }));\n            _this2.list_marker_around.push(new maplibregl.Marker(_el, {\n              anchor: 'bottom'\n            }).setPopup(popup).setLngLat([item.lng_lat[0] * 1, item.lng_lat[1] * 1]).addTo(_this2.map));\n            var markerDiv = _this2.list_marker_around[i + 1].getElement();\n            markerDiv.addEventListener('click', function (e) {\n              e.stopPropagation();\n              _this2.props.dispatch(setRedMarkerAction(false));\n              _this2._selectAroundPlace('around', item);\n              if (popup.isOpen()) {\n                _this2.list_marker_around[i + 1].togglePopup();\n              }\n            });\n            markerDiv.addEventListener('contextmenu', function (e) {\n              e.stopPropagation();\n              e.preventDefault();\n              _this2.props.dispatch(setPopupRightClick(true, {\n                lng: item.lng_lat[0] * 1,\n                lat: item.lng_lat[1] * 1\n              }, 'around'));\n              _this2.props.dispatch(setRedMarkerAction(false));\n            });\n            markerDiv.addEventListener('mouseenter', function () {\n              return _this2.list_marker_around[i + 1].togglePopup();\n            });\n            markerDiv.addEventListener('mouseleave', function () {\n              return _this2.list_marker_around[i + 1].togglePopup();\n            });\n          });\n        }\n      }\n      if (this.props.boxVisible === 'info' && this.props.current_place) {\n        if (!this.markerCurrentPlace) {\n          var _this$props$current_p, _this$props$current_p2;\n          var _el2 = document.createElement('div');\n          _el2.innerHTML = ReactDOMServer.renderToStaticMarkup(\n          // <Marker type=\"normal\" />\n          __jsx(\"div\", {\n            className: \"marker-histories\"\n          }, __jsx(\"div\", null, __jsx(\"img\", {\n            src: images.marker,\n            alt: \"\"\n          }))));\n          // Marker info\n          this.markerCurrentPlace = new maplibregl.Marker({\n            anchor: 'bottom',\n            element: _el2\n          }).setLngLat((_this$props$current_p = this.props.current_place) === null || _this$props$current_p === void 0 ? void 0 : (_this$props$current_p2 = _this$props$current_p.geometry) === null || _this$props$current_p2 === void 0 ? void 0 : _this$props$current_p2.location).addTo(this.map);\n          this.markerCurrentPlace.getElement().addEventListener('contextmenu', function (e) {\n            e.stopPropagation();\n            e.preventDefault();\n            var lngLat = _this2.markerCurrentPlace.getLngLat();\n            _this2.props.dispatch(setPopupRightClick(true, lngLat, 'popupCurrentPlace'));\n          });\n        } else {\n          this.markerCurrentPlace.setLngLat(this.props.current_place.geometry.location).addTo(this.map);\n        }\n      }\n      if (this.props.boxVisible !== 'info' && this.markerCurrentPlace) {\n        this.markerCurrentPlace.remove();\n        this.markerCurrentPlace = null;\n      }\n      if (this.props.boxVisible === 'detailsrestaurant' && this.props.restaurantData) {\n        if (this.props.restaurantData.length !== 0) {\n          var _iterator = _createForOfIteratorHelper(this.props.restaurantData),\n            _step;\n          try {\n            for (_iterator.s(); !(_step = _iterator.n()).done;) {\n              var item = _step.value;\n              var marker_restaurant = document.createElement('div');\n              marker_restaurant.innerHTML = ReactDOMServer.renderToStaticMarkup(\n              // <MarkerNavigation id=\"end-marker\" type=\"histories\" />\n              __jsx(\"div\", {\n                className: \"marker-histories\"\n              }, __jsx(\"div\", null, __jsx(\"img\", {\n                src: images.marker,\n                alt: \"\"\n              }))));\n              this.restaurant_marker = new maplibregl.Marker({\n                anchor: 'center',\n                element: marker_restaurant\n              })\n              // .setPopup(popup)\n              .setLngLat(item.geometry.location).addTo(this.map);\n              this.listRestaurant.push(this.restaurant_marker);\n            }\n          } catch (err) {\n            _iterator.e(err);\n          } finally {\n            _iterator.f();\n          }\n        } else {\n          // console.log('Có')\n          var _iterator2 = _createForOfIteratorHelper(this.listRestaurant),\n            _step2;\n          try {\n            for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {\n              var marker = _step2.value;\n              marker.remove();\n            }\n          } catch (err) {\n            _iterator2.e(err);\n          } finally {\n            _iterator2.f();\n          }\n          this.listRestaurant = [];\n        }\n      }\n      if (this.props.boxVisible === 'history') {\n        var _iterator3 = _createForOfIteratorHelper(this.listHistories),\n          _step3;\n        try {\n          for (_iterator3.s(); !(_step3 = _iterator3.n()).done;) {\n            var _marker = _step3.value;\n            _marker.remove();\n          }\n        } catch (err) {\n          _iterator3.e(err);\n        } finally {\n          _iterator3.f();\n        }\n        var _iterator4 = _createForOfIteratorHelper(this.props.searchLocalStorage),\n          _step4;\n        try {\n          for (_iterator4.s(); !(_step4 = _iterator4.n()).done;) {\n            var _item = _step4.value;\n            var marker_history = document.createElement('div');\n            marker_history.innerHTML = ReactDOMServer.renderToStaticMarkup(__jsx(\"div\", {\n              className: \"marker-histories\"\n            }, __jsx(\"div\", null, __jsx(\"img\", {\n              src: images.marker,\n              alt: \"\"\n            }))));\n            this.history_marker = new maplibregl.Marker({\n              anchor: 'center',\n              element: marker_history\n            }).setLngLat(_item.location).addTo(this.map);\n            this.listHistories.push(this.history_marker);\n          }\n        } catch (err) {\n          _iterator4.e(err);\n        } finally {\n          _iterator4.f();\n        }\n      } else {\n        var _iterator5 = _createForOfIteratorHelper(this.listHistories),\n          _step5;\n        try {\n          for (_iterator5.s(); !(_step5 = _iterator5.n()).done;) {\n            var _marker2 = _step5.value;\n            _marker2.remove();\n          }\n        } catch (err) {\n          _iterator5.e(err);\n        } finally {\n          _iterator5.f();\n        }\n      }\n\n      // if (this.props.boxVisible === \"details\") {\n      if (this.props.result_navigation && this.props.boxVisible === 'details') {\n        var _iterator6 = _createForOfIteratorHelper(this.props.result_navigation.fastest[0].legs[0].steps),\n          _step6;\n        try {\n          for (_iterator6.s(); !(_step6 = _iterator6.n()).done;) {\n            var step = _step6.value;\n            var _popup2 = new maplibregl.Popup({\n              offset: [0, -32],\n              className: 'tooltip-marker',\n              closeButton: false,\n              anchor: 'bottom'\n            }).setHTML(\"<div class=\\\"ant-tooltip-inner tooltip-info-location\\\">\".concat(step.html_instructions, \"</div>\")).setMaxWidth('150px');\n            var marker_step = document.createElement('div');\n            marker_step.innerHTML = ReactDOMServer.renderToStaticMarkup(__jsx(\"div\", {\n              className: \"marker-details\"\n            }));\n            this.step_marker = new maplibregl.Marker({\n              anchor: 'center',\n              element: marker_step\n            }).setPopup(_popup2).setLngLat(step.end_location).addTo(this.map);\n            this.list.push(this.step_marker);\n          }\n        } catch (err) {\n          _iterator6.e(err);\n        } finally {\n          _iterator6.f();\n        }\n      } else {\n        var _iterator7 = _createForOfIteratorHelper(this.list),\n          _step7;\n        try {\n          for (_iterator7.s(); !(_step7 = _iterator7.n()).done;) {\n            var _marker3 = _step7.value;\n            _marker3.remove();\n          }\n        } catch (err) {\n          _iterator7.e(err);\n        } finally {\n          _iterator7.f();\n        }\n        this.list = [];\n      }\n      // }\n      if (this.props.boxVisible === 'navigation' && isMobile) {\n        if (this.props.result_navigation) {\n          var _iterator8 = _createForOfIteratorHelper(this.props.result_navigation.fastest[0].legs[0].steps),\n            _step8;\n          try {\n            for (_iterator8.s(); !(_step8 = _iterator8.n()).done;) {\n              var _step9 = _step8.value;\n              var _popup3 = new maplibregl.Popup({\n                offset: [0, -32],\n                className: 'tooltip-marker',\n                closeButton: false,\n                anchor: 'bottom'\n              }).setHTML(\"<div class=\\\"ant-tooltip-inner tooltip-info-location\\\">\".concat(_step9.html_instructions, \"</div>\")).setMaxWidth('150px');\n              var _marker_step = document.createElement('div');\n              _marker_step.innerHTML = ReactDOMServer.renderToStaticMarkup(__jsx(\"div\", {\n                className: \"marker-details\"\n              }));\n              this.step_marker = new maplibregl.Marker({\n                anchor: 'center',\n                element: _marker_step\n              }).setPopup(_popup3).setLngLat(_step9.end_location).addTo(this.map);\n              this.list.push(this.step_marker);\n            }\n          } catch (err) {\n            _iterator8.e(err);\n          } finally {\n            _iterator8.f();\n          }\n        } else {\n          var _iterator9 = _createForOfIteratorHelper(this.list),\n            _step10;\n          try {\n            for (_iterator9.s(); !(_step10 = _iterator9.n()).done;) {\n              var _marker4 = _step10.value;\n              _marker4.remove();\n            }\n          } catch (err) {\n            _iterator9.e(err);\n          } finally {\n            _iterator9.f();\n          }\n          this.list = [];\n        }\n      }\n    }\n  }, {\n    key: \"decodePolyline\",\n    value: function decodePolyline(encoded) {\n      var points = [];\n      var index = 0,\n        len = encoded.length;\n      var lat = 0,\n        lng = 0;\n      while (index < len) {\n        var b,\n          shift = 0,\n          result = 0;\n        do {\n          b = encoded.charAt(index++).charCodeAt(0) - 63;\n          result |= (b & 0x1f) << shift;\n          shift += 5;\n        } while (b >= 0x20);\n        var dlat = result & 1 ? ~(result >> 1) : result >> 1;\n        lat += dlat;\n        shift = 0;\n        result = 0;\n        do {\n          b = encoded.charAt(index++).charCodeAt(0) - 63;\n          result |= (b & 0x1f) << shift;\n          shift += 5;\n        } while (b >= 0x20);\n        var dlng = result & 1 ? ~(result >> 1) : result >> 1;\n        lng += dlng;\n        points.push([lng * 1e-5, lat * 1e-5]);\n      }\n      return points;\n    }\n  }, {\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this3 = this;\n      window.addEventListener('storage', this.handleStorageChange);\n      // console.log(STYLE_URL.NORMAL)\n      var selectedPlace = this.props.current_place;\n      this.map = new maplibregl.Map({\n        container: 'map',\n        // container id\n        style: STYLE_URL.NORMAL + \"YJTajS80fLlhJ4a2BG0gXqXXdZzdLG5V3iivOK9e\",\n        center: selectedPlace ? [selectedPlace.geometry.location.lng, selectedPlace.geometry.location.lat] : [105.801982, 21.026745],\n        // starting position [lng, lat]\n        zoom: 12 // starting zoom\n      });\n      if (selectedPlace) this.props.dispatch(setRedMarkerAction(true, selectedPlace.geometry.location));\n      this.navigation = new maplibregl.NavigationControl();\n      this.geolocateControl = new maplibregl.GeolocateControl({\n        positionOptions: {\n          enableHighAccuracy: true\n        },\n        // Bật tắt hiển bị vị trí\n        trackUserLocation: true,\n        // Hiển thị\n        showUserLocation: true,\n        // Tắt vòng tròn to\n        showAccuracyCircle: false,\n        // Điều chỉnh mức zoom đến vị trí của mình\n        fitBoundsOptions: {\n          maxZoom: 15\n        }\n      });\n      this.geolocateControl.on('error', function () {\n        _message.warning('Goong không thể lấy địa điểm hiện tại của bạn !');\n      });\n      this.geolocateControl.on('geolocate', function (e) {\n        _this3.props.dispatch(setMyLocationAction({\n          latitude: e.coords.latitude,\n          longitude: e.coords.longitude\n        }));\n      });\n      !isMobile && this.map.addControl(this.navigation);\n      !isMobile && this.map.addControl(this.geolocateControl);\n      this.map.on('click', this._onMouseClick);\n      this.map.on('contextmenu', this._onRightClick);\n      this.map.on('load', function () {\n        var _URLSearchParams$get, _this3$geolocateContr;\n        _this3.map.resize();\n        var pid = new URLSearchParams(window.location.search).get('pid');\n        var location = (_URLSearchParams$get = new URLSearchParams(window.location.search).get('location')) === null || _URLSearchParams$get === void 0 ? void 0 : _URLSearchParams$get.split(',');\n        var pid_around = new URLSearchParams(window.location.search).get('pid_around');\n        var direction_infor = new URLSearchParams(window.location.search).get('direction');\n        if (!direction_infor && !pid && !location && !pid_around && !_this3.props.current_place) (_this3$geolocateContr = _this3.geolocateControl) === null || _this3$geolocateContr === void 0 ? void 0 : _this3$geolocateContr.trigger();else {\n          if (navigator.geolocation) {\n            navigator.geolocation.getCurrentPosition(function (position) {\n              _this3.props.dispatch(setMyLocationAction({\n                latitude: position.coords.latitude,\n                longitude: position.coords.longitude\n              }));\n            });\n          }\n        }\n      });\n      this.map.on('move', function () {\n        _this3.props.dispatch(setCenterLatLngAction({\n          latitude: _this3.map.getCenter().lat,\n          longitude: _this3.map.getCenter().lng\n        }));\n      });\n      this.map.on('style.load', function () {\n        var _this3$map;\n        (_this3$map = _this3.map) === null || _this3$map === void 0 ? void 0 : _this3$map.addLayer({\n          id: '3d-buildings',\n          source: 'composite',\n          'source-layer': 'VN_Building',\n          filter: ['==', 'extrude', 'true'],\n          type: 'fill-extrusion',\n          minzoom: 15,\n          paint: {\n            'fill-extrusion-color': '#aaa',\n            'fill-extrusion-height': {\n              type: 'identity',\n              property: 'height'\n            },\n            'fill-extrusion-base': {\n              type: 'identity',\n              property: 'min_height'\n            },\n            'fill-extrusion-opacity': 0.4\n          }\n        });\n        if (_this3.props.result_navigation) {\n          if (_this3.props.result_select === 'fastest') {\n            _this3.props.dispatch(selectResultAction('shortest'));\n            _this3.props.dispatch(selectResultAction('fastest'));\n          } else {\n            _this3.props.dispatch(selectResultAction('fastest'));\n            _this3.props.dispatch(selectResultAction('shortest'));\n          }\n        }\n      });\n      document.body.addEventListener('click', this._onClickMenu);\n      // this.map.on('click', 'route-layer-fastest', (e) => {\n      //   console.log(e, 'fastest');\n      //   e.originalEvent.stopPropagation();\n      //   e.originalEvent.preventDefault();\n      // });\n\n      // this.map.on('click', 'route-layer-shortest', (e) => {\n      //   console.log(e)\n      // });\n\n      var direction_infor = new URLSearchParams(window.location.search).get('direction');\n      var iframe = new URLSearchParams(window.location.search).get('iframe');\n      if (direction_infor) {\n        var coor_from = {\n          lat: direction_infor.split('&')[0].split(',')[0],\n          lng: direction_infor.split('&')[0].split(',')[1]\n        };\n        var coor_to = {\n          lat: direction_infor.split('&')[1].split(',')[0],\n          lng: direction_infor.split('&')[1].split(',')[1]\n        };\n        if (coor_from.lat && coor_from.lng && coor_to.lat && coor_to.lng) {\n          // this.handleFromHere(coor_from.lat, coor_from.lng);\n          // this.handleToHere(coor_to.lat, coor_to.lng);\n          if (iframe != null) {\n            this.navigationByURLIframe(coor_from, coor_to);\n          } else {\n            this.navigationByURL(coor_from, coor_to);\n          }\n        }\n      }\n\n      // Fetch parking lots\n      this.props.dispatch(getParkingLotsRequest());\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      window.removeEventListener('storage', this.handleStorageChange);\n      document.body.removeEventListener('click', this._onClickMenu);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _placeMouseClick$geom, _placeMouseClick$geom2;\n      var _this$state = this.state,\n        style = _this$state.style,\n        bottomInfoVisible = _this$state.bottomInfoVisible,\n        placeMouseClick = _this$state.placeMouseClick;\n      return __jsx(React.Fragment, null, __jsx(Div100vh, null, __jsx(\"div\", {\n        id: \"map\",\n        className: \"jsx-1397137027\"\n      }, this.renderParkingLots()), __jsx(\"div\", {\n        className: \"jsx-1397137027\"\n      }, !isMobile && __jsx(_Avatar, {\n        shape: \"square\",\n        size: 64,\n        onClick: this.changeStyle,\n        className: \"change-status-button\",\n        style: {\n          backgroundImage: style === STYLE_URL.NORMAL + \"YJTajS80fLlhJ4a2BG0gXqXXdZzdLG5V3iivOK9e\" ? \"url(\".concat(satellite_img, \")\") : \"url(\".concat(normal_map_img, \")\")\n        }\n      }), isMobile && __jsx(_Avatar, {\n        shape: \"square\",\n        size: 64,\n        onClick: this.changeStyle,\n        className: \"change-status-button\"\n        // id='change-status-button--mobile'\n        ,\n        style: {\n          backgroundImage: style === STYLE_URL.NORMAL + \"YJTajS80fLlhJ4a2BG0gXqXXdZzdLG5V3iivOK9e\" ? \"url(\".concat(satellite_img, \")\") : \"url(\".concat(normal_map_img, \")\")\n        }\n      })), bottomInfoVisible && __jsx(BottomInfoLocation, {\n        changeVisibleBottomInfo: this.changeVisibleBottomInfo,\n        lat: ((_placeMouseClick$geom = placeMouseClick.geometry) === null || _placeMouseClick$geom === void 0 ? void 0 : _placeMouseClick$geom.location.lat) || Number(placeMouseClick.lng_lat[1]),\n        lng: ((_placeMouseClick$geom2 = placeMouseClick.geometry) === null || _placeMouseClick$geom2 === void 0 ? void 0 : _placeMouseClick$geom2.location.lng) || Number(placeMouseClick.lng_lat[0]),\n        name: placeMouseClick.name || placeMouseClick.address_components[0].long_name,\n        isMarkerAround: placeMouseClick.marker_type_id,\n        place_id: placeMouseClick._id,\n        address: this.getAddressGeocode(placeMouseClick) || placeMouseClick.formatted_address || placeMouseClick.description.address,\n        removeMarker: this.removeMarkerWhatIs\n      })), __jsx(_JSXStyle, {\n        id: \"1397137027\"\n      }, \".parking-marker.jsx-1397137027{background-color:#fff;border-radius:50%;cursor:pointer;padding:0;}.marker-content.jsx-1397137027{background:#1890ff;color:white;border-radius:50%;width:32px;height:32px;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;font-weight:bold;}.marker-info.jsx-1397137027{display:none;position:absolute;bottom:100%;left:50%;-webkit-transform:translateX(-50%);-ms-transform:translateX(-50%);transform:translateX(-50%);background:white;padding:8px;border-radius:4px;box-shadow:0 2px 6px rgba(0,0,0,0.1);min-width:200px;z-index:1;}.parking-marker.jsx-1397137027:hover .marker-info.jsx-1397137027{display:block;}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkQ6XFxXb3JraG9tZVxcUGFya2luZ0xvdFxcbGl2ZS1tYXBcXGNvbXBvbmVudHNcXE1hcC5qc3giXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBcTBDZ0IsQUFHNkIsQUFPSCxBQVlOLEFBY0MsYUFiSSxDQWNuQixLQTFCYSxHQVBNLFNBUUEsQUFZTixTQW5CRyxHQW9CTixNQVpFLEdBYWdCLEdBcEJqQixLQVFFLEtBUGIsT0FRYyx5RUFZSSxDQVhFLGdCQVlQLFlBQ00sa0JBQ21CLHFDQUNyQixVQWRPLE1BZWIsVUFDWCxtRkFma0IsaUJBQ2xCIiwiZmlsZSI6IkQ6XFxXb3JraG9tZVxcUGFya2luZ0xvdFxcbGl2ZS1tYXBcXGNvbXBvbmVudHNcXE1hcC5qc3giLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgUmVhY3QsIHsgQ29tcG9uZW50LCB1c2VFZmZlY3QgfSBmcm9tICdyZWFjdCc7XG5pbXBvcnQgeyBTVFlMRV9VUkwgfSBmcm9tICcuLi9jb25zdHMnO1xuaW1wb3J0IE1hcmtlciBmcm9tICcuL01hcmtlcic7XG5pbXBvcnQgeyBjb25uZWN0IH0gZnJvbSAncmVhY3QtcmVkdXgnO1xuaW1wb3J0IEJvdHRvbUluZm9Mb2NhdGlvbiBmcm9tICcuL0JvdHRvbUluZm9Mb2NhdGlvbic7XG5pbXBvcnQgTWVudVJpZ2h0Q2xpY2sgZnJvbSAnLi9NZW51UmlnaHRDTGljayc7XG5pbXBvcnQgeyBnZXREZXRhaWxMYXRMbmdTZXJ2aWNlIH0gZnJvbSAnLi4vcmVkdXgvc2FnYXMvcGxhY2VTYWdhJztcbmltcG9ydCB7IG1lc3NhZ2UsIEF2YXRhciB9IGZyb20gJ2FudGQnO1xuaW1wb3J0IGVxdWFsIGZyb20gJ2Zhc3QtZGVlcC1lcXVhbC9lczYvcmVhY3QnO1xuaW1wb3J0IHsgc2V0TWFwVmlld3BvcnRBY3Rpb24sIGdldERldGFpbEJ5TGF0TG5nQWN0aW9uLCBzZXRDZW50ZXJMYXRMbmdBY3Rpb24sIHNldE15TG9jYXRpb25BY3Rpb24sIGdldERldGFpbEJ5SWRBY3Rpb24gfSBmcm9tICcuLi9yZWR1eC9hY3Rpb25zL3BsYWNlJztcbmltcG9ydCB7IHNlYXJjaEFyb3VuZEFjdGlvbiwgY2xlYXJTZWFyY2hBcm91bmRBY3Rpb24sIHNlbGVjdEFyb3VuZFBsYWNlQWN0aW9uIH0gZnJvbSAnLi4vcmVkdXgvYWN0aW9ucy9zZWFyY2gnO1xuaW1wb3J0IHsgc2VsZWN0UmVzdWx0QWN0aW9uLCBuYXZpZ2F0aW9uRnJvbUFjdGlvbiwgbmF2aWdhdGlvblRvQWN0aW9uLCBjbGVhclJlc3VsdEFjdGlvbiwgbmF2aWdhdGlvbkFjdGlvbiB9IGZyb20gJy4uL3JlZHV4L2FjdGlvbnMvbmF2aWdhdGlvbic7XG5pbXBvcnQgTWFya2VyTmF2aWdhdGlvbiBmcm9tICcuL01hcmtlck5hdmlnYXRpb24nO1xuaW1wb3J0IHsgc2V0UmVkTWFya2VyQWN0aW9uLCBzZXRDb2xsYXBzZWRJbmZvQm94QWN0aW9uLCBzZXRQb3B1cFJpZ2h0Q2xpY2ssIHNldEJveFZpc2libGVBY3Rpb24gfSBmcm9tICcuLi9yZWR1eC9hY3Rpb25zL2JveFZpc2JsZSc7XG5pbXBvcnQgbm9ybWFsX21hcF9pbWcgZnJvbSAnLi4vc3RhdGljL2ltYWdlcy9ub3JtYWxfbWFwLnBuZyc7XG5pbXBvcnQgc2F0ZWxsaXRlX2ltZyBmcm9tICcuLi9zdGF0aWMvaW1hZ2VzL3NhdGVsbGl0ZS5qcGVnJztcbmltcG9ydCBSZWFjdERPTVNlcnZlciBmcm9tICdyZWFjdC1kb20vc2VydmVyJztcbmltcG9ydCBBeGlvcyBmcm9tICdheGlvcyc7XG5pbXBvcnQgRGl2MTAwdmggZnJvbSAncmVhY3QtZGl2LTEwMHZoJztcbmltcG9ydCBSZXF1ZXN0IGZyb20gJy4uL3V0aWxzL3JlcXVlc3QnO1xuaW1wb3J0IHsgTWlsZV9UcmF2ZWwgfSBmcm9tICcuLi9jb25zdHMnO1xuaW1wb3J0IHsgaXNNb2JpbGUgfSBmcm9tICdyZWFjdC1kZXZpY2UtZGV0ZWN0JztcbmltcG9ydCBpbWFnZXMgZnJvbSAnLi4vdXRpbHMvaW1hZ2VzJztcbmltcG9ydCB7IHVzZURpc3BhdGNoLCB1c2VTZWxlY3RvciB9IGZyb20gJ3JlYWN0LXJlZHV4JztcbmltcG9ydCB7IGdldFBhcmtpbmdMb3RzUmVxdWVzdCB9IGZyb20gJy4uL3JlZHV4L2FjdGlvbnMvcGFya2luZ0xvdCc7XG5cbmNsYXNzIE1hcCBleHRlbmRzIENvbXBvbmVudCB7XG5cdGNvbnN0cnVjdG9yKHByb3BzKSB7XG5cdFx0c3VwZXIocHJvcHMpO1xuXHRcdHRoaXMuX21hcFJlZiA9IFJlYWN0LmNyZWF0ZVJlZigpO1xuXHRcdHRoaXMubWFwID0gbnVsbDtcblx0XHR0aGlzLnJlZE1hcmtlciA9IG51bGw7XG5cdFx0dGhpcy5wb3B1cFJpZ2h0Q2xpY2sgPSBudWxsO1xuXHRcdHRoaXMucG9wdXBfbmF2aWdhdGlvbiA9IFtdO1xuXHRcdHRoaXMuc3RhdGUgPSB7XG5cdFx0XHRzdHlsZTogU1RZTEVfVVJMLk5PUk1BTCArIFNUWUxFX0tFWSxcblx0XHRcdHN0eWxlTm9ybWFsOiBTVFlMRV9VUkwuTk9STUFMICsgU1RZTEVfS0VZLFxuXHRcdFx0c3R5bGVFYXJ0aDogU1RZTEVfVVJMLlNBVEVMSVRFICsgU1RZTEVfS0VZLFxuXHRcdFx0Ym90dG9tSW5mb1Zpc2libGU6IGZhbHNlLFxuXHRcdFx0dmFsdWU6IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdzZWFyY2hfaGlzdG9yeScpIHx8ICcnLFxuXHRcdFx0cGFya2luZ0xvdHM6IFtdLFxuXHRcdH07XG5cdFx0dGhpcy5saXN0ID0gW107XG5cdFx0dGhpcy5saXN0UmVzdGF1cmFudCA9IFtdO1xuXHRcdHRoaXMubGlzdEhpc3RvcmllcyA9IFtdO1xuXHRcdHRoaXMudmlldyA9IG51bGw7XG5cdFx0dGhpcy5uYXZpZ2F0aW9uVmlldyA9IG51bGw7XG5cdH1cblxuXHRfb25WaWV3cG9ydENoYW5nZSA9ICh2aWV3cG9ydCkgPT4ge1xuXHRcdHRoaXMucHJvcHMuZGlzcGF0Y2goc2V0TWFwVmlld3BvcnRBY3Rpb24odmlld3BvcnQpKTtcblx0fTtcblxuXHRfb25Nb3VzZUNsaWNrID0gKGUpID0+IHtcblx0XHR0aGlzLnByb3BzLmRpc3BhdGNoKHNldFBvcHVwUmlnaHRDbGljayhmYWxzZSkpO1xuXHRcdGlmICh0aGlzLnByb3BzLmJveFZpc2libGUgIT09ICdpZnJhbWUnKSB7XG5cdFx0XHR0aGlzLnByb3BzLmRpc3BhdGNoKHNldFJlZE1hcmtlckFjdGlvbihmYWxzZSkpO1xuXHRcdH1cblx0XHQvLyBpZiAodGhpcy5wcm9wcy5ib3hWaXNpYmxlID09PSBcImluZm9cIikgdGhpcy5wcm9wcy5kaXNwYXRjaChzZXRCb3hWaXNpYmxlQWN0aW9uKCdzZWFyY2gnKSlcblx0XHQvLyB0aGlzLm1hcmtlcldoYXRJcyA/IHRoaXMubWFya2VyV2hhdElzLnJlbW92ZSgpIDogbnVsbDtcblx0XHR0aGlzLnByb3BzLmRpc3BhdGNoKHNlbGVjdEFyb3VuZFBsYWNlQWN0aW9uKG51bGwpKTtcblx0XHR0aGlzLnJlbW92ZU1hcmtlcldoYXRJcygpO1xuXHRcdHRoaXMuc2V0U3RhdGUoe1xuXHRcdFx0Ym90dG9tSW5mb1Zpc2libGU6IGZhbHNlLFxuXHRcdH0pO1xuXHR9O1xuXG5cdF9vblJpZ2h0Q2xpY2sgPSAoZSkgPT4ge1xuXHRcdGNvbnN0IHBvc2l0aW9uID0geyBsYXQ6IGUubG5nTGF0LmxhdCwgbG5nOiBlLmxuZ0xhdC5sbmcgfTtcblx0XHRpZiAodGhpcy5wcm9wcy5ib3hWaXNpYmxlICE9PSAnaWZyYW1lJykge1xuXHRcdFx0dGhpcy5wcm9wcy5kaXNwYXRjaChzZXRSZWRNYXJrZXJBY3Rpb24odHJ1ZSwgcG9zaXRpb24pKTtcblx0XHRcdHRoaXMucHJvcHMuZGlzcGF0Y2goc2V0UG9wdXBSaWdodENsaWNrKHRydWUsIHBvc2l0aW9uLCAnbm9ybWFsJykpO1xuXHRcdH1cblx0fTtcblxuXHRfb25DbGlja01lbnUgPSAoZXZ0KSA9PiB7XG5cdFx0Y29uc3QgcGFyZW50ID0gZXZ0LnRhcmdldC5wYXJlbnRFbGVtZW50O1xuXG5cdFx0aWYgKGV2dC50YXJnZXQuY2xhc3NOYW1lICYmIGV2dC50YXJnZXQuY2xhc3NOYW1lLnRvU3RyaW5nKCkuaW5jbHVkZXMoJ3doYXQtaXMtdGhpcycpKSB7XG5cdFx0XHR0aGlzLmhhbmRsZVdoYXRJcygpO1xuXHRcdH0gZWxzZSBpZiAoZXZ0LnRhcmdldC5jbGFzc05hbWUgJiYgZXZ0LnRhcmdldC5jbGFzc05hbWUudG9TdHJpbmcoKS5pbmNsdWRlcygnZnJvbS1oZXJlJykpIHtcblx0XHRcdHRoaXMuaGFuZGxlRnJvbUhlcmUoKTtcblx0XHR9IGVsc2UgaWYgKGV2dC50YXJnZXQuY2xhc3NOYW1lICYmIGV2dC50YXJnZXQuY2xhc3NOYW1lLnRvU3RyaW5nKCkuaW5jbHVkZXMoJ3RvLWhlcmUnKSkge1xuXHRcdFx0dGhpcy5oYW5kbGVUb0hlcmUoKTtcblx0XHR9IGVsc2UgaWYgKGV2dC50YXJnZXQuY2xhc3NOYW1lICYmIGV2dC50YXJnZXQuY2xhc3NOYW1lLnRvU3RyaW5nKCkuaW5jbHVkZXMoJ2RlbGV0ZS1sb2NhdGlvbicpKSB7XG5cdFx0XHR0aGlzLmhhbmRsZURlbGV0ZUxvY2F0aW9uKCk7XG5cdFx0fSBlbHNlIGlmIChldnQudGFyZ2V0LmNsYXNzTmFtZSAmJiBldnQudGFyZ2V0LmNsYXNzTmFtZS50b1N0cmluZygpLmluY2x1ZGVzKCdzZWFyY2gtYXJvdW5kJykpIHtcblx0XHRcdHRoaXMuaGFuZGxlU2VhcmNoQXJvdW5kKCk7XG5cdFx0fSBlbHNlIGlmIChldnQudGFyZ2V0LmNsYXNzTmFtZSAmJiBldnQudGFyZ2V0LmNsYXNzTmFtZS50b1N0cmluZygpLmluY2x1ZGVzKCd0by1hcm91bmQtcGxhY2UnKSkge1xuXHRcdFx0dGhpcy5oYW5kbGVUb0Fyb3VuZFBsYWNlKCk7XG5cdFx0fSBlbHNlIGlmIChldnQudGFyZ2V0LmNsYXNzTmFtZSAmJiBldnQudGFyZ2V0LmNsYXNzTmFtZS50b1N0cmluZygpLmluY2x1ZGVzKCd3aGF0LWlzLW5hdmlnYXRpb24nKSkge1xuXHRcdFx0dGhpcy5oYW5kbGVXaGF0SXMoZmFsc2UpO1xuXHRcdH1cblx0XHRpZiAocGFyZW50Py5jbGFzc05hbWUgJiYgcGFyZW50Py5jbGFzc05hbWUudG9TdHJpbmcoKS5pbmNsdWRlcygnbWVudS1yaWdodC1jbGljaycpKSB7XG5cdFx0XHRpZiAoZXZ0LnRhcmdldC5jbGFzc05hbWUgJiYgIWV2dC50YXJnZXQuY2xhc3NOYW1lLnRvU3RyaW5nKCkuaW5jbHVkZXMoJ3doYXQtaXMtdGhpcycpKSB7XG5cdFx0XHRcdHRoaXMucHJvcHMuZGlzcGF0Y2goY2xlYXJTZWFyY2hBcm91bmRBY3Rpb24oKSk7XG5cdFx0XHR9XG5cdFx0XHR0aGlzLnByb3BzLmRpc3BhdGNoKHNldFBvcHVwUmlnaHRDbGljayhmYWxzZSkpO1xuXHRcdFx0dGhpcy5yZW1vdmVNYXJrZXJXaGF0SXMoKTtcblx0XHR9XG5cdH07XG5cblx0Y2hhbmdlVmlzaWJsZUJvdHRvbUluZm8gPSAodmlzaWJsZSkgPT4ge1xuXHRcdHRoaXMuc2V0U3RhdGUoe1xuXHRcdFx0Ym90dG9tSW5mb1Zpc2libGU6IHZpc2libGUsXG5cdFx0fSk7XG5cdH07XG5cblx0X2dldEluZm9yUGxhY2UgPSBhc3luYyAobGF0ID0gdGhpcy5wcm9wcy5wb3NpdGlvbl9wb3B1cD8ubGF0LCBsbmcgPSB0aGlzLnByb3BzLnBvc2l0aW9uX3BvcHVwPy5sbmcpID0+IHtcblx0XHRjb25zdCBsYXRMbmcgPSB7XG5cdFx0XHRsYXRpdHVkZTogbGF0LFxuXHRcdFx0bG9uZ2l0dWRlOiBsbmcsXG5cdFx0fTtcblxuXHRcdHRyeSB7XG5cdFx0XHRjb25zdCByZXNwb25zZSA9IGF3YWl0IGdldERldGFpbExhdExuZ1NlcnZpY2UobGF0TG5nKTtcblx0XHRcdGlmIChyZXNwb25zZS5kYXRhLnJlc3VsdHMubGVuZ3RoID4gMCkge1xuXHRcdFx0XHRjb25zdCBwbGFjZV9yZXNwb25zZSA9IHJlc3BvbnNlLmRhdGEucmVzdWx0c1swXTtcblx0XHRcdFx0cmV0dXJuIHtcblx0XHRcdFx0XHQuLi5wbGFjZV9yZXNwb25zZSxcblx0XHRcdFx0XHRuYW1lOiBwbGFjZV9yZXNwb25zZS5hZGRyZXNzX2NvbXBvbmVudHNbMF0ubG9uZ19uYW1lLFxuXHRcdFx0XHRcdGZvcm1hdHRlZF9hZGRyZXNzOiB0aGlzLmdldEFkZHJlc3NHZW9jb2RlKHBsYWNlX3Jlc3BvbnNlKSxcblx0XHRcdFx0fTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdG1lc3NhZ2UuZXJyb3IoJ0tow7RuZyB0w6xtIHRo4bqleSDEkeG7i2EgxJFp4buDbSAhIScpO1xuXHRcdFx0XHRyZXR1cm4gbnVsbDtcblx0XHRcdH1cblx0XHR9IGNhdGNoIChlcnJvcikge1xuXHRcdFx0dGhyb3cgZXJyb3I7XG5cdFx0fVxuXHR9O1xuXG5cdHNlbGVjdFBsYWNlID0gYXN5bmMgKGxhdCA9IHRoaXMucHJvcHMucG9zaXRpb25NYXJrZXJTZWxlY3Q/LmxhdCwgbG5nID0gdGhpcy5wcm9wcy5wb3NpdGlvbk1hcmtlclNlbGVjdD8ubG5nLCByZWRNYXJrZXJWaXNpYmxlID0gdHJ1ZSkgPT4ge1xuXHRcdGNvbnN0IHBsYWNlID0gYXdhaXQgdGhpcy5fZ2V0SW5mb3JQbGFjZShsYXQsIGxuZyk7XG5cblx0XHRpZiAocGxhY2UpIHtcblx0XHRcdGNvbnN0IHZpZXdwb3J0ID0ge1xuXHRcdFx0XHRsb25naXR1ZGU6IGxuZyxcblx0XHRcdFx0bGF0aXR1ZGU6IGxhdCxcblx0XHRcdFx0em9vbTogMTUsXG5cdFx0XHR9O1xuXHRcdFx0dGhpcy5wcm9wcy5kaXNwYXRjaChzZXRNYXBWaWV3cG9ydEFjdGlvbih2aWV3cG9ydCkpO1xuXHRcdFx0dGhpcy5zZXRTdGF0ZSh7XG5cdFx0XHRcdGJvdHRvbUluZm9WaXNpYmxlOiB0cnVlLFxuXHRcdFx0XHRwbGFjZU1vdXNlQ2xpY2s6IHBsYWNlLFxuXHRcdFx0fSk7XG5cdFx0XHRpZiAocmVkTWFya2VyVmlzaWJsZSkge1xuXHRcdFx0XHRpZiAodGhpcy5tYXJrZXJXaGF0SXMpIHtcblx0XHRcdFx0XHR0aGlzLm1hcmtlcldoYXRJcy5zZXRMbmdMYXQoeyBsYXQsIGxuZyB9KS5hZGRUbyh0aGlzLm1hcCk7XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0Y29uc3QgZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcblx0XHRcdFx0XHRlbC5pbm5lckhUTUwgPSBSZWFjdERPTVNlcnZlci5yZW5kZXJUb1N0YXRpY01hcmt1cCg8TWFya2VyIHNpemU9ezIyfSAvPik7XG5cdFx0XHRcdFx0dGhpcy5tYXJrZXJXaGF0SXMgPSBuZXcgbWFwbGlicmVnbC5NYXJrZXIoZWwsIHsgYW5jaG9yOiAnYm90dG9tJyB9KS5zZXRMbmdMYXQoeyBsYXQsIGxuZyB9KS5hZGRUbyh0aGlzLm1hcCk7XG5cdFx0XHRcdH1cblx0XHRcdFx0dGhpcy5tYXJrZXJXaGF0SXMuZ2V0RWxlbWVudCgpLmFkZEV2ZW50TGlzdGVuZXIoJ2NvbnRleHRtZW51JywgKGUpID0+IHtcblx0XHRcdFx0XHRlLnN0b3BQcm9wYWdhdGlvbigpO1xuXHRcdFx0XHRcdGUucHJldmVudERlZmF1bHQoKTtcblx0XHRcdFx0XHR0aGlzLnByb3BzLmRpc3BhdGNoKHNldFJlZE1hcmtlckFjdGlvbihmYWxzZSkpO1xuXHRcdFx0XHRcdHRoaXMucHJvcHMuZGlzcGF0Y2goc2V0UG9wdXBSaWdodENsaWNrKHRydWUsIHsgbGF0LCBsbmcgfSwgJ3BvcHVwQ3VycmVudFBsYWNlJykpO1xuXHRcdFx0XHR9KTtcblx0XHRcdFx0dGhpcy5wcm9wcy5kaXNwYXRjaChzZXRSZWRNYXJrZXJBY3Rpb24oZmFsc2UpKTtcblx0XHRcdH1cblx0XHRcdC8vIHJlZE1hcmtlclZpc2libGUgPyB0aGlzLnByb3BzLmRpc3BhdGNoKHNldFJlZE1hcmtlckFjdGlvbih0cnVlLCB7IGxhdCwgbG5nIH0pKSA6IG51bGw7XG5cdFx0fSBlbHNlIHtcblx0XHRcdG1lc3NhZ2UuZXJyb3IoJ0tow7RuZyB0w6xtIHRo4bqleSDEkeG7i2EgxJFp4buDbSAhIScpO1xuXHRcdH1cblx0fTtcblxuXHRyZW1vdmVNYXJrZXJXaGF0SXMgPSAoKSA9PiB7XG5cdFx0dGhpcy5tYXJrZXJXaGF0SXMgPyB0aGlzLm1hcmtlcldoYXRJcy5yZW1vdmUoKSA6IG51bGw7XG5cdH07XG5cblx0X2dldEluZm9yUGxhY2VBcm91bmQgPSBhc3luYyAoaWQpID0+IHtcblx0XHR0cnkge1xuXHRcdFx0Y29uc3QgcmVzcG9uc2UgPSBhd2FpdCBBeGlvcy5nZXQoYGh0dHBzOi8vbmFwaS5nb29uZy5pby92MS9tYXJrZXIvZ2V0X21hcmtlcl9kZXRhaWwvJHtpZH1gKTtcblxuXHRcdFx0aWYgKHJlc3BvbnNlLmRhdGEuZGF0YSkge1xuXHRcdFx0XHRyZXR1cm4gcmVzcG9uc2UuZGF0YS5kYXRhO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0bWVzc2FnZS5lcnJvcignS2jDtG5nIHTDrG0gdGjhuqV5IMSR4buLYSDEkWnhu4NtICEhJyk7XG5cdFx0XHRcdHJldHVybiBudWxsO1xuXHRcdFx0fVxuXHRcdH0gY2F0Y2ggKGVycm9yKSB7XG5cdFx0XHRtZXNzYWdlLmVycm9yKCdLaMO0bmcgdMOsbSB0aOG6pXkgxJHhu4thIMSRaeG7g20gIScpO1xuXHRcdFx0dGhyb3cgZXJyb3I7XG5cdFx0fVxuXHR9O1xuXG5cdHNlbGVjdEFyb3VuZFBsYWNlID0gYXN5bmMgKGlkKSA9PiB7XG5cdFx0Y29uc3QgcGxhY2UgPSBhd2FpdCB0aGlzLl9nZXRJbmZvclBsYWNlQXJvdW5kKGlkKTtcblx0XHRpZiAocGxhY2UpIHtcblx0XHRcdGNvbnN0IHZpZXdwb3J0ID0ge1xuXHRcdFx0XHRsb25naXR1ZGU6IE51bWJlcihwbGFjZS5sbmdfbGF0WzBdKSxcblx0XHRcdFx0bGF0aXR1ZGU6IE51bWJlcihwbGFjZS5sbmdfbGF0WzFdKSxcblx0XHRcdFx0em9vbTogMTUsXG5cdFx0XHR9O1xuXHRcdFx0dGhpcy5wcm9wcy5kaXNwYXRjaChzZXRNYXBWaWV3cG9ydEFjdGlvbih2aWV3cG9ydCkpO1xuXHRcdFx0dGhpcy5zZXRTdGF0ZSh7XG5cdFx0XHRcdGJvdHRvbUluZm9WaXNpYmxlOiB0cnVlLFxuXHRcdFx0XHRwbGFjZU1vdXNlQ2xpY2s6IHBsYWNlLFxuXHRcdFx0fSk7XG5cdFx0XHR0aGlzLnByb3BzLmRpc3BhdGNoKHNldFBvcHVwUmlnaHRDbGljayhmYWxzZSkpO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRtZXNzYWdlLmVycm9yKCdLaMO0bmcgdMOsbSB0aOG6pXkgxJHhu4thIMSRaeG7g20gISEnKTtcblx0XHR9XG5cdH07XG5cblx0aGFuZGxlV2hhdElzID0gKHJlZE1hcmtlclZpc2libGUgPSB0cnVlKSA9PiB7XG5cdFx0Y29uc3QgeyBwb3NpdGlvbl9wb3B1cCwgaXNTbWFsbFNjcmVlbiB9ID0gdGhpcy5wcm9wcztcblx0XHRpZiAoaXNTbWFsbFNjcmVlbikge1xuXHRcdFx0dGhpcy5wcm9wcy5kaXNwYXRjaChcblx0XHRcdFx0Z2V0RGV0YWlsQnlMYXRMbmdBY3Rpb24oe1xuXHRcdFx0XHRcdGxhdGl0dWRlOiBwb3NpdGlvbl9wb3B1cC5sYXQsXG5cdFx0XHRcdFx0bG9uZ2l0dWRlOiBwb3NpdGlvbl9wb3B1cC5sbmcsXG5cdFx0XHRcdH0pXG5cdFx0XHQpO1xuXG5cdFx0XHR0aGlzLnByb3BzLmRpc3BhdGNoKHNldEJveFZpc2libGVBY3Rpb24oJ2luZm8nKSk7XG5cdFx0XHR0aGlzLnByb3BzLmRpc3BhdGNoKGNsZWFyU2VhcmNoQXJvdW5kQWN0aW9uKCkpO1xuXHRcdFx0dGhpcy5wcm9wcy5kaXNwYXRjaChzZXRQb3B1cFJpZ2h0Q2xpY2soZmFsc2UpKTtcblx0XHRcdHRoaXMucmVtb3ZlTWFya2VyV2hhdElzKCk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdHRoaXMuc2VsZWN0UGxhY2UocG9zaXRpb25fcG9wdXAubGF0LCBwb3NpdGlvbl9wb3B1cC5sbmcsIHJlZE1hcmtlclZpc2libGUpO1xuXHRcdH1cblx0fTtcblxuXHRoYW5kbGVGcm9tSGVyZSA9IGFzeW5jIChsYXQsIGxuZykgPT4ge1xuXHRcdGxldCBwbGFjZTtcblx0XHRpZiAoIWxhdCB8fCAhbG5nKSBwbGFjZSA9IGF3YWl0IHRoaXMuX2dldEluZm9yUGxhY2UoKTtcblx0XHRlbHNlIHtcblx0XHRcdHBsYWNlID0gYXdhaXQgdGhpcy5fZ2V0SW5mb3JQbGFjZShsYXQsIGxuZyk7XG5cdFx0fVxuXHRcdGlmIChwbGFjZSkge1xuXHRcdFx0Y29uc3Qgdmlld3BvcnQgPSB7XG5cdFx0XHRcdGxvbmdpdHVkZTogcGxhY2UuZ2VvbWV0cnkubG9jYXRpb24ubG5nLFxuXHRcdFx0XHRsYXRpdHVkZTogcGxhY2UuZ2VvbWV0cnkubG9jYXRpb24ubGF0LFxuXHRcdFx0XHR6b29tOiAxNSxcblx0XHRcdH07XG5cdFx0XHQhdGhpcy5wcm9wcy50b19wbGFjZSAmJiB0aGlzLnByb3BzLmRpc3BhdGNoKHNldE1hcFZpZXdwb3J0QWN0aW9uKHZpZXdwb3J0KSk7XG5cdFx0XHR0aGlzLnByb3BzLmRpc3BhdGNoKHNldEJveFZpc2libGVBY3Rpb24oJ25hdmlnYXRpb24nKSk7XG5cdFx0XHR0aGlzLnByb3BzLmRpc3BhdGNoKG5hdmlnYXRpb25Gcm9tQWN0aW9uKHBsYWNlLCBgJHtwbGFjZS5uYW1lfSAtICR7cGxhY2UuZm9ybWF0dGVkX2FkZHJlc3N9YCkpO1xuXG5cdFx0XHR0aGlzLnByb3BzLmRpc3BhdGNoKHNldFJlZE1hcmtlckFjdGlvbihmYWxzZSkpO1xuXHRcdFx0dGhpcy5jaGFuZ2VWaXNpYmxlQm90dG9tSW5mbyhmYWxzZSk7XG5cdFx0fVxuXHR9O1xuXG5cdGhhbmRsZVRvSGVyZSA9IGFzeW5jIChsYXQsIGxuZykgPT4ge1xuXHRcdGxldCBwbGFjZTtcblx0XHRpZiAoIWxhdCB8fCAhbG5nKSBwbGFjZSA9IGF3YWl0IHRoaXMuX2dldEluZm9yUGxhY2UoKTtcblx0XHRlbHNlIHtcblx0XHRcdHBsYWNlID0gYXdhaXQgdGhpcy5fZ2V0SW5mb3JQbGFjZShsYXQsIGxuZyk7XG5cdFx0fVxuXHRcdGlmIChwbGFjZSkge1xuXHRcdFx0dGhpcy5wcm9wcy5kaXNwYXRjaChzZXRCb3hWaXNpYmxlQWN0aW9uKCduYXZpZ2F0aW9uJykpO1xuXHRcdFx0Y29uc3Qgdmlld3BvcnQgPSB7XG5cdFx0XHRcdGxvbmdpdHVkZTogcGxhY2UuZ2VvbWV0cnkubG9jYXRpb24ubG5nLFxuXHRcdFx0XHRsYXRpdHVkZTogcGxhY2UuZ2VvbWV0cnkubG9jYXRpb24ubGF0LFxuXHRcdFx0XHR6b29tOiAxNSxcblx0XHRcdH07XG5cdFx0XHRjb25zdCBteV9sb2NhdGlvbiA9IHRoaXMucHJvcHMubXlfbG9jYXRpb247XG5cdFx0XHRpZiAobXlfbG9jYXRpb24gJiYgKHRoaXMucHJvcHMuYm94VmlzaWJsZSA9PT0gJ3NlYXJjaCcgfHwgdGhpcy5wcm9wcy5ib3hWaXNpYmxlID09PSAnaW5mbycpKSB7XG5cdFx0XHRcdHRyeSB7XG5cdFx0XHRcdFx0Y29uc3QgcmVzcG9uc2UgPSBhd2FpdCBSZXF1ZXN0Lmdlb2NvZGUobXlfbG9jYXRpb24pO1xuXHRcdFx0XHRcdGlmIChyZXNwb25zZS5kYXRhLnJlc3VsdHMubGVuZ3RoID4gMCkge1xuXHRcdFx0XHRcdFx0dGhpcy5wcm9wcy5kaXNwYXRjaChcblx0XHRcdFx0XHRcdFx0bmF2aWdhdGlvbkZyb21BY3Rpb24oXG5cdFx0XHRcdFx0XHRcdFx0e1xuXHRcdFx0XHRcdFx0XHRcdFx0Li4ucmVzcG9uc2UuZGF0YS5yZXN1bHRzWzBdLFxuXHRcdFx0XHRcdFx0XHRcdFx0bmFtZTogcmVzcG9uc2UuZGF0YS5yZXN1bHRzWzBdLmFkZHJlc3NfY29tcG9uZW50c1swXS5sb25nX25hbWUsXG5cdFx0XHRcdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRcdFx0XHQnVuG7iyB0csOtIGPhu6dhIGLhuqFuJ1xuXHRcdFx0XHRcdFx0XHQpXG5cdFx0XHRcdFx0XHQpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fSBjYXRjaCAoZXJyb3IpIHtcblx0XHRcdFx0XHR0aHJvdyBlcnJvcjtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdFx0IXRoaXMucHJvcHMuZnJvbV9wbGFjZSAmJiB0aGlzLnByb3BzLmRpc3BhdGNoKHNldE1hcFZpZXdwb3J0QWN0aW9uKHZpZXdwb3J0KSk7XG5cdFx0XHR0aGlzLnByb3BzLmRpc3BhdGNoKG5hdmlnYXRpb25Ub0FjdGlvbihwbGFjZSwgYCR7cGxhY2UubmFtZX0gLSAke3BsYWNlLmZvcm1hdHRlZF9hZGRyZXNzfWApKTtcblx0XHRcdHRoaXMucHJvcHMuZGlzcGF0Y2goc2V0Qm94VmlzaWJsZUFjdGlvbignbmF2aWdhdGlvbicpKTtcblx0XHRcdHRoaXMucHJvcHMuZGlzcGF0Y2goc2V0UmVkTWFya2VyQWN0aW9uKGZhbHNlKSk7XG5cdFx0XHR0aGlzLmNoYW5nZVZpc2libGVCb3R0b21JbmZvKGZhbHNlKTtcblx0XHR9XG5cdH07XG5cblx0aGFuZGxlRGVsZXRlTG9jYXRpb24gPSAoKSA9PiB7XG5cdFx0Y29uc3QgeyB0eXBlX3BvcHVwIH0gPSB0aGlzLnByb3BzO1xuXHRcdGlmICh0eXBlX3BvcHVwID09PSAncG9wdXBGcm9tUGxhY2UnKSB7XG5cdFx0XHR0aGlzLnByb3BzLmRpc3BhdGNoKG5hdmlnYXRpb25Gcm9tQWN0aW9uKG51bGwsICcnKSk7XG5cdFx0fSBlbHNlIGlmICh0eXBlX3BvcHVwID09PSAncG9wdXBUb1BsYWNlJykge1xuXHRcdFx0dGhpcy5wcm9wcy5kaXNwYXRjaChuYXZpZ2F0aW9uVG9BY3Rpb24obnVsbCwgJycpKTtcblx0XHR9XG5cdFx0dGhpcy5wcm9wcy5kaXNwYXRjaChjbGVhclJlc3VsdEFjdGlvbigpKTtcblx0fTtcblxuXHRoYW5kbGVTZWFyY2hBcm91bmQgPSBhc3luYyAoKSA9PiB7XG5cdFx0Y29uc3QgcGxhY2UgPSBhd2FpdCB0aGlzLl9nZXRJbmZvclBsYWNlKCk7XG5cdFx0aWYgKHBsYWNlKSB7XG5cdFx0XHRjb25zdCB2aWV3cG9ydCA9IHtcblx0XHRcdFx0bG9uZ2l0dWRlOiBwbGFjZS5nZW9tZXRyeS5sb2NhdGlvbi5sbmcsXG5cdFx0XHRcdGxhdGl0dWRlOiBwbGFjZS5nZW9tZXRyeS5sb2NhdGlvbi5sYXQsXG5cdFx0XHRcdHpvb206IDE1LFxuXHRcdFx0fTtcblx0XHRcdGNvbnN0IGxvY2F0aW9uID0ge1xuXHRcdFx0XHRsYXQ6IHBsYWNlLmdlb21ldHJ5LmxvY2F0aW9uLmxhdCxcblx0XHRcdFx0bG5nOiBwbGFjZS5nZW9tZXRyeS5sb2NhdGlvbi5sbmcsXG5cdFx0XHR9O1xuXHRcdFx0dGhpcy5wcm9wcy5kaXNwYXRjaChzZXRCb3hWaXNpYmxlQWN0aW9uKCdzZWFyY2gnKSk7XG5cdFx0XHR0aGlzLnByb3BzLmRpc3BhdGNoKHNldE1hcFZpZXdwb3J0QWN0aW9uKHZpZXdwb3J0KSk7XG5cdFx0XHR0aGlzLnByb3BzLmRpc3BhdGNoKHNlYXJjaEFyb3VuZEFjdGlvbihsb2NhdGlvbiwgdGhpcy5wcm9wcy52aWV3cG9ydC56b29tKSk7XG5cdFx0XHR0aGlzLnNldFN0YXRlKHtcblx0XHRcdFx0Ym90dG9tSW5mb1Zpc2libGU6IGZhbHNlLFxuXHRcdFx0fSk7XG5cdFx0fVxuXHR9O1xuXG5cdF9zZWxlY3RBcm91bmRQbGFjZSA9ICh0eXBlLCBwbGFjZSkgPT4ge1xuXHRcdGlmICh0eXBlICE9PSAnY2VudGVyJykge1xuXHRcdFx0dGhpcy5wcm9wcy5kaXNwYXRjaChzZWxlY3RBcm91bmRQbGFjZUFjdGlvbihwbGFjZSkpO1xuXHRcdFx0dGhpcy5zZWxlY3RBcm91bmRQbGFjZShwbGFjZT8uaWQpO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHR0aGlzLnByb3BzLmRpc3BhdGNoKHNlbGVjdEFyb3VuZFBsYWNlQWN0aW9uKHBsYWNlKSk7XG5cdFx0XHR0aGlzLnNlbGVjdFBsYWNlKHBsYWNlLmdlb21ldHJ5LmxvY2F0aW9uLmxhdCwgcGxhY2UuZ2VvbWV0cnkubG9jYXRpb24ubG5nLCBmYWxzZSk7XG5cdFx0fVxuXHR9O1xuXG5cdGhhbmRsZVRvQXJvdW5kUGxhY2UgPSBhc3luYyAoKSA9PiB7XG5cdFx0bGV0IHBsYWNlID0gbnVsbDtcblx0XHR0aGlzLnByb3BzLmFyb3VuZF9wbGFjZXMubWFwKChpdGVtKSA9PiB7XG5cdFx0XHRpZiAoaXRlbS5sbmdfbGF0WzBdICogMSA9PT0gdGhpcy5wb3B1cFJpZ2h0Q2xpY2suZ2V0TG5nTGF0KCkubG5nICYmIGl0ZW0ubG5nX2xhdFsxXSAqIDEgPT09IHRoaXMucG9wdXBSaWdodENsaWNrLmdldExuZ0xhdCgpLmxhdCkge1xuXHRcdFx0XHRwbGFjZSA9IGl0ZW07XG5cdFx0XHR9XG5cdFx0fSk7XG5cdFx0aWYgKHBsYWNlKSB7XG5cdFx0XHR0cnkge1xuXHRcdFx0XHR0aGlzLnByb3BzLmRpc3BhdGNoKHNldFBvcHVwUmlnaHRDbGljayhmYWxzZSkpO1xuXHRcdFx0XHRjb25zdCBwbGFjZV9jZW50ZXIgPSB0aGlzLnByb3BzLmFyb3VuZF9wbGFjZV9jZW50ZXI7XG5cdFx0XHRcdHRoaXMucHJvcHMuZGlzcGF0Y2gobmF2aWdhdGlvbkZyb21BY3Rpb24ocGxhY2VfY2VudGVyLCBgJHtwbGFjZV9jZW50ZXIubmFtZX0gLSAke3BsYWNlX2NlbnRlci5mb3JtYXR0ZWRfYWRkcmVzc31gKSk7XG5cdFx0XHRcdGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgQXhpb3MuZ2V0KGBodHRwczovL25hcGkuZ29vbmcuaW8vdjEvbWFya2VyL2dldF9tYXJrZXJfZGV0YWlsLyR7cGxhY2UuaWR9YCk7XG5cblx0XHRcdFx0cGxhY2UgPSByZXNwb25zZS5kYXRhPy5kYXRhO1xuXHRcdFx0XHRwbGFjZSA9IHtcblx0XHRcdFx0XHQuLi5wbGFjZSxcblx0XHRcdFx0XHRwbGFjZV9pZDogcGxhY2UuX2lkLFxuXHRcdFx0XHRcdGdlb21ldHJ5OiB7XG5cdFx0XHRcdFx0XHRsb2NhdGlvbjoge1xuXHRcdFx0XHRcdFx0XHRsYXQ6IE51bWJlcihwbGFjZS5sbmdfbGF0WzFdKSxcblx0XHRcdFx0XHRcdFx0bG5nOiBOdW1iZXIocGxhY2UubG5nX2xhdFswXSksXG5cdFx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0Zm9ybWF0dGVkX2FkZHJlc3M6IHBsYWNlLmRlc2NyaXB0aW9uLmFkZHJlc3MsXG5cdFx0XHRcdH07XG5cdFx0XHRcdHRoaXMucHJvcHMuZGlzcGF0Y2gobmF2aWdhdGlvblRvQWN0aW9uKHBsYWNlLCBgJHtwbGFjZS5uYW1lfSAtICR7cGxhY2UuZm9ybWF0dGVkX2FkZHJlc3N9YCkpO1xuXHRcdFx0XHR0aGlzLnByb3BzLmRpc3BhdGNoKHNldEJveFZpc2libGVBY3Rpb24oJ25hdmlnYXRpb24nKSk7XG5cdFx0XHR9IGNhdGNoIChlcnJvcikge1xuXHRcdFx0XHRtZXNzYWdlLmVycm9yKCdLaMO0bmcgdMOsbSB0aOG6pXkgxJHhu4thIMSRaeG7g20gIScpO1xuXHRcdFx0fVxuXHRcdH0gZWxzZSB7XG5cdFx0XHRtZXNzYWdlLmVycm9yKCdLaMO0bmcgdMOsbSB0aOG6pXkgxJHhu4thIMSRaeG7g20gIScpO1xuXHRcdH1cblx0fTtcblxuXHRyZW1vdmVNYXJrZXJQb3B1cCA9ICgpID0+IHtcblx0XHRpZiAodGhpcy5tYXJrZXJDdXJyZW50UGxhY2UpIHRoaXMubWFya2VyQ3VycmVudFBsYWNlLnJlbW92ZSgpO1xuXHRcdGlmICh0aGlzLnBvcHVwUmlnaHRDbGljaykgdGhpcy5wb3B1cFJpZ2h0Q2xpY2sucmVtb3ZlKCk7XG5cdFx0aWYgKHRoaXMucHJvcHMuYXJvdW5kX3BsYWNlcykgdGhpcy5wcm9wcy5kaXNwYXRjaChjbGVhclNlYXJjaEFyb3VuZEFjdGlvbigpKTtcblx0XHRpZiAodGhpcy5yZWRNYXJrZXIpIHRoaXMucmVkTWFya2VyLnJlbW92ZSgpO1xuXHR9O1xuXG5cdGdldEFkZHJlc3NHZW9jb2RlID0gKHBsYWNlKSA9PiB7XG5cdFx0bGV0IHJlc3VsdCA9IFtdO1xuXHRcdHBsYWNlLmFkZHJlc3NfY29tcG9uZW50cz8uc2xpY2UoMSkubWFwKChpdGVtKSA9PiB7XG5cdFx0XHRyZXN1bHQucHVzaChpdGVtLmxvbmdfbmFtZSk7XG5cdFx0fSk7XG5cdFx0cmV0dXJuIHJlc3VsdC5qb2luKCcsJyk7XG5cdH07XG5cblx0Y29tcG9uZW50RGlkVXBkYXRlKHByZXZQcm9wcykge1xuXHRcdGlmICh0aGlzLnByb3BzLmlzU21hbGxTY3JlZW4gIT09IHByZXZQcm9wcy5pc1NtYWxsU2NyZWVuKSB7XG5cdFx0XHRpZiAoIXRoaXMucHJvcHMuaXNTbWFsbFNjcmVlbiAmJiAhdGhpcy5uYXZpZ2F0aW9uKSB7XG5cdFx0XHRcdHRoaXMubmF2aWdhdGlvbiA9IG5ldyBtYXBsaWJyZWdsLk5hdmlnYXRpb25Db250cm9sKCk7XG5cdFx0XHRcdHRoaXMubWFwLmFkZENvbnRyb2wodGhpcy5uYXZpZ2F0aW9uKTtcblx0XHRcdH0gZWxzZSBpZiAodGhpcy5wcm9wcy5pc1NtYWxsU2NyZWVuICYmIHRoaXMubmF2aWdhdGlvbikge1xuXHRcdFx0XHR0aGlzLm1hcC5yZW1vdmVDb250cm9sKHRoaXMubmF2aWdhdGlvbik7XG5cdFx0XHRcdHRoaXMubmF2aWdhdGlvbiA9IG51bGw7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0aWYgKCFlcXVhbChwcmV2UHJvcHMucG9zaXRpb25NYXJrZXJTZWxlY3QsIHRoaXMucHJvcHMucG9zaXRpb25NYXJrZXJTZWxlY3QpICYmIHRoaXMucHJvcHMucG9zaXRpb25NYXJrZXJTZWxlY3QpIHtcblx0XHRcdGlmICh0aGlzLnJlZE1hcmtlcikge1xuXHRcdFx0XHR0aGlzLnJlZE1hcmtlciA9IHRoaXMucmVkTWFya2VyLnNldExuZ0xhdCh0aGlzLnByb3BzLnBvc2l0aW9uTWFya2VyU2VsZWN0KS5hZGRUbyh0aGlzLm1hcCk7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRjb25zdCBlbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuXHRcdFx0XHRlbC5pbm5lckhUTUwgPSBSZWFjdERPTVNlcnZlci5yZW5kZXJUb1N0YXRpY01hcmt1cCg8TWFya2VyIHNpemU9ezIyfSAvPik7XG5cdFx0XHRcdC8vIE1hcmtlciBjaHXhu5l0IHBo4bqjaVxuXHRcdFx0XHR0aGlzLnJlZE1hcmtlciA9IG5ldyBtYXBsaWJyZWdsLk1hcmtlcih7IGFuY2hvcjogJ2JvdHRvbScsIGVsZW1lbnQ6IGVsIH0pLnNldExuZ0xhdCh0aGlzLnByb3BzLnBvc2l0aW9uTWFya2VyU2VsZWN0KS5hZGRUbyh0aGlzLm1hcCk7XG5cblx0XHRcdFx0dGhpcy5yZWRNYXJrZXIuZ2V0RWxlbWVudCgpLmFkZEV2ZW50TGlzdGVuZXIoJ2NvbnRleHRtZW51JywgKGUpID0+IHtcblx0XHRcdFx0XHRlLnN0b3BQcm9wYWdhdGlvbigpO1xuXHRcdFx0XHRcdGUucHJldmVudERlZmF1bHQoKTtcblx0XHRcdFx0XHR0aGlzLnByb3BzLmRpc3BhdGNoKHNldFBvcHVwUmlnaHRDbGljayh0cnVlLCB0aGlzLnByb3BzLnBvc2l0aW9uTWFya2VyU2VsZWN0LCAnbm9ybWFsJykpO1xuXHRcdFx0XHR9KTtcblx0XHRcdH1cblx0XHR9XG5cblx0XHRpZiAocHJldlByb3BzLm1hcmtlclNlbGVjdCAhPT0gdGhpcy5wcm9wcy5tYXJrZXJTZWxlY3QpIHtcblx0XHRcdGlmICghdGhpcy5wcm9wcy5tYXJrZXJTZWxlY3QpIHtcblx0XHRcdFx0dGhpcy5yZWRNYXJrZXI/LnJlbW92ZSgpO1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdGlmICh0aGlzLnByb3BzLnBvcHVwX3Zpc2libGUgJiYgKCFlcXVhbChwcmV2UHJvcHMucG9zaXRpb25fcG9wdXAsIHRoaXMucHJvcHMucG9zaXRpb25fcG9wdXApIHx8IHRoaXMucHJvcHMudHlwZV9wb3B1cCAhPT0gcHJldlByb3BzLnR5cGVfcG9wdXApICYmIHRoaXMucHJvcHMucG9zaXRpb25fcG9wdXApIHtcblx0XHRcdHRoaXMucG9wdXBSaWdodENsaWNrID0gdGhpcy5wb3B1cFJpZ2h0Q2xpY2tcblx0XHRcdFx0PyB0aGlzLnBvcHVwUmlnaHRDbGlja1xuXHRcdFx0XHRcdFx0LnNldExuZ0xhdChbdGhpcy5wcm9wcy5wb3NpdGlvbl9wb3B1cC5sbmcsIHRoaXMucHJvcHMucG9zaXRpb25fcG9wdXAubGF0XSlcblx0XHRcdFx0XHRcdC5hZGRUbyh0aGlzLm1hcClcblx0XHRcdFx0XHRcdC5zZXRIVE1MKFxuXHRcdFx0XHRcdFx0XHRSZWFjdERPTVNlcnZlci5yZW5kZXJUb1N0YXRpY01hcmt1cChcblx0XHRcdFx0XHRcdFx0XHQ8TWVudVJpZ2h0Q2xpY2tcblx0XHRcdFx0XHRcdFx0XHRcdGRpc3BhdGNoPXt0aGlzLnByb3BzLmRpc3BhdGNofVxuXHRcdFx0XHRcdFx0XHRcdFx0cG9zaXRpb25fcG9wdXA9e3RoaXMucHJvcHMucG9zaXRpb25fcG9wdXB9XG5cdFx0XHRcdFx0XHRcdFx0XHR0eXBlX3BvcHVwPXt0aGlzLnByb3BzLnR5cGVfcG9wdXB9XG5cdFx0XHRcdFx0XHRcdFx0Lz5cblx0XHRcdFx0XHRcdFx0KVxuXHRcdFx0XHRcdFx0KVxuXHRcdFx0XHQ6IG5ldyBtYXBsaWJyZWdsLlBvcHVwKHtcblx0XHRcdFx0XHRcdGNsb3NlQnV0dG9uOiBmYWxzZSxcblx0XHRcdFx0XHRcdGFuY2hvcjogJ3RvcCcsXG5cdFx0XHRcdFx0XHRjbG9zZU9uQ2xpY2s6IGZhbHNlLFxuXHRcdFx0XHRcdFx0b2Zmc2V0OiBbMCwgNV0sXG5cdFx0XHRcdCAgfSlcblx0XHRcdFx0XHRcdC5zZXRMbmdMYXQoW3RoaXMucHJvcHMucG9zaXRpb25fcG9wdXAubG5nLCB0aGlzLnByb3BzLnBvc2l0aW9uX3BvcHVwLmxhdF0pXG5cdFx0XHRcdFx0XHQuc2V0SFRNTChcblx0XHRcdFx0XHRcdFx0UmVhY3RET01TZXJ2ZXIucmVuZGVyVG9TdGF0aWNNYXJrdXAoXG5cdFx0XHRcdFx0XHRcdFx0PE1lbnVSaWdodENsaWNrXG5cdFx0XHRcdFx0XHRcdFx0XHRkaXNwYXRjaD17dGhpcy5wcm9wcy5kaXNwYXRjaH1cblx0XHRcdFx0XHRcdFx0XHRcdHBvc2l0aW9uX3BvcHVwPXt0aGlzLnByb3BzLnBvc2l0aW9uX3BvcHVwfVxuXHRcdFx0XHRcdFx0XHRcdFx0dHlwZV9wb3B1cD17dGhpcy5wcm9wcy50eXBlX3BvcHVwfVxuXHRcdFx0XHRcdFx0XHRcdC8+XG5cdFx0XHRcdFx0XHRcdClcblx0XHRcdFx0XHRcdClcblx0XHRcdFx0XHRcdC5hZGRUbyh0aGlzLm1hcCk7XG5cdFx0fVxuXG5cdFx0aWYgKHRoaXMucG9wdXBSaWdodENsaWNrICYmICF0aGlzLnByb3BzLnBvcHVwX3Zpc2libGUpIHtcblx0XHRcdHRoaXMucG9wdXBSaWdodENsaWNrLnJlbW92ZSgpO1xuXHRcdH1cblxuXHRcdGlmICghZXF1YWwocHJldlByb3BzLmN1cnJlbnRfcGxhY2UsIHRoaXMucHJvcHMuY3VycmVudF9wbGFjZSkgJiYgdGhpcy5wcm9wcy5jdXJyZW50X3BsYWNlKSB7XG5cdFx0XHRjb25zdCBzZWxlY3RlZFBsYWNlID0gdGhpcy5wcm9wcy5jdXJyZW50X3BsYWNlO1xuXG5cdFx0XHR0aGlzLm1hcC5mbHlUbyh7XG5cdFx0XHRcdGNlbnRlcjogW3NlbGVjdGVkUGxhY2UuZ2VvbWV0cnkubG9jYXRpb24ubG5nLCBzZWxlY3RlZFBsYWNlLmdlb21ldHJ5LmxvY2F0aW9uLmxhdF0sXG5cdFx0XHRcdHpvb206IDE1LFxuXHRcdFx0XHRzcGVlZDogMS41LFxuXHRcdFx0XHRjdXJ2ZTogMSxcblx0XHRcdH0pO1xuXHRcdFx0dGhpcy5wcm9wcy5kaXNwYXRjaChzZXRDb2xsYXBzZWRJbmZvQm94QWN0aW9uKGZhbHNlKSk7XG5cdFx0XHR0aGlzLnByb3BzLmRpc3BhdGNoKHNldFJlZE1hcmtlckFjdGlvbihmYWxzZSkpO1xuXHRcdFx0dGhpcy5zZXRTdGF0ZSh7XG5cdFx0XHRcdGJvdHRvbUluZm9WaXNpYmxlOiBmYWxzZSxcblx0XHRcdH0pO1xuXHRcdH1cblxuXHRcdGlmICghZXF1YWwocHJldlByb3BzLnZpZXdwb3J0LCB0aGlzLnByb3BzLnZpZXdwb3J0KSAmJiB0aGlzLnByb3BzLnZpZXdwb3J0KSB7XG5cdFx0XHR0aGlzLm1hcC5mbHlUbyh7XG5cdFx0XHRcdGNlbnRlcjogW3RoaXMucHJvcHMudmlld3BvcnQubG9uZ2l0dWRlLCB0aGlzLnByb3BzLnZpZXdwb3J0LmxhdGl0dWRlXSxcblx0XHRcdFx0em9vbTogdGhpcy5wcm9wcy52aWV3cG9ydC56b29tLFxuXHRcdFx0XHRzcGVlZDogMixcblx0XHRcdH0pO1xuXHRcdH1cblxuXHRcdGlmICghZXF1YWwocHJldlByb3BzLmFyb3VuZF9wbGFjZV9jZW50ZXIsIHRoaXMucHJvcHMuYXJvdW5kX3BsYWNlX2NlbnRlcikpIHtcblx0XHRcdHRoaXMucHJvcHMuZGlzcGF0Y2goc2V0UmVkTWFya2VyQWN0aW9uKGZhbHNlKSk7XG5cdFx0fVxuXG5cdFx0aWYgKCFlcXVhbChwcmV2UHJvcHMuYm94VmlzaWJsZSwgdGhpcy5wcm9wcy5ib3hWaXNpYmxlKSAmJiB0aGlzLnByb3BzLmJveFZpc2libGUgPT09ICduYXZpZ2F0aW9uJykge1xuXHRcdFx0dGhpcy5yZW1vdmVNYXJrZXJQb3B1cCgpO1xuXHRcdH1cblxuXHRcdGlmICghZXF1YWwocHJldlByb3BzLnJlc3VsdF9zZWxlY3QsIHRoaXMucHJvcHMucmVzdWx0X3NlbGVjdCkgfHwgIWVxdWFsKHByZXZQcm9wcy5yZXN1bHRfbmF2aWdhdGlvbiwgdGhpcy5wcm9wcy5yZXN1bHRfbmF2aWdhdGlvbikpIHtcblx0XHRcdGNvbnN0IHsgcmVzdWx0X3NlbGVjdCwgcmVzdWx0X25hdmlnYXRpb24sIGJveFZpc2libGUsIGZyb21fcGxhY2UsIHRvX3BsYWNlIH0gPSB0aGlzLnByb3BzO1xuXHRcdFx0bGV0IGRhc2hlZExpbmVHZW9KU09OID0gW10sXG5cdFx0XHRcdHBvbHlsaW5lR2VvSlNPTiA9IFtdO1xuXHRcdFx0dGhpcy5yZXN1bHRfbmF2aWdhdGlvbiA9IFtdO1xuXG5cdFx0XHRpZiAoKGJveFZpc2libGUgIT09ICduYXZpZ2F0aW9uJyAmJiBib3hWaXNpYmxlICE9PSAnaWZyYW1lJykgfHwgIXJlc3VsdF9uYXZpZ2F0aW9uKSB7XG5cdFx0XHRcdC8vIFJlbW92ZSBjYWMgbGF5ZXIvc291cmNlXG5cdFx0XHRcdGlmICh0aGlzLm1hcC5nZXRMYXllcihgcm91dGUtbGF5ZXItZmFzdGVzdGApKSB0aGlzLm1hcC5yZW1vdmVMYXllcihgcm91dGUtbGF5ZXItZmFzdGVzdGApO1xuXHRcdFx0XHRpZiAodGhpcy5tYXAuZ2V0TGF5ZXIoYHJvdXRlLWxheWVyLXNob3J0ZXN0YCkpIHRoaXMubWFwLnJlbW92ZUxheWVyKGByb3V0ZS1sYXllci1zaG9ydGVzdGApO1xuXHRcdFx0XHRpZiAodGhpcy5tYXAuZ2V0TGF5ZXIoYHdhbGstbGF5ZXItMGApKSB0aGlzLm1hcC5yZW1vdmVMYXllcihgd2Fsay1sYXllci0wYCk7XG5cdFx0XHRcdGlmICh0aGlzLm1hcC5nZXRMYXllcihgd2Fsay1sYXllci0xYCkpIHRoaXMubWFwLnJlbW92ZUxheWVyKGB3YWxrLWxheWVyLTFgKTtcblxuXHRcdFx0XHRpZiAodGhpcy5tYXAuZ2V0U291cmNlKGByb3V0ZS1zb3VyY2UtZmFzdGVzdGApKSB0aGlzLm1hcC5yZW1vdmVTb3VyY2UoYHJvdXRlLXNvdXJjZS1mYXN0ZXN0YCk7XG5cdFx0XHRcdGlmICh0aGlzLm1hcC5nZXRTb3VyY2UoYHJvdXRlLXNvdXJjZS1zaG9ydGVzdGApKSB0aGlzLm1hcC5yZW1vdmVTb3VyY2UoYHJvdXRlLXNvdXJjZS1zaG9ydGVzdGApO1xuXHRcdFx0XHRpZiAodGhpcy5tYXAuZ2V0U291cmNlKGB3YWxrLXNvdXJjZS0wYCkpIHRoaXMubWFwLnJlbW92ZVNvdXJjZShgd2Fsay1zb3VyY2UtMGApO1xuXHRcdFx0XHRpZiAodGhpcy5tYXAuZ2V0U291cmNlKGB3YWxrLXNvdXJjZS0xYCkpIHRoaXMubWFwLnJlbW92ZVNvdXJjZShgd2Fsay1zb3VyY2UtMWApO1xuXG5cdFx0XHRcdHRoaXMucG9wdXBfbmF2aWdhdGlvblswXT8ucmVtb3ZlKCk7XG5cdFx0XHRcdHRoaXMucG9wdXBfbmF2aWdhdGlvblsxXT8ucmVtb3ZlKCk7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRpZiAocmVzdWx0X25hdmlnYXRpb24pIHtcblx0XHRcdFx0XHRsZXQgZGlzdGFuY2UgPSAnJztcblx0XHRcdFx0XHRpZiAobG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3VuaXQnKSA9PT0gJ0tJTE9NRVRFUlMnKSB7XG5cdFx0XHRcdFx0XHRkaXN0YW5jZSA9IGAkeyhyZXN1bHRfbmF2aWdhdGlvbi5mYXN0ZXN0WzBdLmxlZ3NbMF0uZGlzdGFuY2UudmFsdWUgLyAxMDAwKS50b0ZpeGVkKDEpfSBLTWA7XG5cdFx0XHRcdFx0fSBlbHNlIGlmIChsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgndW5pdCcpID09PSAnTUlMRVMnKSB7XG5cdFx0XHRcdFx0XHRkaXN0YW5jZSA9IGAkeygocmVzdWx0X25hdmlnYXRpb24uZmFzdGVzdFswXS5sZWdzWzBdLmRpc3RhbmNlLnZhbHVlIC8gMTAwMCkgKiBNaWxlX1RyYXZlbC5NSUxFUykudG9GaXhlZCgxKX0gROG6t21gO1xuXHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRkaXN0YW5jZSA9IGAkeyhyZXN1bHRfbmF2aWdhdGlvbi5mYXN0ZXN0WzBdLmxlZ3NbMF0uZGlzdGFuY2UudmFsdWUgLyAxMDAwKS50b0ZpeGVkKDEpfSBLTWA7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdGxldCBjb29yZGluYXRlT2JqZWN0MSA9IHt9O1xuXHRcdFx0XHRcdGNvb3JkaW5hdGVPYmplY3QxLmNvb3JkaW5hdGVzID0gdGhpcy5kZWNvZGVQb2x5bGluZShyZXN1bHRfbmF2aWdhdGlvbi5mYXN0ZXN0WzBdLm92ZXJ2aWV3X3BvbHlsaW5lLnBvaW50cyk7XG5cdFx0XHRcdFx0Y29vcmRpbmF0ZU9iamVjdDEudHlwZSA9ICdMaW5lU3RyaW5nJztcblx0XHRcdFx0XHRwb2x5bGluZUdlb0pTT04ucHVzaChjb29yZGluYXRlT2JqZWN0MSk7XG5cdFx0XHRcdFx0cG9seWxpbmVHZW9KU09OWzBdLnJvYWRXYXkgPSAnZmFzdGVzdCc7XG5cdFx0XHRcdFx0bGV0IGNvb3JkaW5hdGVPYmplY3QyID0ge307XG5cdFx0XHRcdFx0Y29vcmRpbmF0ZU9iamVjdDIuY29vcmRpbmF0ZXMgPSB0aGlzLmRlY29kZVBvbHlsaW5lKHJlc3VsdF9uYXZpZ2F0aW9uLnNob3J0ZXN0WzBdLm92ZXJ2aWV3X3BvbHlsaW5lLnBvaW50cyk7XG5cdFx0XHRcdFx0Y29vcmRpbmF0ZU9iamVjdDIudHlwZSA9ICdMaW5lU3RyaW5nJztcblx0XHRcdFx0XHRwb2x5bGluZUdlb0pTT04ucHVzaChjb29yZGluYXRlT2JqZWN0Mik7XG5cdFx0XHRcdFx0cG9seWxpbmVHZW9KU09OWzFdLnJvYWRXYXkgPSAnc2hvcnRlc3QnO1xuXG5cdFx0XHRcdFx0ZGFzaGVkTGluZUdlb0pTT04ucHVzaCh7XG5cdFx0XHRcdFx0XHR0eXBlOiAnTGluZVN0cmluZycsXG5cdFx0XHRcdFx0XHRjb29yZGluYXRlczogW1xuXHRcdFx0XHRcdFx0XHRbcG9seWxpbmVHZW9KU09OWzBdLmNvb3JkaW5hdGVzWzBdWzBdLCBwb2x5bGluZUdlb0pTT05bMF0uY29vcmRpbmF0ZXNbMF1bMV1dLFxuXHRcdFx0XHRcdFx0XHRbZnJvbV9wbGFjZT8uZ2VvbWV0cnkubG9jYXRpb24ubG5nLCBmcm9tX3BsYWNlPy5nZW9tZXRyeS5sb2NhdGlvbi5sYXRdLFxuXHRcdFx0XHRcdFx0XSxcblx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHRkYXNoZWRMaW5lR2VvSlNPTi5wdXNoKHtcblx0XHRcdFx0XHRcdHR5cGU6ICdMaW5lU3RyaW5nJyxcblx0XHRcdFx0XHRcdGNvb3JkaW5hdGVzOiBbXG5cdFx0XHRcdFx0XHRcdFtwb2x5bGluZUdlb0pTT05bMF0uY29vcmRpbmF0ZXNbcG9seWxpbmVHZW9KU09OWzBdLmNvb3JkaW5hdGVzLmxlbmd0aCAtIDFdWzBdLCBwb2x5bGluZUdlb0pTT05bMF0uY29vcmRpbmF0ZXNbcG9seWxpbmVHZW9KU09OWzBdLmNvb3JkaW5hdGVzLmxlbmd0aCAtIDFdWzFdXSxcblx0XHRcdFx0XHRcdFx0W3RvX3BsYWNlPy5nZW9tZXRyeS5sb2NhdGlvbi5sbmcsIHRvX3BsYWNlPy5nZW9tZXRyeS5sb2NhdGlvbi5sYXRdLFxuXHRcdFx0XHRcdFx0XSxcblx0XHRcdFx0XHR9KTtcblxuXHRcdFx0XHRcdHBvbHlsaW5lR2VvSlNPTi5tYXAoKGl0ZW0sIGkpID0+IHtcblx0XHRcdFx0XHRcdC8vIExheWVyIGRhbiBkdW9uZ1xuXHRcdFx0XHRcdFx0aWYgKHRoaXMubWFwLmdldExheWVyKGByb3V0ZS1sYXllci0ke2l0ZW0ucm9hZFdheX1gKSkgdGhpcy5tYXAucmVtb3ZlTGF5ZXIoYHJvdXRlLWxheWVyLSR7aXRlbS5yb2FkV2F5fWApO1xuXHRcdFx0XHRcdFx0aWYgKHRoaXMubWFwLmdldFNvdXJjZShgcm91dGUtc291cmNlLSR7aXRlbS5yb2FkV2F5fWApKSB0aGlzLm1hcC5yZW1vdmVTb3VyY2UoYHJvdXRlLXNvdXJjZS0ke2l0ZW0ucm9hZFdheX1gKTtcblx0XHRcdFx0XHRcdHRoaXMubWFwLmFkZFNvdXJjZShgcm91dGUtc291cmNlLSR7aXRlbS5yb2FkV2F5fWAsIHtcblx0XHRcdFx0XHRcdFx0dHlwZTogJ2dlb2pzb24nLFxuXHRcdFx0XHRcdFx0XHRkYXRhOiB7XG5cdFx0XHRcdFx0XHRcdFx0dHlwZTogJ0ZlYXR1cmUnLFxuXHRcdFx0XHRcdFx0XHRcdHByb3BlcnRpZXM6IHt9LFxuXHRcdFx0XHRcdFx0XHRcdGdlb21ldHJ5OiBpdGVtLFxuXHRcdFx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0XHR0aGlzLm1hcC5hZGRMYXllcih7XG5cdFx0XHRcdFx0XHRcdGlkOiBgcm91dGUtbGF5ZXItJHtpdGVtLnJvYWRXYXl9YCxcblx0XHRcdFx0XHRcdFx0dHlwZTogJ2xpbmUnLFxuXHRcdFx0XHRcdFx0XHRzb3VyY2U6IGByb3V0ZS1zb3VyY2UtJHtpdGVtLnJvYWRXYXl9YCxcblx0XHRcdFx0XHRcdFx0bGF5b3V0OiB7XG5cdFx0XHRcdFx0XHRcdFx0J2xpbmUtam9pbic6ICdyb3VuZCcsXG5cdFx0XHRcdFx0XHRcdFx0J2xpbmUtY2FwJzogJ3JvdW5kJyxcblx0XHRcdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRcdFx0cGFpbnQ6IHtcblx0XHRcdFx0XHRcdFx0XHQnbGluZS1jb2xvcic6ICdyZ2IoMjQsIDE0NCwgMjU1KScsXG5cdFx0XHRcdFx0XHRcdFx0J2xpbmUtd2lkdGgnOiA3LFxuXHRcdFx0XHRcdFx0XHRcdCdsaW5lLW9wYWNpdHknOiBpdGVtLnJvYWRXYXkgPT09IHJlc3VsdF9zZWxlY3QgPyAxIDogMC41LFxuXHRcdFx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0XHQvLyBMYXllciBkaSBib1xuXG5cdFx0XHRcdFx0XHRpZiAodGhpcy5tYXAuZ2V0TGF5ZXIoYHdhbGstbGF5ZXItJHtpfWApKSB0aGlzLm1hcC5yZW1vdmVMYXllcihgd2Fsay1sYXllci0ke2l9YCk7XG5cdFx0XHRcdFx0XHRpZiAodGhpcy5tYXAuZ2V0U291cmNlKGB3YWxrLXNvdXJjZS0ke2l9YCkpIHRoaXMubWFwLnJlbW92ZVNvdXJjZShgd2Fsay1zb3VyY2UtJHtpfWApO1xuXHRcdFx0XHRcdFx0dGhpcy5tYXAuYWRkU291cmNlKGB3YWxrLXNvdXJjZS0ke2l9YCwge1xuXHRcdFx0XHRcdFx0XHR0eXBlOiAnZ2VvanNvbicsXG5cdFx0XHRcdFx0XHRcdGRhdGE6IHtcblx0XHRcdFx0XHRcdFx0XHR0eXBlOiAnRmVhdHVyZScsXG5cdFx0XHRcdFx0XHRcdFx0cHJvcGVydGllczoge30sXG5cdFx0XHRcdFx0XHRcdFx0Z2VvbWV0cnk6IGRhc2hlZExpbmVHZW9KU09OW2ldLFxuXHRcdFx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0XHR0aGlzLm1hcC5hZGRMYXllcih7XG5cdFx0XHRcdFx0XHRcdGlkOiBgd2Fsay1sYXllci0ke2l9YCxcblx0XHRcdFx0XHRcdFx0dHlwZTogJ2xpbmUnLFxuXHRcdFx0XHRcdFx0XHRzb3VyY2U6IGB3YWxrLXNvdXJjZS0ke2l9YCxcblx0XHRcdFx0XHRcdFx0bGF5b3V0OiB7XG5cdFx0XHRcdFx0XHRcdFx0J2xpbmUtam9pbic6ICdyb3VuZCcsXG5cdFx0XHRcdFx0XHRcdFx0J2xpbmUtY2FwJzogJ3JvdW5kJyxcblx0XHRcdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRcdFx0cGFpbnQ6IHtcblx0XHRcdFx0XHRcdFx0XHQnbGluZS1jb2xvcic6ICdyZ2IoMTMzLCAxMzUsIDEyNiknLFxuXHRcdFx0XHRcdFx0XHRcdCdsaW5lLW9wYWNpdHknOiAxLFxuXHRcdFx0XHRcdFx0XHRcdCdsaW5lLXdpZHRoJzogNixcblx0XHRcdFx0XHRcdFx0XHQnbGluZS1kYXNoYXJyYXknOiBbMC4yLCAyXSxcblx0XHRcdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdFx0Ly8gQWRkIFBvcHVwIGhpZW4ga2V0IHF1YVxuXG5cdFx0XHRcdFx0XHRpZiAodGhpcy5wb3B1cF9uYXZpZ2F0aW9uW2ldKSB7XG5cdFx0XHRcdFx0XHRcdHRoaXMucG9wdXBfbmF2aWdhdGlvbltpXT8ucmVtb3ZlKCk7XG5cdFx0XHRcdFx0XHRcdHRoaXMucG9wdXBfbmF2aWdhdGlvbltpXSA9IG51bGw7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHR0aGlzLnBvcHVwX25hdmlnYXRpb25baV0gPSBuZXcgbWFwbGlicmVnbC5Qb3B1cCh7XG5cdFx0XHRcdFx0XHRcdGNsb3NlQnV0dG9uOiBmYWxzZSxcblx0XHRcdFx0XHRcdFx0YW5jaG9yOiAndG9wJyxcblx0XHRcdFx0XHRcdFx0Y2xvc2VPbkNsaWNrOiBmYWxzZSxcblx0XHRcdFx0XHRcdFx0Y2xhc3NOYW1lOiBpdGVtLnJvYWRXYXkgPT09IHJlc3VsdF9zZWxlY3QgPyAncG9wdXAtei1pbmRleDEnIDogJ3BvcHVwLXotaW5kZXgyJyxcblx0XHRcdFx0XHRcdH0pXG5cdFx0XHRcdFx0XHRcdC5zZXRMbmdMYXQoW2kgPT09IDAgPyBpdGVtLmNvb3JkaW5hdGVzW01hdGgudHJ1bmMoMC43NSAqIGl0ZW0uY29vcmRpbmF0ZXMubGVuZ3RoKV1bMF0gOiBpdGVtLmNvb3JkaW5hdGVzW01hdGgudHJ1bmMoMC4yNSAqIGl0ZW0uY29vcmRpbmF0ZXMubGVuZ3RoKV1bMF0sIGkgPT09IDAgPyBpdGVtLmNvb3JkaW5hdGVzW01hdGgudHJ1bmMoaXRlbS5jb29yZGluYXRlcy5sZW5ndGggKiAwLjc1KV1bMV0gOiBpdGVtLmNvb3JkaW5hdGVzW01hdGgudHJ1bmMoaXRlbS5jb29yZGluYXRlcy5sZW5ndGggKiAwLjI1KV1bMV1dKVxuXHRcdFx0XHRcdFx0XHQuc2V0SFRNTChcblx0XHRcdFx0XHRcdFx0XHRSZWFjdERPTVNlcnZlci5yZW5kZXJUb1N0YXRpY01hcmt1cChcblx0XHRcdFx0XHRcdFx0XHRcdDxkaXZcblx0XHRcdFx0XHRcdFx0XHRcdFx0Y2xhc3NOYW1lPVwidG9vbHRpcE5hdmlnYXRpb25cIlxuXHRcdFx0XHRcdFx0XHRcdFx0XHRpZD17YHBvcHVwLSR7aXRlbS5yb2FkV2F5fWB9PlxuXHRcdFx0XHRcdFx0XHRcdFx0XHQ8cD57ZGlzdGFuY2V9PC9wPlxuXHRcdFx0XHRcdFx0XHRcdFx0XHQ8cD57cmVzdWx0X25hdmlnYXRpb25baXRlbS5yb2FkV2F5XVswXS5sZWdzWzBdLmR1cmF0aW9uLnRleHR9PC9wPlxuXHRcdFx0XHRcdFx0XHRcdFx0PC9kaXY+XG5cdFx0XHRcdFx0XHRcdFx0KVxuXHRcdFx0XHRcdFx0XHQpXG5cdFx0XHRcdFx0XHRcdC5zZXRNYXhXaWR0aCgnMzAwcHgnKVxuXHRcdFx0XHRcdFx0XHQuYWRkVG8odGhpcy5tYXApO1xuXHRcdFx0XHRcdFx0ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoYHBvcHVwLSR7aXRlbS5yb2FkV2F5fWApLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuXHRcdFx0XHRcdFx0XHR0aGlzLnByb3BzLmRpc3BhdGNoKHNlbGVjdFJlc3VsdEFjdGlvbihpdGVtLnJvYWRXYXkpKTtcblx0XHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdFx0Y29uc3Qgbm9ybWFsaXplQm91bmRzID0gKGJvdW5kcykgPT4ge1xuXHRcdFx0XHRcdFx0XHRjb25zdCBbZmlyc3RQb2ludCwgc2Vjb25kUG9pbnRdID0gYm91bmRzO1xuXG5cdFx0XHRcdFx0XHRcdGNvbnN0IG1pbkxhdCA9IE1hdGgubWluKGZpcnN0UG9pbnRbMV0sIHNlY29uZFBvaW50WzFdKTtcblx0XHRcdFx0XHRcdFx0Y29uc3QgbWF4TGF0ID0gTWF0aC5tYXgoZmlyc3RQb2ludFsxXSwgc2Vjb25kUG9pbnRbMV0pO1xuXG5cdFx0XHRcdFx0XHRcdGNvbnN0IG1pbkxuZyA9IE1hdGgubWluKGZpcnN0UG9pbnRbMF0sIHNlY29uZFBvaW50WzBdKTtcblx0XHRcdFx0XHRcdFx0Y29uc3QgbWF4TG5nID0gTWF0aC5tYXgoZmlyc3RQb2ludFswXSwgc2Vjb25kUG9pbnRbMF0pO1xuXG5cdFx0XHRcdFx0XHRcdHJldHVybiBbXG5cdFx0XHRcdFx0XHRcdFx0W21pbkxuZywgbWluTGF0XSxcblx0XHRcdFx0XHRcdFx0XHRbbWF4TG5nLCBtYXhMYXRdLFxuXHRcdFx0XHRcdFx0XHRdO1xuXHRcdFx0XHRcdFx0fTtcblx0XHRcdFx0XHRcdGNvbnN0IGJvdW5kID0gbm9ybWFsaXplQm91bmRzKFtpdGVtLmNvb3JkaW5hdGVzWzBdLCBpdGVtLmNvb3JkaW5hdGVzW2l0ZW0uY29vcmRpbmF0ZXMubGVuZ3RoIC0gMV1dKTtcblx0XHRcdFx0XHRcdGlmIChpc01vYmlsZSkge1xuXHRcdFx0XHRcdFx0XHR0aGlzLm5hdmlnYXRpb25WaWV3ID0gdGhpcy5tYXAuY2FtZXJhRm9yQm91bmRzKGJvdW5kLCB7XG5cdFx0XHRcdFx0XHRcdFx0cGFkZGluZzogeyB0b3A6IDEwLCBib3R0b206IDI1LCBsZWZ0OiAyNCwgcmlnaHQ6IDI0IH0sXG5cdFx0XHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdFx0dGhpcy5uYXZpZ2F0aW9uVmlldyA9IHRoaXMubWFwLmNhbWVyYUZvckJvdW5kcyhib3VuZCwge1xuXHRcdFx0XHRcdFx0XHRcdHBhZGRpbmc6IHsgdG9wOiA0MCwgYm90dG9tOiA0MCwgbGVmdDogMjAwLCByaWdodDogNDAgfSxcblx0XHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fSk7XG5cblx0XHRcdFx0XHR0aGlzLnZpZXcgPSB7XG5cdFx0XHRcdFx0XHRsYXRpdHVkZTogdGhpcy5uYXZpZ2F0aW9uVmlldy5jZW50ZXIubGF0LFxuXHRcdFx0XHRcdFx0bG9uZ2l0dWRlOiB0aGlzLm5hdmlnYXRpb25WaWV3LmNlbnRlci5sbmcsXG5cdFx0XHRcdFx0XHR6b29tOiB0aGlzLm5hdmlnYXRpb25WaWV3Lnpvb20sXG5cdFx0XHRcdFx0fTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXG5cdFx0XHR0aGlzLnByb3BzLmRpc3BhdGNoKHNldE1hcFZpZXdwb3J0QWN0aW9uKHRoaXMudmlldykpO1xuXHRcdH1cblx0XHRpZiAoIWVxdWFsKHByZXZQcm9wcy5mcm9tX3BsYWNlLCB0aGlzLnByb3BzLmZyb21fcGxhY2UpKSB7XG5cdFx0XHRjb25zdCBwbGFjZSA9IHRoaXMucHJvcHMuZnJvbV9wbGFjZTtcblx0XHRcdGlmIChwbGFjZSkge1xuXHRcdFx0XHRjb25zdCBwb3B1cCA9IG5ldyBtYXBsaWJyZWdsLlBvcHVwKHtcblx0XHRcdFx0XHRvZmZzZXQ6IFswLCAtMThdLFxuXHRcdFx0XHRcdGNsYXNzTmFtZTogJ3Rvb2x0aXAtbWFya2VyJyxcblx0XHRcdFx0XHRjbG9zZUJ1dHRvbjogZmFsc2UsXG5cdFx0XHRcdH0pXG5cdFx0XHRcdFx0LnNldEhUTUwoYDxkaXYgY2xhc3M9XCJhbnQtdG9vbHRpcC1pbm5lciB0b29sdGlwLWluZm8tbG9jYXRpb25cIj4ke3BsYWNlLm5hbWV9PC9kaXY+YClcblx0XHRcdFx0XHQuc2V0TWF4V2lkdGgoJzE1MHB4Jyk7XG5cdFx0XHRcdGlmICh0aGlzLnN0YXJ0X21hcmtlcikge1xuXHRcdFx0XHRcdHRoaXMuc3RhcnRfbWFya2VyID0gdGhpcy5zdGFydF9tYXJrZXIuc2V0TG5nTGF0KHBsYWNlLmdlb21ldHJ5LmxvY2F0aW9uKS5zZXRQb3B1cChwb3B1cCkuYWRkVG8odGhpcy5tYXApO1xuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdGNvbnN0IG1hcmtlcl9zdGFydCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuXHRcdFx0XHRcdG1hcmtlcl9zdGFydC5pbm5lckhUTUwgPSBSZWFjdERPTVNlcnZlci5yZW5kZXJUb1N0YXRpY01hcmt1cChcblx0XHRcdFx0XHRcdDxkaXYgY2xhc3NOYW1lPVwibWFya2VyLXN0YXJ0XCI+XG5cdFx0XHRcdFx0XHRcdDxpbWdcblx0XHRcdFx0XHRcdFx0XHRzcmM9e2ltYWdlcy5idXR0b259XG5cdFx0XHRcdFx0XHRcdFx0c3R5bGU9e3sgd2lkdGg6IDEyIH19XG5cdFx0XHRcdFx0XHRcdFx0YWx0PVwiXCJcblx0XHRcdFx0XHRcdFx0Lz5cblx0XHRcdFx0XHRcdDwvZGl2PlxuXHRcdFx0XHRcdCk7XG5cdFx0XHRcdFx0dGhpcy5zdGFydF9tYXJrZXIgPSBuZXcgbWFwbGlicmVnbC5NYXJrZXIoe1xuXHRcdFx0XHRcdFx0YW5jaG9yOiAnY2VudGVyJyxcblx0XHRcdFx0XHRcdGVsZW1lbnQ6IG1hcmtlcl9zdGFydCxcblx0XHRcdFx0XHR9KVxuXHRcdFx0XHRcdFx0LnNldFBvcHVwKHBvcHVwKVxuXHRcdFx0XHRcdFx0LnNldExuZ0xhdChwbGFjZS5nZW9tZXRyeS5sb2NhdGlvbilcblx0XHRcdFx0XHRcdC5hZGRUbyh0aGlzLm1hcCk7XG5cdFx0XHRcdFx0dGhpcy5zdGFydF9tYXJrZXIuZ2V0RWxlbWVudCgpLmFkZEV2ZW50TGlzdGVuZXIoJ2NvbnRleHRtZW51JywgKGUpID0+IHtcblx0XHRcdFx0XHRcdGUuc3RvcFByb3BhZ2F0aW9uKCk7XG5cdFx0XHRcdFx0XHRlLnByZXZlbnREZWZhdWx0KCk7XG5cdFx0XHRcdFx0XHRjb25zdCBsbmdMYXQgPSB0aGlzLnN0YXJ0X21hcmtlci5nZXRMbmdMYXQoKTtcblx0XHRcdFx0XHRcdHRoaXMucHJvcHMuZGlzcGF0Y2goc2V0UG9wdXBSaWdodENsaWNrKHRydWUsIGxuZ0xhdCwgJ3BvcHVwRnJvbVBsYWNlJykpO1xuXHRcdFx0XHRcdFx0dGhpcy5wcm9wcy5kaXNwYXRjaChzZXRSZWRNYXJrZXJBY3Rpb24oZmFsc2UpKTtcblx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHR0aGlzLnN0YXJ0X21hcmtlci5nZXRFbGVtZW50KCkuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG5cdFx0XHRcdFx0XHRpZiAocG9wdXAuaXNPcGVuKCkpIHtcblx0XHRcdFx0XHRcdFx0dGhpcy5zdGFydF9tYXJrZXIudG9nZ2xlUG9wdXAoKTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHR0aGlzLnN0YXJ0X21hcmtlci5nZXRFbGVtZW50KCkuYWRkRXZlbnRMaXN0ZW5lcignbW91c2VlbnRlcicsICgpID0+IHRoaXMuc3RhcnRfbWFya2VyLnRvZ2dsZVBvcHVwKCkpO1xuXHRcdFx0XHRcdHRoaXMuc3RhcnRfbWFya2VyLmdldEVsZW1lbnQoKS5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWxlYXZlJywgKCkgPT4gdGhpcy5zdGFydF9tYXJrZXIudG9nZ2xlUG9wdXAoKSk7XG5cdFx0XHRcdH1cblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdGlmIChlcXVhbCh0aGlzLnN0YXJ0X21hcmtlci5nZXRMbmdMYXQoKSwgdGhpcy5wcm9wcy5wb3NpdGlvbl9wb3B1cCkpIHtcblx0XHRcdFx0XHR0aGlzLnByb3BzLmRpc3BhdGNoKHNldFBvcHVwUmlnaHRDbGljayhmYWxzZSkpO1xuXHRcdFx0XHR9XG5cdFx0XHRcdGlmIChlcXVhbChwcmV2UHJvcHMuZnJvbV9wbGFjZT8ucGxhY2VfaWQsIHRoaXMuc3RhdGUucGxhY2VNb3VzZUNsaWNrPy5wbGFjZV9pZCkpIHtcblx0XHRcdFx0XHR0aGlzLmNoYW5nZVZpc2libGVCb3R0b21JbmZvKGZhbHNlKTtcblx0XHRcdFx0fVxuXHRcdFx0XHR0aGlzLmNoYW5nZVZpc2libGVCb3R0b21JbmZvKGZhbHNlKTtcblx0XHRcdFx0dGhpcy5zdGFydF9tYXJrZXIgPyB0aGlzLnN0YXJ0X21hcmtlci5yZW1vdmUoKSA6IG51bGw7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0aWYgKCFlcXVhbChwcmV2UHJvcHMudG9fcGxhY2UsIHRoaXMucHJvcHMudG9fcGxhY2UpKSB7XG5cdFx0XHRjb25zdCBwbGFjZSA9IHRoaXMucHJvcHMudG9fcGxhY2U7XG5cdFx0XHRpZiAocGxhY2UpIHtcblx0XHRcdFx0Y29uc3QgcG9wdXAgPSBuZXcgbWFwbGlicmVnbC5Qb3B1cCh7XG5cdFx0XHRcdFx0b2Zmc2V0OiBbMCwgLTE4XSxcblx0XHRcdFx0XHRjbGFzc05hbWU6ICd0b29sdGlwLW1hcmtlcicsXG5cdFx0XHRcdFx0Y2xvc2VCdXR0b246IGZhbHNlLFxuXHRcdFx0XHR9KVxuXHRcdFx0XHRcdC5zZXRIVE1MKGA8ZGl2IGNsYXNzPVwiYW50LXRvb2x0aXAtaW5uZXIgdG9vbHRpcC1pbmZvLWxvY2F0aW9uXCI+JHtwbGFjZS5uYW1lfTwvZGl2PmApXG5cdFx0XHRcdFx0LnNldE1heFdpZHRoKCcxNTBweCcpO1xuXHRcdFx0XHRpZiAodGhpcy5lbmRfbWFya2VyKSB7XG5cdFx0XHRcdFx0dGhpcy50b19wbGFjZSA9IHRoaXMuZW5kX21hcmtlci5zZXRQb3B1cChwb3B1cCkuc2V0TG5nTGF0KHBsYWNlLmdlb21ldHJ5LmxvY2F0aW9uKS5hZGRUbyh0aGlzLm1hcCk7XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0Y29uc3QgbWFya2VyX2VuZCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuXHRcdFx0XHRcdG1hcmtlcl9lbmQuaW5uZXJIVE1MID0gUmVhY3RET01TZXJ2ZXIucmVuZGVyVG9TdGF0aWNNYXJrdXAoXG5cdFx0XHRcdFx0XHQ8ZGl2IGNsYXNzTmFtZT1cIm1hcmtlci1lbmRcIj5cblx0XHRcdFx0XHRcdFx0PGRpdj5cblx0XHRcdFx0XHRcdFx0XHQ8aW1nXG5cdFx0XHRcdFx0XHRcdFx0XHRzcmM9e2ltYWdlcy5tYXJrZXJ9XG5cdFx0XHRcdFx0XHRcdFx0XHRhbHQ9XCJcIlxuXHRcdFx0XHRcdFx0XHRcdC8+XG5cdFx0XHRcdFx0XHRcdDwvZGl2PlxuXHRcdFx0XHRcdFx0PC9kaXY+XG5cdFx0XHRcdFx0KTtcblx0XHRcdFx0XHR0aGlzLmVuZF9tYXJrZXIgPSBuZXcgbWFwbGlicmVnbC5NYXJrZXIoe1xuXHRcdFx0XHRcdFx0YW5jaG9yOiAnY2VudGVyJyxcblx0XHRcdFx0XHRcdGVsZW1lbnQ6IG1hcmtlcl9lbmQsXG5cdFx0XHRcdFx0fSlcblx0XHRcdFx0XHRcdC5zZXRQb3B1cChwb3B1cClcblx0XHRcdFx0XHRcdC5zZXRMbmdMYXQocGxhY2UuZ2VvbWV0cnkubG9jYXRpb24pXG5cdFx0XHRcdFx0XHQuYWRkVG8odGhpcy5tYXApO1xuXHRcdFx0XHRcdHRoaXMuZW5kX21hcmtlci5nZXRFbGVtZW50KCkuYWRkRXZlbnRMaXN0ZW5lcignY29udGV4dG1lbnUnLCAoZSkgPT4ge1xuXHRcdFx0XHRcdFx0ZS5zdG9wUHJvcGFnYXRpb24oKTtcblx0XHRcdFx0XHRcdGUucHJldmVudERlZmF1bHQoKTtcblx0XHRcdFx0XHRcdGNvbnN0IGxuZ0xhdCA9IHRoaXMuZW5kX21hcmtlci5nZXRMbmdMYXQoKTtcblx0XHRcdFx0XHRcdHRoaXMucHJvcHMuZGlzcGF0Y2goc2V0UG9wdXBSaWdodENsaWNrKHRydWUsIGxuZ0xhdCwgJ3BvcHVwVG9QbGFjZScpKTtcblx0XHRcdFx0XHRcdHRoaXMucHJvcHMuZGlzcGF0Y2goc2V0UmVkTWFya2VyQWN0aW9uKGZhbHNlKSk7XG5cdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0dGhpcy5lbmRfbWFya2VyLmdldEVsZW1lbnQoKS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcblx0XHRcdFx0XHRcdGlmIChwb3B1cC5pc09wZW4oKSkge1xuXHRcdFx0XHRcdFx0XHR0aGlzLmVuZF9tYXJrZXIudG9nZ2xlUG9wdXAoKTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHR0aGlzLmVuZF9tYXJrZXIuZ2V0RWxlbWVudCgpLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlZW50ZXInLCAoKSA9PiB0aGlzLmVuZF9tYXJrZXIudG9nZ2xlUG9wdXAoKSk7XG5cdFx0XHRcdFx0dGhpcy5lbmRfbWFya2VyLmdldEVsZW1lbnQoKS5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWxlYXZlJywgKCkgPT4gdGhpcy5lbmRfbWFya2VyLnRvZ2dsZVBvcHVwKCkpO1xuXHRcdFx0XHR9XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRpZiAoZXF1YWwodGhpcy5zdGFydF9tYXJrZXI/LmdldExuZ0xhdCgpLCB0aGlzLnByb3BzLnBvc2l0aW9uX3BvcHVwKSkge1xuXHRcdFx0XHRcdHRoaXMucHJvcHMuZGlzcGF0Y2goc2V0UG9wdXBSaWdodENsaWNrKGZhbHNlKSk7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRpZiAoZXF1YWwocHJldlByb3BzLnRvX3BsYWNlPy5wbGFjZV9pZCwgdGhpcy5zdGF0ZS5wbGFjZU1vdXNlQ2xpY2s/LnBsYWNlX2lkKSkge1xuXHRcdFx0XHRcdHRoaXMuY2hhbmdlVmlzaWJsZUJvdHRvbUluZm8oZmFsc2UpO1xuXHRcdFx0XHR9XG5cdFx0XHRcdHRoaXMuZW5kX21hcmtlciA/IHRoaXMuZW5kX21hcmtlci5yZW1vdmUoKSA6IG51bGw7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0aWYgKCFlcXVhbChwcmV2UHJvcHMuYXJvdW5kX3BsYWNlcywgdGhpcy5wcm9wcy5hcm91bmRfcGxhY2VzKSB8fCAhZXF1YWwocHJldlByb3BzLmFyb3VuZF9wbGFjZV9zZWxlY3QsIHRoaXMucHJvcHMuYXJvdW5kX3BsYWNlX3NlbGVjdCkpIHtcblx0XHRcdGlmICh0aGlzLmxpc3RfbWFya2VyX2Fyb3VuZD8ubGVuZ3RoID4gMCkge1xuXHRcdFx0XHR0aGlzLmxpc3RfbWFya2VyX2Fyb3VuZC5mb3JFYWNoKChpdGVtKSA9PiB7XG5cdFx0XHRcdFx0aXRlbS5yZW1vdmUoKTtcblx0XHRcdFx0fSk7XG5cdFx0XHRcdHRoaXMubGlzdF9tYXJrZXJfYXJvdW5kID0gW107XG5cdFx0XHR9XG5cdFx0XHRjb25zdCB7IGFyb3VuZF9wbGFjZXMsIGFyb3VuZF9wbGFjZV9jZW50ZXIgfSA9IHRoaXMucHJvcHM7XG5cdFx0XHRpZiAoYXJvdW5kX3BsYWNlcy5sZW5ndGggPiAwKSB7XG5cdFx0XHRcdHRoaXMubGlzdF9tYXJrZXJfYXJvdW5kID0gW107XG5cdFx0XHRcdGxldCBlbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuXHRcdFx0XHRlbC5pbm5lckhUTUwgPSBSZWFjdERPTVNlcnZlci5yZW5kZXJUb1N0YXRpY01hcmt1cChcblx0XHRcdFx0XHQ8TWFya2VyXG5cdFx0XHRcdFx0XHRpZD1cIm1hcmtlci1jZW50ZXJcIlxuXHRcdFx0XHRcdFx0dHlwZT1cImNlbnRlclwiXG5cdFx0XHRcdFx0Lz5cblx0XHRcdFx0KTtcblx0XHRcdFx0dGhpcy5saXN0X21hcmtlcl9hcm91bmRbMF0gPSBuZXcgbWFwbGlicmVnbC5NYXJrZXIoZWwsIHtcblx0XHRcdFx0XHRhbmNob3I6ICdib3R0b20nLFxuXHRcdFx0XHR9KVxuXHRcdFx0XHRcdC5zZXRQb3B1cChcblx0XHRcdFx0XHRcdG5ldyBtYXBsaWJyZWdsLlBvcHVwKHtcblx0XHRcdFx0XHRcdFx0b2Zmc2V0OiBbMCwgLTMyXSxcblx0XHRcdFx0XHRcdFx0Y2xhc3NOYW1lOiAndG9vbHRpcC1tYXJrZXInLFxuXHRcdFx0XHRcdFx0XHRjbG9zZUJ1dHRvbjogZmFsc2UsXG5cdFx0XHRcdFx0XHR9KVxuXHRcdFx0XHRcdFx0XHQuc2V0SFRNTChgPGRpdiBjbGFzcz1cImFudC10b29sdGlwLWlubmVyIHRvb2x0aXAtaW5mby1sb2NhdGlvblwiPiR7YXJvdW5kX3BsYWNlX2NlbnRlci5uYW1lfTwvZGl2PmApXG5cdFx0XHRcdFx0XHRcdC5zZXRNYXhXaWR0aCgnMTUwcHgnKVxuXHRcdFx0XHRcdClcblx0XHRcdFx0XHQuc2V0TG5nTGF0KGFyb3VuZF9wbGFjZV9jZW50ZXIuZ2VvbWV0cnkubG9jYXRpb24pXG5cdFx0XHRcdFx0LmFkZFRvKHRoaXMubWFwKTtcblx0XHRcdFx0Y29uc3QgbWFya2VyQ2VudGVyRGl2ID0gdGhpcy5saXN0X21hcmtlcl9hcm91bmRbMF0uZ2V0RWxlbWVudCgpO1xuXG5cdFx0XHRcdG1hcmtlckNlbnRlckRpdi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcblx0XHRcdFx0XHR0aGlzLl9zZWxlY3RBcm91bmRQbGFjZSgnY2VudGVyJywgYXJvdW5kX3BsYWNlX2NlbnRlcik7XG5cdFx0XHRcdFx0dGhpcy5wcm9wcy5kaXNwYXRjaChzZXRSZWRNYXJrZXJBY3Rpb24oZmFsc2UpKTtcblx0XHRcdFx0XHRpZiAodGhpcy5saXN0X21hcmtlcl9hcm91bmRbMF0uZ2V0UG9wdXAoKS5pc09wZW4oKSkge1xuXHRcdFx0XHRcdFx0dGhpcy5saXN0X21hcmtlcl9hcm91bmRbMF0udG9nZ2xlUG9wdXAoKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH0pO1xuXG5cdFx0XHRcdG1hcmtlckNlbnRlckRpdi5hZGRFdmVudExpc3RlbmVyKCdjb250ZXh0bWVudScsIChlKSA9PiB7XG5cdFx0XHRcdFx0ZS5zdG9wUHJvcGFnYXRpb24oKTtcblx0XHRcdFx0XHRlLnByZXZlbnREZWZhdWx0KCk7XG5cdFx0XHRcdFx0dGhpcy5wcm9wcy5kaXNwYXRjaChzZXRSZWRNYXJrZXJBY3Rpb24oZmFsc2UpKTtcblx0XHRcdFx0XHR0aGlzLnByb3BzLmRpc3BhdGNoKHNldFBvcHVwUmlnaHRDbGljayh0cnVlLCBhcm91bmRfcGxhY2VfY2VudGVyLmdlb21ldHJ5LmxvY2F0aW9uLCAnbm9ybWFsJykpO1xuXHRcdFx0XHR9KTtcblxuXHRcdFx0XHRtYXJrZXJDZW50ZXJEaXYuYWRkRXZlbnRMaXN0ZW5lcignbW91c2VlbnRlcicsICgpID0+IHRoaXMubGlzdF9tYXJrZXJfYXJvdW5kWzBdLnRvZ2dsZVBvcHVwKCkpO1xuXHRcdFx0XHRtYXJrZXJDZW50ZXJEaXYuYWRkRXZlbnRMaXN0ZW5lcignbW91c2VsZWF2ZScsICgpID0+IHRoaXMubGlzdF9tYXJrZXJfYXJvdW5kWzBdLnRvZ2dsZVBvcHVwKCkpO1xuXG5cdFx0XHRcdGFyb3VuZF9wbGFjZXMuZm9yRWFjaCgoaXRlbSwgaSkgPT4ge1xuXHRcdFx0XHRcdGNvbnN0IHBvcHVwID0gbmV3IG1hcGxpYnJlZ2wuUG9wdXAoe1xuXHRcdFx0XHRcdFx0b2Zmc2V0OiBbMCwgLTMyXSxcblx0XHRcdFx0XHRcdGNsYXNzTmFtZTogJ3Rvb2x0aXAtbWFya2VyJyxcblx0XHRcdFx0XHRcdGNsb3NlQnV0dG9uOiBmYWxzZSxcblx0XHRcdFx0XHRcdGFuY2hvcjogJ2JvdHRvbScsXG5cdFx0XHRcdFx0fSlcblx0XHRcdFx0XHRcdC5zZXRIVE1MKGA8ZGl2IGNsYXNzPVwiYW50LXRvb2x0aXAtaW5uZXIgdG9vbHRpcC1pbmZvLWxvY2F0aW9uXCI+JHtpdGVtLm5hbWV9PC9kaXY+YClcblx0XHRcdFx0XHRcdC5zZXRNYXhXaWR0aCgnMTUwcHgnKTtcblx0XHRcdFx0XHRlbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuXHRcdFx0XHRcdGVsLmlubmVySFRNTCA9IFJlYWN0RE9NU2VydmVyLnJlbmRlclRvU3RhdGljTWFya3VwKFxuXHRcdFx0XHRcdFx0PE1hcmtlclxuXHRcdFx0XHRcdFx0XHR0eXBlPVwiYXJvdW5kXCJcblx0XHRcdFx0XHRcdFx0cGxhY2U9e2l0ZW19XG5cdFx0XHRcdFx0XHRcdHBsYWNlX3NlbGVjdD17dGhpcy5wcm9wcy5hcm91bmRfcGxhY2Vfc2VsZWN0fVxuXHRcdFx0XHRcdFx0XHRpZD17YG1hcmtlci1hcm91bmQtJHtpfWB9XG5cdFx0XHRcdFx0XHQvPlxuXHRcdFx0XHRcdCk7XG5cdFx0XHRcdFx0dGhpcy5saXN0X21hcmtlcl9hcm91bmQucHVzaChcblx0XHRcdFx0XHRcdG5ldyBtYXBsaWJyZWdsLk1hcmtlcihlbCwgeyBhbmNob3I6ICdib3R0b20nIH0pXG5cdFx0XHRcdFx0XHRcdC5zZXRQb3B1cChwb3B1cClcblx0XHRcdFx0XHRcdFx0LnNldExuZ0xhdChbaXRlbS5sbmdfbGF0WzBdICogMSwgaXRlbS5sbmdfbGF0WzFdICogMV0pXG5cdFx0XHRcdFx0XHRcdC5hZGRUbyh0aGlzLm1hcClcblx0XHRcdFx0XHQpO1xuXHRcdFx0XHRcdGNvbnN0IG1hcmtlckRpdiA9IHRoaXMubGlzdF9tYXJrZXJfYXJvdW5kW2kgKyAxXS5nZXRFbGVtZW50KCk7XG5cblx0XHRcdFx0XHRtYXJrZXJEaXYuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4ge1xuXHRcdFx0XHRcdFx0ZS5zdG9wUHJvcGFnYXRpb24oKTtcblx0XHRcdFx0XHRcdHRoaXMucHJvcHMuZGlzcGF0Y2goc2V0UmVkTWFya2VyQWN0aW9uKGZhbHNlKSk7XG5cdFx0XHRcdFx0XHR0aGlzLl9zZWxlY3RBcm91bmRQbGFjZSgnYXJvdW5kJywgaXRlbSk7XG5cdFx0XHRcdFx0XHRpZiAocG9wdXAuaXNPcGVuKCkpIHtcblx0XHRcdFx0XHRcdFx0dGhpcy5saXN0X21hcmtlcl9hcm91bmRbaSArIDFdLnRvZ2dsZVBvcHVwKCk7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fSk7XG5cblx0XHRcdFx0XHRtYXJrZXJEaXYuYWRkRXZlbnRMaXN0ZW5lcignY29udGV4dG1lbnUnLCAoZSkgPT4ge1xuXHRcdFx0XHRcdFx0ZS5zdG9wUHJvcGFnYXRpb24oKTtcblx0XHRcdFx0XHRcdGUucHJldmVudERlZmF1bHQoKTtcblx0XHRcdFx0XHRcdHRoaXMucHJvcHMuZGlzcGF0Y2goc2V0UG9wdXBSaWdodENsaWNrKHRydWUsIHsgbG5nOiBpdGVtLmxuZ19sYXRbMF0gKiAxLCBsYXQ6IGl0ZW0ubG5nX2xhdFsxXSAqIDEgfSwgJ2Fyb3VuZCcpKTtcblx0XHRcdFx0XHRcdHRoaXMucHJvcHMuZGlzcGF0Y2goc2V0UmVkTWFya2VyQWN0aW9uKGZhbHNlKSk7XG5cdFx0XHRcdFx0fSk7XG5cblx0XHRcdFx0XHRtYXJrZXJEaXYuYWRkRXZlbnRMaXN0ZW5lcignbW91c2VlbnRlcicsICgpID0+IHRoaXMubGlzdF9tYXJrZXJfYXJvdW5kW2kgKyAxXS50b2dnbGVQb3B1cCgpKTtcblx0XHRcdFx0XHRtYXJrZXJEaXYuYWRkRXZlbnRMaXN0ZW5lcignbW91c2VsZWF2ZScsICgpID0+IHRoaXMubGlzdF9tYXJrZXJfYXJvdW5kW2kgKyAxXS50b2dnbGVQb3B1cCgpKTtcblx0XHRcdFx0fSk7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0aWYgKHRoaXMucHJvcHMuYm94VmlzaWJsZSA9PT0gJ2luZm8nICYmIHRoaXMucHJvcHMuY3VycmVudF9wbGFjZSkge1xuXHRcdFx0aWYgKCF0aGlzLm1hcmtlckN1cnJlbnRQbGFjZSkge1xuXHRcdFx0XHRjb25zdCBlbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuXHRcdFx0XHRlbC5pbm5lckhUTUwgPSBSZWFjdERPTVNlcnZlci5yZW5kZXJUb1N0YXRpY01hcmt1cChcblx0XHRcdFx0XHQvLyA8TWFya2VyIHR5cGU9XCJub3JtYWxcIiAvPlxuXHRcdFx0XHRcdDxkaXYgY2xhc3NOYW1lPVwibWFya2VyLWhpc3Rvcmllc1wiPlxuXHRcdFx0XHRcdFx0PGRpdj5cblx0XHRcdFx0XHRcdFx0PGltZ1xuXHRcdFx0XHRcdFx0XHRcdHNyYz17aW1hZ2VzLm1hcmtlcn1cblx0XHRcdFx0XHRcdFx0XHRhbHQ9XCJcIlxuXHRcdFx0XHRcdFx0XHQvPlxuXHRcdFx0XHRcdFx0PC9kaXY+XG5cdFx0XHRcdFx0PC9kaXY+XG5cdFx0XHRcdCk7XG5cdFx0XHRcdC8vIE1hcmtlciBpbmZvXG5cdFx0XHRcdHRoaXMubWFya2VyQ3VycmVudFBsYWNlID0gbmV3IG1hcGxpYnJlZ2wuTWFya2VyKHtcblx0XHRcdFx0XHRhbmNob3I6ICdib3R0b20nLFxuXHRcdFx0XHRcdGVsZW1lbnQ6IGVsLFxuXHRcdFx0XHR9KVxuXHRcdFx0XHRcdC5zZXRMbmdMYXQodGhpcy5wcm9wcy5jdXJyZW50X3BsYWNlPy5nZW9tZXRyeT8ubG9jYXRpb24pXG5cdFx0XHRcdFx0LmFkZFRvKHRoaXMubWFwKTtcblx0XHRcdFx0dGhpcy5tYXJrZXJDdXJyZW50UGxhY2UuZ2V0RWxlbWVudCgpLmFkZEV2ZW50TGlzdGVuZXIoJ2NvbnRleHRtZW51JywgKGUpID0+IHtcblx0XHRcdFx0XHRlLnN0b3BQcm9wYWdhdGlvbigpO1xuXHRcdFx0XHRcdGUucHJldmVudERlZmF1bHQoKTtcblx0XHRcdFx0XHRjb25zdCBsbmdMYXQgPSB0aGlzLm1hcmtlckN1cnJlbnRQbGFjZS5nZXRMbmdMYXQoKTtcblx0XHRcdFx0XHR0aGlzLnByb3BzLmRpc3BhdGNoKHNldFBvcHVwUmlnaHRDbGljayh0cnVlLCBsbmdMYXQsICdwb3B1cEN1cnJlbnRQbGFjZScpKTtcblx0XHRcdFx0fSk7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHR0aGlzLm1hcmtlckN1cnJlbnRQbGFjZS5zZXRMbmdMYXQodGhpcy5wcm9wcy5jdXJyZW50X3BsYWNlLmdlb21ldHJ5LmxvY2F0aW9uKS5hZGRUbyh0aGlzLm1hcCk7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0aWYgKHRoaXMucHJvcHMuYm94VmlzaWJsZSAhPT0gJ2luZm8nICYmIHRoaXMubWFya2VyQ3VycmVudFBsYWNlKSB7XG5cdFx0XHR0aGlzLm1hcmtlckN1cnJlbnRQbGFjZS5yZW1vdmUoKTtcblx0XHRcdHRoaXMubWFya2VyQ3VycmVudFBsYWNlID0gbnVsbDtcblx0XHR9XG5cdFx0aWYgKHRoaXMucHJvcHMuYm94VmlzaWJsZSA9PT0gJ2RldGFpbHNyZXN0YXVyYW50JyAmJiB0aGlzLnByb3BzLnJlc3RhdXJhbnREYXRhKSB7XG5cdFx0XHRpZiAodGhpcy5wcm9wcy5yZXN0YXVyYW50RGF0YS5sZW5ndGggIT09IDApIHtcblx0XHRcdFx0Zm9yIChsZXQgaXRlbSBvZiB0aGlzLnByb3BzLnJlc3RhdXJhbnREYXRhKSB7XG5cdFx0XHRcdFx0Y29uc3QgbWFya2VyX3Jlc3RhdXJhbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcblx0XHRcdFx0XHRtYXJrZXJfcmVzdGF1cmFudC5pbm5lckhUTUwgPSBSZWFjdERPTVNlcnZlci5yZW5kZXJUb1N0YXRpY01hcmt1cChcblx0XHRcdFx0XHRcdC8vIDxNYXJrZXJOYXZpZ2F0aW9uIGlkPVwiZW5kLW1hcmtlclwiIHR5cGU9XCJoaXN0b3JpZXNcIiAvPlxuXHRcdFx0XHRcdFx0PGRpdiBjbGFzc05hbWU9XCJtYXJrZXItaGlzdG9yaWVzXCI+XG5cdFx0XHRcdFx0XHRcdDxkaXY+XG5cdFx0XHRcdFx0XHRcdFx0PGltZ1xuXHRcdFx0XHRcdFx0XHRcdFx0c3JjPXtpbWFnZXMubWFya2VyfVxuXHRcdFx0XHRcdFx0XHRcdFx0YWx0PVwiXCJcblx0XHRcdFx0XHRcdFx0XHQvPlxuXHRcdFx0XHRcdFx0XHQ8L2Rpdj5cblx0XHRcdFx0XHRcdDwvZGl2PlxuXHRcdFx0XHRcdCk7XG5cdFx0XHRcdFx0dGhpcy5yZXN0YXVyYW50X21hcmtlciA9IG5ldyBtYXBsaWJyZWdsLk1hcmtlcih7XG5cdFx0XHRcdFx0XHRhbmNob3I6ICdjZW50ZXInLFxuXHRcdFx0XHRcdFx0ZWxlbWVudDogbWFya2VyX3Jlc3RhdXJhbnQsXG5cdFx0XHRcdFx0fSlcblx0XHRcdFx0XHRcdC8vIC5zZXRQb3B1cChwb3B1cClcblx0XHRcdFx0XHRcdC5zZXRMbmdMYXQoaXRlbS5nZW9tZXRyeS5sb2NhdGlvbilcblx0XHRcdFx0XHRcdC5hZGRUbyh0aGlzLm1hcCk7XG5cdFx0XHRcdFx0dGhpcy5saXN0UmVzdGF1cmFudC5wdXNoKHRoaXMucmVzdGF1cmFudF9tYXJrZXIpO1xuXHRcdFx0XHR9XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHQvLyBjb25zb2xlLmxvZygnQ8OzJylcblx0XHRcdFx0Zm9yIChsZXQgbWFya2VyIG9mIHRoaXMubGlzdFJlc3RhdXJhbnQpIHtcblx0XHRcdFx0XHRtYXJrZXIucmVtb3ZlKCk7XG5cdFx0XHRcdH1cblx0XHRcdFx0dGhpcy5saXN0UmVzdGF1cmFudCA9IFtdO1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdGlmICh0aGlzLnByb3BzLmJveFZpc2libGUgPT09ICdoaXN0b3J5Jykge1xuXHRcdFx0Zm9yIChsZXQgbWFya2VyIG9mIHRoaXMubGlzdEhpc3Rvcmllcykge1xuXHRcdFx0XHRtYXJrZXIucmVtb3ZlKCk7XG5cdFx0XHR9XG5cdFx0XHRmb3IgKGxldCBpdGVtIG9mIHRoaXMucHJvcHMuc2VhcmNoTG9jYWxTdG9yYWdlKSB7XG5cdFx0XHRcdGNvbnN0IG1hcmtlcl9oaXN0b3J5ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG5cdFx0XHRcdG1hcmtlcl9oaXN0b3J5LmlubmVySFRNTCA9IFJlYWN0RE9NU2VydmVyLnJlbmRlclRvU3RhdGljTWFya3VwKFxuXHRcdFx0XHRcdDxkaXYgY2xhc3NOYW1lPVwibWFya2VyLWhpc3Rvcmllc1wiPlxuXHRcdFx0XHRcdFx0PGRpdj5cblx0XHRcdFx0XHRcdFx0PGltZ1xuXHRcdFx0XHRcdFx0XHRcdHNyYz17aW1hZ2VzLm1hcmtlcn1cblx0XHRcdFx0XHRcdFx0XHRhbHQ9XCJcIlxuXHRcdFx0XHRcdFx0XHQvPlxuXHRcdFx0XHRcdFx0PC9kaXY+XG5cdFx0XHRcdFx0PC9kaXY+XG5cdFx0XHRcdCk7XG5cdFx0XHRcdHRoaXMuaGlzdG9yeV9tYXJrZXIgPSBuZXcgbWFwbGlicmVnbC5NYXJrZXIoe1xuXHRcdFx0XHRcdGFuY2hvcjogJ2NlbnRlcicsXG5cdFx0XHRcdFx0ZWxlbWVudDogbWFya2VyX2hpc3RvcnksXG5cdFx0XHRcdH0pXG5cdFx0XHRcdFx0LnNldExuZ0xhdChpdGVtLmxvY2F0aW9uKVxuXHRcdFx0XHRcdC5hZGRUbyh0aGlzLm1hcCk7XG5cdFx0XHRcdHRoaXMubGlzdEhpc3Rvcmllcy5wdXNoKHRoaXMuaGlzdG9yeV9tYXJrZXIpO1xuXHRcdFx0fVxuXHRcdH0gZWxzZSB7XG5cdFx0XHRmb3IgKGxldCBtYXJrZXIgb2YgdGhpcy5saXN0SGlzdG9yaWVzKSB7XG5cdFx0XHRcdG1hcmtlci5yZW1vdmUoKTtcblx0XHRcdH1cblx0XHR9XG5cblx0XHQvLyBpZiAodGhpcy5wcm9wcy5ib3hWaXNpYmxlID09PSBcImRldGFpbHNcIikge1xuXHRcdGlmICh0aGlzLnByb3BzLnJlc3VsdF9uYXZpZ2F0aW9uICYmIHRoaXMucHJvcHMuYm94VmlzaWJsZSA9PT0gJ2RldGFpbHMnKSB7XG5cdFx0XHRmb3IgKGxldCBzdGVwIG9mIHRoaXMucHJvcHMucmVzdWx0X25hdmlnYXRpb24uZmFzdGVzdFswXS5sZWdzWzBdLnN0ZXBzKSB7XG5cdFx0XHRcdGNvbnN0IHBvcHVwID0gbmV3IG1hcGxpYnJlZ2wuUG9wdXAoeyBvZmZzZXQ6IFswLCAtMzJdLCBjbGFzc05hbWU6ICd0b29sdGlwLW1hcmtlcicsIGNsb3NlQnV0dG9uOiBmYWxzZSwgYW5jaG9yOiAnYm90dG9tJyB9KS5zZXRIVE1MKGA8ZGl2IGNsYXNzPVwiYW50LXRvb2x0aXAtaW5uZXIgdG9vbHRpcC1pbmZvLWxvY2F0aW9uXCI+JHtzdGVwLmh0bWxfaW5zdHJ1Y3Rpb25zfTwvZGl2PmApLnNldE1heFdpZHRoKCcxNTBweCcpO1xuXHRcdFx0XHRjb25zdCBtYXJrZXJfc3RlcCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuXHRcdFx0XHRtYXJrZXJfc3RlcC5pbm5lckhUTUwgPSBSZWFjdERPTVNlcnZlci5yZW5kZXJUb1N0YXRpY01hcmt1cCg8ZGl2IGNsYXNzTmFtZT1cIm1hcmtlci1kZXRhaWxzXCI+PC9kaXY+KTtcblx0XHRcdFx0dGhpcy5zdGVwX21hcmtlciA9IG5ldyBtYXBsaWJyZWdsLk1hcmtlcih7IGFuY2hvcjogJ2NlbnRlcicsIGVsZW1lbnQ6IG1hcmtlcl9zdGVwIH0pLnNldFBvcHVwKHBvcHVwKS5zZXRMbmdMYXQoc3RlcC5lbmRfbG9jYXRpb24pLmFkZFRvKHRoaXMubWFwKTtcblx0XHRcdFx0dGhpcy5saXN0LnB1c2godGhpcy5zdGVwX21hcmtlcik7XG5cdFx0XHR9XG5cdFx0fSBlbHNlIHtcblx0XHRcdGZvciAobGV0IG1hcmtlciBvZiB0aGlzLmxpc3QpIHtcblx0XHRcdFx0bWFya2VyLnJlbW92ZSgpO1xuXHRcdFx0fVxuXHRcdFx0dGhpcy5saXN0ID0gW107XG5cdFx0fVxuXHRcdC8vIH1cblx0XHRpZiAodGhpcy5wcm9wcy5ib3hWaXNpYmxlID09PSAnbmF2aWdhdGlvbicgJiYgaXNNb2JpbGUpIHtcblx0XHRcdGlmICh0aGlzLnByb3BzLnJlc3VsdF9uYXZpZ2F0aW9uKSB7XG5cdFx0XHRcdGZvciAobGV0IHN0ZXAgb2YgdGhpcy5wcm9wcy5yZXN1bHRfbmF2aWdhdGlvbi5mYXN0ZXN0WzBdLmxlZ3NbMF0uc3RlcHMpIHtcblx0XHRcdFx0XHRjb25zdCBwb3B1cCA9IG5ldyBtYXBsaWJyZWdsLlBvcHVwKHsgb2Zmc2V0OiBbMCwgLTMyXSwgY2xhc3NOYW1lOiAndG9vbHRpcC1tYXJrZXInLCBjbG9zZUJ1dHRvbjogZmFsc2UsIGFuY2hvcjogJ2JvdHRvbScgfSkuc2V0SFRNTChgPGRpdiBjbGFzcz1cImFudC10b29sdGlwLWlubmVyIHRvb2x0aXAtaW5mby1sb2NhdGlvblwiPiR7c3RlcC5odG1sX2luc3RydWN0aW9uc308L2Rpdj5gKS5zZXRNYXhXaWR0aCgnMTUwcHgnKTtcblx0XHRcdFx0XHRjb25zdCBtYXJrZXJfc3RlcCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuXHRcdFx0XHRcdG1hcmtlcl9zdGVwLmlubmVySFRNTCA9IFJlYWN0RE9NU2VydmVyLnJlbmRlclRvU3RhdGljTWFya3VwKDxkaXYgY2xhc3NOYW1lPVwibWFya2VyLWRldGFpbHNcIj48L2Rpdj4pO1xuXHRcdFx0XHRcdHRoaXMuc3RlcF9tYXJrZXIgPSBuZXcgbWFwbGlicmVnbC5NYXJrZXIoeyBhbmNob3I6ICdjZW50ZXInLCBlbGVtZW50OiBtYXJrZXJfc3RlcCB9KS5zZXRQb3B1cChwb3B1cCkuc2V0TG5nTGF0KHN0ZXAuZW5kX2xvY2F0aW9uKS5hZGRUbyh0aGlzLm1hcCk7XG5cdFx0XHRcdFx0dGhpcy5saXN0LnB1c2godGhpcy5zdGVwX21hcmtlcik7XG5cdFx0XHRcdH1cblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdGZvciAobGV0IG1hcmtlciBvZiB0aGlzLmxpc3QpIHtcblx0XHRcdFx0XHRtYXJrZXIucmVtb3ZlKCk7XG5cdFx0XHRcdH1cblx0XHRcdFx0dGhpcy5saXN0ID0gW107XG5cdFx0XHR9XG5cdFx0fVxuXHR9XG5cblx0ZGVjb2RlUG9seWxpbmUoZW5jb2RlZCkge1xuXHRcdHZhciBwb2ludHMgPSBbXTtcblx0XHR2YXIgaW5kZXggPSAwLFxuXHRcdFx0bGVuID0gZW5jb2RlZC5sZW5ndGg7XG5cdFx0dmFyIGxhdCA9IDAsXG5cdFx0XHRsbmcgPSAwO1xuXG5cdFx0d2hpbGUgKGluZGV4IDwgbGVuKSB7XG5cdFx0XHR2YXIgYixcblx0XHRcdFx0c2hpZnQgPSAwLFxuXHRcdFx0XHRyZXN1bHQgPSAwO1xuXHRcdFx0ZG8ge1xuXHRcdFx0XHRiID0gZW5jb2RlZC5jaGFyQXQoaW5kZXgrKykuY2hhckNvZGVBdCgwKSAtIDYzO1xuXHRcdFx0XHRyZXN1bHQgfD0gKGIgJiAweDFmKSA8PCBzaGlmdDtcblx0XHRcdFx0c2hpZnQgKz0gNTtcblx0XHRcdH0gd2hpbGUgKGIgPj0gMHgyMCk7XG5cdFx0XHR2YXIgZGxhdCA9IHJlc3VsdCAmIDEgPyB+KHJlc3VsdCA+PiAxKSA6IHJlc3VsdCA+PiAxO1xuXHRcdFx0bGF0ICs9IGRsYXQ7XG5cblx0XHRcdHNoaWZ0ID0gMDtcblx0XHRcdHJlc3VsdCA9IDA7XG5cdFx0XHRkbyB7XG5cdFx0XHRcdGIgPSBlbmNvZGVkLmNoYXJBdChpbmRleCsrKS5jaGFyQ29kZUF0KDApIC0gNjM7XG5cdFx0XHRcdHJlc3VsdCB8PSAoYiAmIDB4MWYpIDw8IHNoaWZ0O1xuXHRcdFx0XHRzaGlmdCArPSA1O1xuXHRcdFx0fSB3aGlsZSAoYiA+PSAweDIwKTtcblx0XHRcdHZhciBkbG5nID0gcmVzdWx0ICYgMSA/IH4ocmVzdWx0ID4+IDEpIDogcmVzdWx0ID4+IDE7XG5cdFx0XHRsbmcgKz0gZGxuZztcblxuXHRcdFx0cG9pbnRzLnB1c2goW2xuZyAqIDFlLTUsIGxhdCAqIDFlLTVdKTtcblx0XHR9XG5cblx0XHRyZXR1cm4gcG9pbnRzO1xuXHR9XG5cblx0Y2hhbmdlU3R5bGUgPSAoKSA9PiB7XG5cdFx0Y29uc3QgeyBzdHlsZSB9ID0gdGhpcy5zdGF0ZTtcblx0XHRpZiAoc3R5bGUgPT09IFNUWUxFX1VSTC5TQVRFTElURSArIFNUWUxFX0tFWSkge1xuXHRcdFx0dGhpcy5zZXRTdGF0ZSh7XG5cdFx0XHRcdHN0eWxlOiBTVFlMRV9VUkwuTk9STUFMICsgU1RZTEVfS0VZLFxuXHRcdFx0fSk7XG5cdFx0XHR0aGlzLm1hcC5zZXRTdHlsZShTVFlMRV9VUkwuTk9STUFMICsgU1RZTEVfS0VZKTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0dGhpcy5zZXRTdGF0ZSh7XG5cdFx0XHRcdHN0eWxlOiBTVFlMRV9VUkwuU0FURUxJVEUgKyBTVFlMRV9LRVksXG5cdFx0XHR9KTtcblx0XHRcdHRoaXMubWFwLnNldFN0eWxlKFNUWUxFX1VSTC5TQVRFTElURSArIFNUWUxFX0tFWSk7XG5cdFx0fVxuXHR9O1xuXG5cdGNvbXBvbmVudERpZE1vdW50KCkge1xuXHRcdHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdzdG9yYWdlJywgdGhpcy5oYW5kbGVTdG9yYWdlQ2hhbmdlKTtcblx0XHQvLyBjb25zb2xlLmxvZyhTVFlMRV9VUkwuTk9STUFMKVxuXHRcdGNvbnN0IHNlbGVjdGVkUGxhY2UgPSB0aGlzLnByb3BzLmN1cnJlbnRfcGxhY2U7XG5cdFx0dGhpcy5tYXAgPSBuZXcgbWFwbGlicmVnbC5NYXAoe1xuXHRcdFx0Y29udGFpbmVyOiAnbWFwJywgLy8gY29udGFpbmVyIGlkXG5cdFx0XHRzdHlsZTogU1RZTEVfVVJMLk5PUk1BTCArIFNUWUxFX0tFWSxcblx0XHRcdGNlbnRlcjogc2VsZWN0ZWRQbGFjZSA/IFtzZWxlY3RlZFBsYWNlLmdlb21ldHJ5LmxvY2F0aW9uLmxuZywgc2VsZWN0ZWRQbGFjZS5nZW9tZXRyeS5sb2NhdGlvbi5sYXRdIDogW0RFRkFVTFRfVklFV1BPUlQubG9uZ2l0dWRlLCBERUZBVUxUX1ZJRVdQT1JULmxhdGl0dWRlXSwgLy8gc3RhcnRpbmcgcG9zaXRpb24gW2xuZywgbGF0XVxuXHRcdFx0em9vbTogREVGQVVMVF9WSUVXUE9SVC56b29tLCAvLyBzdGFydGluZyB6b29tXG5cdFx0fSk7XG5cdFx0aWYgKHNlbGVjdGVkUGxhY2UpIHRoaXMucHJvcHMuZGlzcGF0Y2goc2V0UmVkTWFya2VyQWN0aW9uKHRydWUsIHNlbGVjdGVkUGxhY2UuZ2VvbWV0cnkubG9jYXRpb24pKTtcblxuXHRcdHRoaXMubmF2aWdhdGlvbiA9IG5ldyBtYXBsaWJyZWdsLk5hdmlnYXRpb25Db250cm9sKCk7XG5cdFx0dGhpcy5nZW9sb2NhdGVDb250cm9sID0gbmV3IG1hcGxpYnJlZ2wuR2VvbG9jYXRlQ29udHJvbCh7XG5cdFx0XHRwb3NpdGlvbk9wdGlvbnM6IHtcblx0XHRcdFx0ZW5hYmxlSGlnaEFjY3VyYWN5OiB0cnVlLFxuXHRcdFx0fSxcblx0XHRcdC8vIELhuq10IHThuq90IGhp4buDbiBi4buLIHbhu4sgdHLDrVxuXHRcdFx0dHJhY2tVc2VyTG9jYXRpb246IHRydWUsXG5cdFx0XHQvLyBIaeG7g24gdGjhu4tcblx0XHRcdHNob3dVc2VyTG9jYXRpb246IHRydWUsXG5cdFx0XHQvLyBU4bqvdCB2w7JuZyB0csOybiB0b1xuXHRcdFx0c2hvd0FjY3VyYWN5Q2lyY2xlOiBmYWxzZSxcblx0XHRcdC8vIMSQaeG7gXUgY2jhu4luaCBt4bupYyB6b29tIMSR4bq/biB24buLIHRyw60gY+G7p2EgbcOsbmhcblx0XHRcdGZpdEJvdW5kc09wdGlvbnM6IHtcblx0XHRcdFx0bWF4Wm9vbTogMTUsXG5cdFx0XHR9LFxuXHRcdH0pO1xuXG5cdFx0dGhpcy5nZW9sb2NhdGVDb250cm9sLm9uKCdlcnJvcicsICgpID0+IHtcblx0XHRcdG1lc3NhZ2Uud2FybmluZygnR29vbmcga2jDtG5nIHRo4buDIGzhuqV5IMSR4buLYSDEkWnhu4NtIGhp4buHbiB04bqhaSBj4bunYSBi4bqhbiAhJyk7XG5cdFx0fSk7XG5cblx0XHR0aGlzLmdlb2xvY2F0ZUNvbnRyb2wub24oJ2dlb2xvY2F0ZScsIChlKSA9PiB7XG5cdFx0XHR0aGlzLnByb3BzLmRpc3BhdGNoKFxuXHRcdFx0XHRzZXRNeUxvY2F0aW9uQWN0aW9uKHtcblx0XHRcdFx0XHRsYXRpdHVkZTogZS5jb29yZHMubGF0aXR1ZGUsXG5cdFx0XHRcdFx0bG9uZ2l0dWRlOiBlLmNvb3Jkcy5sb25naXR1ZGUsXG5cdFx0XHRcdH0pXG5cdFx0XHQpO1xuXHRcdH0pO1xuXG5cdFx0IWlzTW9iaWxlICYmIHRoaXMubWFwLmFkZENvbnRyb2wodGhpcy5uYXZpZ2F0aW9uKTtcblx0XHQhaXNNb2JpbGUgJiYgdGhpcy5tYXAuYWRkQ29udHJvbCh0aGlzLmdlb2xvY2F0ZUNvbnRyb2wpO1xuXG5cdFx0dGhpcy5tYXAub24oJ2NsaWNrJywgdGhpcy5fb25Nb3VzZUNsaWNrKTtcblx0XHR0aGlzLm1hcC5vbignY29udGV4dG1lbnUnLCB0aGlzLl9vblJpZ2h0Q2xpY2spO1xuXHRcdHRoaXMubWFwLm9uKCdsb2FkJywgKCkgPT4ge1xuXHRcdFx0dGhpcy5tYXAucmVzaXplKCk7XG5cblx0XHRcdGNvbnN0IHBpZCA9IG5ldyBVUkxTZWFyY2hQYXJhbXMod2luZG93LmxvY2F0aW9uLnNlYXJjaCkuZ2V0KCdwaWQnKTtcblx0XHRcdGNvbnN0IGxvY2F0aW9uID0gbmV3IFVSTFNlYXJjaFBhcmFtcyh3aW5kb3cubG9jYXRpb24uc2VhcmNoKS5nZXQoJ2xvY2F0aW9uJyk/LnNwbGl0KCcsJyk7XG5cdFx0XHRjb25zdCBwaWRfYXJvdW5kID0gbmV3IFVSTFNlYXJjaFBhcmFtcyh3aW5kb3cubG9jYXRpb24uc2VhcmNoKS5nZXQoJ3BpZF9hcm91bmQnKTtcblx0XHRcdGNvbnN0IGRpcmVjdGlvbl9pbmZvciA9IG5ldyBVUkxTZWFyY2hQYXJhbXMod2luZG93LmxvY2F0aW9uLnNlYXJjaCkuZ2V0KCdkaXJlY3Rpb24nKTtcblx0XHRcdGlmICghZGlyZWN0aW9uX2luZm9yICYmICFwaWQgJiYgIWxvY2F0aW9uICYmICFwaWRfYXJvdW5kICYmICF0aGlzLnByb3BzLmN1cnJlbnRfcGxhY2UpIHRoaXMuZ2VvbG9jYXRlQ29udHJvbD8udHJpZ2dlcigpO1xuXHRcdFx0ZWxzZSB7XG5cdFx0XHRcdGlmIChuYXZpZ2F0b3IuZ2VvbG9jYXRpb24pIHtcblx0XHRcdFx0XHRuYXZpZ2F0b3IuZ2VvbG9jYXRpb24uZ2V0Q3VycmVudFBvc2l0aW9uKChwb3NpdGlvbikgPT4ge1xuXHRcdFx0XHRcdFx0dGhpcy5wcm9wcy5kaXNwYXRjaChcblx0XHRcdFx0XHRcdFx0c2V0TXlMb2NhdGlvbkFjdGlvbih7XG5cdFx0XHRcdFx0XHRcdFx0bGF0aXR1ZGU6IHBvc2l0aW9uLmNvb3Jkcy5sYXRpdHVkZSxcblx0XHRcdFx0XHRcdFx0XHRsb25naXR1ZGU6IHBvc2l0aW9uLmNvb3Jkcy5sb25naXR1ZGUsXG5cdFx0XHRcdFx0XHRcdH0pXG5cdFx0XHRcdFx0XHQpO1xuXHRcdFx0XHRcdH0pO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fSk7XG5cblx0XHR0aGlzLm1hcC5vbignbW92ZScsICgpID0+IHtcblx0XHRcdHRoaXMucHJvcHMuZGlzcGF0Y2goXG5cdFx0XHRcdHNldENlbnRlckxhdExuZ0FjdGlvbih7XG5cdFx0XHRcdFx0bGF0aXR1ZGU6IHRoaXMubWFwLmdldENlbnRlcigpLmxhdCxcblx0XHRcdFx0XHRsb25naXR1ZGU6IHRoaXMubWFwLmdldENlbnRlcigpLmxuZyxcblx0XHRcdFx0fSlcblx0XHRcdCk7XG5cdFx0fSk7XG5cdFx0dGhpcy5tYXAub24oJ3N0eWxlLmxvYWQnLCAoKSA9PiB7XG5cdFx0XHR0aGlzLm1hcD8uYWRkTGF5ZXIoe1xuXHRcdFx0XHRpZDogJzNkLWJ1aWxkaW5ncycsXG5cdFx0XHRcdHNvdXJjZTogJ2NvbXBvc2l0ZScsXG5cdFx0XHRcdCdzb3VyY2UtbGF5ZXInOiAnVk5fQnVpbGRpbmcnLFxuXHRcdFx0XHRmaWx0ZXI6IFsnPT0nLCAnZXh0cnVkZScsICd0cnVlJ10sXG5cdFx0XHRcdHR5cGU6ICdmaWxsLWV4dHJ1c2lvbicsXG5cdFx0XHRcdG1pbnpvb206IDE1LFxuXHRcdFx0XHRwYWludDoge1xuXHRcdFx0XHRcdCdmaWxsLWV4dHJ1c2lvbi1jb2xvcic6ICcjYWFhJyxcblx0XHRcdFx0XHQnZmlsbC1leHRydXNpb24taGVpZ2h0Jzoge1xuXHRcdFx0XHRcdFx0dHlwZTogJ2lkZW50aXR5Jyxcblx0XHRcdFx0XHRcdHByb3BlcnR5OiAnaGVpZ2h0Jyxcblx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdCdmaWxsLWV4dHJ1c2lvbi1iYXNlJzoge1xuXHRcdFx0XHRcdFx0dHlwZTogJ2lkZW50aXR5Jyxcblx0XHRcdFx0XHRcdHByb3BlcnR5OiAnbWluX2hlaWdodCcsXG5cdFx0XHRcdFx0fSxcblx0XHRcdFx0XHQnZmlsbC1leHRydXNpb24tb3BhY2l0eSc6IDAuNCxcblx0XHRcdFx0fSxcblx0XHRcdH0pO1xuXHRcdFx0aWYgKHRoaXMucHJvcHMucmVzdWx0X25hdmlnYXRpb24pIHtcblx0XHRcdFx0aWYgKHRoaXMucHJvcHMucmVzdWx0X3NlbGVjdCA9PT0gJ2Zhc3Rlc3QnKSB7XG5cdFx0XHRcdFx0dGhpcy5wcm9wcy5kaXNwYXRjaChzZWxlY3RSZXN1bHRBY3Rpb24oJ3Nob3J0ZXN0JykpO1xuXHRcdFx0XHRcdHRoaXMucHJvcHMuZGlzcGF0Y2goc2VsZWN0UmVzdWx0QWN0aW9uKCdmYXN0ZXN0JykpO1xuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdHRoaXMucHJvcHMuZGlzcGF0Y2goc2VsZWN0UmVzdWx0QWN0aW9uKCdmYXN0ZXN0JykpO1xuXHRcdFx0XHRcdHRoaXMucHJvcHMuZGlzcGF0Y2goc2VsZWN0UmVzdWx0QWN0aW9uKCdzaG9ydGVzdCcpKTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH0pO1xuXHRcdGRvY3VtZW50LmJvZHkuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLl9vbkNsaWNrTWVudSk7XG5cdFx0Ly8gdGhpcy5tYXAub24oJ2NsaWNrJywgJ3JvdXRlLWxheWVyLWZhc3Rlc3QnLCAoZSkgPT4ge1xuXHRcdC8vICAgY29uc29sZS5sb2coZSwgJ2Zhc3Rlc3QnKTtcblx0XHQvLyAgIGUub3JpZ2luYWxFdmVudC5zdG9wUHJvcGFnYXRpb24oKTtcblx0XHQvLyAgIGUub3JpZ2luYWxFdmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuXHRcdC8vIH0pO1xuXG5cdFx0Ly8gdGhpcy5tYXAub24oJ2NsaWNrJywgJ3JvdXRlLWxheWVyLXNob3J0ZXN0JywgKGUpID0+IHtcblx0XHQvLyAgIGNvbnNvbGUubG9nKGUpXG5cdFx0Ly8gfSk7XG5cblx0XHRjb25zdCBkaXJlY3Rpb25faW5mb3IgPSBuZXcgVVJMU2VhcmNoUGFyYW1zKHdpbmRvdy5sb2NhdGlvbi5zZWFyY2gpLmdldCgnZGlyZWN0aW9uJyk7XG5cdFx0Y29uc3QgaWZyYW1lID0gbmV3IFVSTFNlYXJjaFBhcmFtcyh3aW5kb3cubG9jYXRpb24uc2VhcmNoKS5nZXQoJ2lmcmFtZScpO1xuXHRcdGlmIChkaXJlY3Rpb25faW5mb3IpIHtcblx0XHRcdGNvbnN0IGNvb3JfZnJvbSA9IHtcblx0XHRcdFx0bGF0OiBkaXJlY3Rpb25faW5mb3Iuc3BsaXQoJyYnKVswXS5zcGxpdCgnLCcpWzBdLFxuXHRcdFx0XHRsbmc6IGRpcmVjdGlvbl9pbmZvci5zcGxpdCgnJicpWzBdLnNwbGl0KCcsJylbMV0sXG5cdFx0XHR9O1xuXHRcdFx0Y29uc3QgY29vcl90byA9IHtcblx0XHRcdFx0bGF0OiBkaXJlY3Rpb25faW5mb3Iuc3BsaXQoJyYnKVsxXS5zcGxpdCgnLCcpWzBdLFxuXHRcdFx0XHRsbmc6IGRpcmVjdGlvbl9pbmZvci5zcGxpdCgnJicpWzFdLnNwbGl0KCcsJylbMV0sXG5cdFx0XHR9O1xuXHRcdFx0aWYgKGNvb3JfZnJvbS5sYXQgJiYgY29vcl9mcm9tLmxuZyAmJiBjb29yX3RvLmxhdCAmJiBjb29yX3RvLmxuZykge1xuXHRcdFx0XHQvLyB0aGlzLmhhbmRsZUZyb21IZXJlKGNvb3JfZnJvbS5sYXQsIGNvb3JfZnJvbS5sbmcpO1xuXHRcdFx0XHQvLyB0aGlzLmhhbmRsZVRvSGVyZShjb29yX3RvLmxhdCwgY29vcl90by5sbmcpO1xuXHRcdFx0XHRpZiAoaWZyYW1lICE9IG51bGwpIHtcblx0XHRcdFx0XHR0aGlzLm5hdmlnYXRpb25CeVVSTElmcmFtZShjb29yX2Zyb20sIGNvb3JfdG8pO1xuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdHRoaXMubmF2aWdhdGlvbkJ5VVJMKGNvb3JfZnJvbSwgY29vcl90byk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cblx0XHQvLyBGZXRjaCBwYXJraW5nIGxvdHNcblx0XHR0aGlzLnByb3BzLmRpc3BhdGNoKGdldFBhcmtpbmdMb3RzUmVxdWVzdCgpKTtcblx0fVxuXG5cdG5hdmlnYXRpb25CeVVSTElmcmFtZSA9IGFzeW5jIChmcm9tLCB0bykgPT4ge1xuXHRcdHRoaXMucHJvcHMuZGlzcGF0Y2goc2V0Qm94VmlzaWJsZUFjdGlvbignaWZyYW1lJykpO1xuXG5cdFx0dGhpcy5wcm9wcy5kaXNwYXRjaChzZXRSZWRNYXJrZXJBY3Rpb24oZmFsc2UpKTtcblx0XHR0aGlzLmNoYW5nZVZpc2libGVCb3R0b21JbmZvKGZhbHNlKTtcblx0XHRsZXQgZnJvbXBsYWNlO1xuXHRcdGlmICghZnJvbS5sYXQgfHwgIWZyb20ubG5nKSBmcm9tcGxhY2UgPSBhd2FpdCB0aGlzLl9nZXRJbmZvclBsYWNlKCk7XG5cdFx0ZWxzZSB7XG5cdFx0XHRmcm9tcGxhY2UgPSBhd2FpdCB0aGlzLl9nZXRJbmZvclBsYWNlKGZyb20ubGF0LCBmcm9tLmxuZyk7XG5cdFx0fVxuXHRcdGF3YWl0IHRoaXMucHJvcHMuZGlzcGF0Y2gobmF2aWdhdGlvbkZyb21BY3Rpb24oZnJvbXBsYWNlLCBgJHtmcm9tcGxhY2UubmFtZX0gLSAke2Zyb21wbGFjZS5mb3JtYXR0ZWRfYWRkcmVzc31gKSk7XG5cdFx0bGV0IHRvcGxhY2U7XG5cdFx0aWYgKCF0by5sYXQgfHwgIXRvLmxuZykgdG9wbGFjZSA9IGF3YWl0IHRoaXMuX2dldEluZm9yUGxhY2UoKTtcblx0XHRlbHNlIHtcblx0XHRcdHRvcGxhY2UgPSBhd2FpdCB0aGlzLl9nZXRJbmZvclBsYWNlKHRvLmxhdCwgdG8ubG5nKTtcblx0XHR9XG5cdFx0YXdhaXQgdGhpcy5wcm9wcy5kaXNwYXRjaChuYXZpZ2F0aW9uVG9BY3Rpb24odG9wbGFjZSwgYCR7dG9wbGFjZS5uYW1lfSAtICR7dG9wbGFjZS5mb3JtYXR0ZWRfYWRkcmVzc31gKSk7XG5cdFx0dGhpcy5wcm9wcy5kaXNwYXRjaChuYXZpZ2F0aW9uQWN0aW9uKHRoaXMucHJvcHMuZnJvbV9wbGFjZSwgdGhpcy5wcm9wcy50b19wbGFjZSwgJ2NhcicpKTtcblx0fTtcblxuXHRuYXZpZ2F0aW9uQnlVUkwgPSBhc3luYyAoZnJvbSwgdG8pID0+IHtcblx0XHR0aGlzLnByb3BzLmRpc3BhdGNoKHNldEJveFZpc2libGVBY3Rpb24oJ25hdmlnYXRpb24nKSk7XG5cdFx0dGhpcy5wcm9wcy5kaXNwYXRjaChzZXRSZWRNYXJrZXJBY3Rpb24oZmFsc2UpKTtcblx0XHR0aGlzLmNoYW5nZVZpc2libGVCb3R0b21JbmZvKGZhbHNlKTtcblx0XHRsZXQgZnJvbXBsYWNlO1xuXHRcdGlmICghZnJvbS5sYXQgfHwgIWZyb20ubG5nKSBmcm9tcGxhY2UgPSBhd2FpdCB0aGlzLl9nZXRJbmZvclBsYWNlKCk7XG5cdFx0ZWxzZSB7XG5cdFx0XHRmcm9tcGxhY2UgPSBhd2FpdCB0aGlzLl9nZXRJbmZvclBsYWNlKGZyb20ubGF0LCBmcm9tLmxuZyk7XG5cdFx0fVxuXHRcdGF3YWl0IHRoaXMucHJvcHMuZGlzcGF0Y2gobmF2aWdhdGlvbkZyb21BY3Rpb24oZnJvbXBsYWNlLCBgJHtmcm9tcGxhY2UubmFtZX0gLSAke2Zyb21wbGFjZS5mb3JtYXR0ZWRfYWRkcmVzc31gKSk7XG5cdFx0bGV0IHRvcGxhY2U7XG5cdFx0aWYgKCF0by5sYXQgfHwgIXRvLmxuZykgdG9wbGFjZSA9IGF3YWl0IHRoaXMuX2dldEluZm9yUGxhY2UoKTtcblx0XHRlbHNlIHtcblx0XHRcdHRvcGxhY2UgPSBhd2FpdCB0aGlzLl9nZXRJbmZvclBsYWNlKHRvLmxhdCwgdG8ubG5nKTtcblx0XHR9XG5cdFx0YXdhaXQgdGhpcy5wcm9wcy5kaXNwYXRjaChuYXZpZ2F0aW9uVG9BY3Rpb24odG9wbGFjZSwgYCR7dG9wbGFjZS5uYW1lfSAtICR7dG9wbGFjZS5mb3JtYXR0ZWRfYWRkcmVzc31gKSk7XG5cdH07XG5cblx0Y29tcG9uZW50V2lsbFVubW91bnQoKSB7XG5cdFx0d2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3N0b3JhZ2UnLCB0aGlzLmhhbmRsZVN0b3JhZ2VDaGFuZ2UpO1xuXHRcdGRvY3VtZW50LmJvZHkucmVtb3ZlRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLl9vbkNsaWNrTWVudSk7XG5cdH1cblxuXHRoYW5kbGVTdG9yYWdlQ2hhbmdlID0gKGV2ZW50KSA9PiB7XG5cdFx0Y29uc29sZS5sb2coJ29wcGFvcGFvcGEnKTtcblx0XHRpZiAoZXZlbnQua2V5ID09PSAnc2VhcmNoX2hpc3RvcnknKSB7XG5cdFx0XHR0aGlzLnNldFN0YXRlKHsgdmFsdWU6IGV2ZW50Lm5ld1ZhbHVlIH0pO1xuXHRcdH1cblx0fTtcblxuXHRyZW5kZXJQYXJraW5nTG90cyA9ICgpID0+IHtcblx0XHRjb25zdCB7IHBhcmtpbmdMb3RzIH0gPSB0aGlzLnByb3BzO1xuXG5cdFx0cmV0dXJuIHBhcmtpbmdMb3RzPy5tYXAobG90ID0+IHtcblx0XHRcdC8vIFThuqFvIGVsZW1lbnQgY2hvIG1hcmtlclxuXHRcdFx0Y29uc3QgZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcblx0XHRcdGVsLmNsYXNzTmFtZSA9ICdtYXJrZXIgcGFya2luZy1tYXJrZXInO1xuXHRcdFx0ZWwuaW5uZXJIVE1MID0gYFxuXHRcdFx0XHQ8ZGl2IGNsYXNzPVwibWFya2VyLWNvbnRlbnRcIj5QPC9kaXY+XG5cdFx0XHRcdDxkaXYgY2xhc3M9XCJtYXJrZXItaW5mb1wiPlxuXHRcdFx0XHRcdDxoMz4ke2xvdC5uYW1lfTwvaDM+XG5cdFx0XHRcdFx0PHA+JHtsb3QuYWRkcmVzc308L3A+XG5cdFx0XHRcdFx0PHA+QXZhaWxhYmxlOiAke2xvdC5hdmFpbGFibGVTcG90c30vJHtsb3QuY2FwYWNpdHl9PC9wPlxuXHRcdFx0XHQ8L2Rpdj5cblx0XHRcdGA7XG5cblx0XHRcdC8vIFThuqFvIG1hcmtlciB0aGVvIGRvY3MgY+G7p2EgR29vbmdcblx0XHRcdGNvbnN0IG1hcmtlciA9IG5ldyBtYXBsaWJyZWdsLk1hcmtlcih7XG5cdFx0XHRcdGVsZW1lbnQ6IGVsLFxuXHRcdFx0XHRhbmNob3I6ICdib3R0b20nLFxuXHRcdFx0XHRvZmZzZXQ6IFswLCAtMTBdXG5cdFx0XHR9KVxuXHRcdFx0LnNldExuZ0xhdChbbG90LmxvbmdpdHVkZSwgbG90LmxhdGl0dWRlXSlcblx0XHRcdC5hZGRUbyh0aGlzLm1hcCk7XG5cblx0XHRcdC8vIFRow6ptIHPhu7Ega2nhu4duIGNsaWNrXG5cdFx0XHRtYXJrZXIuZ2V0RWxlbWVudCgpLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuXHRcdFx0XHR0aGlzLmhhbmRsZVBhcmtpbmdMb3RDbGljayhsb3QpO1xuXHRcdFx0fSk7XG5cblx0XHRcdHJldHVybiBtYXJrZXI7XG5cdFx0fSk7XG5cdH07XG5cblx0aGFuZGxlUGFya2luZ0xvdENsaWNrID0gKGxvdCkgPT4ge1xuXHRcdC8vIFpvb20gxJHhur9uIHbhu4sgdHLDrSBwYXJraW5nIGxvdFxuXHRcdHRoaXMubWFwLmZseVRvKHtcblx0XHRcdGNlbnRlcjogW2xvdC5sb25naXR1ZGUsIGxvdC5sYXRpdHVkZV0sXG5cdFx0XHR6b29tOiAxNVxuXHRcdH0pO1xuXG5cdFx0Ly8gSGnhu4NuIHRo4buLIHRow7RuZyB0aW5cblx0XHR0aGlzLnNldFN0YXRlKHtcblx0XHRcdGJvdHRvbUluZm9WaXNpYmxlOiB0cnVlLFxuXHRcdFx0cGxhY2VNb3VzZUNsaWNrOiB7XG5cdFx0XHRcdG5hbWU6IGxvdC5uYW1lLFxuXHRcdFx0XHRmb3JtYXR0ZWRfYWRkcmVzczogbG90LmFkZHJlc3MsXG5cdFx0XHRcdGdlb21ldHJ5OiB7XG5cdFx0XHRcdFx0bG9jYXRpb246IHtcblx0XHRcdFx0XHRcdGxhdDogbG90LmxhdGl0dWRlLFxuXHRcdFx0XHRcdFx0bG5nOiBsb3QubG9uZ2l0dWRlXG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fSk7XG5cdH07XG5cblx0cmVuZGVyKCkge1xuXHRcdGNvbnN0IHsgc3R5bGUsIGJvdHRvbUluZm9WaXNpYmxlLCBwbGFjZU1vdXNlQ2xpY2sgfSA9IHRoaXMuc3RhdGU7XG5cblx0XHRyZXR1cm4gKFxuXHRcdFx0PFJlYWN0LkZyYWdtZW50PlxuXHRcdFx0XHQ8RGl2MTAwdmg+XG5cdFx0XHRcdFx0PGRpdiBpZD1cIm1hcFwiPnt0aGlzLnJlbmRlclBhcmtpbmdMb3RzKCl9PC9kaXY+XG5cdFx0XHRcdFx0PGRpdj5cblx0XHRcdFx0XHRcdHshaXNNb2JpbGUgJiYgKFxuXHRcdFx0XHRcdFx0XHQ8QXZhdGFyXG5cdFx0XHRcdFx0XHRcdFx0c2hhcGU9XCJzcXVhcmVcIlxuXHRcdFx0XHRcdFx0XHRcdHNpemU9ezY0fVxuXHRcdFx0XHRcdFx0XHRcdG9uQ2xpY2s9e3RoaXMuY2hhbmdlU3R5bGV9XG5cdFx0XHRcdFx0XHRcdFx0Y2xhc3NOYW1lPVwiY2hhbmdlLXN0YXR1cy1idXR0b25cIlxuXHRcdFx0XHRcdFx0XHRcdHN0eWxlPXt7XG5cdFx0XHRcdFx0XHRcdFx0XHRiYWNrZ3JvdW5kSW1hZ2U6IHN0eWxlID09PSBTVFlMRV9VUkwuTk9STUFMICsgU1RZTEVfS0VZID8gYHVybCgke3NhdGVsbGl0ZV9pbWd9KWAgOiBgdXJsKCR7bm9ybWFsX21hcF9pbWd9KWAsXG5cdFx0XHRcdFx0XHRcdFx0fX1cblx0XHRcdFx0XHRcdFx0Lz5cblx0XHRcdFx0XHRcdCl9XG5cdFx0XHRcdFx0XHR7aXNNb2JpbGUgJiYgKFxuXHRcdFx0XHRcdFx0XHQ8QXZhdGFyXG5cdFx0XHRcdFx0XHRcdFx0c2hhcGU9XCJzcXVhcmVcIlxuXHRcdFx0XHRcdFx0XHRcdHNpemU9ezY0fVxuXHRcdFx0XHRcdFx0XHRcdG9uQ2xpY2s9e3RoaXMuY2hhbmdlU3R5bGV9XG5cdFx0XHRcdFx0XHRcdFx0Y2xhc3NOYW1lPVwiY2hhbmdlLXN0YXR1cy1idXR0b25cIlxuXHRcdFx0XHRcdFx0XHRcdC8vIGlkPSdjaGFuZ2Utc3RhdHVzLWJ1dHRvbi0tbW9iaWxlJ1xuXHRcdFx0XHRcdFx0XHRcdHN0eWxlPXt7XG5cdFx0XHRcdFx0XHRcdFx0XHRiYWNrZ3JvdW5kSW1hZ2U6IHN0eWxlID09PSBTVFlMRV9VUkwuTk9STUFMICsgU1RZTEVfS0VZID8gYHVybCgke3NhdGVsbGl0ZV9pbWd9KWAgOiBgdXJsKCR7bm9ybWFsX21hcF9pbWd9KWAsXG5cdFx0XHRcdFx0XHRcdFx0fX1cblx0XHRcdFx0XHRcdFx0Lz5cblx0XHRcdFx0XHRcdCl9XG5cdFx0XHRcdFx0PC9kaXY+XG5cdFx0XHRcdFx0e2JvdHRvbUluZm9WaXNpYmxlICYmIChcblx0XHRcdFx0XHRcdDxCb3R0b21JbmZvTG9jYXRpb25cblx0XHRcdFx0XHRcdFx0Y2hhbmdlVmlzaWJsZUJvdHRvbUluZm89e3RoaXMuY2hhbmdlVmlzaWJsZUJvdHRvbUluZm99XG5cdFx0XHRcdFx0XHRcdGxhdD17cGxhY2VNb3VzZUNsaWNrLmdlb21ldHJ5Py5sb2NhdGlvbi5sYXQgfHwgTnVtYmVyKHBsYWNlTW91c2VDbGljay5sbmdfbGF0WzFdKX1cblx0XHRcdFx0XHRcdFx0bG5nPXtwbGFjZU1vdXNlQ2xpY2suZ2VvbWV0cnk/LmxvY2F0aW9uLmxuZyB8fCBOdW1iZXIocGxhY2VNb3VzZUNsaWNrLmxuZ19sYXRbMF0pfVxuXHRcdFx0XHRcdFx0XHRuYW1lPXtwbGFjZU1vdXNlQ2xpY2submFtZSB8fCBwbGFjZU1vdXNlQ2xpY2suYWRkcmVzc19jb21wb25lbnRzWzBdLmxvbmdfbmFtZX1cblx0XHRcdFx0XHRcdFx0aXNNYXJrZXJBcm91bmQ9e3BsYWNlTW91c2VDbGljay5tYXJrZXJfdHlwZV9pZH1cblx0XHRcdFx0XHRcdFx0cGxhY2VfaWQ9e3BsYWNlTW91c2VDbGljay5faWR9XG5cdFx0XHRcdFx0XHRcdGFkZHJlc3M9e3RoaXMuZ2V0QWRkcmVzc0dlb2NvZGUocGxhY2VNb3VzZUNsaWNrKSB8fCBwbGFjZU1vdXNlQ2xpY2suZm9ybWF0dGVkX2FkZHJlc3MgfHwgcGxhY2VNb3VzZUNsaWNrLmRlc2NyaXB0aW9uLmFkZHJlc3N9XG5cdFx0XHRcdFx0XHRcdHJlbW92ZU1hcmtlcj17dGhpcy5yZW1vdmVNYXJrZXJXaGF0SXN9XG5cdFx0XHRcdFx0XHQvPlxuXHRcdFx0XHRcdCl9XG5cdFx0XHRcdDwvRGl2MTAwdmg+XG5cdFx0XHRcdDxzdHlsZSBqc3g+e2Bcblx0XHRcdFx0XHQucGFya2luZy1tYXJrZXIge1xuXHRcdFx0XHRcdFx0YmFja2dyb3VuZC1jb2xvcjogI2ZmZjtcblx0XHRcdFx0XHRcdGJvcmRlci1yYWRpdXM6IDUwJTtcblx0XHRcdFx0XHRcdGN1cnNvcjogcG9pbnRlcjtcblx0XHRcdFx0XHRcdHBhZGRpbmc6IDA7XG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0Lm1hcmtlci1jb250ZW50IHtcblx0XHRcdFx0XHRcdGJhY2tncm91bmQ6ICMxODkwZmY7XG5cdFx0XHRcdFx0XHRjb2xvcjogd2hpdGU7XG5cdFx0XHRcdFx0XHRib3JkZXItcmFkaXVzOiA1MCU7XG5cdFx0XHRcdFx0XHR3aWR0aDogMzJweDtcblx0XHRcdFx0XHRcdGhlaWdodDogMzJweDtcblx0XHRcdFx0XHRcdGRpc3BsYXk6IGZsZXg7XG5cdFx0XHRcdFx0XHRhbGlnbi1pdGVtczogY2VudGVyO1xuXHRcdFx0XHRcdFx0anVzdGlmeS1jb250ZW50OiBjZW50ZXI7XG5cdFx0XHRcdFx0XHRmb250LXdlaWdodDogYm9sZDtcblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHQubWFya2VyLWluZm8ge1xuXHRcdFx0XHRcdFx0ZGlzcGxheTogbm9uZTtcblx0XHRcdFx0XHRcdHBvc2l0aW9uOiBhYnNvbHV0ZTtcblx0XHRcdFx0XHRcdGJvdHRvbTogMTAwJTtcblx0XHRcdFx0XHRcdGxlZnQ6IDUwJTtcblx0XHRcdFx0XHRcdHRyYW5zZm9ybTogdHJhbnNsYXRlWCgtNTAlKTtcblx0XHRcdFx0XHRcdGJhY2tncm91bmQ6IHdoaXRlO1xuXHRcdFx0XHRcdFx0cGFkZGluZzogOHB4O1xuXHRcdFx0XHRcdFx0Ym9yZGVyLXJhZGl1czogNHB4O1xuXHRcdFx0XHRcdFx0Ym94LXNoYWRvdzogMCAycHggNnB4IHJnYmEoMCwwLDAsMC4xKTtcblx0XHRcdFx0XHRcdG1pbi13aWR0aDogMjAwcHg7XG5cdFx0XHRcdFx0XHR6LWluZGV4OiAxO1xuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdC5wYXJraW5nLW1hcmtlcjpob3ZlciAubWFya2VyLWluZm8ge1xuXHRcdFx0XHRcdFx0ZGlzcGxheTogYmxvY2s7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRgfTwvc3R5bGU+XG5cdFx0XHQ8L1JlYWN0LkZyYWdtZW50PlxuXHRcdCk7XG5cdH1cbn1cblxuY29uc3QgbWFwU3RhdGVUb1Byb3BzID0gKHN0YXRlKSA9PiB7XG5cdHJldHVybiB7XG5cdFx0Y3VycmVudF9wbGFjZTogc3RhdGUucGxhY2VSZWR1Y2VyLmN1cnJlbnRfcGxhY2UsXG5cdFx0ZnJvbV9wbGFjZTogc3RhdGUubmF2aWdhdGlvblJlZHVjZXIuZnJvbSxcblx0XHR0b19wbGFjZTogc3RhdGUubmF2aWdhdGlvblJlZHVjZXIudG8sXG5cdFx0Ym94VmlzaWJsZTogc3RhdGUuYm94VmlzaWJsZVJlZHVjZXIuYm94X3Zpc2libGUsXG5cdFx0cmVzdWx0X25hdmlnYXRpb246IHN0YXRlLm5hdmlnYXRpb25SZWR1Y2VyLnJlc3VsdCxcblx0XHR2aWV3cG9ydDogc3RhdGUucGxhY2VSZWR1Y2VyLnZpZXdwb3J0LFxuXHRcdHJlc3VsdF9zZWxlY3Q6IHN0YXRlLm5hdmlnYXRpb25SZWR1Y2VyLnJlc3VsdF9zZWxlY3QsXG5cdFx0YXJvdW5kX3BsYWNlczogc3RhdGUuc2VhcmNoUmVkdWNlci5hcm91bmRfcGxhY2VzLFxuXHRcdG1hcmtlclNlbGVjdDogc3RhdGUuYm94VmlzaWJsZVJlZHVjZXIucmVkX21hcmtlcl92aXNpYmxlLFxuXHRcdHBvc2l0aW9uTWFya2VyU2VsZWN0OiBzdGF0ZS5ib3hWaXNpYmxlUmVkdWNlci5wb3NpdGlvbl9yZWRfbWFya2VyLFxuXHRcdGFyb3VuZF9wbGFjZV9jZW50ZXI6IHN0YXRlLnNlYXJjaFJlZHVjZXIuYXJvdW5kX3BsYWNlX2NlbnRlcixcblx0XHRwb3B1cF92aXNpYmxlOiBzdGF0ZS5ib3hWaXNpYmxlUmVkdWNlci5wb3B1cF92aXNpYmxlLFxuXHRcdHBvc2l0aW9uX3BvcHVwOiBzdGF0ZS5ib3hWaXNpYmxlUmVkdWNlci5wb3NpdGlvbl9wb3B1cCxcblx0XHR0eXBlX3BvcHVwOiBzdGF0ZS5ib3hWaXNpYmxlUmVkdWNlci50eXBlX3BvcHVwLFxuXHRcdGFyb3VuZF9wbGFjZV9zZWxlY3Q6IHN0YXRlLnNlYXJjaFJlZHVjZXIuYXJvdW5kX3BsYWNlX3NlbGVjdCxcblx0XHRteV9sb2NhdGlvbjogc3RhdGUucGxhY2VSZWR1Y2VyLm15X2xvY2F0aW9uLFxuXHRcdHJlc3RhdXJhbnREYXRhOiBzdGF0ZS5zZWFyY2hSZWR1Y2VyLnJlc3RhdXJhbnRfZGF0YSxcblx0XHRzZWFyY2hMb2NhbFN0b3JhZ2U6IHN0YXRlLnNlYXJjaFJlZHVjZXIuc2VhcmNoX2xvY2FsX3N0b3JhZ2UsXG5cdFx0cGFya2luZ0xvdHM6IHN0YXRlLnBhcmtpbmdMb3RSZWR1Y2VyLnBhcmtpbmdMb3RzLFxuXHR9O1xufTtcbmV4cG9ydCBkZWZhdWx0IGNvbm5lY3QobWFwU3RhdGVUb1Byb3BzKShNYXApO1xuIl19 */\\n/*@ sourceURL=D:\\\\\\\\Workhome\\\\\\\\ParkingLot\\\\\\\\live-map\\\\\\\\components\\\\\\\\Map.jsx */\"));\n    }\n  }]);\n}(Component);\nvar mapStateToProps = function mapStateToProps(state) {\n  return {\n    current_place: state.placeReducer.current_place,\n    from_place: state.navigationReducer.from,\n    to_place: state.navigationReducer.to,\n    boxVisible: state.boxVisibleReducer.box_visible,\n    result_navigation: state.navigationReducer.result,\n    viewport: state.placeReducer.viewport,\n    result_select: state.navigationReducer.result_select,\n    around_places: state.searchReducer.around_places,\n    markerSelect: state.boxVisibleReducer.red_marker_visible,\n    positionMarkerSelect: state.boxVisibleReducer.position_red_marker,\n    around_place_center: state.searchReducer.around_place_center,\n    popup_visible: state.boxVisibleReducer.popup_visible,\n    position_popup: state.boxVisibleReducer.position_popup,\n    type_popup: state.boxVisibleReducer.type_popup,\n    around_place_select: state.searchReducer.around_place_select,\n    my_location: state.placeReducer.my_location,\n    restaurantData: state.searchReducer.restaurant_data,\n    searchLocalStorage: state.searchReducer.search_local_storage,\n    parkingLots: state.parkingLotReducer.parkingLots\n  };\n};\nexport default connect(mapStateToProps)(Map);","map":{"version":3,"names":["_regeneratorRuntime","e","t","r","Object","prototype","n","hasOwnProperty","o","defineProperty","value","i","Symbol","a","iterator","c","asyncIterator","u","toStringTag","define","enumerable","configurable","writable","wrap","Generator","create","Context","makeInvokeMethod","tryCatch","type","arg","call","h","l","f","s","y","GeneratorFunction","GeneratorFunctionPrototype","p","d","getPrototypeOf","v","values","g","defineIteratorMethods","forEach","_invoke","AsyncIterator","invoke","resolve","__await","then","callInvokeWithMethodAndArg","Error","done","method","delegate","maybeInvokeDelegate","sent","_sent","dispatchException","abrupt","TypeError","resultName","next","nextLoc","pushTryEntry","tryLoc","catchLoc","finallyLoc","afterLoc","tryEntries","push","resetTryEntry","completion","reset","isNaN","length","displayName","isGeneratorFunction","constructor","name","mark","setPrototypeOf","__proto__","awrap","async","Promise","keys","reverse","pop","prev","charAt","slice","stop","rval","handle","complete","finish","_catch","delegateYield","ownKeys","getOwnPropertySymbols","filter","getOwnPropertyDescriptor","apply","_objectSpread","arguments","_defineProperty","getOwnPropertyDescriptors","defineProperties","_callSuper","_getPrototypeOf","_possibleConstructorReturn","_isNativeReflectConstruct","Reflect","construct","Boolean","valueOf","React","Component","useEffect","STYLE_URL","Marker","connect","BottomInfoLocation","MenuRightClick","getDetailLatLngService","equal","setMapViewportAction","getDetailByLatLngAction","setCenterLatLngAction","setMyLocationAction","getDetailByIdAction","searchAroundAction","clearSearchAroundAction","selectAroundPlaceAction","selectResultAction","navigationFromAction","navigationToAction","clearResultAction","navigationAction","MarkerNavigation","setRedMarkerAction","setCollapsedInfoBoxAction","setPopupRightClick","setBoxVisibleAction","normal_map_img","satellite_img","ReactDOMServer","Axios","Div100vh","Request","Mile_Travel","isMobile","images","useDispatch","useSelector","getParkingLotsRequest","Map","_Component","props","_this","_classCallCheck","viewport","dispatch","boxVisible","removeMarkerWhatIs","setState","bottomInfoVisible","position","lat","lngLat","lng","evt","parent","target","parentElement","className","toString","includes","handleWhatIs","handleFromHere","handleToHere","handleDeleteLocation","handleSearchAround","handleToAroundPlace","visible","_asyncToGenerator","_callee","_this$props$position_","_this$props$position_2","latLng","response","place_response","_args","_callee$","_context","undefined","position_popup","latitude","longitude","data","results","address_components","long_name","formatted_address","getAddressGeocode","_message","error","t0","_callee2","_this$props$positionM","_this$props$positionM2","redMarkerVisible","place","el","_args2","_callee2$","_context2","positionMarkerSelect","_getInforPlace","zoom","placeMouseClick","markerWhatIs","setLngLat","addTo","map","document","createElement","innerHTML","renderToStaticMarkup","__jsx","size","maplibregl","anchor","getElement","addEventListener","stopPropagation","preventDefault","remove","_ref3","_callee3","id","_callee3$","_context3","get","concat","_x","_ref4","_callee4","_callee4$","_context4","_getInforPlaceAround","Number","lng_lat","_x2","_this$props","isSmallScreen","selectPlace","_ref5","_callee5","_callee5$","_context5","geometry","location","to_place","changeVisibleBottomInfo","_x3","_x4","_ref6","_callee6","my_location","_callee6$","_context6","geocode","from_place","_x5","_x6","type_popup","_callee7","_callee7$","_context7","selectAroundPlace","_callee8","_response$data","place_center","_callee8$","_context8","around_places","item","popupRightClick","getLngLat","around_place_center","place_id","_id","description","address","markerCurrentPlace","redMarker","_place$address_compon","result","join","style","state","SATELITE","NORMAL","setStyle","_ref9","_callee9","from","to","fromplace","toplace","_callee9$","_context9","_x7","_x8","_ref10","_callee10","_callee10$","_context10","_x9","_x10","event","console","log","key","newValue","parkingLots","lot","availableSpots","capacity","marker","element","offset","handleParkingLotClick","flyTo","center","_mapRef","createRef","popup_navigation","styleNormal","styleEarth","localStorage","getItem","list","listRestaurant","listHistories","view","navigationView","_inherits","_createClass","componentDidUpdate","prevProps","_this2","navigation","NavigationControl","addControl","removeControl","markerSelect","_this$redMarker","popup_visible","setHTML","Popup","closeButton","closeOnClick","current_place","selectedPlace","speed","curve","removeMarkerPopup","result_select","result_navigation","_this$props2","dashedLineGeoJSON","polylineGeoJSON","_this$popup_navigatio","_this$popup_navigatio2","getLayer","removeLayer","getSource","removeSource","distance","fastest","legs","toFixed","MILES","coordinateObject1","coordinates","decodePolyline","overview_polyline","points","roadWay","coordinateObject2","shortest","addSource","properties","addLayer","source","layout","paint","_this2$popup_navigati","Math","trunc","duration","text","setMaxWidth","getElementById","normalizeBounds","bounds","_bounds","_slicedToArray","firstPoint","secondPoint","minLat","min","maxLat","max","minLng","maxLng","bound","cameraForBounds","padding","top","bottom","left","right","popup","start_marker","setPopup","marker_start","src","button","width","alt","isOpen","togglePopup","_prevProps$from_place","_this$state$placeMous","end_marker","marker_end","_this$start_marker","_prevProps$to_place","_this$state$placeMous2","around_place_select","_this$list_marker_aro","list_marker_around","_this$props3","markerCenterDiv","_selectAroundPlace","getPopup","place_select","markerDiv","_this$props$current_p","_this$props$current_p2","restaurantData","_iterator","_createForOfIteratorHelper","_step","marker_restaurant","restaurant_marker","err","_iterator2","_step2","_iterator3","_step3","_iterator4","searchLocalStorage","_step4","marker_history","history_marker","_iterator5","_step5","_iterator6","steps","_step6","step","html_instructions","marker_step","step_marker","end_location","_iterator7","_step7","_iterator8","_step8","_iterator9","_step10","encoded","index","len","b","shift","charCodeAt","dlat","dlng","componentDidMount","_this3","window","handleStorageChange","container","geolocateControl","GeolocateControl","positionOptions","enableHighAccuracy","trackUserLocation","showUserLocation","showAccuracyCircle","fitBoundsOptions","maxZoom","on","warning","coords","_onMouseClick","_onRightClick","_URLSearchParams$get","_this3$geolocateContr","resize","pid","URLSearchParams","search","split","pid_around","direction_infor","trigger","navigator","geolocation","getCurrentPosition","getCenter","_this3$map","minzoom","property","body","_onClickMenu","iframe","coor_from","coor_to","navigationByURLIframe","navigationByURL","componentWillUnmount","removeEventListener","render","_placeMouseClick$geom","_placeMouseClick$geom2","_this$state","Fragment","renderParkingLots","_Avatar","shape","onClick","changeStyle","backgroundImage","isMarkerAround","marker_type_id","removeMarker","_JSXStyle","mapStateToProps","placeReducer","navigationReducer","boxVisibleReducer","box_visible","searchReducer","red_marker_visible","position_red_marker","restaurant_data","search_local_storage","parkingLotReducer"],"sources":["D:/Workhome/ParkingLot/live-map/components/Map.jsx"],"sourcesContent":["import React, { Component, useEffect } from 'react';\nimport { STYLE_URL } from '../consts';\nimport Marker from './Marker';\nimport { connect } from 'react-redux';\nimport BottomInfoLocation from './BottomInfoLocation';\nimport MenuRightClick from './MenuRightCLick';\nimport { getDetailLatLngService } from '../redux/sagas/placeSaga';\nimport { message, Avatar } from 'antd';\nimport equal from 'fast-deep-equal/es6/react';\nimport { setMapViewportAction, getDetailByLatLngAction, setCenterLatLngAction, setMyLocationAction, getDetailByIdAction } from '../redux/actions/place';\nimport { searchAroundAction, clearSearchAroundAction, selectAroundPlaceAction } from '../redux/actions/search';\nimport { selectResultAction, navigationFromAction, navigationToAction, clearResultAction, navigationAction } from '../redux/actions/navigation';\nimport MarkerNavigation from './MarkerNavigation';\nimport { setRedMarkerAction, setCollapsedInfoBoxAction, setPopupRightClick, setBoxVisibleAction } from '../redux/actions/boxVisble';\nimport normal_map_img from '../static/images/normal_map.png';\nimport satellite_img from '../static/images/satellite.jpeg';\nimport ReactDOMServer from 'react-dom/server';\nimport Axios from 'axios';\nimport Div100vh from 'react-div-100vh';\nimport Request from '../utils/request';\nimport { Mile_Travel } from '../consts';\nimport { isMobile } from 'react-device-detect';\nimport images from '../utils/images';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { getParkingLotsRequest } from '../redux/actions/parkingLot';\n\nclass Map extends Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis._mapRef = React.createRef();\n\t\tthis.map = null;\n\t\tthis.redMarker = null;\n\t\tthis.popupRightClick = null;\n\t\tthis.popup_navigation = [];\n\t\tthis.state = {\n\t\t\tstyle: STYLE_URL.NORMAL + STYLE_KEY,\n\t\t\tstyleNormal: STYLE_URL.NORMAL + STYLE_KEY,\n\t\t\tstyleEarth: STYLE_URL.SATELITE + STYLE_KEY,\n\t\t\tbottomInfoVisible: false,\n\t\t\tvalue: localStorage.getItem('search_history') || '',\n\t\t\tparkingLots: [],\n\t\t};\n\t\tthis.list = [];\n\t\tthis.listRestaurant = [];\n\t\tthis.listHistories = [];\n\t\tthis.view = null;\n\t\tthis.navigationView = null;\n\t}\n\n\t_onViewportChange = (viewport) => {\n\t\tthis.props.dispatch(setMapViewportAction(viewport));\n\t};\n\n\t_onMouseClick = (e) => {\n\t\tthis.props.dispatch(setPopupRightClick(false));\n\t\tif (this.props.boxVisible !== 'iframe') {\n\t\t\tthis.props.dispatch(setRedMarkerAction(false));\n\t\t}\n\t\t// if (this.props.boxVisible === \"info\") this.props.dispatch(setBoxVisibleAction('search'))\n\t\t// this.markerWhatIs ? this.markerWhatIs.remove() : null;\n\t\tthis.props.dispatch(selectAroundPlaceAction(null));\n\t\tthis.removeMarkerWhatIs();\n\t\tthis.setState({\n\t\t\tbottomInfoVisible: false,\n\t\t});\n\t};\n\n\t_onRightClick = (e) => {\n\t\tconst position = { lat: e.lngLat.lat, lng: e.lngLat.lng };\n\t\tif (this.props.boxVisible !== 'iframe') {\n\t\t\tthis.props.dispatch(setRedMarkerAction(true, position));\n\t\t\tthis.props.dispatch(setPopupRightClick(true, position, 'normal'));\n\t\t}\n\t};\n\n\t_onClickMenu = (evt) => {\n\t\tconst parent = evt.target.parentElement;\n\n\t\tif (evt.target.className && evt.target.className.toString().includes('what-is-this')) {\n\t\t\tthis.handleWhatIs();\n\t\t} else if (evt.target.className && evt.target.className.toString().includes('from-here')) {\n\t\t\tthis.handleFromHere();\n\t\t} else if (evt.target.className && evt.target.className.toString().includes('to-here')) {\n\t\t\tthis.handleToHere();\n\t\t} else if (evt.target.className && evt.target.className.toString().includes('delete-location')) {\n\t\t\tthis.handleDeleteLocation();\n\t\t} else if (evt.target.className && evt.target.className.toString().includes('search-around')) {\n\t\t\tthis.handleSearchAround();\n\t\t} else if (evt.target.className && evt.target.className.toString().includes('to-around-place')) {\n\t\t\tthis.handleToAroundPlace();\n\t\t} else if (evt.target.className && evt.target.className.toString().includes('what-is-navigation')) {\n\t\t\tthis.handleWhatIs(false);\n\t\t}\n\t\tif (parent?.className && parent?.className.toString().includes('menu-right-click')) {\n\t\t\tif (evt.target.className && !evt.target.className.toString().includes('what-is-this')) {\n\t\t\t\tthis.props.dispatch(clearSearchAroundAction());\n\t\t\t}\n\t\t\tthis.props.dispatch(setPopupRightClick(false));\n\t\t\tthis.removeMarkerWhatIs();\n\t\t}\n\t};\n\n\tchangeVisibleBottomInfo = (visible) => {\n\t\tthis.setState({\n\t\t\tbottomInfoVisible: visible,\n\t\t});\n\t};\n\n\t_getInforPlace = async (lat = this.props.position_popup?.lat, lng = this.props.position_popup?.lng) => {\n\t\tconst latLng = {\n\t\t\tlatitude: lat,\n\t\t\tlongitude: lng,\n\t\t};\n\n\t\ttry {\n\t\t\tconst response = await getDetailLatLngService(latLng);\n\t\t\tif (response.data.results.length > 0) {\n\t\t\t\tconst place_response = response.data.results[0];\n\t\t\t\treturn {\n\t\t\t\t\t...place_response,\n\t\t\t\t\tname: place_response.address_components[0].long_name,\n\t\t\t\t\tformatted_address: this.getAddressGeocode(place_response),\n\t\t\t\t};\n\t\t\t} else {\n\t\t\t\tmessage.error('Không tìm thấy địa điểm !!');\n\t\t\t\treturn null;\n\t\t\t}\n\t\t} catch (error) {\n\t\t\tthrow error;\n\t\t}\n\t};\n\n\tselectPlace = async (lat = this.props.positionMarkerSelect?.lat, lng = this.props.positionMarkerSelect?.lng, redMarkerVisible = true) => {\n\t\tconst place = await this._getInforPlace(lat, lng);\n\n\t\tif (place) {\n\t\t\tconst viewport = {\n\t\t\t\tlongitude: lng,\n\t\t\t\tlatitude: lat,\n\t\t\t\tzoom: 15,\n\t\t\t};\n\t\t\tthis.props.dispatch(setMapViewportAction(viewport));\n\t\t\tthis.setState({\n\t\t\t\tbottomInfoVisible: true,\n\t\t\t\tplaceMouseClick: place,\n\t\t\t});\n\t\t\tif (redMarkerVisible) {\n\t\t\t\tif (this.markerWhatIs) {\n\t\t\t\t\tthis.markerWhatIs.setLngLat({ lat, lng }).addTo(this.map);\n\t\t\t\t} else {\n\t\t\t\t\tconst el = document.createElement('div');\n\t\t\t\t\tel.innerHTML = ReactDOMServer.renderToStaticMarkup(<Marker size={22} />);\n\t\t\t\t\tthis.markerWhatIs = new maplibregl.Marker(el, { anchor: 'bottom' }).setLngLat({ lat, lng }).addTo(this.map);\n\t\t\t\t}\n\t\t\t\tthis.markerWhatIs.getElement().addEventListener('contextmenu', (e) => {\n\t\t\t\t\te.stopPropagation();\n\t\t\t\t\te.preventDefault();\n\t\t\t\t\tthis.props.dispatch(setRedMarkerAction(false));\n\t\t\t\t\tthis.props.dispatch(setPopupRightClick(true, { lat, lng }, 'popupCurrentPlace'));\n\t\t\t\t});\n\t\t\t\tthis.props.dispatch(setRedMarkerAction(false));\n\t\t\t}\n\t\t\t// redMarkerVisible ? this.props.dispatch(setRedMarkerAction(true, { lat, lng })) : null;\n\t\t} else {\n\t\t\tmessage.error('Không tìm thấy địa điểm !!');\n\t\t}\n\t};\n\n\tremoveMarkerWhatIs = () => {\n\t\tthis.markerWhatIs ? this.markerWhatIs.remove() : null;\n\t};\n\n\t_getInforPlaceAround = async (id) => {\n\t\ttry {\n\t\t\tconst response = await Axios.get(`https://napi.goong.io/v1/marker/get_marker_detail/${id}`);\n\n\t\t\tif (response.data.data) {\n\t\t\t\treturn response.data.data;\n\t\t\t} else {\n\t\t\t\tmessage.error('Không tìm thấy địa điểm !!');\n\t\t\t\treturn null;\n\t\t\t}\n\t\t} catch (error) {\n\t\t\tmessage.error('Không tìm thấy địa điểm !');\n\t\t\tthrow error;\n\t\t}\n\t};\n\n\tselectAroundPlace = async (id) => {\n\t\tconst place = await this._getInforPlaceAround(id);\n\t\tif (place) {\n\t\t\tconst viewport = {\n\t\t\t\tlongitude: Number(place.lng_lat[0]),\n\t\t\t\tlatitude: Number(place.lng_lat[1]),\n\t\t\t\tzoom: 15,\n\t\t\t};\n\t\t\tthis.props.dispatch(setMapViewportAction(viewport));\n\t\t\tthis.setState({\n\t\t\t\tbottomInfoVisible: true,\n\t\t\t\tplaceMouseClick: place,\n\t\t\t});\n\t\t\tthis.props.dispatch(setPopupRightClick(false));\n\t\t} else {\n\t\t\tmessage.error('Không tìm thấy địa điểm !!');\n\t\t}\n\t};\n\n\thandleWhatIs = (redMarkerVisible = true) => {\n\t\tconst { position_popup, isSmallScreen } = this.props;\n\t\tif (isSmallScreen) {\n\t\t\tthis.props.dispatch(\n\t\t\t\tgetDetailByLatLngAction({\n\t\t\t\t\tlatitude: position_popup.lat,\n\t\t\t\t\tlongitude: position_popup.lng,\n\t\t\t\t})\n\t\t\t);\n\n\t\t\tthis.props.dispatch(setBoxVisibleAction('info'));\n\t\t\tthis.props.dispatch(clearSearchAroundAction());\n\t\t\tthis.props.dispatch(setPopupRightClick(false));\n\t\t\tthis.removeMarkerWhatIs();\n\t\t} else {\n\t\t\tthis.selectPlace(position_popup.lat, position_popup.lng, redMarkerVisible);\n\t\t}\n\t};\n\n\thandleFromHere = async (lat, lng) => {\n\t\tlet place;\n\t\tif (!lat || !lng) place = await this._getInforPlace();\n\t\telse {\n\t\t\tplace = await this._getInforPlace(lat, lng);\n\t\t}\n\t\tif (place) {\n\t\t\tconst viewport = {\n\t\t\t\tlongitude: place.geometry.location.lng,\n\t\t\t\tlatitude: place.geometry.location.lat,\n\t\t\t\tzoom: 15,\n\t\t\t};\n\t\t\t!this.props.to_place && this.props.dispatch(setMapViewportAction(viewport));\n\t\t\tthis.props.dispatch(setBoxVisibleAction('navigation'));\n\t\t\tthis.props.dispatch(navigationFromAction(place, `${place.name} - ${place.formatted_address}`));\n\n\t\t\tthis.props.dispatch(setRedMarkerAction(false));\n\t\t\tthis.changeVisibleBottomInfo(false);\n\t\t}\n\t};\n\n\thandleToHere = async (lat, lng) => {\n\t\tlet place;\n\t\tif (!lat || !lng) place = await this._getInforPlace();\n\t\telse {\n\t\t\tplace = await this._getInforPlace(lat, lng);\n\t\t}\n\t\tif (place) {\n\t\t\tthis.props.dispatch(setBoxVisibleAction('navigation'));\n\t\t\tconst viewport = {\n\t\t\t\tlongitude: place.geometry.location.lng,\n\t\t\t\tlatitude: place.geometry.location.lat,\n\t\t\t\tzoom: 15,\n\t\t\t};\n\t\t\tconst my_location = this.props.my_location;\n\t\t\tif (my_location && (this.props.boxVisible === 'search' || this.props.boxVisible === 'info')) {\n\t\t\t\ttry {\n\t\t\t\t\tconst response = await Request.geocode(my_location);\n\t\t\t\t\tif (response.data.results.length > 0) {\n\t\t\t\t\t\tthis.props.dispatch(\n\t\t\t\t\t\t\tnavigationFromAction(\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t...response.data.results[0],\n\t\t\t\t\t\t\t\t\tname: response.data.results[0].address_components[0].long_name,\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t'Vị trí của bạn'\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t} catch (error) {\n\t\t\t\t\tthrow error;\n\t\t\t\t}\n\t\t\t}\n\t\t\t!this.props.from_place && this.props.dispatch(setMapViewportAction(viewport));\n\t\t\tthis.props.dispatch(navigationToAction(place, `${place.name} - ${place.formatted_address}`));\n\t\t\tthis.props.dispatch(setBoxVisibleAction('navigation'));\n\t\t\tthis.props.dispatch(setRedMarkerAction(false));\n\t\t\tthis.changeVisibleBottomInfo(false);\n\t\t}\n\t};\n\n\thandleDeleteLocation = () => {\n\t\tconst { type_popup } = this.props;\n\t\tif (type_popup === 'popupFromPlace') {\n\t\t\tthis.props.dispatch(navigationFromAction(null, ''));\n\t\t} else if (type_popup === 'popupToPlace') {\n\t\t\tthis.props.dispatch(navigationToAction(null, ''));\n\t\t}\n\t\tthis.props.dispatch(clearResultAction());\n\t};\n\n\thandleSearchAround = async () => {\n\t\tconst place = await this._getInforPlace();\n\t\tif (place) {\n\t\t\tconst viewport = {\n\t\t\t\tlongitude: place.geometry.location.lng,\n\t\t\t\tlatitude: place.geometry.location.lat,\n\t\t\t\tzoom: 15,\n\t\t\t};\n\t\t\tconst location = {\n\t\t\t\tlat: place.geometry.location.lat,\n\t\t\t\tlng: place.geometry.location.lng,\n\t\t\t};\n\t\t\tthis.props.dispatch(setBoxVisibleAction('search'));\n\t\t\tthis.props.dispatch(setMapViewportAction(viewport));\n\t\t\tthis.props.dispatch(searchAroundAction(location, this.props.viewport.zoom));\n\t\t\tthis.setState({\n\t\t\t\tbottomInfoVisible: false,\n\t\t\t});\n\t\t}\n\t};\n\n\t_selectAroundPlace = (type, place) => {\n\t\tif (type !== 'center') {\n\t\t\tthis.props.dispatch(selectAroundPlaceAction(place));\n\t\t\tthis.selectAroundPlace(place?.id);\n\t\t} else {\n\t\t\tthis.props.dispatch(selectAroundPlaceAction(place));\n\t\t\tthis.selectPlace(place.geometry.location.lat, place.geometry.location.lng, false);\n\t\t}\n\t};\n\n\thandleToAroundPlace = async () => {\n\t\tlet place = null;\n\t\tthis.props.around_places.map((item) => {\n\t\t\tif (item.lng_lat[0] * 1 === this.popupRightClick.getLngLat().lng && item.lng_lat[1] * 1 === this.popupRightClick.getLngLat().lat) {\n\t\t\t\tplace = item;\n\t\t\t}\n\t\t});\n\t\tif (place) {\n\t\t\ttry {\n\t\t\t\tthis.props.dispatch(setPopupRightClick(false));\n\t\t\t\tconst place_center = this.props.around_place_center;\n\t\t\t\tthis.props.dispatch(navigationFromAction(place_center, `${place_center.name} - ${place_center.formatted_address}`));\n\t\t\t\tconst response = await Axios.get(`https://napi.goong.io/v1/marker/get_marker_detail/${place.id}`);\n\n\t\t\t\tplace = response.data?.data;\n\t\t\t\tplace = {\n\t\t\t\t\t...place,\n\t\t\t\t\tplace_id: place._id,\n\t\t\t\t\tgeometry: {\n\t\t\t\t\t\tlocation: {\n\t\t\t\t\t\t\tlat: Number(place.lng_lat[1]),\n\t\t\t\t\t\t\tlng: Number(place.lng_lat[0]),\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t\tformatted_address: place.description.address,\n\t\t\t\t};\n\t\t\t\tthis.props.dispatch(navigationToAction(place, `${place.name} - ${place.formatted_address}`));\n\t\t\t\tthis.props.dispatch(setBoxVisibleAction('navigation'));\n\t\t\t} catch (error) {\n\t\t\t\tmessage.error('Không tìm thấy địa điểm !');\n\t\t\t}\n\t\t} else {\n\t\t\tmessage.error('Không tìm thấy địa điểm !');\n\t\t}\n\t};\n\n\tremoveMarkerPopup = () => {\n\t\tif (this.markerCurrentPlace) this.markerCurrentPlace.remove();\n\t\tif (this.popupRightClick) this.popupRightClick.remove();\n\t\tif (this.props.around_places) this.props.dispatch(clearSearchAroundAction());\n\t\tif (this.redMarker) this.redMarker.remove();\n\t};\n\n\tgetAddressGeocode = (place) => {\n\t\tlet result = [];\n\t\tplace.address_components?.slice(1).map((item) => {\n\t\t\tresult.push(item.long_name);\n\t\t});\n\t\treturn result.join(',');\n\t};\n\n\tcomponentDidUpdate(prevProps) {\n\t\tif (this.props.isSmallScreen !== prevProps.isSmallScreen) {\n\t\t\tif (!this.props.isSmallScreen && !this.navigation) {\n\t\t\t\tthis.navigation = new maplibregl.NavigationControl();\n\t\t\t\tthis.map.addControl(this.navigation);\n\t\t\t} else if (this.props.isSmallScreen && this.navigation) {\n\t\t\t\tthis.map.removeControl(this.navigation);\n\t\t\t\tthis.navigation = null;\n\t\t\t}\n\t\t}\n\n\t\tif (!equal(prevProps.positionMarkerSelect, this.props.positionMarkerSelect) && this.props.positionMarkerSelect) {\n\t\t\tif (this.redMarker) {\n\t\t\t\tthis.redMarker = this.redMarker.setLngLat(this.props.positionMarkerSelect).addTo(this.map);\n\t\t\t} else {\n\t\t\t\tconst el = document.createElement('div');\n\t\t\t\tel.innerHTML = ReactDOMServer.renderToStaticMarkup(<Marker size={22} />);\n\t\t\t\t// Marker chuột phải\n\t\t\t\tthis.redMarker = new maplibregl.Marker({ anchor: 'bottom', element: el }).setLngLat(this.props.positionMarkerSelect).addTo(this.map);\n\n\t\t\t\tthis.redMarker.getElement().addEventListener('contextmenu', (e) => {\n\t\t\t\t\te.stopPropagation();\n\t\t\t\t\te.preventDefault();\n\t\t\t\t\tthis.props.dispatch(setPopupRightClick(true, this.props.positionMarkerSelect, 'normal'));\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\n\t\tif (prevProps.markerSelect !== this.props.markerSelect) {\n\t\t\tif (!this.props.markerSelect) {\n\t\t\t\tthis.redMarker?.remove();\n\t\t\t}\n\t\t}\n\n\t\tif (this.props.popup_visible && (!equal(prevProps.position_popup, this.props.position_popup) || this.props.type_popup !== prevProps.type_popup) && this.props.position_popup) {\n\t\t\tthis.popupRightClick = this.popupRightClick\n\t\t\t\t? this.popupRightClick\n\t\t\t\t\t\t.setLngLat([this.props.position_popup.lng, this.props.position_popup.lat])\n\t\t\t\t\t\t.addTo(this.map)\n\t\t\t\t\t\t.setHTML(\n\t\t\t\t\t\t\tReactDOMServer.renderToStaticMarkup(\n\t\t\t\t\t\t\t\t<MenuRightClick\n\t\t\t\t\t\t\t\t\tdispatch={this.props.dispatch}\n\t\t\t\t\t\t\t\t\tposition_popup={this.props.position_popup}\n\t\t\t\t\t\t\t\t\ttype_popup={this.props.type_popup}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t)\n\t\t\t\t: new maplibregl.Popup({\n\t\t\t\t\t\tcloseButton: false,\n\t\t\t\t\t\tanchor: 'top',\n\t\t\t\t\t\tcloseOnClick: false,\n\t\t\t\t\t\toffset: [0, 5],\n\t\t\t\t  })\n\t\t\t\t\t\t.setLngLat([this.props.position_popup.lng, this.props.position_popup.lat])\n\t\t\t\t\t\t.setHTML(\n\t\t\t\t\t\t\tReactDOMServer.renderToStaticMarkup(\n\t\t\t\t\t\t\t\t<MenuRightClick\n\t\t\t\t\t\t\t\t\tdispatch={this.props.dispatch}\n\t\t\t\t\t\t\t\t\tposition_popup={this.props.position_popup}\n\t\t\t\t\t\t\t\t\ttype_popup={this.props.type_popup}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t)\n\t\t\t\t\t\t.addTo(this.map);\n\t\t}\n\n\t\tif (this.popupRightClick && !this.props.popup_visible) {\n\t\t\tthis.popupRightClick.remove();\n\t\t}\n\n\t\tif (!equal(prevProps.current_place, this.props.current_place) && this.props.current_place) {\n\t\t\tconst selectedPlace = this.props.current_place;\n\n\t\t\tthis.map.flyTo({\n\t\t\t\tcenter: [selectedPlace.geometry.location.lng, selectedPlace.geometry.location.lat],\n\t\t\t\tzoom: 15,\n\t\t\t\tspeed: 1.5,\n\t\t\t\tcurve: 1,\n\t\t\t});\n\t\t\tthis.props.dispatch(setCollapsedInfoBoxAction(false));\n\t\t\tthis.props.dispatch(setRedMarkerAction(false));\n\t\t\tthis.setState({\n\t\t\t\tbottomInfoVisible: false,\n\t\t\t});\n\t\t}\n\n\t\tif (!equal(prevProps.viewport, this.props.viewport) && this.props.viewport) {\n\t\t\tthis.map.flyTo({\n\t\t\t\tcenter: [this.props.viewport.longitude, this.props.viewport.latitude],\n\t\t\t\tzoom: this.props.viewport.zoom,\n\t\t\t\tspeed: 2,\n\t\t\t});\n\t\t}\n\n\t\tif (!equal(prevProps.around_place_center, this.props.around_place_center)) {\n\t\t\tthis.props.dispatch(setRedMarkerAction(false));\n\t\t}\n\n\t\tif (!equal(prevProps.boxVisible, this.props.boxVisible) && this.props.boxVisible === 'navigation') {\n\t\t\tthis.removeMarkerPopup();\n\t\t}\n\n\t\tif (!equal(prevProps.result_select, this.props.result_select) || !equal(prevProps.result_navigation, this.props.result_navigation)) {\n\t\t\tconst { result_select, result_navigation, boxVisible, from_place, to_place } = this.props;\n\t\t\tlet dashedLineGeoJSON = [],\n\t\t\t\tpolylineGeoJSON = [];\n\t\t\tthis.result_navigation = [];\n\n\t\t\tif ((boxVisible !== 'navigation' && boxVisible !== 'iframe') || !result_navigation) {\n\t\t\t\t// Remove cac layer/source\n\t\t\t\tif (this.map.getLayer(`route-layer-fastest`)) this.map.removeLayer(`route-layer-fastest`);\n\t\t\t\tif (this.map.getLayer(`route-layer-shortest`)) this.map.removeLayer(`route-layer-shortest`);\n\t\t\t\tif (this.map.getLayer(`walk-layer-0`)) this.map.removeLayer(`walk-layer-0`);\n\t\t\t\tif (this.map.getLayer(`walk-layer-1`)) this.map.removeLayer(`walk-layer-1`);\n\n\t\t\t\tif (this.map.getSource(`route-source-fastest`)) this.map.removeSource(`route-source-fastest`);\n\t\t\t\tif (this.map.getSource(`route-source-shortest`)) this.map.removeSource(`route-source-shortest`);\n\t\t\t\tif (this.map.getSource(`walk-source-0`)) this.map.removeSource(`walk-source-0`);\n\t\t\t\tif (this.map.getSource(`walk-source-1`)) this.map.removeSource(`walk-source-1`);\n\n\t\t\t\tthis.popup_navigation[0]?.remove();\n\t\t\t\tthis.popup_navigation[1]?.remove();\n\t\t\t} else {\n\t\t\t\tif (result_navigation) {\n\t\t\t\t\tlet distance = '';\n\t\t\t\t\tif (localStorage.getItem('unit') === 'KILOMETERS') {\n\t\t\t\t\t\tdistance = `${(result_navigation.fastest[0].legs[0].distance.value / 1000).toFixed(1)} KM`;\n\t\t\t\t\t} else if (localStorage.getItem('unit') === 'MILES') {\n\t\t\t\t\t\tdistance = `${((result_navigation.fastest[0].legs[0].distance.value / 1000) * Mile_Travel.MILES).toFixed(1)} Dặm`;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tdistance = `${(result_navigation.fastest[0].legs[0].distance.value / 1000).toFixed(1)} KM`;\n\t\t\t\t\t}\n\t\t\t\t\tlet coordinateObject1 = {};\n\t\t\t\t\tcoordinateObject1.coordinates = this.decodePolyline(result_navigation.fastest[0].overview_polyline.points);\n\t\t\t\t\tcoordinateObject1.type = 'LineString';\n\t\t\t\t\tpolylineGeoJSON.push(coordinateObject1);\n\t\t\t\t\tpolylineGeoJSON[0].roadWay = 'fastest';\n\t\t\t\t\tlet coordinateObject2 = {};\n\t\t\t\t\tcoordinateObject2.coordinates = this.decodePolyline(result_navigation.shortest[0].overview_polyline.points);\n\t\t\t\t\tcoordinateObject2.type = 'LineString';\n\t\t\t\t\tpolylineGeoJSON.push(coordinateObject2);\n\t\t\t\t\tpolylineGeoJSON[1].roadWay = 'shortest';\n\n\t\t\t\t\tdashedLineGeoJSON.push({\n\t\t\t\t\t\ttype: 'LineString',\n\t\t\t\t\t\tcoordinates: [\n\t\t\t\t\t\t\t[polylineGeoJSON[0].coordinates[0][0], polylineGeoJSON[0].coordinates[0][1]],\n\t\t\t\t\t\t\t[from_place?.geometry.location.lng, from_place?.geometry.location.lat],\n\t\t\t\t\t\t],\n\t\t\t\t\t});\n\t\t\t\t\tdashedLineGeoJSON.push({\n\t\t\t\t\t\ttype: 'LineString',\n\t\t\t\t\t\tcoordinates: [\n\t\t\t\t\t\t\t[polylineGeoJSON[0].coordinates[polylineGeoJSON[0].coordinates.length - 1][0], polylineGeoJSON[0].coordinates[polylineGeoJSON[0].coordinates.length - 1][1]],\n\t\t\t\t\t\t\t[to_place?.geometry.location.lng, to_place?.geometry.location.lat],\n\t\t\t\t\t\t],\n\t\t\t\t\t});\n\n\t\t\t\t\tpolylineGeoJSON.map((item, i) => {\n\t\t\t\t\t\t// Layer dan duong\n\t\t\t\t\t\tif (this.map.getLayer(`route-layer-${item.roadWay}`)) this.map.removeLayer(`route-layer-${item.roadWay}`);\n\t\t\t\t\t\tif (this.map.getSource(`route-source-${item.roadWay}`)) this.map.removeSource(`route-source-${item.roadWay}`);\n\t\t\t\t\t\tthis.map.addSource(`route-source-${item.roadWay}`, {\n\t\t\t\t\t\t\ttype: 'geojson',\n\t\t\t\t\t\t\tdata: {\n\t\t\t\t\t\t\t\ttype: 'Feature',\n\t\t\t\t\t\t\t\tproperties: {},\n\t\t\t\t\t\t\t\tgeometry: item,\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t});\n\t\t\t\t\t\tthis.map.addLayer({\n\t\t\t\t\t\t\tid: `route-layer-${item.roadWay}`,\n\t\t\t\t\t\t\ttype: 'line',\n\t\t\t\t\t\t\tsource: `route-source-${item.roadWay}`,\n\t\t\t\t\t\t\tlayout: {\n\t\t\t\t\t\t\t\t'line-join': 'round',\n\t\t\t\t\t\t\t\t'line-cap': 'round',\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tpaint: {\n\t\t\t\t\t\t\t\t'line-color': 'rgb(24, 144, 255)',\n\t\t\t\t\t\t\t\t'line-width': 7,\n\t\t\t\t\t\t\t\t'line-opacity': item.roadWay === result_select ? 1 : 0.5,\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t});\n\t\t\t\t\t\t// Layer di bo\n\n\t\t\t\t\t\tif (this.map.getLayer(`walk-layer-${i}`)) this.map.removeLayer(`walk-layer-${i}`);\n\t\t\t\t\t\tif (this.map.getSource(`walk-source-${i}`)) this.map.removeSource(`walk-source-${i}`);\n\t\t\t\t\t\tthis.map.addSource(`walk-source-${i}`, {\n\t\t\t\t\t\t\ttype: 'geojson',\n\t\t\t\t\t\t\tdata: {\n\t\t\t\t\t\t\t\ttype: 'Feature',\n\t\t\t\t\t\t\t\tproperties: {},\n\t\t\t\t\t\t\t\tgeometry: dashedLineGeoJSON[i],\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t});\n\t\t\t\t\t\tthis.map.addLayer({\n\t\t\t\t\t\t\tid: `walk-layer-${i}`,\n\t\t\t\t\t\t\ttype: 'line',\n\t\t\t\t\t\t\tsource: `walk-source-${i}`,\n\t\t\t\t\t\t\tlayout: {\n\t\t\t\t\t\t\t\t'line-join': 'round',\n\t\t\t\t\t\t\t\t'line-cap': 'round',\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tpaint: {\n\t\t\t\t\t\t\t\t'line-color': 'rgb(133, 135, 126)',\n\t\t\t\t\t\t\t\t'line-opacity': 1,\n\t\t\t\t\t\t\t\t'line-width': 6,\n\t\t\t\t\t\t\t\t'line-dasharray': [0.2, 2],\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t});\n\t\t\t\t\t\t// Add Popup hien ket qua\n\n\t\t\t\t\t\tif (this.popup_navigation[i]) {\n\t\t\t\t\t\t\tthis.popup_navigation[i]?.remove();\n\t\t\t\t\t\t\tthis.popup_navigation[i] = null;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tthis.popup_navigation[i] = new maplibregl.Popup({\n\t\t\t\t\t\t\tcloseButton: false,\n\t\t\t\t\t\t\tanchor: 'top',\n\t\t\t\t\t\t\tcloseOnClick: false,\n\t\t\t\t\t\t\tclassName: item.roadWay === result_select ? 'popup-z-index1' : 'popup-z-index2',\n\t\t\t\t\t\t})\n\t\t\t\t\t\t\t.setLngLat([i === 0 ? item.coordinates[Math.trunc(0.75 * item.coordinates.length)][0] : item.coordinates[Math.trunc(0.25 * item.coordinates.length)][0], i === 0 ? item.coordinates[Math.trunc(item.coordinates.length * 0.75)][1] : item.coordinates[Math.trunc(item.coordinates.length * 0.25)][1]])\n\t\t\t\t\t\t\t.setHTML(\n\t\t\t\t\t\t\t\tReactDOMServer.renderToStaticMarkup(\n\t\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t\tclassName=\"tooltipNavigation\"\n\t\t\t\t\t\t\t\t\t\tid={`popup-${item.roadWay}`}>\n\t\t\t\t\t\t\t\t\t\t<p>{distance}</p>\n\t\t\t\t\t\t\t\t\t\t<p>{result_navigation[item.roadWay][0].legs[0].duration.text}</p>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t.setMaxWidth('300px')\n\t\t\t\t\t\t\t.addTo(this.map);\n\t\t\t\t\t\tdocument.getElementById(`popup-${item.roadWay}`).addEventListener('click', () => {\n\t\t\t\t\t\t\tthis.props.dispatch(selectResultAction(item.roadWay));\n\t\t\t\t\t\t});\n\t\t\t\t\t\tconst normalizeBounds = (bounds) => {\n\t\t\t\t\t\t\tconst [firstPoint, secondPoint] = bounds;\n\n\t\t\t\t\t\t\tconst minLat = Math.min(firstPoint[1], secondPoint[1]);\n\t\t\t\t\t\t\tconst maxLat = Math.max(firstPoint[1], secondPoint[1]);\n\n\t\t\t\t\t\t\tconst minLng = Math.min(firstPoint[0], secondPoint[0]);\n\t\t\t\t\t\t\tconst maxLng = Math.max(firstPoint[0], secondPoint[0]);\n\n\t\t\t\t\t\t\treturn [\n\t\t\t\t\t\t\t\t[minLng, minLat],\n\t\t\t\t\t\t\t\t[maxLng, maxLat],\n\t\t\t\t\t\t\t];\n\t\t\t\t\t\t};\n\t\t\t\t\t\tconst bound = normalizeBounds([item.coordinates[0], item.coordinates[item.coordinates.length - 1]]);\n\t\t\t\t\t\tif (isMobile) {\n\t\t\t\t\t\t\tthis.navigationView = this.map.cameraForBounds(bound, {\n\t\t\t\t\t\t\t\tpadding: { top: 10, bottom: 25, left: 24, right: 24 },\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tthis.navigationView = this.map.cameraForBounds(bound, {\n\t\t\t\t\t\t\t\tpadding: { top: 40, bottom: 40, left: 200, right: 40 },\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\n\t\t\t\t\tthis.view = {\n\t\t\t\t\t\tlatitude: this.navigationView.center.lat,\n\t\t\t\t\t\tlongitude: this.navigationView.center.lng,\n\t\t\t\t\t\tzoom: this.navigationView.zoom,\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tthis.props.dispatch(setMapViewportAction(this.view));\n\t\t}\n\t\tif (!equal(prevProps.from_place, this.props.from_place)) {\n\t\t\tconst place = this.props.from_place;\n\t\t\tif (place) {\n\t\t\t\tconst popup = new maplibregl.Popup({\n\t\t\t\t\toffset: [0, -18],\n\t\t\t\t\tclassName: 'tooltip-marker',\n\t\t\t\t\tcloseButton: false,\n\t\t\t\t})\n\t\t\t\t\t.setHTML(`<div class=\"ant-tooltip-inner tooltip-info-location\">${place.name}</div>`)\n\t\t\t\t\t.setMaxWidth('150px');\n\t\t\t\tif (this.start_marker) {\n\t\t\t\t\tthis.start_marker = this.start_marker.setLngLat(place.geometry.location).setPopup(popup).addTo(this.map);\n\t\t\t\t} else {\n\t\t\t\t\tconst marker_start = document.createElement('div');\n\t\t\t\t\tmarker_start.innerHTML = ReactDOMServer.renderToStaticMarkup(\n\t\t\t\t\t\t<div className=\"marker-start\">\n\t\t\t\t\t\t\t<img\n\t\t\t\t\t\t\t\tsrc={images.button}\n\t\t\t\t\t\t\t\tstyle={{ width: 12 }}\n\t\t\t\t\t\t\t\talt=\"\"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t);\n\t\t\t\t\tthis.start_marker = new maplibregl.Marker({\n\t\t\t\t\t\tanchor: 'center',\n\t\t\t\t\t\telement: marker_start,\n\t\t\t\t\t})\n\t\t\t\t\t\t.setPopup(popup)\n\t\t\t\t\t\t.setLngLat(place.geometry.location)\n\t\t\t\t\t\t.addTo(this.map);\n\t\t\t\t\tthis.start_marker.getElement().addEventListener('contextmenu', (e) => {\n\t\t\t\t\t\te.stopPropagation();\n\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\tconst lngLat = this.start_marker.getLngLat();\n\t\t\t\t\t\tthis.props.dispatch(setPopupRightClick(true, lngLat, 'popupFromPlace'));\n\t\t\t\t\t\tthis.props.dispatch(setRedMarkerAction(false));\n\t\t\t\t\t});\n\t\t\t\t\tthis.start_marker.getElement().addEventListener('click', () => {\n\t\t\t\t\t\tif (popup.isOpen()) {\n\t\t\t\t\t\t\tthis.start_marker.togglePopup();\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\tthis.start_marker.getElement().addEventListener('mouseenter', () => this.start_marker.togglePopup());\n\t\t\t\t\tthis.start_marker.getElement().addEventListener('mouseleave', () => this.start_marker.togglePopup());\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tif (equal(this.start_marker.getLngLat(), this.props.position_popup)) {\n\t\t\t\t\tthis.props.dispatch(setPopupRightClick(false));\n\t\t\t\t}\n\t\t\t\tif (equal(prevProps.from_place?.place_id, this.state.placeMouseClick?.place_id)) {\n\t\t\t\t\tthis.changeVisibleBottomInfo(false);\n\t\t\t\t}\n\t\t\t\tthis.changeVisibleBottomInfo(false);\n\t\t\t\tthis.start_marker ? this.start_marker.remove() : null;\n\t\t\t}\n\t\t}\n\n\t\tif (!equal(prevProps.to_place, this.props.to_place)) {\n\t\t\tconst place = this.props.to_place;\n\t\t\tif (place) {\n\t\t\t\tconst popup = new maplibregl.Popup({\n\t\t\t\t\toffset: [0, -18],\n\t\t\t\t\tclassName: 'tooltip-marker',\n\t\t\t\t\tcloseButton: false,\n\t\t\t\t})\n\t\t\t\t\t.setHTML(`<div class=\"ant-tooltip-inner tooltip-info-location\">${place.name}</div>`)\n\t\t\t\t\t.setMaxWidth('150px');\n\t\t\t\tif (this.end_marker) {\n\t\t\t\t\tthis.to_place = this.end_marker.setPopup(popup).setLngLat(place.geometry.location).addTo(this.map);\n\t\t\t\t} else {\n\t\t\t\t\tconst marker_end = document.createElement('div');\n\t\t\t\t\tmarker_end.innerHTML = ReactDOMServer.renderToStaticMarkup(\n\t\t\t\t\t\t<div className=\"marker-end\">\n\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t<img\n\t\t\t\t\t\t\t\t\tsrc={images.marker}\n\t\t\t\t\t\t\t\t\talt=\"\"\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t);\n\t\t\t\t\tthis.end_marker = new maplibregl.Marker({\n\t\t\t\t\t\tanchor: 'center',\n\t\t\t\t\t\telement: marker_end,\n\t\t\t\t\t})\n\t\t\t\t\t\t.setPopup(popup)\n\t\t\t\t\t\t.setLngLat(place.geometry.location)\n\t\t\t\t\t\t.addTo(this.map);\n\t\t\t\t\tthis.end_marker.getElement().addEventListener('contextmenu', (e) => {\n\t\t\t\t\t\te.stopPropagation();\n\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\tconst lngLat = this.end_marker.getLngLat();\n\t\t\t\t\t\tthis.props.dispatch(setPopupRightClick(true, lngLat, 'popupToPlace'));\n\t\t\t\t\t\tthis.props.dispatch(setRedMarkerAction(false));\n\t\t\t\t\t});\n\t\t\t\t\tthis.end_marker.getElement().addEventListener('click', () => {\n\t\t\t\t\t\tif (popup.isOpen()) {\n\t\t\t\t\t\t\tthis.end_marker.togglePopup();\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\tthis.end_marker.getElement().addEventListener('mouseenter', () => this.end_marker.togglePopup());\n\t\t\t\t\tthis.end_marker.getElement().addEventListener('mouseleave', () => this.end_marker.togglePopup());\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tif (equal(this.start_marker?.getLngLat(), this.props.position_popup)) {\n\t\t\t\t\tthis.props.dispatch(setPopupRightClick(false));\n\t\t\t\t}\n\n\t\t\t\tif (equal(prevProps.to_place?.place_id, this.state.placeMouseClick?.place_id)) {\n\t\t\t\t\tthis.changeVisibleBottomInfo(false);\n\t\t\t\t}\n\t\t\t\tthis.end_marker ? this.end_marker.remove() : null;\n\t\t\t}\n\t\t}\n\n\t\tif (!equal(prevProps.around_places, this.props.around_places) || !equal(prevProps.around_place_select, this.props.around_place_select)) {\n\t\t\tif (this.list_marker_around?.length > 0) {\n\t\t\t\tthis.list_marker_around.forEach((item) => {\n\t\t\t\t\titem.remove();\n\t\t\t\t});\n\t\t\t\tthis.list_marker_around = [];\n\t\t\t}\n\t\t\tconst { around_places, around_place_center } = this.props;\n\t\t\tif (around_places.length > 0) {\n\t\t\t\tthis.list_marker_around = [];\n\t\t\t\tlet el = document.createElement('div');\n\t\t\t\tel.innerHTML = ReactDOMServer.renderToStaticMarkup(\n\t\t\t\t\t<Marker\n\t\t\t\t\t\tid=\"marker-center\"\n\t\t\t\t\t\ttype=\"center\"\n\t\t\t\t\t/>\n\t\t\t\t);\n\t\t\t\tthis.list_marker_around[0] = new maplibregl.Marker(el, {\n\t\t\t\t\tanchor: 'bottom',\n\t\t\t\t})\n\t\t\t\t\t.setPopup(\n\t\t\t\t\t\tnew maplibregl.Popup({\n\t\t\t\t\t\t\toffset: [0, -32],\n\t\t\t\t\t\t\tclassName: 'tooltip-marker',\n\t\t\t\t\t\t\tcloseButton: false,\n\t\t\t\t\t\t})\n\t\t\t\t\t\t\t.setHTML(`<div class=\"ant-tooltip-inner tooltip-info-location\">${around_place_center.name}</div>`)\n\t\t\t\t\t\t\t.setMaxWidth('150px')\n\t\t\t\t\t)\n\t\t\t\t\t.setLngLat(around_place_center.geometry.location)\n\t\t\t\t\t.addTo(this.map);\n\t\t\t\tconst markerCenterDiv = this.list_marker_around[0].getElement();\n\n\t\t\t\tmarkerCenterDiv.addEventListener('click', () => {\n\t\t\t\t\tthis._selectAroundPlace('center', around_place_center);\n\t\t\t\t\tthis.props.dispatch(setRedMarkerAction(false));\n\t\t\t\t\tif (this.list_marker_around[0].getPopup().isOpen()) {\n\t\t\t\t\t\tthis.list_marker_around[0].togglePopup();\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\tmarkerCenterDiv.addEventListener('contextmenu', (e) => {\n\t\t\t\t\te.stopPropagation();\n\t\t\t\t\te.preventDefault();\n\t\t\t\t\tthis.props.dispatch(setRedMarkerAction(false));\n\t\t\t\t\tthis.props.dispatch(setPopupRightClick(true, around_place_center.geometry.location, 'normal'));\n\t\t\t\t});\n\n\t\t\t\tmarkerCenterDiv.addEventListener('mouseenter', () => this.list_marker_around[0].togglePopup());\n\t\t\t\tmarkerCenterDiv.addEventListener('mouseleave', () => this.list_marker_around[0].togglePopup());\n\n\t\t\t\taround_places.forEach((item, i) => {\n\t\t\t\t\tconst popup = new maplibregl.Popup({\n\t\t\t\t\t\toffset: [0, -32],\n\t\t\t\t\t\tclassName: 'tooltip-marker',\n\t\t\t\t\t\tcloseButton: false,\n\t\t\t\t\t\tanchor: 'bottom',\n\t\t\t\t\t})\n\t\t\t\t\t\t.setHTML(`<div class=\"ant-tooltip-inner tooltip-info-location\">${item.name}</div>`)\n\t\t\t\t\t\t.setMaxWidth('150px');\n\t\t\t\t\tel = document.createElement('div');\n\t\t\t\t\tel.innerHTML = ReactDOMServer.renderToStaticMarkup(\n\t\t\t\t\t\t<Marker\n\t\t\t\t\t\t\ttype=\"around\"\n\t\t\t\t\t\t\tplace={item}\n\t\t\t\t\t\t\tplace_select={this.props.around_place_select}\n\t\t\t\t\t\t\tid={`marker-around-${i}`}\n\t\t\t\t\t\t/>\n\t\t\t\t\t);\n\t\t\t\t\tthis.list_marker_around.push(\n\t\t\t\t\t\tnew maplibregl.Marker(el, { anchor: 'bottom' })\n\t\t\t\t\t\t\t.setPopup(popup)\n\t\t\t\t\t\t\t.setLngLat([item.lng_lat[0] * 1, item.lng_lat[1] * 1])\n\t\t\t\t\t\t\t.addTo(this.map)\n\t\t\t\t\t);\n\t\t\t\t\tconst markerDiv = this.list_marker_around[i + 1].getElement();\n\n\t\t\t\t\tmarkerDiv.addEventListener('click', (e) => {\n\t\t\t\t\t\te.stopPropagation();\n\t\t\t\t\t\tthis.props.dispatch(setRedMarkerAction(false));\n\t\t\t\t\t\tthis._selectAroundPlace('around', item);\n\t\t\t\t\t\tif (popup.isOpen()) {\n\t\t\t\t\t\t\tthis.list_marker_around[i + 1].togglePopup();\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\n\t\t\t\t\tmarkerDiv.addEventListener('contextmenu', (e) => {\n\t\t\t\t\t\te.stopPropagation();\n\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\tthis.props.dispatch(setPopupRightClick(true, { lng: item.lng_lat[0] * 1, lat: item.lng_lat[1] * 1 }, 'around'));\n\t\t\t\t\t\tthis.props.dispatch(setRedMarkerAction(false));\n\t\t\t\t\t});\n\n\t\t\t\t\tmarkerDiv.addEventListener('mouseenter', () => this.list_marker_around[i + 1].togglePopup());\n\t\t\t\t\tmarkerDiv.addEventListener('mouseleave', () => this.list_marker_around[i + 1].togglePopup());\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\n\t\tif (this.props.boxVisible === 'info' && this.props.current_place) {\n\t\t\tif (!this.markerCurrentPlace) {\n\t\t\t\tconst el = document.createElement('div');\n\t\t\t\tel.innerHTML = ReactDOMServer.renderToStaticMarkup(\n\t\t\t\t\t// <Marker type=\"normal\" />\n\t\t\t\t\t<div className=\"marker-histories\">\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<img\n\t\t\t\t\t\t\t\tsrc={images.marker}\n\t\t\t\t\t\t\t\talt=\"\"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t);\n\t\t\t\t// Marker info\n\t\t\t\tthis.markerCurrentPlace = new maplibregl.Marker({\n\t\t\t\t\tanchor: 'bottom',\n\t\t\t\t\telement: el,\n\t\t\t\t})\n\t\t\t\t\t.setLngLat(this.props.current_place?.geometry?.location)\n\t\t\t\t\t.addTo(this.map);\n\t\t\t\tthis.markerCurrentPlace.getElement().addEventListener('contextmenu', (e) => {\n\t\t\t\t\te.stopPropagation();\n\t\t\t\t\te.preventDefault();\n\t\t\t\t\tconst lngLat = this.markerCurrentPlace.getLngLat();\n\t\t\t\t\tthis.props.dispatch(setPopupRightClick(true, lngLat, 'popupCurrentPlace'));\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tthis.markerCurrentPlace.setLngLat(this.props.current_place.geometry.location).addTo(this.map);\n\t\t\t}\n\t\t}\n\n\t\tif (this.props.boxVisible !== 'info' && this.markerCurrentPlace) {\n\t\t\tthis.markerCurrentPlace.remove();\n\t\t\tthis.markerCurrentPlace = null;\n\t\t}\n\t\tif (this.props.boxVisible === 'detailsrestaurant' && this.props.restaurantData) {\n\t\t\tif (this.props.restaurantData.length !== 0) {\n\t\t\t\tfor (let item of this.props.restaurantData) {\n\t\t\t\t\tconst marker_restaurant = document.createElement('div');\n\t\t\t\t\tmarker_restaurant.innerHTML = ReactDOMServer.renderToStaticMarkup(\n\t\t\t\t\t\t// <MarkerNavigation id=\"end-marker\" type=\"histories\" />\n\t\t\t\t\t\t<div className=\"marker-histories\">\n\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t<img\n\t\t\t\t\t\t\t\t\tsrc={images.marker}\n\t\t\t\t\t\t\t\t\talt=\"\"\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t);\n\t\t\t\t\tthis.restaurant_marker = new maplibregl.Marker({\n\t\t\t\t\t\tanchor: 'center',\n\t\t\t\t\t\telement: marker_restaurant,\n\t\t\t\t\t})\n\t\t\t\t\t\t// .setPopup(popup)\n\t\t\t\t\t\t.setLngLat(item.geometry.location)\n\t\t\t\t\t\t.addTo(this.map);\n\t\t\t\t\tthis.listRestaurant.push(this.restaurant_marker);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t// console.log('Có')\n\t\t\t\tfor (let marker of this.listRestaurant) {\n\t\t\t\t\tmarker.remove();\n\t\t\t\t}\n\t\t\t\tthis.listRestaurant = [];\n\t\t\t}\n\t\t}\n\n\t\tif (this.props.boxVisible === 'history') {\n\t\t\tfor (let marker of this.listHistories) {\n\t\t\t\tmarker.remove();\n\t\t\t}\n\t\t\tfor (let item of this.props.searchLocalStorage) {\n\t\t\t\tconst marker_history = document.createElement('div');\n\t\t\t\tmarker_history.innerHTML = ReactDOMServer.renderToStaticMarkup(\n\t\t\t\t\t<div className=\"marker-histories\">\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<img\n\t\t\t\t\t\t\t\tsrc={images.marker}\n\t\t\t\t\t\t\t\talt=\"\"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t);\n\t\t\t\tthis.history_marker = new maplibregl.Marker({\n\t\t\t\t\tanchor: 'center',\n\t\t\t\t\telement: marker_history,\n\t\t\t\t})\n\t\t\t\t\t.setLngLat(item.location)\n\t\t\t\t\t.addTo(this.map);\n\t\t\t\tthis.listHistories.push(this.history_marker);\n\t\t\t}\n\t\t} else {\n\t\t\tfor (let marker of this.listHistories) {\n\t\t\t\tmarker.remove();\n\t\t\t}\n\t\t}\n\n\t\t// if (this.props.boxVisible === \"details\") {\n\t\tif (this.props.result_navigation && this.props.boxVisible === 'details') {\n\t\t\tfor (let step of this.props.result_navigation.fastest[0].legs[0].steps) {\n\t\t\t\tconst popup = new maplibregl.Popup({ offset: [0, -32], className: 'tooltip-marker', closeButton: false, anchor: 'bottom' }).setHTML(`<div class=\"ant-tooltip-inner tooltip-info-location\">${step.html_instructions}</div>`).setMaxWidth('150px');\n\t\t\t\tconst marker_step = document.createElement('div');\n\t\t\t\tmarker_step.innerHTML = ReactDOMServer.renderToStaticMarkup(<div className=\"marker-details\"></div>);\n\t\t\t\tthis.step_marker = new maplibregl.Marker({ anchor: 'center', element: marker_step }).setPopup(popup).setLngLat(step.end_location).addTo(this.map);\n\t\t\t\tthis.list.push(this.step_marker);\n\t\t\t}\n\t\t} else {\n\t\t\tfor (let marker of this.list) {\n\t\t\t\tmarker.remove();\n\t\t\t}\n\t\t\tthis.list = [];\n\t\t}\n\t\t// }\n\t\tif (this.props.boxVisible === 'navigation' && isMobile) {\n\t\t\tif (this.props.result_navigation) {\n\t\t\t\tfor (let step of this.props.result_navigation.fastest[0].legs[0].steps) {\n\t\t\t\t\tconst popup = new maplibregl.Popup({ offset: [0, -32], className: 'tooltip-marker', closeButton: false, anchor: 'bottom' }).setHTML(`<div class=\"ant-tooltip-inner tooltip-info-location\">${step.html_instructions}</div>`).setMaxWidth('150px');\n\t\t\t\t\tconst marker_step = document.createElement('div');\n\t\t\t\t\tmarker_step.innerHTML = ReactDOMServer.renderToStaticMarkup(<div className=\"marker-details\"></div>);\n\t\t\t\t\tthis.step_marker = new maplibregl.Marker({ anchor: 'center', element: marker_step }).setPopup(popup).setLngLat(step.end_location).addTo(this.map);\n\t\t\t\t\tthis.list.push(this.step_marker);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tfor (let marker of this.list) {\n\t\t\t\t\tmarker.remove();\n\t\t\t\t}\n\t\t\t\tthis.list = [];\n\t\t\t}\n\t\t}\n\t}\n\n\tdecodePolyline(encoded) {\n\t\tvar points = [];\n\t\tvar index = 0,\n\t\t\tlen = encoded.length;\n\t\tvar lat = 0,\n\t\t\tlng = 0;\n\n\t\twhile (index < len) {\n\t\t\tvar b,\n\t\t\t\tshift = 0,\n\t\t\t\tresult = 0;\n\t\t\tdo {\n\t\t\t\tb = encoded.charAt(index++).charCodeAt(0) - 63;\n\t\t\t\tresult |= (b & 0x1f) << shift;\n\t\t\t\tshift += 5;\n\t\t\t} while (b >= 0x20);\n\t\t\tvar dlat = result & 1 ? ~(result >> 1) : result >> 1;\n\t\t\tlat += dlat;\n\n\t\t\tshift = 0;\n\t\t\tresult = 0;\n\t\t\tdo {\n\t\t\t\tb = encoded.charAt(index++).charCodeAt(0) - 63;\n\t\t\t\tresult |= (b & 0x1f) << shift;\n\t\t\t\tshift += 5;\n\t\t\t} while (b >= 0x20);\n\t\t\tvar dlng = result & 1 ? ~(result >> 1) : result >> 1;\n\t\t\tlng += dlng;\n\n\t\t\tpoints.push([lng * 1e-5, lat * 1e-5]);\n\t\t}\n\n\t\treturn points;\n\t}\n\n\tchangeStyle = () => {\n\t\tconst { style } = this.state;\n\t\tif (style === STYLE_URL.SATELITE + STYLE_KEY) {\n\t\t\tthis.setState({\n\t\t\t\tstyle: STYLE_URL.NORMAL + STYLE_KEY,\n\t\t\t});\n\t\t\tthis.map.setStyle(STYLE_URL.NORMAL + STYLE_KEY);\n\t\t} else {\n\t\t\tthis.setState({\n\t\t\t\tstyle: STYLE_URL.SATELITE + STYLE_KEY,\n\t\t\t});\n\t\t\tthis.map.setStyle(STYLE_URL.SATELITE + STYLE_KEY);\n\t\t}\n\t};\n\n\tcomponentDidMount() {\n\t\twindow.addEventListener('storage', this.handleStorageChange);\n\t\t// console.log(STYLE_URL.NORMAL)\n\t\tconst selectedPlace = this.props.current_place;\n\t\tthis.map = new maplibregl.Map({\n\t\t\tcontainer: 'map', // container id\n\t\t\tstyle: STYLE_URL.NORMAL + STYLE_KEY,\n\t\t\tcenter: selectedPlace ? [selectedPlace.geometry.location.lng, selectedPlace.geometry.location.lat] : [DEFAULT_VIEWPORT.longitude, DEFAULT_VIEWPORT.latitude], // starting position [lng, lat]\n\t\t\tzoom: DEFAULT_VIEWPORT.zoom, // starting zoom\n\t\t});\n\t\tif (selectedPlace) this.props.dispatch(setRedMarkerAction(true, selectedPlace.geometry.location));\n\n\t\tthis.navigation = new maplibregl.NavigationControl();\n\t\tthis.geolocateControl = new maplibregl.GeolocateControl({\n\t\t\tpositionOptions: {\n\t\t\t\tenableHighAccuracy: true,\n\t\t\t},\n\t\t\t// Bật tắt hiển bị vị trí\n\t\t\ttrackUserLocation: true,\n\t\t\t// Hiển thị\n\t\t\tshowUserLocation: true,\n\t\t\t// Tắt vòng tròn to\n\t\t\tshowAccuracyCircle: false,\n\t\t\t// Điều chỉnh mức zoom đến vị trí của mình\n\t\t\tfitBoundsOptions: {\n\t\t\t\tmaxZoom: 15,\n\t\t\t},\n\t\t});\n\n\t\tthis.geolocateControl.on('error', () => {\n\t\t\tmessage.warning('Goong không thể lấy địa điểm hiện tại của bạn !');\n\t\t});\n\n\t\tthis.geolocateControl.on('geolocate', (e) => {\n\t\t\tthis.props.dispatch(\n\t\t\t\tsetMyLocationAction({\n\t\t\t\t\tlatitude: e.coords.latitude,\n\t\t\t\t\tlongitude: e.coords.longitude,\n\t\t\t\t})\n\t\t\t);\n\t\t});\n\n\t\t!isMobile && this.map.addControl(this.navigation);\n\t\t!isMobile && this.map.addControl(this.geolocateControl);\n\n\t\tthis.map.on('click', this._onMouseClick);\n\t\tthis.map.on('contextmenu', this._onRightClick);\n\t\tthis.map.on('load', () => {\n\t\t\tthis.map.resize();\n\n\t\t\tconst pid = new URLSearchParams(window.location.search).get('pid');\n\t\t\tconst location = new URLSearchParams(window.location.search).get('location')?.split(',');\n\t\t\tconst pid_around = new URLSearchParams(window.location.search).get('pid_around');\n\t\t\tconst direction_infor = new URLSearchParams(window.location.search).get('direction');\n\t\t\tif (!direction_infor && !pid && !location && !pid_around && !this.props.current_place) this.geolocateControl?.trigger();\n\t\t\telse {\n\t\t\t\tif (navigator.geolocation) {\n\t\t\t\t\tnavigator.geolocation.getCurrentPosition((position) => {\n\t\t\t\t\t\tthis.props.dispatch(\n\t\t\t\t\t\t\tsetMyLocationAction({\n\t\t\t\t\t\t\t\tlatitude: position.coords.latitude,\n\t\t\t\t\t\t\t\tlongitude: position.coords.longitude,\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t);\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\tthis.map.on('move', () => {\n\t\t\tthis.props.dispatch(\n\t\t\t\tsetCenterLatLngAction({\n\t\t\t\t\tlatitude: this.map.getCenter().lat,\n\t\t\t\t\tlongitude: this.map.getCenter().lng,\n\t\t\t\t})\n\t\t\t);\n\t\t});\n\t\tthis.map.on('style.load', () => {\n\t\t\tthis.map?.addLayer({\n\t\t\t\tid: '3d-buildings',\n\t\t\t\tsource: 'composite',\n\t\t\t\t'source-layer': 'VN_Building',\n\t\t\t\tfilter: ['==', 'extrude', 'true'],\n\t\t\t\ttype: 'fill-extrusion',\n\t\t\t\tminzoom: 15,\n\t\t\t\tpaint: {\n\t\t\t\t\t'fill-extrusion-color': '#aaa',\n\t\t\t\t\t'fill-extrusion-height': {\n\t\t\t\t\t\ttype: 'identity',\n\t\t\t\t\t\tproperty: 'height',\n\t\t\t\t\t},\n\t\t\t\t\t'fill-extrusion-base': {\n\t\t\t\t\t\ttype: 'identity',\n\t\t\t\t\t\tproperty: 'min_height',\n\t\t\t\t\t},\n\t\t\t\t\t'fill-extrusion-opacity': 0.4,\n\t\t\t\t},\n\t\t\t});\n\t\t\tif (this.props.result_navigation) {\n\t\t\t\tif (this.props.result_select === 'fastest') {\n\t\t\t\t\tthis.props.dispatch(selectResultAction('shortest'));\n\t\t\t\t\tthis.props.dispatch(selectResultAction('fastest'));\n\t\t\t\t} else {\n\t\t\t\t\tthis.props.dispatch(selectResultAction('fastest'));\n\t\t\t\t\tthis.props.dispatch(selectResultAction('shortest'));\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t\tdocument.body.addEventListener('click', this._onClickMenu);\n\t\t// this.map.on('click', 'route-layer-fastest', (e) => {\n\t\t//   console.log(e, 'fastest');\n\t\t//   e.originalEvent.stopPropagation();\n\t\t//   e.originalEvent.preventDefault();\n\t\t// });\n\n\t\t// this.map.on('click', 'route-layer-shortest', (e) => {\n\t\t//   console.log(e)\n\t\t// });\n\n\t\tconst direction_infor = new URLSearchParams(window.location.search).get('direction');\n\t\tconst iframe = new URLSearchParams(window.location.search).get('iframe');\n\t\tif (direction_infor) {\n\t\t\tconst coor_from = {\n\t\t\t\tlat: direction_infor.split('&')[0].split(',')[0],\n\t\t\t\tlng: direction_infor.split('&')[0].split(',')[1],\n\t\t\t};\n\t\t\tconst coor_to = {\n\t\t\t\tlat: direction_infor.split('&')[1].split(',')[0],\n\t\t\t\tlng: direction_infor.split('&')[1].split(',')[1],\n\t\t\t};\n\t\t\tif (coor_from.lat && coor_from.lng && coor_to.lat && coor_to.lng) {\n\t\t\t\t// this.handleFromHere(coor_from.lat, coor_from.lng);\n\t\t\t\t// this.handleToHere(coor_to.lat, coor_to.lng);\n\t\t\t\tif (iframe != null) {\n\t\t\t\t\tthis.navigationByURLIframe(coor_from, coor_to);\n\t\t\t\t} else {\n\t\t\t\t\tthis.navigationByURL(coor_from, coor_to);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// Fetch parking lots\n\t\tthis.props.dispatch(getParkingLotsRequest());\n\t}\n\n\tnavigationByURLIframe = async (from, to) => {\n\t\tthis.props.dispatch(setBoxVisibleAction('iframe'));\n\n\t\tthis.props.dispatch(setRedMarkerAction(false));\n\t\tthis.changeVisibleBottomInfo(false);\n\t\tlet fromplace;\n\t\tif (!from.lat || !from.lng) fromplace = await this._getInforPlace();\n\t\telse {\n\t\t\tfromplace = await this._getInforPlace(from.lat, from.lng);\n\t\t}\n\t\tawait this.props.dispatch(navigationFromAction(fromplace, `${fromplace.name} - ${fromplace.formatted_address}`));\n\t\tlet toplace;\n\t\tif (!to.lat || !to.lng) toplace = await this._getInforPlace();\n\t\telse {\n\t\t\ttoplace = await this._getInforPlace(to.lat, to.lng);\n\t\t}\n\t\tawait this.props.dispatch(navigationToAction(toplace, `${toplace.name} - ${toplace.formatted_address}`));\n\t\tthis.props.dispatch(navigationAction(this.props.from_place, this.props.to_place, 'car'));\n\t};\n\n\tnavigationByURL = async (from, to) => {\n\t\tthis.props.dispatch(setBoxVisibleAction('navigation'));\n\t\tthis.props.dispatch(setRedMarkerAction(false));\n\t\tthis.changeVisibleBottomInfo(false);\n\t\tlet fromplace;\n\t\tif (!from.lat || !from.lng) fromplace = await this._getInforPlace();\n\t\telse {\n\t\t\tfromplace = await this._getInforPlace(from.lat, from.lng);\n\t\t}\n\t\tawait this.props.dispatch(navigationFromAction(fromplace, `${fromplace.name} - ${fromplace.formatted_address}`));\n\t\tlet toplace;\n\t\tif (!to.lat || !to.lng) toplace = await this._getInforPlace();\n\t\telse {\n\t\t\ttoplace = await this._getInforPlace(to.lat, to.lng);\n\t\t}\n\t\tawait this.props.dispatch(navigationToAction(toplace, `${toplace.name} - ${toplace.formatted_address}`));\n\t};\n\n\tcomponentWillUnmount() {\n\t\twindow.removeEventListener('storage', this.handleStorageChange);\n\t\tdocument.body.removeEventListener('click', this._onClickMenu);\n\t}\n\n\thandleStorageChange = (event) => {\n\t\tconsole.log('oppaopaopa');\n\t\tif (event.key === 'search_history') {\n\t\t\tthis.setState({ value: event.newValue });\n\t\t}\n\t};\n\n\trenderParkingLots = () => {\n\t\tconst { parkingLots } = this.props;\n\n\t\treturn parkingLots?.map(lot => {\n\t\t\t// Tạo element cho marker\n\t\t\tconst el = document.createElement('div');\n\t\t\tel.className = 'marker parking-marker';\n\t\t\tel.innerHTML = `\n\t\t\t\t<div class=\"marker-content\">P</div>\n\t\t\t\t<div class=\"marker-info\">\n\t\t\t\t\t<h3>${lot.name}</h3>\n\t\t\t\t\t<p>${lot.address}</p>\n\t\t\t\t\t<p>Available: ${lot.availableSpots}/${lot.capacity}</p>\n\t\t\t\t</div>\n\t\t\t`;\n\n\t\t\t// Tạo marker theo docs của Goong\n\t\t\tconst marker = new maplibregl.Marker({\n\t\t\t\telement: el,\n\t\t\t\tanchor: 'bottom',\n\t\t\t\toffset: [0, -10]\n\t\t\t})\n\t\t\t.setLngLat([lot.longitude, lot.latitude])\n\t\t\t.addTo(this.map);\n\n\t\t\t// Thêm sự kiện click\n\t\t\tmarker.getElement().addEventListener('click', () => {\n\t\t\t\tthis.handleParkingLotClick(lot);\n\t\t\t});\n\n\t\t\treturn marker;\n\t\t});\n\t};\n\n\thandleParkingLotClick = (lot) => {\n\t\t// Zoom đến vị trí parking lot\n\t\tthis.map.flyTo({\n\t\t\tcenter: [lot.longitude, lot.latitude],\n\t\t\tzoom: 15\n\t\t});\n\n\t\t// Hiển thị thông tin\n\t\tthis.setState({\n\t\t\tbottomInfoVisible: true,\n\t\t\tplaceMouseClick: {\n\t\t\t\tname: lot.name,\n\t\t\t\tformatted_address: lot.address,\n\t\t\t\tgeometry: {\n\t\t\t\t\tlocation: {\n\t\t\t\t\t\tlat: lot.latitude,\n\t\t\t\t\t\tlng: lot.longitude\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t};\n\n\trender() {\n\t\tconst { style, bottomInfoVisible, placeMouseClick } = this.state;\n\n\t\treturn (\n\t\t\t<React.Fragment>\n\t\t\t\t<Div100vh>\n\t\t\t\t\t<div id=\"map\">{this.renderParkingLots()}</div>\n\t\t\t\t\t<div>\n\t\t\t\t\t\t{!isMobile && (\n\t\t\t\t\t\t\t<Avatar\n\t\t\t\t\t\t\t\tshape=\"square\"\n\t\t\t\t\t\t\t\tsize={64}\n\t\t\t\t\t\t\t\tonClick={this.changeStyle}\n\t\t\t\t\t\t\t\tclassName=\"change-status-button\"\n\t\t\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\t\t\tbackgroundImage: style === STYLE_URL.NORMAL + STYLE_KEY ? `url(${satellite_img})` : `url(${normal_map_img})`,\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t)}\n\t\t\t\t\t\t{isMobile && (\n\t\t\t\t\t\t\t<Avatar\n\t\t\t\t\t\t\t\tshape=\"square\"\n\t\t\t\t\t\t\t\tsize={64}\n\t\t\t\t\t\t\t\tonClick={this.changeStyle}\n\t\t\t\t\t\t\t\tclassName=\"change-status-button\"\n\t\t\t\t\t\t\t\t// id='change-status-button--mobile'\n\t\t\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\t\t\tbackgroundImage: style === STYLE_URL.NORMAL + STYLE_KEY ? `url(${satellite_img})` : `url(${normal_map_img})`,\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t)}\n\t\t\t\t\t</div>\n\t\t\t\t\t{bottomInfoVisible && (\n\t\t\t\t\t\t<BottomInfoLocation\n\t\t\t\t\t\t\tchangeVisibleBottomInfo={this.changeVisibleBottomInfo}\n\t\t\t\t\t\t\tlat={placeMouseClick.geometry?.location.lat || Number(placeMouseClick.lng_lat[1])}\n\t\t\t\t\t\t\tlng={placeMouseClick.geometry?.location.lng || Number(placeMouseClick.lng_lat[0])}\n\t\t\t\t\t\t\tname={placeMouseClick.name || placeMouseClick.address_components[0].long_name}\n\t\t\t\t\t\t\tisMarkerAround={placeMouseClick.marker_type_id}\n\t\t\t\t\t\t\tplace_id={placeMouseClick._id}\n\t\t\t\t\t\t\taddress={this.getAddressGeocode(placeMouseClick) || placeMouseClick.formatted_address || placeMouseClick.description.address}\n\t\t\t\t\t\t\tremoveMarker={this.removeMarkerWhatIs}\n\t\t\t\t\t\t/>\n\t\t\t\t\t)}\n\t\t\t\t</Div100vh>\n\t\t\t\t<style jsx>{`\n\t\t\t\t\t.parking-marker {\n\t\t\t\t\t\tbackground-color: #fff;\n\t\t\t\t\t\tborder-radius: 50%;\n\t\t\t\t\t\tcursor: pointer;\n\t\t\t\t\t\tpadding: 0;\n\t\t\t\t\t}\n\n\t\t\t\t\t.marker-content {\n\t\t\t\t\t\tbackground: #1890ff;\n\t\t\t\t\t\tcolor: white;\n\t\t\t\t\t\tborder-radius: 50%;\n\t\t\t\t\t\twidth: 32px;\n\t\t\t\t\t\theight: 32px;\n\t\t\t\t\t\tdisplay: flex;\n\t\t\t\t\t\talign-items: center;\n\t\t\t\t\t\tjustify-content: center;\n\t\t\t\t\t\tfont-weight: bold;\n\t\t\t\t\t}\n\n\t\t\t\t\t.marker-info {\n\t\t\t\t\t\tdisplay: none;\n\t\t\t\t\t\tposition: absolute;\n\t\t\t\t\t\tbottom: 100%;\n\t\t\t\t\t\tleft: 50%;\n\t\t\t\t\t\ttransform: translateX(-50%);\n\t\t\t\t\t\tbackground: white;\n\t\t\t\t\t\tpadding: 8px;\n\t\t\t\t\t\tborder-radius: 4px;\n\t\t\t\t\t\tbox-shadow: 0 2px 6px rgba(0,0,0,0.1);\n\t\t\t\t\t\tmin-width: 200px;\n\t\t\t\t\t\tz-index: 1;\n\t\t\t\t\t}\n\n\t\t\t\t\t.parking-marker:hover .marker-info {\n\t\t\t\t\t\tdisplay: block;\n\t\t\t\t\t}\n\t\t\t\t`}</style>\n\t\t\t</React.Fragment>\n\t\t);\n\t}\n}\n\nconst mapStateToProps = (state) => {\n\treturn {\n\t\tcurrent_place: state.placeReducer.current_place,\n\t\tfrom_place: state.navigationReducer.from,\n\t\tto_place: state.navigationReducer.to,\n\t\tboxVisible: state.boxVisibleReducer.box_visible,\n\t\tresult_navigation: state.navigationReducer.result,\n\t\tviewport: state.placeReducer.viewport,\n\t\tresult_select: state.navigationReducer.result_select,\n\t\taround_places: state.searchReducer.around_places,\n\t\tmarkerSelect: state.boxVisibleReducer.red_marker_visible,\n\t\tpositionMarkerSelect: state.boxVisibleReducer.position_red_marker,\n\t\taround_place_center: state.searchReducer.around_place_center,\n\t\tpopup_visible: state.boxVisibleReducer.popup_visible,\n\t\tposition_popup: state.boxVisibleReducer.position_popup,\n\t\ttype_popup: state.boxVisibleReducer.type_popup,\n\t\taround_place_select: state.searchReducer.around_place_select,\n\t\tmy_location: state.placeReducer.my_location,\n\t\trestaurantData: state.searchReducer.restaurant_data,\n\t\tsearchLocalStorage: state.searchReducer.search_local_storage,\n\t\tparkingLots: state.parkingLotReducer.parkingLots,\n\t};\n};\nexport default connect(mapStateToProps)(Map);\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}