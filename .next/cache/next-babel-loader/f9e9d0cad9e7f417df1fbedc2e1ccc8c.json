{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nfunction ownKeys(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }\nfunction _objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys(Object(t), !0).forEach(function (r) { _defineProperty(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }\nimport * as place from \"../consts/place\";\nimport Router from 'next/router';\nvar initialState = {\n  current_place: null,\n  near_places: [],\n  center: {\n    latitude: 21.013722,\n    longitude: 105.798232\n  },\n  viewport: {\n    latitude: 21.013722,\n    longitude: 105.798232,\n    zoom: 12\n  },\n  my_location: null\n};\nexport default function searchReducer() {\n  var state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : initialState;\n  var action = arguments.length > 1 ? arguments[1] : undefined;\n  switch (action.type) {\n    case place.GET_DETAIL_BY_ID_SUCCESS:\n      var pid = action.pid || action.data.place_id;\n      if (pid) {\n        Router.push({\n          pathname: \"/\",\n          query: {\n            pid: \"\".concat(pid)\n          }\n        });\n      } else {\n        Router.push({\n          pathname: \"/\",\n          query: {\n            location: \"\".concat(action.data.geometry.location.lat, \",\").concat(action.data.geometry.location.lng)\n          }\n        });\n      }\n      return _objectSpread(_objectSpread({}, state), {}, {\n        current_place: action.data,\n        near_places: action.nearPlaces\n      });\n    case place.RESET_LOCATION:\n      return _objectSpread(_objectSpread({}, state), {}, {\n        current_place: initialState.current_place,\n        near_places: initialState.near_places\n      });\n    case place.SET_MAP_VIEWPORT_REQUEST:\n      return _objectSpread(_objectSpread({}, state), {}, {\n        viewport: action.viewport\n      });\n    case place.SET_CENTER_LATLNG_REQUEST:\n      return _objectSpread(_objectSpread({}, state), {}, {\n        center: action.latLng\n      });\n    case place.GET_DETAIL_AROUND_PLACE_SUCCESS:\n      var pid_around = action.pid || action.data.place_id;\n      ;\n      if (pid_around) {\n        Router.push({\n          pathname: \"/\",\n          query: {\n            pid_around: pid_around\n          }\n        });\n      }\n      return _objectSpread(_objectSpread({}, state), {}, {\n        current_place: action.data,\n        near_places: action.nearPlaces\n      });\n    case place.SET_MY_LOCATION:\n      return _objectSpread(_objectSpread({}, state), {}, {\n        my_location: action.latLng\n      });\n    default:\n      return _objectSpread({}, state);\n  }\n}","map":{"version":3,"names":["place","Router","initialState","current_place","near_places","center","latitude","longitude","viewport","zoom","my_location","searchReducer","state","arguments","length","undefined","action","type","GET_DETAIL_BY_ID_SUCCESS","pid","data","place_id","push","pathname","query","concat","location","geometry","lat","lng","_objectSpread","nearPlaces","RESET_LOCATION","SET_MAP_VIEWPORT_REQUEST","SET_CENTER_LATLNG_REQUEST","latLng","GET_DETAIL_AROUND_PLACE_SUCCESS","pid_around","SET_MY_LOCATION"],"sources":["D:/Workhome/ParkingLot/live-map/redux/reducers/placeReducer.js"],"sourcesContent":["import * as place from '../consts/place'\nimport Router from 'next/router';\n\nconst initialState = {\n  current_place: null,\n  near_places: [],\n  center: {\n    latitude: 21.013722,\n    longitude: 105.798232\n  },\n  viewport: {\n    latitude: 21.013722,\n    longitude: 105.798232,\n    zoom: 12\n  },\n  my_location: null\n}\n\nexport default function searchReducer(state = initialState, action) {\n  switch (action.type) {\n    case place.GET_DETAIL_BY_ID_SUCCESS:\n      const pid = action.pid || action.data.place_id;\n      if (pid) {\n        Router.push({\n          pathname: `/`,\n          query: { pid: `${pid}` }\n        });\n      } else {\n        Router.push({\n          pathname: `/`,\n          query: { location: `${action.data.geometry.location.lat},${action.data.geometry.location.lng}` }\n        });\n      }\n      return { ...state, current_place: action.data, near_places: action.nearPlaces }\n\n    case place.RESET_LOCATION:\n      return { ...state, current_place: initialState.current_place, near_places: initialState.near_places }\n\n    case place.SET_MAP_VIEWPORT_REQUEST:\n      return { ...state, viewport: action.viewport }\n\n    case place.SET_CENTER_LATLNG_REQUEST:\n      return { ...state, center: action.latLng }\n\n    case place.GET_DETAIL_AROUND_PLACE_SUCCESS:\n      const pid_around = action.pid || action.data.place_id;;\n      if (pid_around) {\n        Router.push({\n          pathname: `/`,\n          query: { pid_around }\n        });\n      }\n      return { ...state, current_place: action.data, near_places: action.nearPlaces }\n    \n    case place.SET_MY_LOCATION:\n      return { ...state, my_location: action.latLng }\n\n    default:\n      return { ...state }\n  }\n}"],"mappings":";;;AAAA,OAAO,KAAKA,KAAK;AACjB,OAAOC,MAAM,MAAM,aAAa;AAEhC,IAAMC,YAAY,GAAG;EACnBC,aAAa,EAAE,IAAI;EACnBC,WAAW,EAAE,EAAE;EACfC,MAAM,EAAE;IACNC,QAAQ,EAAE,SAAS;IACnBC,SAAS,EAAE;EACb,CAAC;EACDC,QAAQ,EAAE;IACRF,QAAQ,EAAE,SAAS;IACnBC,SAAS,EAAE,UAAU;IACrBE,IAAI,EAAE;EACR,CAAC;EACDC,WAAW,EAAE;AACf,CAAC;AAED,eAAe,SAASC,aAAaA,CAAA,EAA+B;EAAA,IAA9BC,KAAK,GAAAC,SAAA,CAAAC,MAAA,QAAAD,SAAA,QAAAE,SAAA,GAAAF,SAAA,MAAGX,YAAY;EAAA,IAAEc,MAAM,GAAAH,SAAA,CAAAC,MAAA,OAAAD,SAAA,MAAAE,SAAA;EAChE,QAAQC,MAAM,CAACC,IAAI;IACjB,KAAKjB,KAAK,CAACkB,wBAAwB;MACjC,IAAMC,GAAG,GAAGH,MAAM,CAACG,GAAG,IAAIH,MAAM,CAACI,IAAI,CAACC,QAAQ;MAC9C,IAAIF,GAAG,EAAE;QACPlB,MAAM,CAACqB,IAAI,CAAC;UACVC,QAAQ,KAAK;UACbC,KAAK,EAAE;YAAEL,GAAG,KAAAM,MAAA,CAAKN,GAAG;UAAG;QACzB,CAAC,CAAC;MACJ,CAAC,MAAM;QACLlB,MAAM,CAACqB,IAAI,CAAC;UACVC,QAAQ,KAAK;UACbC,KAAK,EAAE;YAAEE,QAAQ,KAAAD,MAAA,CAAKT,MAAM,CAACI,IAAI,CAACO,QAAQ,CAACD,QAAQ,CAACE,GAAG,OAAAH,MAAA,CAAIT,MAAM,CAACI,IAAI,CAACO,QAAQ,CAACD,QAAQ,CAACG,GAAG;UAAG;QACjG,CAAC,CAAC;MACJ;MACA,OAAAC,aAAA,CAAAA,aAAA,KAAYlB,KAAK;QAAET,aAAa,EAAEa,MAAM,CAACI,IAAI;QAAEhB,WAAW,EAAEY,MAAM,CAACe;MAAU;IAE/E,KAAK/B,KAAK,CAACgC,cAAc;MACvB,OAAAF,aAAA,CAAAA,aAAA,KAAYlB,KAAK;QAAET,aAAa,EAAED,YAAY,CAACC,aAAa;QAAEC,WAAW,EAAEF,YAAY,CAACE;MAAW;IAErG,KAAKJ,KAAK,CAACiC,wBAAwB;MACjC,OAAAH,aAAA,CAAAA,aAAA,KAAYlB,KAAK;QAAEJ,QAAQ,EAAEQ,MAAM,CAACR;MAAQ;IAE9C,KAAKR,KAAK,CAACkC,yBAAyB;MAClC,OAAAJ,aAAA,CAAAA,aAAA,KAAYlB,KAAK;QAAEP,MAAM,EAAEW,MAAM,CAACmB;MAAM;IAE1C,KAAKnC,KAAK,CAACoC,+BAA+B;MACxC,IAAMC,UAAU,GAAGrB,MAAM,CAACG,GAAG,IAAIH,MAAM,CAACI,IAAI,CAACC,QAAQ;MAAC;MACtD,IAAIgB,UAAU,EAAE;QACdpC,MAAM,CAACqB,IAAI,CAAC;UACVC,QAAQ,KAAK;UACbC,KAAK,EAAE;YAAEa,UAAU,EAAVA;UAAW;QACtB,CAAC,CAAC;MACJ;MACA,OAAAP,aAAA,CAAAA,aAAA,KAAYlB,KAAK;QAAET,aAAa,EAAEa,MAAM,CAACI,IAAI;QAAEhB,WAAW,EAAEY,MAAM,CAACe;MAAU;IAE/E,KAAK/B,KAAK,CAACsC,eAAe;MACxB,OAAAR,aAAA,CAAAA,aAAA,KAAYlB,KAAK;QAAEF,WAAW,EAAEM,MAAM,CAACmB;MAAM;IAE/C;MACE,OAAAL,aAAA,KAAYlB,KAAK;EACrB;AACF","ignoreList":[]},"metadata":{},"sourceType":"module"}