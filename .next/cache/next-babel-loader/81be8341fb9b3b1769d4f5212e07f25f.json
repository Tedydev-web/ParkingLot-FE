{"ast":null,"code":"import _Divider from \"antd/lib/divider\";\nimport _debounce from \"lodash/debounce\";\nvar __jsx = React.createElement;\nimport { connect } from \"react-redux\";\nimport React, { useState, useEffect, useRef, useCallback } from \"react\";\nimport { searchAction, searchClearAction, setHistoryBox, setSearchData, setSearchLocalStorage } from \"../redux/actions/search\";\nimport { getDetailByIdAction, getDetailByLatLngAction } from \"../redux/actions/place\";\nimport { SearchOutlined, CloseOutlined } from \"@ant-design/icons\";\nimport equal from \"fast-deep-equal/es6/react\";\nimport { setBoxVisibleAction } from \"../redux/actions/boxVisble\";\nimport { getDetailIdService, getDetailLatLngService } from \"../redux/sagas/placeSaga\";\nimport Request from \"../utils/request\";\nimport { useTranslation } from \"react-i18next\";\nimport { isMobile } from \"react-device-detect\";\n// const config = require(\"../config.\" + (process.env.NODE_ENV || \"dev\") + \".js\");\n// import * as configDev from '../config.dev.js';\nimport { ArrowLeftOutlined } from \"@ant-design/icons\";\nconst SearchingBox = props => {\n  var _props$searchData;\n  const {\n    0: value,\n    1: setValue\n  } = useState(\"\");\n  const {\n    0: openDropdown,\n    1: setOpenDropdown\n  } = useState(true);\n  const {\n    0: isDropdownVisible,\n    1: setIsDropdownVisible\n  } = useState(false);\n  const {\n    0: place,\n    1: setPlace\n  } = useState(null);\n  const {\n    0: searchHistory,\n    1: setSearchHistory\n  } = useState([]);\n  const searchBoxRef = useRef(null);\n  const {\n    0: openSearch2,\n    1: setOpenSearch2\n  } = useState(false);\n  const {\n    0: openHistory2,\n    1: setOpenHistory2\n  } = useState(false);\n  // const [showIcon, setShowIcon] = useState(false);\n\n  const {\n    t\n  } = useTranslation(\"common\");\n  useEffect(() => {\n    props.dispatch(setHistoryBox(false));\n    if (props.info_box_collapsed) {\n      setOpenDropdown(false);\n    }\n    if (!equal(place, props.place)) {\n      var _props$place, _props$place2;\n      const value = props.place ? `${(_props$place = props.place) === null || _props$place === void 0 ? void 0 : _props$place.name} - ${(_props$place2 = props.place) === null || _props$place2 === void 0 ? void 0 : _props$place2.formatted_address}` : \"\";\n      setPlace(props.place);\n      setValue(value);\n    }\n    const timer = setTimeout(() => {\n      if (!isMobile) {\n        props.dispatch(setHistoryBox(true));\n      }\n    }, 2000);\n    return () => clearTimeout(timer);\n  }, [props.info_box_collapsed, props.place, place]);\n  useEffect(() => {\n    const handleClickOutside = event => {\n      if (searchBoxRef.current && !searchBoxRef.current.contains(event.target)) {\n        props.dispatch(setHistoryBox(false));\n      }\n    };\n    document.addEventListener(\"mousedown\", handleClickOutside);\n    return () => {\n      document.removeEventListener(\"mousedown\", handleClickOutside);\n    };\n  }, []);\n  const debouncedSearch = useCallback(_debounce((text, latLngStr) => {\n    props.dispatch(searchAction(text, latLngStr));\n  }, 500), []);\n  const onChange = event => {\n    const text = event.target.value;\n    if (!text) {\n      props.dispatch(setBoxVisibleAction(\"search\"));\n      setValue(text);\n    } else {\n      setValue(text);\n      props.dispatch(setHistoryBox(true));\n      let data = JSON.parse(localStorage.getItem(\"search_history\"));\n      // console.log('-------data',data)\n      const filtered = data != null ? data.filter(item => item.description.toLowerCase().includes(text.toLowerCase())) : null;\n      props.dispatch(setSearchData(filtered));\n    }\n    const latLngStr = `${props.latLngCenter.latitude}, ${props.latLngCenter.longitude}`;\n    debouncedSearch(text, latLngStr);\n  };\n  const onTitleSelect = async place => {\n    let check = true;\n    let data = JSON.parse(localStorage.getItem(\"search_history\")) || [];\n    if (!place.location) {\n      const dataHistory = await getDetailIdService(place.place_id);\n      if (check) {\n        if (place != null && data.length < 100) {\n          place.location = dataHistory.data.result.geometry.location;\n          // place.place_id = \"00000000000\"\n          data.push(place);\n        } else if (place != null && data.length >= 100) {\n          data.shift();\n          data.push(place);\n        }\n      }\n      window.localStorage.setItem(\"search_history\", JSON.stringify(data));\n      const pid = place.id || place.place_id;\n      // console.log(pid)\n      props.dispatch(getDetailByIdAction(pid));\n      setValue(`${place.structured_formatting.main_text} - ${place.structured_formatting.secondary_text}`);\n      props.dispatch(setBoxVisibleAction(\"info\"));\n    } else {\n      const latLng = {\n        latitude: place.location.lat,\n        longitude: place.location.lng\n      };\n      const response = (await getDetailLatLngService(latLng)).data.results;\n      // console.log(\"respone______\", response)\n      for (let i = response.length - 1; i >= 0; i--) {\n        if (place.location.lat === response[i].geometry.location.lat && place.location.lng === response[i].geometry.location.lng && place.structured_formatting.main_text === response[i].name && place.place_id != response[i].place_id) {\n          for (let i = data.length - 1; i >= 0; i--) {\n            if (data[i].place_id === place.place_id) {\n              data.splice(i, 1);\n              break;\n            }\n          }\n          place.place_id = response[i].place_id;\n          data.push(place);\n          break;\n        }\n      }\n      for (let i = data.length - 1; i >= 0; i--) {\n        // Nếu có rồi thì đảo lại place đó lên\n        if (data[i].place_id === place.place_id) {\n          // place.location = dataHistory.data.result.geometry.location\n          data.splice(i, 1);\n          data.push(place);\n          // check = false\n          break;\n        }\n      }\n      window.localStorage.setItem(\"search_history\", JSON.stringify(data));\n      const pid = place.id || place.place_id;\n      props.dispatch(getDetailByIdAction(pid));\n      setValue(`${place.structured_formatting.main_text} - ${place.structured_formatting.secondary_text}`);\n      props.dispatch(setBoxVisibleAction(\"info\"));\n    }\n  };\n  const closeBox = event => {\n    props.dispatch(searchClearAction());\n    props.dispatch(setBoxVisibleAction(\"search\"));\n    props.dispatch(setSearchLocalStorage([]));\n    setValue(\"\");\n    setOpenDropdown(false);\n  };\n  const clickSearch = () => {\n    // setShowIcon(true); // Hiện icon khi nhấp vào search box\n    // setOpenSearch2(true); // Hiện lịch sử tìm kiếm khi nhấp vào search box\n    props.dispatch(setHistoryBox(true)); // Cập nhật trạng thái lịch sử tìm kiếm qua Redux\n  };\n  const closeSearch = () => {\n    props.dispatch(setHistoryBox(false));\n  };\n  const clickShowHistory = () => {\n    props.dispatch(setBoxVisibleAction(\"history\"));\n  };\n  const deleteHistory = place => {\n    let data = JSON.parse(localStorage.getItem(\"search_history\"));\n    for (let i = data.length - 1; i >= 0; i--) {\n      if (data[i].place_id === place.place_id) {\n        data.splice(i, 1);\n        break;\n      }\n    }\n    window.localStorage.setItem(\"search_history\", JSON.stringify(data));\n    setIsDropdownVisible(true);\n    setSearchHistory(data.slice(-5).reverse());\n  };\n  const {\n    places\n  } = props;\n  let data = JSON.parse(localStorage.getItem(\"search_history\"));\n  let history = data == null ? null : data.slice(-5).reverse();\n  let numberSearchResult = 5 - (props.searchData != null ? props.searchData.length : 0);\n  let isHistory = true;\n  if (places.length > 0) {\n    isHistory = false;\n  }\n  let openHistory = true;\n  if (props.boxVisible === \"info\") {\n    openHistory = false;\n  }\n  let openSearch = true;\n  if (props.boxVisible === \"info\" && value !== \"\") {\n    openSearch = false;\n  }\n  if (props.boxVisible === \"history\" && value === \"\") {\n    openSearch = false;\n  }\n  const suffixWeb = value || props.boxVisible === \"history\" ? __jsx(\"div\", null, __jsx(CloseOutlined, {\n    style: {\n      cursor: \"pointer\",\n      fontSize: 16\n    },\n    onClick: e => {\n      e.stopPropagation();\n      closeBox();\n    }\n  })) : __jsx(\"div\", null, __jsx(SearchOutlined, {\n    style: {\n      cursor: \"pointer\",\n      fontSize: 17,\n      color: \"#1890ff\"\n    }\n  }), __jsx(_Divider, {\n    type: \"vertical\",\n    style: {\n      fontSize: 16,\n      background: \"#ddd\"\n    }\n  }), __jsx(\"i\", {\n    className: \"fas fa-directions\",\n    style: {\n      cursor: \"pointer\",\n      color: \"#1890ff\",\n      fontSize: 20\n    },\n    onClick: () => props.dispatch(setBoxVisibleAction(\"navigation\"))\n  }));\n  const suffixMobile = value || props.boxVisible === \"history\" ? __jsx(\"div\", null, __jsx(CloseOutlined, {\n    style: {\n      cursor: \"pointer\",\n      fontSize: 16\n    },\n    onClick: e => {\n      e.stopPropagation();\n      closeBox();\n    }\n  })) : __jsx(\"div\", null, __jsx(SearchOutlined, {\n    style: {\n      cursor: \"pointer\",\n      fontSize: 17,\n      color: \"#1890ff\"\n    }\n  }), __jsx(_Divider, {\n    type: \"vertical\",\n    style: {\n      fontSize: 16,\n      background: \"#ddd\"\n    }\n  }), __jsx(\"i\", {\n    className: \"fas fa-directions\",\n    style: {\n      cursor: \"pointer\",\n      color: \"#1890ff\",\n      fontSize: 20\n    },\n    onClick: () => props.dispatch(setBoxVisibleAction(\"navigation\"))\n  }));\n  return __jsx(\"div\", null, !isMobile && __jsx(\"div\", {\n    className: \"search\",\n    ref: searchBoxRef,\n    onClick: () => clickSearch()\n  }, __jsx(\"div\", {\n    className: \"search_box\"\n  }, __jsx(\"input\", {\n    className: \"search_input\",\n    value: value,\n    onChange: onChange,\n    type: \"text\",\n    placeholder: t(\"search_placeholder\")\n  }), suffixWeb), isHistory && openHistory && openSearch && props.openHistory && history && __jsx(\"div\", {\n    className: \"search_history\"\n  }, history.map((item, index) => __jsx(\"div\", {\n    onClick: () => onTitleSelect(item),\n    key: index,\n    style: {\n      borderTop: index === 0 ? \"1px solid #ddd\" : \"none\"\n    }\n  }, __jsx(\"i\", {\n    className: \"fas fa-history\"\n  }), __jsx(\"span\", {\n    className: \"history_text\"\n  }, __jsx(\"span\", {\n    className: \"title\"\n  }, item.structured_formatting.main_text + \" \"), __jsx(\"span\", {\n    className: \"text\"\n  }, item.structured_formatting.secondary_text)), __jsx(CloseOutlined, {\n    className: \"hover-icon\",\n    style: {\n      cursor: \"pointer\",\n      fontSize: 20,\n      color: \"gray\"\n    },\n    onClick: e => {\n      e.stopPropagation();\n      deleteHistory(item);\n    }\n  })))), !isHistory && props.openHistory && openSearch && __jsx(\"div\", {\n    className: \"search_history\"\n  }, props.searchData != null ? props.searchData.slice(0, 5).map((item, index) => __jsx(\"div\", {\n    onClick: () => onTitleSelect(item),\n    key: index,\n    style: {\n      borderTop: index === 0 ? \"1px solid #ddd\" : \"none\"\n    }\n  }, __jsx(\"i\", {\n    className: \"fas fa-history\"\n  }), __jsx(\"span\", {\n    className: \"history_text\"\n  }, __jsx(\"span\", {\n    className: \"title\"\n  }, item.structured_formatting.main_text + \" \"), __jsx(\"span\", {\n    className: \"text\"\n  }, item.structured_formatting.secondary_text)))) : null, (props.searchData != null ? props.searchData.length : 0) > 5 ? null : places.slice(0, numberSearchResult).map((item, index) => __jsx(\"div\", {\n    onClick: () => onTitleSelect(item),\n    key: index,\n    style: {\n      borderTop: index === 0 && numberSearchResult === 5 ? \"1px solid #ddd\" : \"none\"\n    }\n  }, __jsx(\"i\", {\n    className: \"fas fa-location-arrow\"\n  }), __jsx(\"span\", {\n    className: \"history_text\"\n  }, __jsx(\"span\", {\n    className: \"title\"\n  }, item.structured_formatting.main_text + \" \"), __jsx(\"span\", {\n    className: \"text\"\n  }, item.structured_formatting.secondary_text))))), props.openHistory && openSearch && (data != null ? data.length : 0) > 5 && __jsx(\"div\", {\n    className: \"locations\",\n    onClick: () => clickShowHistory()\n  }, t(\"location_content_text_i18search\"))), __jsx(\"div\", {\n    className: \"info--mobile\"\n  }, isMobile && __jsx(\"div\", {\n    className: \"search\",\n    ref: searchBoxRef,\n    onClick: () => clickSearch()\n  }, __jsx(\"div\", {\n    className: \"search_box\"\n  }, props.openHistory && __jsx(\"div\", {\n    onClick: e => {\n      e.stopPropagation();\n      closeSearch();\n    }\n  }, __jsx(ArrowLeftOutlined, {\n    id: \"info--arrow--back--mobile\"\n  })), __jsx(\"input\", {\n    className: \"search_input\",\n    value: value,\n    onChange: onChange,\n    type: \"text\",\n    placeholder: t(\"search_placeholder\")\n  }), suffixMobile), isHistory && openHistory && openSearch && props.openHistory && history && __jsx(\"div\", {\n    className: \"search_history\"\n  }, data.slice(0, 10).reverse().map((item, index) => __jsx(\"div\", {\n    onClick: () => onTitleSelect(item),\n    key: index,\n    style: {\n      borderTop: index === 0 ? \"1px solid #ddd\" : \"none\",\n      padding: \"0px 15px\"\n    }\n  }, __jsx(\"div\", {\n    className: \"history_item\"\n  }, __jsx(\"i\", {\n    className: \"fas fa-history\"\n  }), __jsx(\"span\", {\n    className: \"history_text\"\n  }, __jsx(\"span\", {\n    className: \"title\"\n  }, item.structured_formatting.main_text), __jsx(\"p\", {\n    className: \"text\"\n  }, item.structured_formatting.secondary_text))), __jsx(CloseOutlined, {\n    className: \"hover-icon\",\n    style: {\n      cursor: \"pointer\",\n      fontSize: 20,\n      color: \"gray\"\n    },\n    onClick: e => {\n      e.stopPropagation();\n      deleteHistory(item);\n    }\n  })))), !isHistory && props.openHistory && openSearch && __jsx(\"div\", {\n    className: \"search_history\"\n  }, (_props$searchData = props.searchData) === null || _props$searchData === void 0 ? void 0 : _props$searchData.slice(0, 10).map((item, index) => __jsx(\"div\", {\n    onClick: () => onTitleSelect(item),\n    key: index,\n    style: {\n      borderTop: index === 0 ? \"1px solid #ddd\" : \"none\",\n      padding: \"0px 15px\"\n    }\n  }, __jsx(\"div\", {\n    className: \"history_item\"\n  }, __jsx(\"i\", {\n    className: \"fas fa-location-arrow\"\n  }), __jsx(\"span\", {\n    className: \"history_text\"\n  }, __jsx(\"span\", {\n    className: \"title\"\n  }, item.structured_formatting.main_text + \" \"), __jsx(\"p\", {\n    className: \"text\"\n  }, item.structured_formatting.secondary_text))))), places.slice(0, numberSearchResult).map((item, index) => __jsx(\"div\", {\n    onClick: () => onTitleSelect(item),\n    key: index,\n    style: {\n      borderTop: index === 0 && numberSearchResult === 5 ? \"1px solid #ddd\" : \"none\"\n    }\n  }, __jsx(\"div\", {\n    className: \"history_item\"\n  }, __jsx(\"i\", {\n    className: \"fas fa-location-arrow\"\n  }), __jsx(\"span\", {\n    className: \"history_text\"\n  }, __jsx(\"span\", {\n    className: \"title\"\n  }, item.structured_formatting.main_text + \" \"), __jsx(\"p\", {\n    className: \"text\"\n  }, item.structured_formatting.secondary_text)))))))));\n};\nconst mapStateToProps = state => {\n  return {\n    places: state.searchReducer.places,\n    boxVisible: state.boxVisibleReducer.box_visible,\n    info_box_collapsed: state.boxVisibleReducer.info_box_collapsed,\n    latLngCenter: state.placeReducer.center,\n    openHistory: state.searchReducer.search_history,\n    searchData: state.searchReducer.search_data\n  };\n};\nexport default connect(mapStateToProps)(SearchingBox);","map":{"version":3,"names":["connect","React","useState","useEffect","useRef","useCallback","searchAction","searchClearAction","setHistoryBox","setSearchData","setSearchLocalStorage","getDetailByIdAction","getDetailByLatLngAction","SearchOutlined","CloseOutlined","equal","setBoxVisibleAction","getDetailIdService","getDetailLatLngService","Request","useTranslation","isMobile","ArrowLeftOutlined","SearchingBox","props","_props$searchData","value","setValue","openDropdown","setOpenDropdown","isDropdownVisible","setIsDropdownVisible","place","setPlace","searchHistory","setSearchHistory","searchBoxRef","openSearch2","setOpenSearch2","openHistory2","setOpenHistory2","t","dispatch","info_box_collapsed","_props$place","_props$place2","name","formatted_address","timer","setTimeout","clearTimeout","handleClickOutside","event","current","contains","target","document","addEventListener","removeEventListener","debouncedSearch","_debounce","text","latLngStr","onChange","data","JSON","parse","localStorage","getItem","filtered","filter","item","description","toLowerCase","includes","latLngCenter","latitude","longitude","onTitleSelect","check","location","dataHistory","place_id","length","result","geometry","push","shift","window","setItem","stringify","pid","id","structured_formatting","main_text","secondary_text","latLng","lat","lng","response","results","i","splice","closeBox","clickSearch","closeSearch","clickShowHistory","deleteHistory","slice","reverse","places","history","numberSearchResult","searchData","isHistory","openHistory","boxVisible","openSearch","suffixWeb","__jsx","style","cursor","fontSize","onClick","e","stopPropagation","color","_Divider","type","background","className","suffixMobile","ref","placeholder","map","index","key","borderTop","padding","mapStateToProps","state","searchReducer","boxVisibleReducer","box_visible","placeReducer","center","search_history","search_data"],"sources":["D:/Workhome/ParkingLot/live-map/components/SearchingBox.jsx"],"sourcesContent":["import { Input, AutoComplete, Divider, message } from \"antd\";\nimport { connect } from \"react-redux\";\nimport React, { useState, useEffect, useRef, useCallback } from \"react\";\nimport {\n  searchAction,\n  searchClearAction,\n  setHistoryBox,\n  setSearchData,\n  setSearchLocalStorage\n} from \"../redux/actions/search\";\nimport {\n  getDetailByIdAction,\n  getDetailByLatLngAction,\n} from \"../redux/actions/place\";\nimport { SearchOutlined, CloseOutlined } from \"@ant-design/icons\";\nimport equal from \"fast-deep-equal/es6/react\";\nimport { setBoxVisibleAction } from \"../redux/actions/boxVisble\";\nimport {\n  getDetailIdService,\n  getDetailLatLngService,\n} from \"../redux/sagas/placeSaga\";\nimport Request from \"../utils/request\";\nimport { useTranslation } from \"react-i18next\";\nimport _ from \"lodash\";\nimport { isMobile } from \"react-device-detect\";\n// const config = require(\"../config.\" + (process.env.NODE_ENV || \"dev\") + \".js\");\n// import * as configDev from '../config.dev.js';\nimport { ArrowLeftOutlined } from \"@ant-design/icons\";\nconst SearchingBox = (props) => {\n  const [value, setValue] = useState(\"\");\n  const [openDropdown, setOpenDropdown] = useState(true);\n  const [isDropdownVisible, setIsDropdownVisible] = useState(false);\n  const [place, setPlace] = useState(null);\n  const [searchHistory, setSearchHistory] = useState([]);\n  const searchBoxRef = useRef(null);\n\n  const [openSearch2, setOpenSearch2] = useState(false);\n\n  const [openHistory2, setOpenHistory2] = useState(false);\n  // const [showIcon, setShowIcon] = useState(false);\n\n  const { t } = useTranslation(\"common\");\n\n  useEffect(() => {\n    props.dispatch(setHistoryBox(false));\n    if (props.info_box_collapsed) {\n      setOpenDropdown(false);\n    }\n    if (!equal(place, props.place)) {\n      const value = props.place\n        ? `${props.place?.name} - ${props.place?.formatted_address}`\n        : \"\";\n      setPlace(props.place);\n      setValue(value);\n    }\n\n    const timer = setTimeout(() => {\n      if (!isMobile) {\n        props.dispatch(setHistoryBox(true));\n      }\n    }, 2000);\n    return () => clearTimeout(timer);\n  }, [props.info_box_collapsed, props.place, place]);\n\n  useEffect(() => {\n    const handleClickOutside = (event) => {\n      if (\n        searchBoxRef.current &&\n        !searchBoxRef.current.contains(event.target)\n      ) {\n        props.dispatch(setHistoryBox(false));\n      }\n    };\n\n    document.addEventListener(\"mousedown\", handleClickOutside);\n    return () => {\n      document.removeEventListener(\"mousedown\", handleClickOutside);\n    };\n  }, []);\n\n  const debouncedSearch = useCallback(\n    _.debounce((text, latLngStr) => {\n      props.dispatch(searchAction(text, latLngStr));\n    }, 500),\n    []\n  );\n\n  const onChange = (event) => {\n    const text = event.target.value;\n    if (!text) {\n      props.dispatch(setBoxVisibleAction(\"search\"));\n      setValue(text);\n    } else {\n      setValue(text);\n      props.dispatch(setHistoryBox(true));\n      let data = JSON.parse(localStorage.getItem(\"search_history\"));\n      // console.log('-------data',data)\n      const filtered =\n        data != null\n          ? data.filter((item) =>\n            item.description.toLowerCase().includes(text.toLowerCase())\n          )\n          : null;\n      props.dispatch(setSearchData(filtered));\n    }\n    const latLngStr = `${props.latLngCenter.latitude}, ${props.latLngCenter.longitude}`;\n    debouncedSearch(text, latLngStr);\n  };\n\n  const onTitleSelect = async (place) => {\n    let check = true;\n    let data = JSON.parse(localStorage.getItem(\"search_history\")) || [];\n    if (!place.location) {\n      const dataHistory = await getDetailIdService(place.place_id);\n      if (check) {\n        if (place != null && data.length < 100) {\n          place.location = dataHistory.data.result.geometry.location;\n          // place.place_id = \"00000000000\"\n          data.push(place);\n        } else if (place != null && data.length >= 100) {\n          data.shift();\n          data.push(place);\n        }\n      }\n      window.localStorage.setItem(\"search_history\", JSON.stringify(data));\n      const pid = place.id || place.place_id;\n      // console.log(pid)\n      props.dispatch(getDetailByIdAction(pid));\n      setValue(\n        `${place.structured_formatting.main_text} - ${place.structured_formatting.secondary_text}`\n      );\n      props.dispatch(setBoxVisibleAction(\"info\"));\n    } else {\n      const latLng = {\n        latitude: place.location.lat,\n        longitude: place.location.lng,\n      };\n\n      const response = (await getDetailLatLngService(latLng)).data.results;\n      // console.log(\"respone______\", response)\n      for (let i = response.length - 1; i >= 0; i--) {\n        if (\n          place.location.lat === response[i].geometry.location.lat &&\n          place.location.lng === response[i].geometry.location.lng &&\n          place.structured_formatting.main_text === response[i].name &&\n          place.place_id != response[i].place_id\n        ) {\n          for (let i = data.length - 1; i >= 0; i--) {\n            if (data[i].place_id === place.place_id) {\n              data.splice(i, 1);\n              break;\n            }\n          }\n          place.place_id = response[i].place_id;\n          data.push(place);\n          break;\n        }\n      }\n      for (let i = data.length - 1; i >= 0; i--) {\n        // Nếu có rồi thì đảo lại place đó lên\n        if (data[i].place_id === place.place_id) {\n          // place.location = dataHistory.data.result.geometry.location\n          data.splice(i, 1);\n          data.push(place);\n          // check = false\n          break;\n        }\n      }\n      window.localStorage.setItem(\"search_history\", JSON.stringify(data));\n      const pid = place.id || place.place_id;\n      props.dispatch(getDetailByIdAction(pid));\n      setValue(\n        `${place.structured_formatting.main_text} - ${place.structured_formatting.secondary_text}`\n      );\n      props.dispatch(setBoxVisibleAction(\"info\"));\n    }\n  };\n\n  const closeBox = (event) => {\n    props.dispatch(searchClearAction());\n    props.dispatch(setBoxVisibleAction(\"search\"));\n    props.dispatch(setSearchLocalStorage([]))\n    setValue(\"\");\n    setOpenDropdown(false);\n  };\n\n  const clickSearch = () => {\n    // setShowIcon(true); // Hiện icon khi nhấp vào search box\n    // setOpenSearch2(true); // Hiện lịch sử tìm kiếm khi nhấp vào search box\n    props.dispatch(setHistoryBox(true)); // Cập nhật trạng thái lịch sử tìm kiếm qua Redux\n  };\n\n  const closeSearch = () => {\n    props.dispatch(setHistoryBox(false));\n  };\n\n  const clickShowHistory = () => {\n    props.dispatch(setBoxVisibleAction(\"history\"));\n  };\n\n  const deleteHistory = (place) => {\n    let data = JSON.parse(localStorage.getItem(\"search_history\"));\n    for (let i = data.length - 1; i >= 0; i--) {\n      if (data[i].place_id === place.place_id) {\n        data.splice(i, 1);\n        break;\n      }\n    }\n    window.localStorage.setItem(\"search_history\", JSON.stringify(data));\n    setIsDropdownVisible(true);\n    setSearchHistory(data.slice(-5).reverse());\n  };\n\n  const { places } = props;\n\n  let data = JSON.parse(localStorage.getItem(\"search_history\"));\n  let history = data == null ? null : data.slice(-5).reverse();\n\n  let numberSearchResult =\n    5 - (props.searchData != null ? props.searchData.length : 0);\n  let isHistory = true;\n  if (places.length > 0) {\n    isHistory = false;\n  }\n  let openHistory = true;\n  if (props.boxVisible === \"info\") {\n    openHistory = false;\n  }\n\n  let openSearch = true;\n  if (props.boxVisible === \"info\" && value !== \"\") {\n    openSearch = false;\n  }\n\n  if (props.boxVisible === \"history\" && value === \"\") {\n    openSearch = false;\n  }\n\n  const suffixWeb =\n    value || props.boxVisible === \"history\" ? (\n      <div>\n        <CloseOutlined\n          style={{ cursor: \"pointer\", fontSize: 16 }}\n          onClick={(e) => {\n            e.stopPropagation();\n            closeBox();\n          }}\n        />\n      </div>\n    ) : (\n      <div>\n        <SearchOutlined\n          style={{ cursor: \"pointer\", fontSize: 17, color: \"#1890ff\" }}\n        />\n        <Divider type=\"vertical\" style={{ fontSize: 16, background: \"#ddd\" }} />\n        <i\n          className=\"fas fa-directions\"\n          style={{ cursor: \"pointer\", color: \"#1890ff\", fontSize: 20 }}\n          onClick={() => props.dispatch(setBoxVisibleAction(\"navigation\"))}\n        ></i>\n      </div>\n    );\n  const suffixMobile =\n    value || props.boxVisible === \"history\" ? (\n      <div>\n        <CloseOutlined\n          style={{ cursor: \"pointer\", fontSize: 16 }}\n          onClick={(e) => {\n            e.stopPropagation();\n            closeBox();\n          }}\n        />\n      </div>\n    ) : (\n      <div>\n        <SearchOutlined\n          style={{ cursor: \"pointer\", fontSize: 17, color: \"#1890ff\" }}\n        />\n        <Divider type=\"vertical\" style={{ fontSize: 16, background: \"#ddd\" }} />\n        <i\n          className=\"fas fa-directions\"\n          style={{ cursor: \"pointer\", color: \"#1890ff\", fontSize: 20 }}\n          onClick={() => props.dispatch(setBoxVisibleAction(\"navigation\"))}\n        ></i>\n      </div>\n    );\n\n  return (\n    <div>\n      {!isMobile && (\n        <div\n          className=\"search\"\n          ref={searchBoxRef}\n          onClick={() => clickSearch()}\n        >\n          <div className=\"search_box\">\n            <input\n              className=\"search_input\"\n              value={value}\n              onChange={onChange}\n              type=\"text\"\n              placeholder={t(\"search_placeholder\")}\n            />\n            {suffixWeb}\n          </div>\n\n          {isHistory &&\n            openHistory &&\n            openSearch &&\n            props.openHistory &&\n            history && (\n              <div className=\"search_history\">\n                {history.map((item, index) => (\n                  <div\n                    onClick={() => onTitleSelect(item)}\n                    key={index}\n                    style={{\n                      borderTop: index === 0 ? \"1px solid #ddd\" : \"none\",\n                    }}\n                  >\n                    <i className=\"fas fa-history\"></i>\n                    <span className=\"history_text\">\n                      <span className=\"title\">\n                        {item.structured_formatting.main_text + \" \"}\n                      </span>\n                      <span className=\"text\">\n                        {item.structured_formatting.secondary_text}\n                      </span>\n                    </span>\n                    <CloseOutlined\n                      className=\"hover-icon\"\n                      style={{ cursor: \"pointer\", fontSize: 20, color: \"gray\" }}\n                      onClick={(e) => {\n                        e.stopPropagation();\n                        deleteHistory(item);\n                      }}\n                    />\n                  </div>\n                ))}\n              </div>\n            )}\n          {!isHistory && props.openHistory && openSearch && (\n            <div className=\"search_history\">\n              {props.searchData != null\n                ? props.searchData.slice(0, 5).map((item, index) => (\n                  <div\n                    onClick={() => onTitleSelect(item)}\n                    key={index}\n                    style={{\n                      borderTop: index === 0 ? \"1px solid #ddd\" : \"none\",\n                    }}\n                  >\n                    <i className=\"fas fa-history\"></i>\n                    <span className=\"history_text\">\n                      <span className=\"title\">\n                        {item.structured_formatting.main_text + \" \"}\n                      </span>\n                      <span className=\"text\">\n                        {item.structured_formatting.secondary_text}\n                      </span>\n                    </span>\n                  </div>\n                ))\n                : null}\n              {(props.searchData != null ? props.searchData.length : 0) > 5\n                ? null\n                : places.slice(0, numberSearchResult).map((item, index) => (\n                  <div\n                    onClick={() => onTitleSelect(item)}\n                    key={index}\n                    style={{\n                      borderTop:\n                        index === 0 && numberSearchResult === 5\n                          ? \"1px solid #ddd\"\n                          : \"none\",\n                    }}\n                  >\n                    <i className=\"fas fa-location-arrow\"></i>\n                    <span className=\"history_text\">\n                      <span className=\"title\">\n                        {item.structured_formatting.main_text + \" \"}\n                      </span>\n                      <span className=\"text\">\n                        {item.structured_formatting.secondary_text}\n                      </span>\n                    </span>\n                  </div>\n                ))}\n            </div>\n          )}\n          {props.openHistory &&\n            openSearch &&\n            (data != null ? data.length : 0) > 5 && (\n              <div className=\"locations\" onClick={() => clickShowHistory()}>\n                {t(\"location_content_text_i18search\")}\n              </div>\n            )}\n        </div>\n      )}\n      {/* --------------------------------------Màn Mobile------------------------------------------------------------------------- */}\n\n      <div className=\"info--mobile\">\n        {isMobile && (\n          <div\n            className=\"search\"\n            ref={searchBoxRef}\n            onClick={() => clickSearch()}\n          >\n            <div className=\"search_box\">\n              {props.openHistory && (\n                <div\n                  onClick={(e) => {\n                    e.stopPropagation();\n                    closeSearch();\n                  }}\n                >\n                  <ArrowLeftOutlined id=\"info--arrow--back--mobile\" />\n                </div>\n              )}\n              <input\n                className=\"search_input\"\n                value={value}\n                onChange={onChange}\n                type=\"text\"\n                placeholder={t(\"search_placeholder\")}\n              />\n              {suffixMobile}\n            </div>\n\n            {/* Hiển thị lịch sử tìm kiếm */}\n            {isHistory &&\n              openHistory &&\n              openSearch &&\n              props.openHistory &&\n              history && (\n                <div className=\"search_history\">\n                  {data.slice(0, 10).reverse().map((item, index) => (\n                    <div\n                      onClick={() => onTitleSelect(item)}\n                      key={index}\n                      style={{\n                        borderTop: index === 0 ? \"1px solid #ddd\" : \"none\",\n                        padding: \"0px 15px\",\n                      }}\n                    >\n                      <div className=\"history_item\">\n                        <i className=\"fas fa-history\"></i>\n                        <span className=\"history_text\">\n                          <span className=\"title\">\n                            {item.structured_formatting.main_text}\n                          </span>\n                          <p className=\"text\">\n                            {item.structured_formatting.secondary_text}\n                          </p>\n                        </span>\n                      </div>\n                      <CloseOutlined\n                        className=\"hover-icon\"\n                        style={{\n                          cursor: \"pointer\",\n                          fontSize: 20,\n                          color: \"gray\",\n                        }}\n                        onClick={(e) => {\n                          e.stopPropagation();\n                          deleteHistory(item);\n                        }}\n                      />\n                    </div>\n                  ))}\n\n                </div>\n              )}\n\n            {/* Hiển thị gợi ý tìm kiếm */}\n            {!isHistory && props.openHistory && openSearch && (\n              <div className=\"search_history\">\n                {props.searchData?.slice(0, 10).map((item, index) => (\n                  <div\n                    onClick={() => onTitleSelect(item)}\n                    key={index}\n                    style={{\n                      borderTop: index === 0 ? \"1px solid #ddd\" : \"none\",\n                      padding: \"0px 15px\",\n                    }}\n                  >\n                    <div className=\"history_item\">\n                      <i className=\"fas fa-location-arrow\"></i>\n                      <span className=\"history_text\">\n                        <span className=\"title\">\n                          {item.structured_formatting.main_text + \" \"}\n                        </span>\n                        <p className=\"text\">\n                          {item.structured_formatting.secondary_text}\n                        </p>\n                      </span>\n                    </div>\n                  </div>\n                ))}\n                {places.slice(0, numberSearchResult).map((item, index) => (\n                  <div\n                    onClick={() => onTitleSelect(item)}\n                    key={index}\n                    style={{\n                      borderTop:\n                        index === 0 && numberSearchResult === 5\n                          ? \"1px solid #ddd\"\n                          : \"none\",\n                    }}\n                  >\n                    <div className=\"history_item\">\n                      <i className=\"fas fa-location-arrow\"></i>\n                      <span className=\"history_text\">\n                        <span className=\"title\">\n                          {item.structured_formatting.main_text + \" \"}\n                        </span>\n                        <p className=\"text\">\n                          {item.structured_formatting.secondary_text}\n                        </p>\n                      </span>\n                    </div>\n                  </div>\n                ))}\n              </div>\n            )}\n          </div>\n        )}\n      </div>\n    </div>\n  );\n};\nconst mapStateToProps = (state) => {\n  return {\n    places: state.searchReducer.places,\n    boxVisible: state.boxVisibleReducer.box_visible,\n    info_box_collapsed: state.boxVisibleReducer.info_box_collapsed,\n    latLngCenter: state.placeReducer.center,\n    openHistory: state.searchReducer.search_history,\n    searchData: state.searchReducer.search_data,\n  };\n};\n\nexport default connect(mapStateToProps)(SearchingBox);\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}