{"ast":null,"code":"function ownKeys(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }\nfunction _objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys(Object(t), !0).forEach(function (r) { _defineProperty(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }\nfunction _defineProperty(e, r, t) { return (r = _toPropertyKey(r)) in e ? Object.defineProperty(e, r, { value: t, enumerable: !0, configurable: !0, writable: !0 }) : e[r] = t, e; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == typeof i ? i : i + \"\"; }\nfunction _toPrimitive(t, r) { if (\"object\" != typeof t || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != typeof i) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\nimport * as place from \"../consts/place\";\nimport Router from 'next/router';\nconst initialState = {\n  current_place: null,\n  near_places: [],\n  center: {\n    latitude: 21.013722,\n    longitude: 105.798232\n  },\n  viewport: {\n    latitude: 21.013722,\n    longitude: 105.798232,\n    zoom: 12\n  },\n  my_location: null\n};\nexport default function searchReducer(state = initialState, action) {\n  switch (action.type) {\n    case place.GET_DETAIL_BY_ID_SUCCESS:\n      const pid = action.pid || action.data.place_id;\n      if (pid) {\n        Router.push({\n          pathname: `/`,\n          query: {\n            pid: `${pid}`\n          }\n        });\n      } else {\n        Router.push({\n          pathname: `/`,\n          query: {\n            location: `${action.data.geometry.location.lat},${action.data.geometry.location.lng}`\n          }\n        });\n      }\n      return _objectSpread(_objectSpread({}, state), {}, {\n        current_place: action.data,\n        near_places: action.nearPlaces\n      });\n    case place.RESET_LOCATION:\n      return _objectSpread(_objectSpread({}, state), {}, {\n        current_place: initialState.current_place,\n        near_places: initialState.near_places\n      });\n    case place.SET_MAP_VIEWPORT_REQUEST:\n      return _objectSpread(_objectSpread({}, state), {}, {\n        viewport: action.viewport\n      });\n    case place.SET_CENTER_LATLNG_REQUEST:\n      return _objectSpread(_objectSpread({}, state), {}, {\n        center: action.latLng\n      });\n    case place.GET_DETAIL_AROUND_PLACE_SUCCESS:\n      const pid_around = action.pid || action.data.place_id;\n      ;\n      if (pid_around) {\n        Router.push({\n          pathname: `/`,\n          query: {\n            pid_around\n          }\n        });\n      }\n      return _objectSpread(_objectSpread({}, state), {}, {\n        current_place: action.data,\n        near_places: action.nearPlaces\n      });\n    case place.SET_MY_LOCATION:\n      return _objectSpread(_objectSpread({}, state), {}, {\n        my_location: action.latLng\n      });\n    default:\n      return _objectSpread({}, state);\n  }\n}","map":{"version":3,"names":["place","Router","initialState","current_place","near_places","center","latitude","longitude","viewport","zoom","my_location","searchReducer","state","action","type","GET_DETAIL_BY_ID_SUCCESS","pid","data","place_id","push","pathname","query","location","geometry","lat","lng","_objectSpread","nearPlaces","RESET_LOCATION","SET_MAP_VIEWPORT_REQUEST","SET_CENTER_LATLNG_REQUEST","latLng","GET_DETAIL_AROUND_PLACE_SUCCESS","pid_around","SET_MY_LOCATION"],"sources":["D:/Workhome/ParkingLot/live-map/redux/reducers/placeReducer.js"],"sourcesContent":["import * as place from '../consts/place'\nimport Router from 'next/router';\n\nconst initialState = {\n  current_place: null,\n  near_places: [],\n  center: {\n    latitude: 21.013722,\n    longitude: 105.798232\n  },\n  viewport: {\n    latitude: 21.013722,\n    longitude: 105.798232,\n    zoom: 12\n  },\n  my_location: null\n}\n\nexport default function searchReducer(state = initialState, action) {\n  switch (action.type) {\n    case place.GET_DETAIL_BY_ID_SUCCESS:\n      const pid = action.pid || action.data.place_id;\n      if (pid) {\n        Router.push({\n          pathname: `/`,\n          query: { pid: `${pid}` }\n        });\n      } else {\n        Router.push({\n          pathname: `/`,\n          query: { location: `${action.data.geometry.location.lat},${action.data.geometry.location.lng}` }\n        });\n      }\n      return { ...state, current_place: action.data, near_places: action.nearPlaces }\n\n    case place.RESET_LOCATION:\n      return { ...state, current_place: initialState.current_place, near_places: initialState.near_places }\n\n    case place.SET_MAP_VIEWPORT_REQUEST:\n      return { ...state, viewport: action.viewport }\n\n    case place.SET_CENTER_LATLNG_REQUEST:\n      return { ...state, center: action.latLng }\n\n    case place.GET_DETAIL_AROUND_PLACE_SUCCESS:\n      const pid_around = action.pid || action.data.place_id;;\n      if (pid_around) {\n        Router.push({\n          pathname: `/`,\n          query: { pid_around }\n        });\n      }\n      return { ...state, current_place: action.data, near_places: action.nearPlaces }\n    \n    case place.SET_MY_LOCATION:\n      return { ...state, my_location: action.latLng }\n\n    default:\n      return { ...state }\n  }\n}"],"mappings":";;;;;AAAA,OAAO,KAAKA,KAAK;AACjB,OAAOC,MAAM,MAAM,aAAa;AAEhC,MAAMC,YAAY,GAAG;EACnBC,aAAa,EAAE,IAAI;EACnBC,WAAW,EAAE,EAAE;EACfC,MAAM,EAAE;IACNC,QAAQ,EAAE,SAAS;IACnBC,SAAS,EAAE;EACb,CAAC;EACDC,QAAQ,EAAE;IACRF,QAAQ,EAAE,SAAS;IACnBC,SAAS,EAAE,UAAU;IACrBE,IAAI,EAAE;EACR,CAAC;EACDC,WAAW,EAAE;AACf,CAAC;AAED,eAAe,SAASC,aAAaA,CAACC,KAAK,GAAGV,YAAY,EAAEW,MAAM,EAAE;EAClE,QAAQA,MAAM,CAACC,IAAI;IACjB,KAAKd,KAAK,CAACe,wBAAwB;MACjC,MAAMC,GAAG,GAAGH,MAAM,CAACG,GAAG,IAAIH,MAAM,CAACI,IAAI,CAACC,QAAQ;MAC9C,IAAIF,GAAG,EAAE;QACPf,MAAM,CAACkB,IAAI,CAAC;UACVC,QAAQ,EAAE,GAAG;UACbC,KAAK,EAAE;YAAEL,GAAG,EAAE,GAAGA,GAAG;UAAG;QACzB,CAAC,CAAC;MACJ,CAAC,MAAM;QACLf,MAAM,CAACkB,IAAI,CAAC;UACVC,QAAQ,EAAE,GAAG;UACbC,KAAK,EAAE;YAAEC,QAAQ,EAAE,GAAGT,MAAM,CAACI,IAAI,CAACM,QAAQ,CAACD,QAAQ,CAACE,GAAG,IAAIX,MAAM,CAACI,IAAI,CAACM,QAAQ,CAACD,QAAQ,CAACG,GAAG;UAAG;QACjG,CAAC,CAAC;MACJ;MACA,OAAAC,aAAA,CAAAA,aAAA,KAAYd,KAAK;QAAET,aAAa,EAAEU,MAAM,CAACI,IAAI;QAAEb,WAAW,EAAES,MAAM,CAACc;MAAU;IAE/E,KAAK3B,KAAK,CAAC4B,cAAc;MACvB,OAAAF,aAAA,CAAAA,aAAA,KAAYd,KAAK;QAAET,aAAa,EAAED,YAAY,CAACC,aAAa;QAAEC,WAAW,EAAEF,YAAY,CAACE;MAAW;IAErG,KAAKJ,KAAK,CAAC6B,wBAAwB;MACjC,OAAAH,aAAA,CAAAA,aAAA,KAAYd,KAAK;QAAEJ,QAAQ,EAAEK,MAAM,CAACL;MAAQ;IAE9C,KAAKR,KAAK,CAAC8B,yBAAyB;MAClC,OAAAJ,aAAA,CAAAA,aAAA,KAAYd,KAAK;QAAEP,MAAM,EAAEQ,MAAM,CAACkB;MAAM;IAE1C,KAAK/B,KAAK,CAACgC,+BAA+B;MACxC,MAAMC,UAAU,GAAGpB,MAAM,CAACG,GAAG,IAAIH,MAAM,CAACI,IAAI,CAACC,QAAQ;MAAC;MACtD,IAAIe,UAAU,EAAE;QACdhC,MAAM,CAACkB,IAAI,CAAC;UACVC,QAAQ,EAAE,GAAG;UACbC,KAAK,EAAE;YAAEY;UAAW;QACtB,CAAC,CAAC;MACJ;MACA,OAAAP,aAAA,CAAAA,aAAA,KAAYd,KAAK;QAAET,aAAa,EAAEU,MAAM,CAACI,IAAI;QAAEb,WAAW,EAAES,MAAM,CAACc;MAAU;IAE/E,KAAK3B,KAAK,CAACkC,eAAe;MACxB,OAAAR,aAAA,CAAAA,aAAA,KAAYd,KAAK;QAAEF,WAAW,EAAEG,MAAM,CAACkB;MAAM;IAE/C;MACE,OAAAL,aAAA,KAAYd,KAAK;EACrB;AACF","ignoreList":[]},"metadata":{},"sourceType":"module"}